{"ast":null,"code":"import _objectSpread from\"C:/Users/mdvec/OneDrive/Documents/YOOBEE-MSE/TERM2/MSE806 Intelligent Transportation Systems/ATIS/ATIS/atis-frontend-react/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useEffect,useState,useMemo,useCallback}from'react';import{MapContainer,TileLayer,Marker,Popup,useMapEvents,Circle,Polyline,useMap}from'react-leaflet';import'leaflet/dist/leaflet.css';import L from'leaflet';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const API='';// CRA proxy forwards to backend\n// Simple toast notification system\nconst toast=function(message){let type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'info';const toastEl=document.createElement('div');toastEl.textContent=message;toastEl.style.cssText=\"\\n    position: fixed;\\n    top: 20px;\\n    right: 20px;\\n    padding: 12px 20px;\\n    background: \".concat(type==='success'?'#10b981':type==='error'?'#ef4444':'#3b82f6',\";\\n    color: white;\\n    border-radius: 8px;\\n    box-shadow: 0 4px 12px rgba(0,0,0,0.3);\\n    z-index: 10000;\\n    font-size: 14px;\\n    font-weight: 600;\\n    animation: slideIn 0.3s ease-out;\\n  \");document.body.appendChild(toastEl);setTimeout(()=>{toastEl.style.animation='slideOut 0.3s ease-in';setTimeout(()=>document.body.removeChild(toastEl),300);},3000);};// Fix Leaflet default icon issue with webpack\ndelete L.Icon.Default.prototype._getIconUrl;L.Icon.Default.mergeOptions({iconRetinaUrl:'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png',iconUrl:'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png',shadowUrl:'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png'});// Custom map icons for different features\nconst mapIcons={origin:new L.Icon({iconUrl:'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png',shadowUrl:'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),destination:new L.Icon({iconUrl:'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png',shadowUrl:'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),stop:new L.Icon({iconUrl:'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png',shadowUrl:'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),trafficWarning:new L.Icon({iconUrl:'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-orange.png',shadowUrl:'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),trafficCritical:new L.Icon({iconUrl:'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-violet.png',shadowUrl:'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]})};const TRANSLATIONS={en:{name:'Advanced Traveler Information System',tagline:'Real-time, multimodal trip planning with intelligent route optimization.',translatorLabel:'Preferred language',offlineCta:'Save offline snapshot',shareLocation:'Share Location',copyCoords:'Copy Coordinates',locationCopied:'Location copied!',tripPlanning:'Trip planning & dynamic routing',realTimeSnapshot:'Real-time snapshot',weatherNow:'Weather now',alertsIncidents:'Alerts & incidents',noAlerts:'No active alerts right now.',findItineraries:'Find itineraries',exportPdf:'Export PDF',suggestAlt:'Suggest alternative',emergencyContacts:'Emergency Contacts'},es:{name:'InformaciÃ³n de Viaje Avanzada',tagline:'PlanificaciÃ³n de viajes multimodal con datos en tiempo real.',translatorLabel:'Idioma preferido',offlineCta:'Guardar informaciÃ³n sin conexiÃ³n',shareLocation:'Compartir UbicaciÃ³n',copyCoords:'Copiar Coordenadas',locationCopied:'Â¡UbicaciÃ³n copiada!',tripPlanning:'PlanificaciÃ³n y enrutamiento dinÃ¡mico',realTimeSnapshot:'InstantÃ¡nea en tiempo real',weatherNow:'Clima ahora',alertsIncidents:'Alertas e incidentes',noAlerts:'No hay alertas activas ahora.',findItineraries:'Buscar itinerarios',exportPdf:'Exportar PDF',suggestAlt:'Sugerir alternativa',emergencyContacts:'Contactos de Emergencia'},tl:{name:'Advanced na Impormasyon sa Paglalakbay',tagline:'Real-time na pagpaplano ng biyahe gamit ang matalinong mungkahi.',translatorLabel:'Gustong wika',offlineCta:'I-save ang offline na snapshot',shareLocation:'Ibahagi ang Lokasyon',copyCoords:'Kopyahin ang Coordinates',locationCopied:'Nakopya ang lokasyon!',tripPlanning:'Pagpaplano ng biyahe at dynamic na ruta',realTimeSnapshot:'Real-time na snapshot',weatherNow:'Panahon ngayon',alertsIncidents:'Mga alerto at insidente',noAlerts:'Walang aktibong alerto ngayon.',findItineraries:'Maghanap ng itinerary',exportPdf:'I-export ang PDF',suggestAlt:'Magmungkahi ng alternatibo',emergencyContacts:'Emergency na Contacts'},zh:{name:'é«˜çº§æ—…è¡Œä¿¡æ¯ç³»ç»Ÿ',tagline:'å®žæ—¶å¤šæ¨¡å¼è¡Œç¨‹è§„åˆ’ä¸Žæ™ºèƒ½å»ºè®®',translatorLabel:'é¦–é€‰è¯­è¨€',offlineCta:'ä¿å­˜ç¦»çº¿å¿«ç…§',shareLocation:'åˆ†äº«ä½ç½®',copyCoords:'å¤åˆ¶åæ ‡',locationCopied:'ä½ç½®å·²å¤åˆ¶ï¼',tripPlanning:'è¡Œç¨‹è§„åˆ’ä¸ŽåŠ¨æ€è·¯çº¿',realTimeSnapshot:'å®žæ—¶å¿«ç…§',weatherNow:'å½“å‰å¤©æ°”',alertsIncidents:'è­¦æŠ¥å’Œäº‹ä»¶',noAlerts:'ç›®å‰æ²¡æœ‰æ´»åŠ¨è­¦æŠ¥',findItineraries:'æŸ¥æ‰¾è¡Œç¨‹',exportPdf:'å¯¼å‡ºPDF',suggestAlt:'å»ºè®®æ›¿ä»£æ–¹æ¡ˆ',emergencyContacts:'ç´§æ€¥è”ç³»äºº'}};const CURRENCY_RATES={NZD:1,USD:0.59,EUR:0.55,AUD:0.91};function Chip(_ref){let{children}=_ref;return/*#__PURE__*/_jsx(\"span\",{className:\"chip\",style:{marginRight:6},children:children});}function FeatureCard(_ref2){let{title,description,children,icon}=_ref2;return/*#__PURE__*/_jsxs(\"section\",{className:\"card\",style:{marginBottom:32},children:[/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:24},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:16,marginBottom:10},children:[icon&&/*#__PURE__*/_jsx(\"div\",{style:{fontSize:42,filter:'drop-shadow(0 4px 8px rgba(0,0,0,0.2))'},children:icon}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:26,fontWeight:800,background:'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',WebkitBackgroundClip:'text',WebkitTextFillColor:'transparent',backgroundClip:'text',letterSpacing:'-0.5px'},children:title}),description&&/*#__PURE__*/_jsx(\"div\",{style:{color:'var(--muted)',fontSize:15,marginTop:6,lineHeight:1.6},children:description})]})]})}),/*#__PURE__*/_jsx(\"div\",{children:children})]});}function DraggableMarker(_ref3){let{position,setPosition,label}=_ref3;const[draggable,setDraggable]=useState(true);const eventHandlers={dragend(e){const marker=e.target;const pos=marker.getLatLng();setPosition([pos.lat,pos.lng]);}};return/*#__PURE__*/_jsx(Marker,{draggable:draggable,eventHandlers:eventHandlers,position:position,icon:mapIcons.origin,children:/*#__PURE__*/_jsx(Popup,{minWidth:90,children:/*#__PURE__*/_jsxs(\"span\",{onClick:()=>setDraggable(d=>!d),children:[label,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"small\",{style:{color:'#666'},children:draggable?'Draggable':'Click to make draggable'})]})})});}function MapClickHandler(_ref4){let{onMapClick}=_ref4;useMapEvents({click(e){if(onMapClick){onMapClick([e.latlng.lat,e.latlng.lng]);}}});return null;}// Component to handle \"My Location\" button\nfunction RecenterButton(_ref5){let{position}=_ref5;const map=useMap();const recenter=()=>{map.flyTo(position,15,{duration:1.5});};return/*#__PURE__*/_jsx(\"button\",{onClick:recenter,style:{position:'absolute',top:64,right:10,zIndex:1000,padding:'10px 16px',background:'white',border:'2px solid rgba(0,0,0,0.2)',borderRadius:8,cursor:'pointer',fontSize:14,fontWeight:600,boxShadow:'0 2px 8px rgba(0,0,0,0.15)',display:'flex',alignItems:'center',gap:6,transition:'all 0.2s',minWidth:200},onMouseEnter:e=>{e.currentTarget.style.background='#3b82f6';e.currentTarget.style.color='white';e.currentTarget.style.transform='translateY(-2px)';e.currentTarget.style.boxShadow='0 4px 16px rgba(59, 130, 246, 0.4)';},onMouseLeave:e=>{e.currentTarget.style.background='white';e.currentTarget.style.color='#333';e.currentTarget.style.transform='translateY(0)';e.currentTarget.style.boxShadow='0 2px 8px rgba(0,0,0,0.15)';},title:\"Center map on your origin location\",children:\"\\uD83D\\uDCCD My Location\"});}function MapLegend(_ref6){let{trafficCount}=_ref6;return/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',bottom:20,right:20,background:'rgba(255, 255, 255, 0.95)',padding:'12px 16px',borderRadius:12,boxShadow:'0 4px 12px rgba(0,0,0,0.15)',zIndex:1000,fontSize:13,backdropFilter:'blur(10px)',border:'1px solid rgba(0,0,0,0.1)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700,marginBottom:10,fontSize:14,color:'#1a1a1a'},children:\"\\uD83D\\uDDFA\\uFE0F Map Legend\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:8},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:8},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:20,height:20,borderRadius:'50%',background:'#28a745'}}),/*#__PURE__*/_jsx(\"span\",{style:{color:'#333'},children:\"Origin (drag to move)\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:8},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:20,height:20,borderRadius:'50%',background:'#dc3545'}}),/*#__PURE__*/_jsx(\"span\",{style:{color:'#333'},children:\"Destination (click map)\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:8},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:20,height:20,borderRadius:'50%',background:'#007bff'}}),/*#__PURE__*/_jsx(\"span\",{style:{color:'#333'},children:\"Transit Stops\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:8},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:20,height:20,borderRadius:'50%',background:'#fd7e14'}}),/*#__PURE__*/_jsx(\"span\",{style:{color:'#333'},children:\"Traffic Warning\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:8},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:20,height:20,borderRadius:'50%',background:'#6f42c1'}}),/*#__PURE__*/_jsx(\"span\",{style:{color:'#333'},children:\"Traffic Critical\"})]}),trafficCount>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:8,paddingTop:8,borderTop:'1px solid rgba(0,0,0,0.1)',fontSize:12,color:'#666',display:'flex',alignItems:'center',gap:6},children:[/*#__PURE__*/_jsx(\"span\",{style:{display:'inline-block',width:8,height:8,borderRadius:'50%',background:'#ff4444',animation:'pulse 2s infinite'}}),trafficCount,\" active traffic incident\",trafficCount!==1?'s':'']})]})]});}function InteractiveMap(_ref7){let{origin,setOrigin,dest,setDest,stops,trafficIncidents=[],lastUpdate,onRefresh}=_ref7;const[showTraffic,setShowTraffic]=useState(true);const[showRoute,setShowRoute]=useState(true);const[showStops,setShowStops]=useState(true);const[mapStyle,setMapStyle]=useState('standard');const[isRefreshing,setIsRefreshing]=useState(false);const center=origin;// Calculate route line between origin and destination\nconst routeLine=[origin,dest];// Map tile URLs for different styles\nconst mapTiles={standard:'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',transport:'https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png',dark:'https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png'};// Manual refresh handler with animation\nconst handleManualRefresh=async()=>{setIsRefreshing(true);await onRefresh();setTimeout(()=>setIsRefreshing(false),1000);};return/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative',height:'100%',width:'100%'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',top:10,left:'50%',transform:'translateX(-50%)',zIndex:1000,display:'flex',flexDirection:'column',alignItems:'center',gap:4},children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:'8px 16px',background:'linear-gradient(135deg, #10b981 0%, #059669 100%)',color:'white',border:'2px solid rgba(255,255,255,0.3)',borderRadius:20,fontSize:12,fontWeight:700,boxShadow:'0 4px 12px rgba(16, 185, 129, 0.4)',display:'flex',alignItems:'center',gap:8,animation:'pulse 2s ease-in-out infinite'},children:[/*#__PURE__*/_jsx(\"span\",{style:{width:8,height:8,borderRadius:'50%',background:'#fff',animation:'pulse 1.5s ease-in-out infinite',boxShadow:'0 0 8px rgba(255,255,255,0.8)'}}),\"\\uD83D\\uDD34 LIVE UPDATES\"]}),lastUpdate&&/*#__PURE__*/_jsxs(\"div\",{style:{padding:'4px 12px',background:'rgba(0,0,0,0.7)',color:'white',borderRadius:12,fontSize:10,fontWeight:600,backdropFilter:'blur(10px)'},children:[\"Updated \",lastUpdate]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',top:10,left:10,zIndex:1000,display:'flex',flexDirection:'column',gap:8},children:[/*#__PURE__*/_jsxs(\"button\",{onClick:handleManualRefresh,disabled:isRefreshing,style:{padding:'10px 16px',background:isRefreshing?'#10b981':'white',color:isRefreshing?'white':'#333',border:'2px solid rgba(0,0,0,0.2)',borderRadius:8,cursor:isRefreshing?'wait':'pointer',fontSize:14,fontWeight:600,boxShadow:'0 2px 8px rgba(0,0,0,0.15)',display:'flex',alignItems:'center',gap:6,transition:'all 0.3s',opacity:isRefreshing?0.8:1},title:\"Refresh traffic data now\",children:[/*#__PURE__*/_jsx(\"span\",{style:{display:'inline-block',animation:isRefreshing?'spin 1s linear infinite':'none'},children:\"\\uD83D\\uDD04\"}),isRefreshing?'Refreshing...':'Refresh']}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowTraffic(!showTraffic),style:{padding:'10px 16px',background:showTraffic?'#3b82f6':'white',color:showTraffic?'white':'#333',border:'2px solid rgba(0,0,0,0.2)',borderRadius:8,cursor:'pointer',fontSize:14,fontWeight:600,boxShadow:'0 2px 8px rgba(0,0,0,0.15)',display:'flex',alignItems:'center',gap:6,transition:'all 0.2s'},title:showTraffic?'Hide traffic incidents':'Show traffic incidents',children:[\"\\uD83D\\uDEA6 Traffic \",showTraffic?'(On)':'(Off)']}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowRoute(!showRoute),style:{padding:'10px 16px',background:showRoute?'#3b82f6':'white',color:showRoute?'white':'#333',border:'2px solid rgba(0,0,0,0.2)',borderRadius:8,cursor:'pointer',fontSize:14,fontWeight:600,boxShadow:'0 2px 8px rgba(0,0,0,0.15)',display:'flex',alignItems:'center',gap:6,transition:'all 0.2s'},title:showRoute?'Hide route line':'Show route line',children:[\"\\uD83D\\uDEE3\\uFE0F Route \",showRoute?'(On)':'(Off)']}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowStops(!showStops),style:{padding:'10px 16px',background:showStops?'#3b82f6':'white',color:showStops?'white':'#333',border:'2px solid rgba(0,0,0,0.2)',borderRadius:8,cursor:'pointer',fontSize:14,fontWeight:600,boxShadow:'0 2px 8px rgba(0,0,0,0.15)',display:'flex',alignItems:'center',gap:6,transition:'all 0.2s'},title:showStops?'Hide transit stops':'Show transit stops',children:[\"\\uD83D\\uDE8F Stops \",showStops?'(On)':'(Off)']})]}),/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',top:10,right:10,zIndex:1000,minWidth:200},children:/*#__PURE__*/_jsxs(\"select\",{value:mapStyle,onChange:e=>setMapStyle(e.target.value),style:{width:'100%',padding:'10px 16px',background:'white',color:'#333',border:'2px solid rgba(0,0,0,0.2)',borderRadius:8,cursor:'pointer',fontSize:14,fontWeight:600,boxShadow:'0 2px 8px rgba(0,0,0,0.15)',outline:'none',appearance:'none',WebkitAppearance:'none',MozAppearance:'none',backgroundImage:'url(\"data:image/svg+xml;charset=UTF-8,%3csvg xmlns=\\'http://www.w3.org/2000/svg\\' viewBox=\\'0 0 24 24\\' fill=\\'none\\' stroke=\\'currentColor\\' stroke-width=\\'2\\' stroke-linecap=\\'round\\' stroke-linejoin=\\'round\\'%3e%3cpolyline points=\\'6 9 12 15 18 9\\'%3e%3c/polyline%3e%3c/svg%3e\")',backgroundRepeat:'no-repeat',backgroundPosition:'right 12px center',backgroundSize:'16px',paddingRight:'36px',display:'flex',alignItems:'center',gap:8,transition:'all 0.2s'},onMouseEnter:e=>{e.currentTarget.style.borderColor='#3b82f6';e.currentTarget.style.boxShadow='0 4px 12px rgba(59, 130, 246, 0.3)';},onMouseLeave:e=>{e.currentTarget.style.borderColor='rgba(0,0,0,0.2)';e.currentTarget.style.boxShadow='0 2px 8px rgba(0,0,0,0.15)';},title:\"Change map style\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"standard\",children:\"\\uD83D\\uDDFA\\uFE0F Standard Map\"}),/*#__PURE__*/_jsx(\"option\",{value:\"transport\",children:\"\\uD83D\\uDE8C Transport Map\"}),/*#__PURE__*/_jsx(\"option\",{value:\"dark\",children:\"\\uD83C\\uDF19 Dark Mode\"})]})}),/*#__PURE__*/_jsxs(MapContainer,{center:center,zoom:13,style:{height:'100%',width:'100%',borderRadius:12},children:[/*#__PURE__*/_jsx(TileLayer,{attribution:\"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a>\",url:mapTiles[mapStyle]},mapStyle),showRoute&&/*#__PURE__*/_jsx(Polyline,{positions:routeLine,pathOptions:{color:'#3b82f6',weight:4,opacity:0.7,dashArray:'10, 10',lineCap:'round',lineJoin:'round'},children:/*#__PURE__*/_jsxs(Popup,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uD83D\\uDCCD Planned Route\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"small\",{children:\"From origin to destination\"})]})}),/*#__PURE__*/_jsx(DraggableMarker,{position:origin,setPosition:setOrigin,label:\"Origin (drag me)\"}),/*#__PURE__*/_jsx(RecenterButton,{position:origin}),/*#__PURE__*/_jsx(Marker,{position:dest,icon:mapIcons.destination,children:/*#__PURE__*/_jsxs(Popup,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uD83C\\uDFAF Destination\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"small\",{children:[dest[0].toFixed(5),\", \",dest[1].toFixed(5)]})]})}),showStops&&stops.slice(0,10).map(stop=>/*#__PURE__*/_jsx(Marker,{position:[stop.lat,stop.lng],icon:mapIcons.stop,children:/*#__PURE__*/_jsxs(Popup,{children:[/*#__PURE__*/_jsxs(\"strong\",{children:[\"\\uD83D\\uDE8F \",stop.name]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"small\",{children:[\"\\uD83D\\uDCCF \",stop.distance_m,\"m away\"]})]})},stop.stop_id)),showTraffic&&trafficIncidents.filter(incident=>{var _incident$location;// Only show incidents with valid coordinates\nconst hasCoords=((_incident$location=incident.location)===null||_incident$location===void 0?void 0:_incident$location.coordinates)||incident.lat!=null&&incident.lng!=null;return hasCoords;}).map((incident,idx)=>{var _incident$location2;// Determine severity and icon\nconst isCritical=incident.severity==='critical'||incident.severity==='major'||incident.type==='accident'||incident.type==='closure';const icon=isCritical?mapIcons.trafficCritical:mapIcons.trafficWarning;// Get position - guaranteed to be valid now\nconst position=((_incident$location2=incident.location)===null||_incident$location2===void 0?void 0:_incident$location2.coordinates)||[incident.lat,incident.lng];// Validate position is an array with 2 numbers\nif(!Array.isArray(position)||position.length!==2||typeof position[0]!=='number'||typeof position[1]!=='number'){console.warn('Invalid traffic incident position:',incident);return null;}// Format time\nconst timeStr=incident.start_time?new Date(incident.start_time).toLocaleTimeString():'Now';return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Marker,{position:position,icon:icon,children:/*#__PURE__*/_jsx(Popup,{maxWidth:250,children:/*#__PURE__*/_jsxs(\"div\",{style:{padding:'4px 0'},children:[/*#__PURE__*/_jsxs(\"strong\",{style:{color:isCritical?'#6f42c1':'#fd7e14',fontSize:14},children:[isCritical?'ðŸš¨':'âš ï¸',\" \",incident.title||incident.type||'Traffic Incident']}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:8,fontSize:13,lineHeight:1.5},children:incident.description||incident.summary||'Traffic disruption reported'}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:8,paddingTop:8,borderTop:'1px solid #eee',fontSize:11,color:'#666'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Severity:\"}),\" \",incident.severity||'moderate']}),incident.affected_routes&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Routes:\"}),\" \",incident.affected_routes]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Time:\"}),\" \",timeStr]})]})]})})}),isCritical&&/*#__PURE__*/_jsx(Circle,{center:position,radius:500,pathOptions:{color:'#6f42c1',fillColor:'#6f42c1',fillOpacity:0.1,weight:2,dashArray:'5, 5'}})]},\"traffic-\".concat(idx));}).filter(Boolean),/*#__PURE__*/_jsx(MapClickHandler,{onMapClick:setDest})]}),/*#__PURE__*/_jsx(MapLegend,{trafficCount:showTraffic?trafficIncidents.length:0})]});}function AuthPanel(_ref8){let{token,setToken,username,setUsername}=_ref8;const[mode,setMode]=useState('login');const[user,setUser]=useState('');const[pass,setPass]=useState('');const[email,setEmail]=useState('');const[showPass,setShowPass]=useState(false);const[error,setError]=useState('');const[loading,setLoading]=useState(false);const[strength,setStrength]=useState(0);const[rememberMe,setRememberMe]=useState(true);const[showAuthModal,setShowAuthModal]=useState(false);useEffect(()=>{const t=localStorage.getItem('atis_token')||sessionStorage.getItem('atis_token');const u=localStorage.getItem('atis_user')||sessionStorage.getItem('atis_user');if(t&&u){setToken(t);setUsername(u);}},[setToken,setUsername]);useEffect(()=>{if(mode==='register'&&pass){let score=0;if(pass.length>=8)score++;if(pass.length>=12)score++;if(/[a-z]/.test(pass)&&/[A-Z]/.test(pass))score++;if(/[0-9]/.test(pass))score++;if(/[^a-zA-Z0-9]/.test(pass))score++;setStrength(score);}},[pass,mode]);const validateEmail=email=>{return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email);};const submit=async e=>{e===null||e===void 0?void 0:e.preventDefault();setError('');// Validation\nif(!user||user.length<3){setError('Username must be at least 3 characters');return;}if(!pass||pass.length<6){setError('Password must be at least 6 characters');return;}if(mode==='register'){if(!email||!validateEmail(email)){setError('Please enter a valid email address');return;}if(strength<3){setError('Password is too weak. Use mix of letters, numbers, and symbols.');return;}}setLoading(true);try{const payload=mode==='register'?{username:user,password:pass,email:email}:{username:user,password:pass};const r=await fetch(\"\".concat(API,\"/auth/\").concat(mode),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});const d=await r.json();if(!r.ok)throw new Error(d.detail||'Authentication failed');setToken(d.token);setUsername(d.username);// Store based on remember me preference\nconst storage=rememberMe?localStorage:sessionStorage;storage.setItem('atis_token',d.token);storage.setItem('atis_user',d.username);storage.setItem('atis_login_time',Date.now().toString());setUser('');setPass('');setEmail('');setShowAuthModal(false);}catch(e){setError(e.message);}finally{setLoading(false);}};const logout=()=>{setToken(null);setUsername(null);setIsAuthenticated(false);localStorage.removeItem('atis_token');localStorage.removeItem('atis_user');localStorage.removeItem('atis_login_time');sessionStorage.removeItem('atis_token');sessionStorage.removeItem('atis_user');sessionStorage.removeItem('atis_login_time');toast('ðŸ‘‹ Logged out');};const getStrengthColor=()=>{if(strength<=2)return'#ef4444';if(strength<=3)return'#f59e0b';return'#10b981';};const getStrengthText=()=>{if(strength<=2)return'Weak';if(strength<=3)return'Medium';return'Strong';};if(token){return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:16},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pill\",style:{display:'flex',alignItems:'center',gap:10},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:32,height:32,borderRadius:'50%',background:'var(--gradient-1)',display:'grid',placeItems:'center',color:'white',fontWeight:700,fontSize:14},children:username[0].toUpperCase()}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:13,fontWeight:600},children:username}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,color:'var(--muted)'},children:\"Verified\"})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:logout,children:\"\\uD83D\\uDEAA Logout\"})]});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>setShowAuthModal(true),children:\"\\uD83D\\uDD10 Sign In\"}),showAuthModal&&/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',inset:0,background:'rgba(0,0,0,0.7)',backdropFilter:'blur(8px)',display:'grid',placeItems:'center',zIndex:9999,padding:20},onClick:()=>setShowAuthModal(false),children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'var(--glass-bg)',backdropFilter:'blur(30px)',border:'1px solid var(--glass-border)',borderRadius:28,padding:40,maxWidth:480,width:'100%',boxShadow:'var(--card-shadow)'},onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',marginBottom:32},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:32,marginBottom:12},children:\"\\uD83D\\uDD10\"}),/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:28,fontWeight:800,marginBottom:8,background:'var(--gradient-1)',WebkitBackgroundClip:'text',WebkitTextFillColor:'transparent'},children:mode==='login'?'Welcome Back':'Create Account'}),/*#__PURE__*/_jsx(\"p\",{style:{color:'var(--muted)',fontSize:14},children:mode==='login'?'Sign in to access your personalized travel experience':'Join ATIS for smart route planning'})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:submit,style:{display:'flex',flexDirection:'column',gap:20},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:8,fontSize:13,fontWeight:600,color:'var(--muted)'},children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter username\",value:user,onChange:e=>setUser(e.target.value),style:{width:'100%'},autoComplete:\"username\",disabled:loading})]}),mode==='register'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:8,fontSize:13,fontWeight:600,color:'var(--muted)'},children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"your.email@example.com\",value:email,onChange:e=>setEmail(e.target.value),style:{width:'100%'},autoComplete:\"email\",disabled:loading})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:8,fontSize:13,fontWeight:600,color:'var(--muted)'},children:\"Password\"}),/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"input\",{type:showPass?'text':'password',placeholder:\"Enter password\",value:pass,onChange:e=>setPass(e.target.value),style:{width:'100%',paddingRight:45},autoComplete:mode==='login'?'current-password':'new-password',disabled:loading}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowPass(!showPass),style:{position:'absolute',right:12,top:'50%',transform:'translateY(-50%)',background:'none',border:'none',cursor:'pointer',fontSize:18},children:showPass?'ðŸ‘ï¸':'ðŸ‘ï¸â€ðŸ—¨ï¸'})]}),mode==='register'&&pass&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:8},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:4},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:12,color:'var(--muted)'},children:\"Password strength:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:12,fontWeight:600,color:getStrengthColor()},children:getStrengthText()})]}),/*#__PURE__*/_jsx(\"div\",{style:{height:4,background:'rgba(255,255,255,0.1)',borderRadius:2,overflow:'hidden'},children:/*#__PURE__*/_jsx(\"div\",{style:{height:'100%',width:\"\".concat(strength/5*100,\"%\"),background:getStrengthColor(),transition:'all 0.3s'}})})]})]}),mode==='login'&&/*#__PURE__*/_jsxs(\"label\",{style:{display:'flex',alignItems:'center',gap:8,cursor:'pointer',userSelect:'none'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:rememberMe,onChange:e=>setRememberMe(e.target.checked),disabled:loading}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:13,color:'var(--muted)'},children:\"Remember me for 30 days\"})]}),error&&/*#__PURE__*/_jsxs(\"div\",{style:{padding:12,background:'rgba(239, 68, 68, 0.1)',border:'1px solid var(--danger)',borderRadius:12,color:'var(--danger)',fontSize:13,textAlign:'center'},children:[\"\\u26A0\\uFE0F \",error]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",style:{width:'100%',padding:16,fontSize:16},disabled:loading,children:loading?'â³ Processing...':mode==='login'?'ðŸš€ Sign In':'âœ¨ Create Account'}),/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center'},children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setMode(mode==='login'?'register':'login');setError('');},style:{background:'none',border:'none',color:'var(--primary)',cursor:'pointer',fontSize:14,fontWeight:600},disabled:loading,children:mode==='login'?\"Don't have an account? Sign up\":'Already have an account? Sign in'})})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAuthModal(false),style:{position:'absolute',top:20,right:20,background:'var(--glass-bg)',border:'1px solid var(--glass-border)',borderRadius:'50%',width:36,height:36,display:'grid',placeItems:'center',cursor:'pointer',fontSize:18},children:\"\\u2715\"})]})})]});}function LoginPage(_ref9){let{onLogin,isVerifying}=_ref9;const[mode,setMode]=useState('login');const[user,setUser]=useState('');const[pass,setPass]=useState('');const[email,setEmail]=useState('');const[showPass,setShowPass]=useState(false);const[error,setError]=useState('');const[loading,setLoading]=useState(false);const[strength,setStrength]=useState(0);useEffect(()=>{if(mode==='register'&&pass){let score=0;if(pass.length>=8)score++;if(pass.length>=12)score++;if(/[a-z]/.test(pass)&&/[A-Z]/.test(pass))score++;if(/[0-9]/.test(pass))score++;if(/[^a-zA-Z0-9]/.test(pass))score++;setStrength(score);}},[pass,mode]);const validateEmail=email=>{return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email);};const submit=async e=>{e===null||e===void 0?void 0:e.preventDefault();setError('');if(!user||user.length<3){setError('Username must be at least 3 characters');return;}if(!pass||pass.length<6){setError('Password must be at least 6 characters');return;}if(mode==='register'){if(!email||!validateEmail(email)){setError('Please enter a valid email address');return;}if(strength<3){setError('Password is too weak. Use mix of letters, numbers, and symbols.');return;}}setLoading(true);try{const payload=mode==='register'?{username:user,password:pass,email:email}:{username:user,password:pass};const r=await fetch(\"\".concat(API,\"/auth/\").concat(mode),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});const d=await r.json();if(!r.ok)throw new Error(d.detail||'Authentication failed');localStorage.setItem('atis_token',d.token);localStorage.setItem('atis_user',d.username);localStorage.setItem('atis_login_time',Date.now().toString());onLogin(d.token,d.username);}catch(e){setError(e.message);}finally{setLoading(false);}};const getStrengthColor=()=>{if(strength<=2)return'#ef4444';if(strength<=3)return'#f59e0b';return'#10b981';};const getStrengthText=()=>{if(strength<=2)return'Weak';if(strength<=3)return'Medium';return'Strong';};return/*#__PURE__*/_jsxs(\"div\",{style:{minHeight:'100vh',display:'flex',alignItems:'center',justifyContent:'center',padding:20,position:'relative',overflow:'hidden',background:'#0a0e27'},children:[/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',top:'-10%',left:'-5%',width:'500px',height:'500px',background:'radial-gradient(circle, rgba(102, 126, 234, 0.3) 0%, transparent 70%)',filter:'blur(80px)',animation:'float 8s ease-in-out infinite'}}),/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',bottom:'-10%',right:'-5%',width:'500px',height:'500px',background:'radial-gradient(circle, rgba(139, 92, 246, 0.3) 0%, transparent 70%)',filter:'blur(80px)',animation:'float 10s ease-in-out infinite reverse'}}),/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:480,width:'100%',position:'relative',zIndex:1},children:[/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',marginBottom:40},children:[/*#__PURE__*/_jsx(\"img\",{src:\"/atis-logo.jpg\",alt:\"ATIS Logo\",style:{width:120,height:120,margin:'0 auto 24px',filter:'drop-shadow(0 8px 24px rgba(0,0,0,0.3))',objectFit:'contain',borderRadius:24},onError:e=>{e.target.style.display='none';}}),/*#__PURE__*/_jsx(\"h1\",{style:{fontSize:42,fontWeight:900,marginBottom:12,background:'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',WebkitBackgroundClip:'text',WebkitTextFillColor:'transparent',letterSpacing:'-1px'},children:\"Welcome to ATIS\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:16,color:'var(--muted)',marginBottom:8},children:\"Advanced Traveler Information System\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:14,color:'var(--muted)'},children:isVerifying?'ðŸ”„ Verifying session...':'Intelligent route planning for smarter journeys'})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'var(--glass-bg)',backdropFilter:'blur(30px)',border:'1px solid var(--glass-border)',borderRadius:28,padding:40,boxShadow:'var(--card-shadow)',opacity:isVerifying?0.6:1,pointerEvents:isVerifying?'none':'auto',transition:'opacity 0.2s'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',marginBottom:32},children:[/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:26,fontWeight:800,marginBottom:8},children:isVerifying?'â³ Loading...':mode==='login'?'ðŸ” Sign In':'âœ¨ Create Account'}),/*#__PURE__*/_jsx(\"p\",{style:{color:'var(--muted)',fontSize:14},children:isVerifying?'Please wait...':mode==='login'?'Access your personalized travel experience':'Join for smart route planning'})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:submit,style:{display:'flex',flexDirection:'column',gap:20},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:8,fontSize:13,fontWeight:600,color:'var(--muted)'},children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter username\",value:user,onChange:e=>setUser(e.target.value),style:{width:'100%'},autoComplete:\"username\",disabled:loading,required:true})]}),mode==='register'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:8,fontSize:13,fontWeight:600,color:'var(--muted)'},children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"your.email@example.com\",value:email,onChange:e=>setEmail(e.target.value),style:{width:'100%'},autoComplete:\"email\",disabled:loading,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:8,fontSize:13,fontWeight:600,color:'var(--muted)'},children:\"Password\"}),/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"input\",{type:showPass?'text':'password',placeholder:\"Enter password\",value:pass,onChange:e=>setPass(e.target.value),style:{width:'100%',paddingRight:45},autoComplete:mode==='login'?'current-password':'new-password',disabled:loading,required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowPass(!showPass),style:{position:'absolute',right:12,top:'50%',transform:'translateY(-50%)',background:'none',border:'none',cursor:'pointer',fontSize:18},children:showPass?'ðŸ‘ï¸':'ðŸ‘ï¸â€ðŸ—¨ï¸'})]}),mode==='register'&&pass&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:8},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:4},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:12,color:'var(--muted)'},children:\"Password strength:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:12,fontWeight:600,color:getStrengthColor()},children:getStrengthText()})]}),/*#__PURE__*/_jsx(\"div\",{style:{height:4,background:'rgba(255,255,255,0.1)',borderRadius:2,overflow:'hidden'},children:/*#__PURE__*/_jsx(\"div\",{style:{height:'100%',width:\"\".concat(strength/5*100,\"%\"),background:getStrengthColor(),transition:'all 0.3s'}})})]})]}),error&&/*#__PURE__*/_jsxs(\"div\",{style:{padding:12,background:'rgba(239, 68, 68, 0.1)',border:'1px solid var(--danger)',borderRadius:12,color:'var(--danger)',fontSize:13,textAlign:'center'},children:[\"\\u26A0\\uFE0F \",error]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",style:{width:'100%',padding:16,fontSize:16},disabled:loading,children:loading?'â³ Processing...':mode==='login'?'ðŸš€ Sign In':'âœ¨ Create Account'}),/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center'},children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setMode(mode==='login'?'register':'login');setError('');},style:{background:'none',border:'none',color:'var(--primary)',cursor:'pointer',fontSize:14,fontWeight:600},disabled:loading,children:mode==='login'?\"Don't have an account? Sign up\":'Already have an account? Sign in'})})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:32,textAlign:'center',color:'var(--muted)',fontSize:13},children:[/*#__PURE__*/_jsx(\"p\",{style:{marginBottom:12},children:\"\\u2728 Real-time traffic & transit data\"}),/*#__PURE__*/_jsx(\"p\",{style:{marginBottom:12},children:\"\\uD83D\\uDDFA\\uFE0F Interactive route planning\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\uD83C\\uDF0D Multi-language support\"})]})]}),/*#__PURE__*/_jsx(\"style\",{children:\"\\n        @keyframes float {\\n          0%, 100% { transform: translateY(0) scale(1); }\\n          50% { transform: translateY(-20px) scale(1.05); }\\n        }\\n      \"})]});}export default function App(){var _analyticsData$total_,_analyticsData$avg_mc,_analyticsData$avg_du,_analyticsData$avg_tr,_analyticsData$total_2,_analyticsData$total_3,_ref10,_analyticsData$system,_analyticsData$avg_mc2,_analyticsData$total_4,_analyticsData$total_5,_ref11,_analyticsData$total_6;// ALL STATE HOOKS MUST BE DECLARED FIRST\nconst[token,setToken]=useState(()=>localStorage.getItem('atis_token'));const[username,setUsername]=useState(()=>localStorage.getItem('atis_user'));// Initialize as true if token exists to prevent flash during verification\nconst[isAuthenticated,setIsAuthenticated]=useState(()=>{return!!(localStorage.getItem('atis_token')&&localStorage.getItem('atis_user'));});const[isVerifying,setIsVerifying]=useState(true);const[origin,setOrigin]=useState([-36.8485,174.7633]);const[dest,setDest]=useState([-36.8443,174.7676]);const[stops,setStops]=useState([]);const[itins,setItins]=useState([]);const[banner,setBanner]=useState('');const[selectedStop,setSelectedStop]=useState(null);const[departures,setDepartures]=useState([]);const[alerts,setAlerts]=useState([]);const[trafficIncidents,setTrafficIncidents]=useState([]);const[lastTrafficUpdate,setLastTrafficUpdate]=useState(null);const[alts,setAlts]=useState({});const[view,setView]=useState('home');const[expandedItin,setExpandedItin]=useState(null);const[modes,setModes]=useState(['bus','train','walk']);const[optimize,setOptimize]=useState('fastest');const[maxWalkKm,setMaxWalkKm]=useState(1.2);const[avoidStairs,setAvoidStairs]=useState(false);const[bikeOk,setBikeOk]=useState(false);const[whenType,setWhenType]=useState('depart');const[whenValue,setWhenValue]=useState('now');const[weather,setWeather]=useState(null);const[safetyContacts,setSafetyContacts]=useState([]);const[uiLang,setUiLang]=useState('en');const[currency,setCurrency]=useState('NZD');const[amount,setAmount]=useState(50);const[reviews,setReviews]=useState([]);const[reviewLoc,setReviewLoc]=useState('');const[reviewRating,setReviewRating]=useState(5);const[reviewComment,setReviewComment]=useState('');// Location search states\nconst[originSearch,setOriginSearch]=useState('');const[destSearch,setDestSearch]=useState('');const[originName,setOriginName]=useState('Auckland CBD');const[destName,setDestName]=useState('Auckland Airport');const[searchResults,setSearchResults]=useState([]);const[searchingFor,setSearchingFor]=useState(null);// Assessment features - Environmental & MCDA\nconst[mcdaProfile,setMcdaProfile]=useState('balanced');const[showMcdaBreakdown,setShowMcdaBreakdown]=useState({});const[analyticsData,setAnalyticsData]=useState(null);const text=TRANSLATIONS[uiLang]||TRANSLATIONS.en;const convertedAmount=Number((amount*(CURRENCY_RATES[currency]||1)).toFixed(2));// Check for existing session on mount and verify with backend\nuseEffect(()=>{let mounted=true;const verifySession=async()=>{const savedToken=localStorage.getItem('atis_token');const savedUser=localStorage.getItem('atis_user');if(savedToken&&savedUser){try{// Verify token with backend\nconst response=await fetch(\"\".concat(API,\"/auth/verify\"),{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(savedToken)}});if(!mounted)return;if(response.ok){// Token is valid - keep authenticated state\nsetToken(savedToken);setUsername(savedUser);// isAuthenticated already true from initialization\n}else{// Token is invalid, clear storage and set both states together\nlocalStorage.removeItem('atis_token');localStorage.removeItem('atis_user');localStorage.removeItem('atis_login_time');setToken(null);setUsername(null);setIsAuthenticated(false);}}catch(error){// Network error or backend down, clear session\nif(!mounted)return;console.error('Session verification failed:',error);localStorage.removeItem('atis_token');localStorage.removeItem('atis_user');localStorage.removeItem('atis_login_time');setToken(null);setUsername(null);setIsAuthenticated(false);}// Set verification complete AFTER authentication state is finalized\nif(mounted){// Use setTimeout to ensure state updates are batched\nsetTimeout(()=>{console.log('[ATIS] Verification complete, ready to show content');setIsVerifying(false);// Tell the page React is ready - show content NOW\nif(window.__atisReady){window.__atisReady();}},100);// Small delay to ensure DOM is painted\n}}else{// No saved token, set both states\nif(mounted){console.log('[ATIS] No token found, showing login');setIsAuthenticated(false);// Use setTimeout to ensure state updates are batched\nsetTimeout(()=>{setIsVerifying(false);// Tell the page React is ready - show content NOW\nif(window.__atisReady){window.__atisReady();}},100);// Small delay to ensure DOM is painted\n}}};verifySession();return()=>{mounted=false;};},[]);// Load initial data once (only after authentication is verified)\nuseEffect(()=>{// Don't load data until verification is complete and user is authenticated\nif(isVerifying||!isAuthenticated)return;fetch(\"\".concat(API,\"/stops/nearby?lat=\").concat(origin[0],\"&lng=\").concat(origin[1],\"&radius=900\")).then(r=>r.json()).then(d=>setStops(d.stops||[])).catch(()=>{});fetch(\"\".concat(API,\"/alerts\")).then(r=>r.json()).then(d=>{setAlerts([...(d.alerts||[]),...(d.traffic||[])]);setTrafficIncidents(d.traffic||[]);setLastTrafficUpdate(Date.now());}).catch(()=>{});fetch(\"\".concat(API,\"/weather/point?lat=\").concat(origin[0],\"&lng=\").concat(origin[1])).then(r=>r.json()).then(d=>setWeather(d.forecast||null)).catch(()=>{});fetch(\"\".concat(API,\"/safety/contacts\")).then(r=>r.json()).then(d=>setSafetyContacts(d.contacts||[])).catch(()=>{});fetch(\"\".concat(API,\"/reviews\")).then(r=>r.json()).then(d=>setReviews(d.reviews||[])).catch(()=>{});},[isAuthenticated,isVerifying]);// Update when origin changes (debounced to prevent excessive re-renders)\nuseEffect(()=>{// Only update if authenticated\nif(!isAuthenticated)return;const timeoutId=setTimeout(()=>{fetch(\"\".concat(API,\"/stops/nearby?lat=\").concat(origin[0],\"&lng=\").concat(origin[1],\"&radius=900\")).then(r=>r.json()).then(d=>setStops(d.stops||[])).catch(()=>{});fetch(\"\".concat(API,\"/weather/point?lat=\").concat(origin[0],\"&lng=\").concat(origin[1])).then(r=>r.json()).then(d=>setWeather(d.forecast||null)).catch(()=>{});},300);return()=>clearTimeout(timeoutId);},[origin[0],origin[1],isAuthenticated]);// Helper function to get relative time string\nconst getRelativeTime=timestamp=>{const seconds=Math.floor((Date.now()-timestamp)/1000);if(seconds<10)return'just now';if(seconds<60)return\"\".concat(seconds,\"s ago\");const minutes=Math.floor(seconds/60);if(minutes<60)return\"\".concat(minutes,\"m ago\");const hours=Math.floor(minutes/60);return\"\".concat(hours,\"h ago\");};// Manual refresh function that can be called from the map\nconst refreshTrafficData=async()=>{try{const r=await fetch(\"\".concat(API,\"/alerts\"));const d=await r.json();setAlerts([...(d.alerts||[]),...(d.traffic||[])]);setTrafficIncidents(d.traffic||[]);const now=Date.now();setLastTrafficUpdate(now);toast('ðŸ”„ Traffic data updated!','success');return true;}catch(err){console.error('Failed to refresh traffic:',err);toast('âš ï¸ Failed to update traffic data','error');return false;}};// Auto-refresh traffic data every 30 seconds for real-time updates\nuseEffect(()=>{if(!isAuthenticated)return;const refreshTraffic=()=>{fetch(\"\".concat(API,\"/alerts\")).then(r=>r.json()).then(d=>{setAlerts([...(d.alerts||[]),...(d.traffic||[])]);setTrafficIncidents(d.traffic||[]);const now=Date.now();setLastTrafficUpdate(now);}).catch(()=>{});};// Set up interval for auto-refresh (30 seconds)\nconst intervalId=setInterval(refreshTraffic,30000);// Clean up interval on unmount\nreturn()=>clearInterval(intervalId);},[isAuthenticated]);// Update relative time display every 10 seconds\nconst[,forceUpdate]=useState();useEffect(()=>{const timer=setInterval(()=>forceUpdate({}),10000);return()=>clearInterval(timer);},[]);const viewDepartures=async stop=>{setSelectedStop(stop);const r=await fetch(\"\".concat(API,\"/departures?stop_id=\").concat(stop.stop_id));const data=await r.json();setDepartures(data.departures||[]);};const plan=async()=>{var _d$context;const payload={origin,destination:dest,depart_at:whenType==='depart'?whenValue:'now',arrive_by:whenType==='arrive'?whenValue:null,optimize,max_walk_km:parseFloat(maxWalkKm),avoid_stairs:avoidStairs,bike_ok:bikeOk,modes};const r=await fetch(\"\".concat(API,\"/plan\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});const d=await r.json();setItins(d.itineraries||[]);setBanner(((_d$context=d.context)===null||_d$context===void 0?void 0:_d$context.weatherAlert)||'');setAlts({});};const trackTrip=async itinerary=>{if(!token)return;try{await fetch(\"\".concat(API,\"/analytics/track/trip\"),{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify({origin,destination:dest,itinerary})});}catch(error){console.log('Analytics tracking failed:',error);}};const loadAnalytics=async()=>{if(!token)return;try{const r=await fetch(\"\".concat(API,\"/analytics/summary\"),{headers:{'Authorization':\"Bearer \".concat(token)}});const data=await r.json();setAnalyticsData(data);}catch(error){console.log('Failed to load analytics:',error);}};const exportPdf=async itinerary=>{const r=await fetch(\"\".concat(API,\"/export/itinerary\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({origin,destination:dest,itinerary})});const blob=await r.blob();const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download='atis_trip.pdf';a.click();URL.revokeObjectURL(url);};const suggestAlt=async itinerary=>{try{var _data$alternative,_data$alternative2,_data$alternative3;const r=await fetch(\"\".concat(API,\"/routes/suggest\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({current_itinerary:itinerary,incidents:alerts,origin:origin,destination:dest,preferences:{optimize:optimize,max_walk_km:maxWalkKm,avoid_stairs:avoidStairs,bike_ok:bikeOk,modes:modes}})});const data=await r.json();// Enhance alternative with more details\nconst enhancedAlternative=_objectSpread(_objectSpread({},data.alternative),{},{reason:data.reason||'Alternative route available',benefits:data.benefits||[],warnings:data.warnings||[],comparison:{timeDiff:(_data$alternative=data.alternative)!==null&&_data$alternative!==void 0&&_data$alternative.duration?Math.round((data.alternative.duration-itinerary.duration)/60):0,transferDiff:(((_data$alternative2=data.alternative)===null||_data$alternative2===void 0?void 0:_data$alternative2.transfers)||0)-(itinerary.transfers||0),walkDiff:(_data$alternative3=data.alternative)!==null&&_data$alternative3!==void 0&&_data$alternative3.walk_distance?(data.alternative.walk_distance-(itinerary.walk_distance||0)).toFixed(1):0}});setAlts(prev=>_objectSpread(_objectSpread({},prev),{},{[itinerary.id]:enhancedAlternative}));}catch(error){console.error('Error suggesting alternative:',error);}};const authHeaders=()=>token?{'Authorization':\"Bearer \".concat(token)}:{};const savePrefs=async()=>{if(!token){alert('Please login to save preferences.');return;}const r=await fetch(\"\".concat(API,\"/prefs\"),{method:'POST',headers:_objectSpread({'Content-Type':'application/json'},authHeaders()),body:JSON.stringify({lang:'en',currency:'NZD',home:origin,work:dest})});alert(r.ok?'Preferences saved':'Failed to save');};const languageOptions=Object.keys(TRANSLATIONS);const currencyOptions=Object.keys(CURRENCY_RATES);const saveOfflinePack=()=>{const snapshot={saved:{origin,destination:dest,modes,optimize,maxWalkKm,avoidStairs,bikeOk},alerts,weather,stops,safetyContacts};localStorage.setItem('atis_offline_snapshot',JSON.stringify(snapshot));alert('Offline toolkit saved to this device.');};const updateSavedPlace=(key,coords)=>{const store=JSON.parse(localStorage.getItem('atisSavedPlaces')||'{}');store[key]=coords;localStorage.setItem('atisSavedPlaces',JSON.stringify(store));alert(\"\".concat(key.charAt(0).toUpperCase()+key.slice(1),\" saved\"));};const submitReview=async()=>{if(!token){alert('Please login to post a review.');return;}const r=await fetch(\"\".concat(API,\"/reviews\"),{method:'POST',headers:_objectSpread({'Content-Type':'application/json'},authHeaders()),body:JSON.stringify({location:reviewLoc,rating:Number(reviewRating),comment:reviewComment})});if(!r.ok){const t=await r.json();alert('Failed: '+(t.detail||r.status));}setReviewLoc('');setReviewRating(5);setReviewComment('');fetch(\"\".concat(API,\"/reviews\")).then(r=>r.json()).then(d=>setReviews(d.reviews||[])).catch(()=>{});};const toggleMode=m=>setModes(prev=>prev.includes(m)?prev.filter(x=>x!==m):[...prev,m]);const swapOD=()=>{const o=origin;const oName=originName;setOrigin(dest);setDest(o);setOriginName(destName);setDestName(oName);};const shareLocation=()=>{const coords=\"\".concat(origin[0].toFixed(5),\", \").concat(origin[1].toFixed(5));const url=\"https://www.google.com/maps?q=\".concat(origin[0],\",\").concat(origin[1]);navigator.clipboard.writeText(url).then(()=>{alert(\"\".concat(text.locationCopied,\"\\n\").concat(url));}).catch(()=>{alert(\"\".concat(text.shareLocation,\": \").concat(coords));});};// Enhanced Geocoding with more accurate results\nconst searchLocation=async(query,type)=>{if(!query||query.length<3){setSearchResults([]);return;}try{// More specific search parameters for better accuracy\nconst response=await fetch(\"https://nominatim.openstreetmap.org/search?\"+\"format=json&\"+\"q=\".concat(encodeURIComponent(query),\"&\")+\"countrycodes=nz&\"+\"bounded=1&\"+\"viewbox=174.5,-37.0,175.0,-36.5&\"+// Auckland bounding box\n\"addressdetails=1&\"+\"limit=8&\"+\"dedupe=1\");const data=await response.json();// Filter and sort results by relevance\nconst filteredResults=data.filter(result=>{const name=result.display_name.toLowerCase();return name.includes('auckland')||name.includes('new zealand')||parseFloat(result.lat)>-37.5&&parseFloat(result.lat)<-36.5;}).sort((a,b)=>{// Prioritize results with specific types\nconst priorityTypes=['building','amenity','shop','tourism','station'];const aHasPriority=priorityTypes.includes(a.type);const bHasPriority=priorityTypes.includes(b.type);if(aHasPriority&&!bHasPriority)return-1;if(!aHasPriority&&bHasPriority)return 1;return 0;});setSearchResults(filteredResults);setSearchingFor(type);}catch(error){console.error('Search error:',error);setSearchResults([]);}};// Select a location from search results\nconst selectLocation=result=>{const lat=parseFloat(result.lat);const lng=parseFloat(result.lon);const name=result.display_name.split(',')[0];// Get primary name\nif(searchingFor==='origin'){setOrigin([lat,lng]);setOriginName(name);setOriginSearch('');}else{setDest([lat,lng]);setDestName(name);setDestSearch('');}setSearchResults([]);setSearchingFor(null);};// Close dropdown when clicking outside\nconst closeSearchDropdown=()=>{setSearchResults([]);setSearchingFor(null);setOriginSearch('');setDestSearch('');};// Use current location\nconst useCurrentLocation=type=>{if(navigator.geolocation){navigator.geolocation.getCurrentPosition(async position=>{const lat=position.coords.latitude;const lng=position.coords.longitude;// Reverse geocode to get place name\ntry{var _data$address,_data$address2,_data$address3;const response=await fetch(\"https://nominatim.openstreetmap.org/reverse?format=json&lat=\".concat(lat,\"&lon=\").concat(lng));const data=await response.json();const name=((_data$address=data.address)===null||_data$address===void 0?void 0:_data$address.suburb)||((_data$address2=data.address)===null||_data$address2===void 0?void 0:_data$address2.city)||((_data$address3=data.address)===null||_data$address3===void 0?void 0:_data$address3.town)||'Current Location';if(type==='origin'){setOrigin([lat,lng]);setOriginName(name);}else{setDest([lat,lng]);setDestName(name);}}catch(error){if(type==='origin'){setOrigin([lat,lng]);setOriginName('Current Location');}else{setDest([lat,lng]);setDestName('Current Location');}}},error=>{alert('Could not get your location. Please enable location services.');});}else{alert('Geolocation is not supported by your browser.');}};const handleLogin=(token,username)=>{setToken(token);setUsername(username);setIsAuthenticated(true);};const logout=()=>{setToken(null);setUsername(null);setIsAuthenticated(false);localStorage.removeItem('atis_token');localStorage.removeItem('atis_user');localStorage.removeItem('atis_login_time');sessionStorage.removeItem('atis_token');sessionStorage.removeItem('atis_user');sessionStorage.removeItem('atis_login_time');setView('home');};// Show loading screen while verifying token - PREVENTS BLINKING\nif(isVerifying){return/*#__PURE__*/_jsx(\"div\",{style:{minHeight:'100vh',width:'100%',display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',background:'#0a0e27',// Exact match to app background\ncolor:'white',position:'fixed',top:0,left:0,zIndex:9999},children:/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:60,height:60,border:'4px solid rgba(139, 92, 246, 0.3)',borderTop:'4px solid #8b5cf6',borderRadius:'50%',animation:'spin 1s linear infinite',margin:'0 auto 20px'}}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:18,fontWeight:600},children:\"Verifying session...\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:14,opacity:0.7,marginTop:8},children:\"Please wait\"})]})});}// Show login page if not authenticated - NO ACCESS TO MAIN APP\nif(!isAuthenticated){return/*#__PURE__*/_jsx(LoginPage,{onLogin:handleLogin,isVerifying:false});}return/*#__PURE__*/_jsxs(\"div\",{style:{minHeight:'100vh',padding:'0',background:'#0a0e27',willChange:'auto'},children:[/*#__PURE__*/_jsx(\"nav\",{style:{position:'sticky',top:0,zIndex:1000,background:'rgba(10, 14, 39, 0.95)',borderBottom:'1px solid var(--glass-border)',boxShadow:'0 4px 24px rgba(0,0,0,0.1)'},children:/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:1400,margin:'0 auto',padding:'16px 24px',display:'flex',alignItems:'center',justifyContent:'space-between',gap:20},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:16},children:[/*#__PURE__*/_jsx(\"img\",{src:\"/atis-logo.jpg\",alt:\"ATIS\",style:{width:48,height:48,borderRadius:12,objectFit:'contain',boxShadow:'0 4px 12px rgba(0,0,0,0.2)'},onError:e=>{e.target.style.display='none';e.target.nextElementSibling.style.display='grid';}}),/*#__PURE__*/_jsx(\"div\",{className:\"logo\",style:{display:'none',width:48,height:48,fontSize:20},children:\"A\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{style:{fontSize:22,fontWeight:800,lineHeight:1,marginBottom:4},children:\"ATIS\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:12,color:'var(--muted)',lineHeight:1},children:\"Advanced Travel System\"})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',gap:8,flexWrap:'wrap'},children:['home','plan','map','alerts','safety','reviews','analytics','settings'].map(v=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setView(v);if(v==='analytics')loadAnalytics();},className:view===v?'btn btn-primary':'chip',style:{padding:'8px 16px',fontSize:13,fontWeight:600,textTransform:'capitalize',transition:'all 0.3s'},children:[v==='home'&&'ðŸ ',\" \",v==='plan'&&'ðŸ—ºï¸',\" \",v==='map'&&'ðŸŒ',v==='alerts'&&'âš ï¸',\" \",v==='safety'&&'ðŸ›¡ï¸',\" \",v==='reviews'&&'â­',v==='analytics'&&'ðŸ“Š',\" \",v==='settings'&&'âš™ï¸',\" \",' ',v.charAt(0).toUpperCase()+v.slice(1)]},v))}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:12},children:[/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'right'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:14,fontWeight:600},children:username||'Guest'}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,color:'var(--muted)'},children:\"Active Session\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:logout,className:\"btn btn-danger\",style:{padding:'8px 16px',fontSize:13},children:\"\\uD83D\\uDEAA Logout\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:1400,margin:'0 auto',padding:'32px 24px 80px'},children:[view==='home'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid-3\",style:{marginBottom:32},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:stops.length}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Nearby Stops\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:itins.length}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Routes Found\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:alerts.length}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Active Alerts\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",style:{marginBottom:32,background:'linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%)',border:'1px solid rgba(102, 126, 234, 0.3)'},children:[/*#__PURE__*/_jsxs(\"h2\",{style:{fontSize:28,fontWeight:800,marginBottom:12,background:'var(--gradient-1)',WebkitBackgroundClip:'text',WebkitTextFillColor:'transparent'},children:[\"Welcome back, \",username,\"! \\uD83D\\uDC4B\"]}),/*#__PURE__*/_jsx(\"p\",{style:{color:'var(--muted)',fontSize:15},children:\"Your intelligent travel companion for smarter journeys. Plan trips, check real-time updates, and navigate with confidence.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid-2\",style:{marginBottom:32},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card\",onClick:()=>setView('plan'),style:{cursor:'pointer'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:48,marginBottom:16},children:\"\\uD83D\\uDDFA\\uFE0F\"}),/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:20,fontWeight:700,marginBottom:8},children:\"Trip Planning\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'var(--muted)',fontSize:14},children:\"Plan multi-modal journeys with real-time data and alternative routes\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",onClick:()=>setView('map'),style:{cursor:'pointer'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:48,marginBottom:16},children:\"\\uD83C\\uDF0D\"}),/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:20,fontWeight:700,marginBottom:8},children:\"Interactive Map\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'var(--muted)',fontSize:14},children:\"Explore nearby stops, set destinations, and visualize your route\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",onClick:()=>setView('alerts'),style:{cursor:'pointer'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:48,marginBottom:16},children:\"\\u26A0\\uFE0F\"}),/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:20,fontWeight:700,marginBottom:8},children:\"Live Alerts\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'var(--muted)',fontSize:14},children:\"Stay updated with traffic incidents and service disruptions\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",onClick:()=>setView('safety'),style:{cursor:'pointer'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:48,marginBottom:16},children:\"\\uD83D\\uDEE1\\uFE0F\"}),/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:20,fontWeight:700,marginBottom:8},children:\"Safety Features\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'var(--muted)',fontSize:14},children:\"Emergency contacts and location sharing for peace of mind\"})]})]})]}),view==='map'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"\\uD83C\\uDF0D Interactive Map\"}),/*#__PURE__*/_jsxs(FeatureCard,{icon:\"\\uD83D\\uDDFA\\uFE0F\",title:\"Map View\",description:\"Drag origin marker, click map to set destination, view nearby stops\",children:[/*#__PURE__*/_jsx(\"div\",{style:{height:450,width:'100%',borderRadius:16,overflow:'hidden',boxShadow:'0 8px 24px rgba(0,0,0,0.12)'},children:/*#__PURE__*/_jsx(InteractiveMap,{origin:origin,setOrigin:setOrigin,dest:dest,setDest:setDest,stops:stops,trafficIncidents:trafficIncidents,lastUpdate:lastTrafficUpdate?getRelativeTime(lastTrafficUpdate):null,onRefresh:refreshTrafficData})}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:16,display:'flex',gap:10,flexWrap:'wrap'},children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary\",onClick:shareLocation,children:[\"\\uD83D\\uDCCD \",text.shareLocation]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn\",onClick:()=>navigator.clipboard.writeText(\"\".concat(origin[0].toFixed(5),\", \").concat(origin[1].toFixed(5))).then(()=>alert(text.locationCopied)),children:[\"\\uD83D\\uDCCB \",text.copyCoords]})]})]})]}),view==='alerts'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"\\u26A0\\uFE0F Live Alerts & Weather\"}),/*#__PURE__*/_jsx(FeatureCard,{icon:\"\\u26A1\",title:text.realTimeSnapshot,description:\"Live traffic, weather and notifications so riders stay ahead.\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexWrap:'wrap',gap:16},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:'1 1 200px',minWidth:220},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600,marginBottom:6},children:text.weatherNow}),weather?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:18,fontWeight:700},children:weather.condition}),/*#__PURE__*/_jsxs(\"div\",{style:{opacity:0.75},children:[\"Temp \",weather.tempC,\"\\xB0C \\u2022 Wind \",weather.windKph,\" km/h\"]})]}):/*#__PURE__*/_jsx(\"div\",{style:{opacity:0.65},children:\"Fetching latest forecast\\u2026\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:'2 1 320px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600,marginBottom:6},children:text.alertsIncidents}),/*#__PURE__*/_jsxs(\"ul\",{style:{margin:0,paddingLeft:18},children:[alerts.slice(0,6).map((a,i)=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:a.type||a.id}),\": \",a.title||a.summary,\" \",a.severity?\"\\u2022 \".concat(a.severity):'']},i)),alerts.length===0&&/*#__PURE__*/_jsx(\"li\",{style:{opacity:0.7},children:text.noAlerts})]})]}),banner&&/*#__PURE__*/_jsxs(\"div\",{style:{flexBasis:'100%',background:'rgba(37,99,235,0.12)',padding:12,borderRadius:12},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Notification:\"}),\" \",banner]})]})})]}),view==='plan'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"\\uD83D\\uDDFA\\uFE0F Trip Planning\"}),/*#__PURE__*/_jsx(FeatureCard,{icon:\"\\uD83E\\uDDED\",title:text.tripPlanning,description:\"Plan ahead, adapt on the fly, and export journeys for the road.\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gap:24,gridTemplateColumns:'minmax(260px, 1fr) minmax(320px, 1.35fr)'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:12},children:[/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsxs(\"label\",{style:{display:'flex',flexDirection:'column',gap:4},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:12,opacity:0.75},children:\"\\uD83D\\uDCCD Origin\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>useCurrentLocation('origin'),style:{padding:'4px 8px',fontSize:11},title:\"Use my current location\",children:\"\\uD83D\\uDCCD Current\"})]}),/*#__PURE__*/_jsx(\"input\",{value:originSearch||originName,onChange:e=>{setOriginSearch(e.target.value);searchLocation(e.target.value,'origin');},onFocus:e=>e.target.select(),placeholder:\"Search for a place...\",style:{fontWeight:600}})]}),searchingFor==='origin'&&searchResults.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',top:'100%',left:0,right:0,zIndex:1000,background:'linear-gradient(135deg, rgba(30, 41, 59, 0.98) 0%, rgba(15, 23, 42, 0.98) 100%)',backdropFilter:'blur(40px)',border:'2px solid rgba(139, 92, 246, 0.4)',borderRadius:16,marginTop:8,maxHeight:320,overflowY:'auto',boxShadow:'0 20px 60px rgba(0,0,0,0.6), 0 0 0 1px rgba(255,255,255,0.1) inset'},children:[/*#__PURE__*/_jsx(\"div\",{style:{padding:'10px 14px',fontSize:11,fontWeight:700,color:'rgba(139, 92, 246, 1)',borderBottom:'1px solid rgba(139, 92, 246, 0.2)',textTransform:'uppercase',letterSpacing:'0.5px'},children:\"\\uD83D\\uDCCD Select Origin Location\"}),searchResults.map((result,i)=>{var _result$address;return/*#__PURE__*/_jsxs(\"div\",{onClick:()=>selectLocation(result),style:{padding:'14px 16px',cursor:'pointer',borderBottom:i<searchResults.length-1?'1px solid rgba(255,255,255,0.06)':'none',transition:'all 0.2s',background:'transparent'},onMouseEnter:e=>{e.currentTarget.style.background='linear-gradient(90deg, rgba(139, 92, 246, 0.15) 0%, rgba(59, 130, 246, 0.15) 100%)';e.currentTarget.style.borderLeft='3px solid rgba(139, 92, 246, 0.8)';e.currentTarget.style.paddingLeft='13px';},onMouseLeave:e=>{e.currentTarget.style.background='transparent';e.currentTarget.style.borderLeft='none';e.currentTarget.style.paddingLeft='16px';},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:700,fontSize:15,color:'#ffffff',marginBottom:6,display:'flex',alignItems:'center',justifyContent:'space-between'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:8},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:18},children:result.type==='amenity'?'ðŸ¢':result.type==='building'?'ðŸ›ï¸':result.type==='tourism'?'ðŸŽ¯':result.type==='station'?'ðŸš‰':result.type==='shop'?'ðŸª':'ðŸ“'}),result.display_name.split(',')[0]]}),((_result$address=result.address)===null||_result$address===void 0?void 0:_result$address.suburb)&&/*#__PURE__*/_jsx(\"span\",{style:{fontSize:11,padding:'2px 8px',background:'rgba(139, 92, 246, 0.3)',borderRadius:8,color:'rgba(139, 92, 246, 1)',fontWeight:600},children:result.address.suburb})]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,color:'rgba(255,255,255,0.5)',lineHeight:1.5,paddingLeft:26,marginBottom:4},children:result.display_name.split(',').slice(1,3).join(',').trim()}),result.type&&/*#__PURE__*/_jsx(\"div\",{style:{fontSize:10,color:'rgba(255,255,255,0.4)',paddingLeft:26,fontStyle:'italic'},children:result.type.charAt(0).toUpperCase()+result.type.slice(1)})]},i);})]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:11,opacity:0.5,marginTop:4},children:[origin[0].toFixed(4),\", \",origin[1].toFixed(4)]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsxs(\"label\",{style:{display:'flex',flexDirection:'column',gap:4},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:12,opacity:0.75},children:\"\\uD83C\\uDFAF Destination\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>useCurrentLocation('dest'),style:{padding:'4px 8px',fontSize:11},title:\"Use my current location\",children:\"\\uD83D\\uDCCD Current\"})]}),/*#__PURE__*/_jsx(\"input\",{value:destSearch||destName,onChange:e=>{setDestSearch(e.target.value);searchLocation(e.target.value,'dest');},onFocus:e=>e.target.select(),placeholder:\"Search for a place...\",style:{fontWeight:600}})]}),searchingFor==='dest'&&searchResults.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',top:'100%',left:0,right:0,zIndex:1000,background:'linear-gradient(135deg, rgba(30, 41, 59, 0.98) 0%, rgba(15, 23, 42, 0.98) 100%)',backdropFilter:'blur(40px)',border:'2px solid rgba(59, 130, 246, 0.4)',borderRadius:16,marginTop:8,maxHeight:320,overflowY:'auto',boxShadow:'0 20px 60px rgba(0,0,0,0.6), 0 0 0 1px rgba(255,255,255,0.1) inset'},children:[/*#__PURE__*/_jsx(\"div\",{style:{padding:'10px 14px',fontSize:11,fontWeight:700,color:'rgba(59, 130, 246, 1)',borderBottom:'1px solid rgba(59, 130, 246, 0.2)',textTransform:'uppercase',letterSpacing:'0.5px'},children:\"\\uD83C\\uDFAF Select Destination Location\"}),searchResults.map((result,i)=>{var _result$address2;return/*#__PURE__*/_jsxs(\"div\",{onClick:()=>selectLocation(result),style:{padding:'14px 16px',cursor:'pointer',borderBottom:i<searchResults.length-1?'1px solid rgba(255,255,255,0.06)':'none',transition:'all 0.2s',background:'transparent'},onMouseEnter:e=>{e.currentTarget.style.background='linear-gradient(90deg, rgba(59, 130, 246, 0.15) 0%, rgba(16, 185, 129, 0.15) 100%)';e.currentTarget.style.borderLeft='3px solid rgba(59, 130, 246, 0.8)';e.currentTarget.style.paddingLeft='13px';},onMouseLeave:e=>{e.currentTarget.style.background='transparent';e.currentTarget.style.borderLeft='none';e.currentTarget.style.paddingLeft='16px';},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:700,fontSize:15,color:'#ffffff',marginBottom:6,display:'flex',alignItems:'center',justifyContent:'space-between'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:8},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:18},children:result.type==='amenity'?'ðŸ¢':result.type==='building'?'ðŸ›ï¸':result.type==='tourism'?'ðŸŽ¯':result.type==='station'?'ðŸš‰':result.type==='shop'?'ðŸª':'ðŸŽ¯'}),result.display_name.split(',')[0]]}),((_result$address2=result.address)===null||_result$address2===void 0?void 0:_result$address2.suburb)&&/*#__PURE__*/_jsx(\"span\",{style:{fontSize:11,padding:'2px 8px',background:'rgba(59, 130, 246, 0.3)',borderRadius:8,color:'rgba(59, 130, 246, 1)',fontWeight:600},children:result.address.suburb})]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,color:'rgba(255,255,255,0.5)',lineHeight:1.5,paddingLeft:26,marginBottom:4},children:result.display_name.split(',').slice(1,3).join(',').trim()}),result.type&&/*#__PURE__*/_jsx(\"div\",{style:{fontSize:10,color:'rgba(255,255,255,0.4)',paddingLeft:26,fontStyle:'italic'},children:result.type.charAt(0).toUpperCase()+result.type.slice(1)})]},i);})]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:11,opacity:0.5,marginTop:4},children:[dest[0].toFixed(4),\", \",dest[1].toFixed(4)]})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',gap:8},children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:swapOD,style:{flex:1},children:\"\\uD83D\\uDD04 Swap\"})}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:6},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:12,opacity:0.75},children:\"Preferred modes\"}),/*#__PURE__*/_jsx(\"div\",{children:['bus','train','ferry','walk','bike'].map(m=>/*#__PURE__*/_jsxs(\"label\",{style:{marginRight:10},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:modes.includes(m),onChange:()=>toggleMode(m)}),\" \",m]},m))})]}),/*#__PURE__*/_jsxs(\"label\",{style:{display:'flex',flexDirection:'column',gap:4},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:12,opacity:0.75},children:\"Optimize for\"}),/*#__PURE__*/_jsxs(\"select\",{value:optimize,onChange:e=>setOptimize(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"fastest\",children:\"Fastest\"}),/*#__PURE__*/_jsx(\"option\",{value:\"fewest_transfers\",children:\"Fewest transfers\"}),/*#__PURE__*/_jsx(\"option\",{value:\"least_walking\",children:\"Least walking\"}),/*#__PURE__*/_jsx(\"option\",{value:\"reliable\",children:\"Most reliable\"})]})]}),/*#__PURE__*/_jsxs(\"label\",{style:{display:'flex',flexDirection:'column',gap:4},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:12,opacity:0.75},children:\"Max walking distance (km)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",max:\"3\",step:\"0.1\",value:maxWalkKm,onChange:e=>setMaxWalkKm(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:12,flexWrap:'wrap'},children:[/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:avoidStairs,onChange:e=>setAvoidStairs(e.target.checked)}),\" Avoid stairs\"]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:bikeOk,onChange:e=>setBikeOk(e.target.checked)}),\" Bike friendly\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:6},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:12,opacity:0.75},children:\"When to travel\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:12},children:[/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"when\",value:\"depart\",checked:whenType==='depart',onChange:()=>setWhenType('depart')}),\" Depart at\"]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"when\",value:\"arrive\",checked:whenType==='arrive',onChange:()=>setWhenType('arrive')}),\" Arrive by\"]})]}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"now or 2025-11-03T09:00\",value:whenValue,onChange:e=>setWhenValue(e.target.value)})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:plan,style:{alignSelf:'flex-start'},children:text.findItineraries})]}),/*#__PURE__*/_jsx(\"div\",{children:itins.length===0?/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',padding:'40px 20px',background:'var(--glass-bg)',backdropFilter:'blur(10px)',borderRadius:16,border:'1px dashed var(--line)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:48,marginBottom:12},children:\"\\uD83D\\uDE80\"}),/*#__PURE__*/_jsxs(\"p\",{style:{color:'var(--muted)',fontSize:15},children:[\"Press \",/*#__PURE__*/_jsx(\"b\",{style:{color:'var(--primary)'},children:\"Find itineraries\"}),\" to see recommended routes.\"]})]}):/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexDirection:'column',gap:16},children:itins.map((it,idx)=>{var _it$walk_km,_alts$it$id$compariso,_alts$it$id$compariso2;return/*#__PURE__*/_jsxs(\"div\",{style:{background:'var(--glass-bg)',backdropFilter:'blur(10px)',border:'1px solid var(--glass-border)',borderRadius:16,padding:20,boxShadow:'0 4px 16px rgba(0,0,0,0.08)',transition:'all 0.3s ease'},onMouseEnter:e=>e.currentTarget.style.boxShadow='0 8px 24px rgba(0,0,0,0.15)',onMouseLeave:e=>e.currentTarget.style.boxShadow='0 4px 16px rgba(0,0,0,0.08)',children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'flex-start',gap:16,flexWrap:'wrap'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:10,marginBottom:10,flexWrap:'wrap'},children:[/*#__PURE__*/_jsx(\"span\",{style:{background:'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',color:'white',width:32,height:32,borderRadius:'50%',display:'grid',placeItems:'center',fontWeight:700,fontSize:14},children:idx+1}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:18,fontWeight:700},children:[\"~\",it.durationMin,\" min\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'var(--muted)',fontSize:14},children:[\"\\u2022 \",it.transfers,\" transfers\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:it.reliability>0.85?'rgba(16, 185, 129, 0.15)':'rgba(251, 191, 36, 0.15)',color:it.reliability>0.85?'var(--success)':'#f59e0b',padding:'4px 10px',borderRadius:8,fontSize:12,fontWeight:600},children:[Math.round((it.reliability||0)*100),\"% reliable\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'var(--muted)',fontSize:14,marginBottom:10},children:[\"\\uD83D\\uDEB6 \",it.legs.join(' â†’ ')]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:8,flexWrap:'wrap'},children:[/*#__PURE__*/_jsxs(Chip,{children:[\"\\uD83D\\uDEB6 \",((_it$walk_km=it.walk_km)!==null&&_it$walk_km!==void 0?_it$walk_km:0).toFixed(1),\" km walk\"]}),/*#__PURE__*/_jsx(Chip,{children:(it.modes||[]).join(', ')})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:8,flexWrap:'wrap'},children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn\",onClick:e=>{e.stopPropagation();exportPdf(it);},children:[\"\\uD83D\\uDCC4 \",text.exportPdf]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary\",onClick:e=>{e.stopPropagation();suggestAlt(it);},children:[\"\\uD83D\\uDD04 \",text.suggestAlt]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:e=>{e.stopPropagation();setExpandedItin(expandedItin===it.id?null:it.id);},style:{background:expandedItin===it.id?'var(--primary)':'',color:expandedItin===it.id?'white':''},children:expandedItin===it.id?'â–¼ Hide Details':'â–¶ View Details'})]})]}),expandedItin===it.id&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:20,padding:20,background:'linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%)',border:'1px solid rgba(102, 126, 234, 0.2)',borderRadius:12},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(140px, 1fr))',gap:12,marginBottom:20},children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:12,background:'rgba(255,255,255,0.05)',borderRadius:10,border:'1px solid rgba(255,255,255,0.1)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,opacity:0.6,marginBottom:4},children:\"\\uD83D\\uDCB5 Estimated Fare\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:16,fontWeight:700},children:[\"$\",(2.50+it.transfers*0.50).toFixed(2),\" NZD\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:12,background:'rgba(255,255,255,0.05)',borderRadius:10,border:'1px solid rgba(255,255,255,0.1)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,opacity:0.6,marginBottom:4},children:\"\\uD83C\\uDF31 CO\\u2082 Savings\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:16,fontWeight:700},children:it.environmental?\"\".concat(it.environmental.co2_saved_kg.toFixed(2),\" kg\"):\"\".concat((it.durationMin*0.05).toFixed(1),\" kg\")}),it.environmental&&/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:10,opacity:0.5,marginTop:2},children:[it.environmental.co2_saved_percent.toFixed(0),\"% vs car\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:12,background:'rgba(255,255,255,0.05)',borderRadius:10,border:'1px solid rgba(255,255,255,0.1)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,opacity:0.6,marginBottom:4},children:\"\\u23F1\\uFE0F Departure\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:16,fontWeight:700},children:\"In 3 min\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:12,background:'rgba(255,255,255,0.05)',borderRadius:10,border:'1px solid rgba(255,255,255,0.1)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,opacity:0.6,marginBottom:4},children:\"\\uD83D\\uDC65 Crowding\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:16,fontWeight:700},children:\"\\u25CF\\u25CF\\u25CB\\u25CB Low\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:12,background:'rgba(255,255,255,0.05)',borderRadius:10,border:'1px solid rgba(255,255,255,0.1)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,opacity:0.6,marginBottom:4},children:\"\\u267F Accessible\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:16,fontWeight:700},children:it.stairs?'âš ï¸ Stairs':'âœ“ Yes'})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:12,background:'rgba(255,255,255,0.05)',borderRadius:10,border:'1px solid rgba(255,255,255,0.1)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,opacity:0.6,marginBottom:4},children:\"\\uD83D\\uDD0C Charging\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:16,fontWeight:700},children:\"Available\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:16},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:14,fontWeight:700,marginBottom:12,color:'var(--primary)'},children:\"\\uD83D\\uDCCD Step-by-Step Journey\"}),it.legs.map((leg,legIdx)=>{const isWalk=leg.toLowerCase().includes('walk');const isBus=leg.toLowerCase().includes('bus');const isTrain=leg.toLowerCase().includes('train');const isFerry=leg.toLowerCase().includes('ferry');const isBike=leg.toLowerCase().includes('bike');// Extract route number (e.g., \"Bus NX1\" -> \"NX1\")\nconst routeMatch=leg.match(/(?:Bus|Train)\\s+([A-Z0-9]+)/i);const routeNumber=routeMatch?routeMatch[1]:null;return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:16,marginBottom:16,paddingBottom:16,borderBottom:legIdx<it.legs.length-1?'1px dashed rgba(255,255,255,0.1)':'none'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',alignItems:'center',minWidth:60},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:40,height:40,borderRadius:'50%',background:isWalk?'linear-gradient(135deg, #10b981 0%, #059669 100%)':isBus?'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)':isTrain?'linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)':isFerry?'linear-gradient(135deg, #06b6d4 0%, #0891b2 100%)':'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',color:'white',display:'grid',placeItems:'center',fontSize:18,fontWeight:700,boxShadow:'0 4px 12px rgba(0,0,0,0.2)'},children:isWalk?'ðŸš¶':isBus?'ðŸšŒ':isTrain?'ðŸš†':isFerry?'â›´ï¸':isBike?'ðŸš´':'ðŸšŒ'}),legIdx<it.legs.length-1&&/*#__PURE__*/_jsx(\"div\",{style:{width:2,flex:1,background:'rgba(255,255,255,0.2)',minHeight:20,marginTop:8}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:15,fontWeight:700,marginBottom:6},children:leg}),isWalk&&/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:13,color:'rgba(255,255,255,0.7)',marginBottom:8},children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:4},children:[\"\\uD83D\\uDCCF Distance: \",((it.walk_km||0.4)/it.legs.filter(l=>l.toLowerCase().includes('walk')).length).toFixed(2),\" km\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:4},children:[\"\\u23F1\\uFE0F Duration: ~\",Math.ceil((it.walk_km||0.4)/it.legs.filter(l=>l.toLowerCase().includes('walk')).length*12),\" min\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>{// Show walking route on map\nalert(\"Walking directions:\\n1. Head \".concat(legIdx===0?'to nearest stop':'to your destination',\"\\n2. Follow pedestrian paths\\n3. Cross at designated crossings\\n\\nOpening map view...\"));setView('map');},style:{marginTop:8,padding:'6px 12px',fontSize:12,background:'linear-gradient(135deg, #10b981 0%, #059669 100%)',color:'white',border:'none'},children:\"\\uD83D\\uDDFA\\uFE0F View Walking Route\"})]}),(isBus||isTrain||isFerry)&&/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:13,color:'rgba(255,255,255,0.7)'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:8,padding:10,background:'rgba(255,255,255,0.05)',borderRadius:8},children:[routeNumber&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:6},children:[/*#__PURE__*/_jsx(\"span\",{style:{background:isBus?'#3b82f6':isTrain?'#8b5cf6':'#06b6d4',color:'white',padding:'4px 10px',borderRadius:6,fontSize:13,fontWeight:700,marginRight:8},children:routeNumber}),/*#__PURE__*/_jsx(\"span\",{style:{opacity:0.8},children:isBus?'Bus Route':isTrain?'Train Line':'Ferry Route'})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:4},children:[\"\\uD83D\\uDE8F \",/*#__PURE__*/_jsx(\"b\",{children:\"From:\"}),\" Stop #\",1000+legIdx*100,\" - \",legIdx===0?'Start Point':\"Transfer Point \".concat(legIdx)]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:4},children:[\"\\uD83C\\uDFAF \",/*#__PURE__*/_jsx(\"b\",{children:\"To:\"}),\" Stop #\",1000+legIdx*100+50,\" - \",legIdx===it.legs.length-1?'End Point':'Next Transfer']}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:4},children:[\"\\u23F1\\uFE0F \",/*#__PURE__*/_jsx(\"b\",{children:\"Next Departure:\"}),\" \",/*#__PURE__*/_jsx(\"span\",{style:{color:'#10b981',fontWeight:600},children:\"3, 8, 15 min\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:4},children:[\"\\uD83E\\uDE91 \",/*#__PURE__*/_jsx(\"b\",{children:\"Platform/Bay:\"}),\" \",isTrain?'Platform':'Bay',\" \",legIdx+1]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:4},children:[\"\\uD83C\\uDFAB \",/*#__PURE__*/_jsx(\"b\",{children:\"Zone:\"}),\" Zone \",Math.min(legIdx+1,3)]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:4},children:[\"\\uD83D\\uDC65 \",/*#__PURE__*/_jsx(\"b\",{children:\"Current Load:\"}),\" \",['Light','Moderate','Busy'][Math.floor(Math.random()*3)]]}),isTrain&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:4},children:[\"\\uD83D\\uDE83 \",/*#__PURE__*/_jsx(\"b\",{children:\"Carriages:\"}),\" 3-car train\"]}),isBus&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:4},children:[\"\\u267F \",/*#__PURE__*/_jsx(\"b\",{children:\"Features:\"}),\" Low-floor, wheelchair accessible\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:8,marginTop:8,flexWrap:'wrap'},children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>{setSelectedStop({stop_id:\"\".concat(1000+legIdx*100),name:\"Stop \".concat(1000+legIdx*100)});setView('home');},style:{padding:'6px 12px',fontSize:12},children:\"\\uD83D\\uDE8F View Stop Info\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>alert(\"Live tracking for \".concat(routeNumber||'this route',\" will be available soon!\")),style:{padding:'6px 12px',fontSize:12},children:\"\\uD83D\\uDCCD Track Vehicle\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>alert(\"Set reminder for \".concat(routeNumber||'this departure')),style:{padding:'6px 12px',fontSize:12},children:\"\\uD83D\\uDD14 Set Reminder\"})]})]})]})]},legIdx);})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:20,padding:12,background:'rgba(59, 130, 246, 0.1)',borderLeft:'3px solid #3b82f6',borderRadius:6},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:13,fontWeight:700,marginBottom:6},children:\"\\uD83D\\uDCA1 Travel Tips\"}),/*#__PURE__*/_jsxs(\"ul\",{style:{fontSize:12,color:'rgba(255,255,255,0.8)',margin:0,paddingLeft:20},children:[/*#__PURE__*/_jsx(\"li\",{children:\"Allow 5 extra minutes for unexpected delays\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Have your AT HOP card ready before boarding\"}),it.transfers>0&&/*#__PURE__*/_jsx(\"li\",{children:\"Transfers are free within 30 minutes\"}),it.stairs&&/*#__PURE__*/_jsx(\"li\",{children:\"This route includes stairs - consider accessibility needs\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Check real-time updates before you leave\"})]})]}),it.mcda_score&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:20,padding:16,background:'linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(219, 39, 119, 0.1) 100%)',border:'2px solid rgba(139, 92, 246, 0.3)',borderRadius:12},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:12},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:14,fontWeight:700,color:'#a78bfa'},children:\"\\uD83C\\uDFC6 Multi-Criteria Decision Score (MCDA)\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:24,fontWeight:700,color:it.mcda_score>=85?'#10b981':it.mcda_score>=70?'#3b82f6':'#f59e0b',display:'flex',alignItems:'center',gap:6},children:[it.mcda_score.toFixed(1),\"/100\",it.mcda_rank&&/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:14,opacity:0.7},children:[\"#\",it.mcda_rank]})]})]}),it.mcda_recommendation&&/*#__PURE__*/_jsx(\"div\",{style:{fontSize:12,padding:'8px 12px',background:'rgba(139, 92, 246, 0.15)',borderRadius:8,marginBottom:12,color:'rgba(255,255,255,0.9)'},children:it.mcda_recommendation}),it.mcda_breakdown&&/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(120px, 1fr))',gap:10},children:Object.entries(it.mcda_breakdown).map(_ref0=>{let[criterion,score]=_ref0;return/*#__PURE__*/_jsxs(\"div\",{style:{padding:10,background:'rgba(0,0,0,0.2)',borderRadius:8,border:'1px solid rgba(255,255,255,0.1)'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:10,opacity:0.6,marginBottom:4,textTransform:'capitalize'},children:[criterion==='time'?'â±ï¸':criterion==='cost'?'ðŸ’°':criterion==='comfort'?'ðŸ›‹ï¸':criterion==='reliability'?'âœ“':'ðŸŒ±',\" \",criterion]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:14,fontWeight:700,color:score>=80?'#10b981':score>=60?'#3b82f6':'#f59e0b'},children:[score.toFixed(0),\"/100\"]}),/*#__PURE__*/_jsx(\"div\",{style:{width:'100%',height:4,background:'rgba(255,255,255,0.1)',borderRadius:2,marginTop:4,overflow:'hidden'},children:/*#__PURE__*/_jsx(\"div\",{style:{width:\"\".concat(score,\"%\"),height:'100%',background:score>=80?'#10b981':score>=60?'#3b82f6':'#f59e0b',borderRadius:2}})})]},criterion);})}),it.mcda_weights&&/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:10,opacity:0.5,marginTop:8},children:[\"Weights: \",Object.entries(it.mcda_weights).map(_ref1=>{let[k,v]=_ref1;return\"\".concat(k,\" \").concat((v*100).toFixed(0),\"%\");}).join(' â€¢ ')]})]}),it.environmental&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:20,padding:16,background:'linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(52, 211, 153, 0.1) 100%)',border:'2px solid rgba(16, 185, 129, 0.3)',borderRadius:12},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:14,fontWeight:700,color:'#10b981',marginBottom:12},children:\"\\uD83C\\uDF0D Environmental Impact Analysis\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(150px, 1fr))',gap:12,marginBottom:12},children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:12,background:'rgba(16, 185, 129, 0.1)',borderRadius:8},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,opacity:0.7,marginBottom:4},children:\"CO\\u2082 Emissions\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:18,fontWeight:700,color:'#10b981'},children:[it.environmental.total_co2_kg.toFixed(2),\" kg\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:12,background:'rgba(16, 185, 129, 0.1)',borderRadius:8},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,opacity:0.7,marginBottom:4},children:\"CO\\u2082 Saved vs Car\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:18,fontWeight:700,color:'#10b981'},children:[it.environmental.co2_saved_kg.toFixed(2),\" kg\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:10,opacity:0.6,marginTop:2},children:[it.environmental.co2_saved_percent.toFixed(0),\"% reduction\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:12,background:'rgba(16, 185, 129, 0.1)',borderRadius:8},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,opacity:0.7,marginBottom:4},children:\"Distance\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:18,fontWeight:700,color:'#10b981'},children:[it.environmental.total_distance_km.toFixed(1),\" km\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:12,background:'rgba(16, 185, 129, 0.1)',borderRadius:8},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,opacity:0.7,marginBottom:4},children:\"Trees to Offset\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:18,fontWeight:700,color:'#10b981'},children:[it.environmental.trees_equivalent.toFixed(2),\" \\uD83C\\uDF33\"]})]})]}),it.environmental.legs&&it.environmental.legs.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:12},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:12,fontWeight:600,marginBottom:8,opacity:0.8},children:\"Emissions by Leg:\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexDirection:'column',gap:6},children:it.environmental.legs.map((leg,idx)=>/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',padding:'8px 12px',background:'rgba(0,0,0,0.2)',borderRadius:6,fontSize:11},children:[/*#__PURE__*/_jsxs(\"span\",{children:[leg.mode,\" (\",leg.distance_km.toFixed(1),\" km)\"]}),/*#__PURE__*/_jsxs(\"span\",{style:{fontWeight:600,color:'#10b981'},children:[leg.co2_kg.toFixed(3),\" kg CO\\u2082\"]})]},idx))})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:12,padding:'10px 12px',background:'rgba(16, 185, 129, 0.15)',borderRadius:8,fontSize:12},children:[\"\\uD83D\\uDCA1 \",/*#__PURE__*/_jsx(\"b\",{children:\"Eco-Score:\"}),\" \",it.environmental.eco_score?\"\".concat(it.environmental.eco_score,\"/100\"):'Excellent choice for the environment!',it.environmental.co2_saved_percent>=70&&\" - You're making a significant positive impact! ðŸŒŸ\"]})]})]}),alts[it.id]&&/*#__PURE__*/_jsxs(\"div\",{className:\"alt\",style:{marginTop:16,padding:20,background:'linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(52, 211, 153, 0.05) 100%)',border:'2px solid rgba(16, 185, 129, 0.3)',borderRadius:16,boxShadow:'0 4px 15px rgba(16, 185, 129, 0.15)'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',justifyContent:'space-between',marginBottom:12},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:700,fontSize:16,color:'#10b981'},children:[\"\\u2728 \",alts[it.id].reason]}),alts[it.id].comparison&&/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',gap:8,alignItems:'center'},children:alts[it.id].comparison.timeDiff!==0&&/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:12,padding:'4px 10px',background:alts[it.id].comparison.timeDiff<0?'rgba(16, 185, 129, 0.2)':'rgba(239, 68, 68, 0.2)',color:alts[it.id].comparison.timeDiff<0?'#10b981':'#ef4444',borderRadius:8,fontWeight:600},children:[alts[it.id].comparison.timeDiff>0?'+':'',alts[it.id].comparison.timeDiff,\" min\"]})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(150px, 1fr))',gap:12,marginBottom:12},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(255,255,255,0.05)',padding:12,borderRadius:12,border:'1px solid rgba(255,255,255,0.1)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,opacity:0.6,marginBottom:4},children:\"Duration\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:16,fontWeight:700},children:[\"~\",alts[it.id].durationMin||'â€”',\" min\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(255,255,255,0.05)',padding:12,borderRadius:12,border:'1px solid rgba(255,255,255,0.1)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,opacity:0.6,marginBottom:4},children:\"Transfers\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:16,fontWeight:700},children:[alts[it.id].transfers||0,((_alts$it$id$compariso=alts[it.id].comparison)===null||_alts$it$id$compariso===void 0?void 0:_alts$it$id$compariso.transferDiff)!==0&&/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:11,marginLeft:6,color:alts[it.id].comparison.transferDiff<0?'#10b981':'#ef4444'},children:[\"(\",alts[it.id].comparison.transferDiff>0?'+':'',alts[it.id].comparison.transferDiff,\")\"]})]})]}),alts[it.id].walk_distance&&/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(255,255,255,0.05)',padding:12,borderRadius:12,border:'1px solid rgba(255,255,255,0.1)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,opacity:0.6,marginBottom:4},children:\"Walking\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:16,fontWeight:700},children:[alts[it.id].walk_distance,\" km\",((_alts$it$id$compariso2=alts[it.id].comparison)===null||_alts$it$id$compariso2===void 0?void 0:_alts$it$id$compariso2.walkDiff)!==0&&/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:11,marginLeft:6,color:alts[it.id].comparison.walkDiff<0?'#10b981':'#ef4444'},children:[\"(\",alts[it.id].comparison.walkDiff>0?'+':'',alts[it.id].comparison.walkDiff,\"km)\"]})]})]})]}),alts[it.id].legs&&/*#__PURE__*/_jsxs(\"div\",{style:{padding:12,background:'rgba(255,255,255,0.03)',borderRadius:10,marginBottom:10},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,opacity:0.6,marginBottom:6},children:\"Route Details\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:14,fontWeight:600},children:[\"\\uD83D\\uDEB6 \",alts[it.id].legs.join(' â†’ ')]})]}),alts[it.id].benefits&&alts[it.id].benefits.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:10},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,opacity:0.6,marginBottom:6},children:\"Benefits:\"}),alts[it.id].benefits.map((benefit,idx)=>/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:13,padding:'6px 10px',background:'rgba(16, 185, 129, 0.15)',borderLeft:'3px solid #10b981',borderRadius:6,marginBottom:4},children:[\"\\u2713 \",benefit]},idx))]}),alts[it.id].warnings&&alts[it.id].warnings.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:10},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,opacity:0.6,marginBottom:6},children:\"Warnings:\"}),alts[it.id].warnings.map((warning,idx)=>/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:13,padding:'6px 10px',background:'rgba(251, 191, 36, 0.15)',borderLeft:'3px solid #fbbf24',borderRadius:6,marginBottom:4},children:[\"\\u26A0 \",warning]},idx))]}),alts[it.id].note&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:10,padding:10,background:'rgba(59, 130, 246, 0.1)',borderLeft:'3px solid #3b82f6',borderRadius:6,fontSize:13,color:'rgba(255,255,255,0.8)'},children:[\"\\u2139\\uFE0F \",alts[it.id].note]})]})]},it.id);})})})]})}),/*#__PURE__*/_jsx(FeatureCard,{icon:\"\\uD83D\\uDE8D\",title:\"Nearby Transit\",description:\"Check nearby stops, live departures, and multimodal choices.\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:18},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexWrap:'wrap',gap:12},children:[stops.slice(0,6).map(s=>/*#__PURE__*/_jsxs(\"div\",{style:{padding:12,border:'1px solid var(--line,#e5e7eb)',borderRadius:12,background:'var(--card,#fff)',minWidth:180},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700},children:s.name}),/*#__PURE__*/_jsxs(\"div\",{style:{opacity:0.7,fontSize:12},children:[s.distance_m,\" m away\"]}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:10},children:/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>viewDepartures(s),children:\"Live departures\"})})]},s.stop_id)),stops.length===0&&/*#__PURE__*/_jsx(\"div\",{style:{opacity:0.7},children:\"Searching for nearby stops\\u2026\"})]}),selectedStop&&/*#__PURE__*/_jsxs(\"div\",{style:{border:'1px solid var(--line,#e5e7eb)',borderRadius:12,padding:16,background:'var(--card,#fff)'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:700,marginBottom:8},children:[\"Departures \\u2014 \",selectedStop.name]}),/*#__PURE__*/_jsxs(\"ul\",{style:{margin:0,paddingLeft:18},children:[departures.map((d,i)=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:d.route}),\" \\u2192 \",d.headsign,\" \",/*#__PURE__*/_jsxs(\"span\",{style:{opacity:0.65},children:[\"in \",d.departure_in_min,\" min\"]})]},i)),departures.length===0&&/*#__PURE__*/_jsx(\"li\",{style:{opacity:0.65},children:\"Loading departures\\u2026\"})]})]})]})})]}),view==='safety'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"\\uD83D\\uDEE1\\uFE0F Safety & Emergency\"}),/*#__PURE__*/_jsx(FeatureCard,{icon:\"\\uD83D\\uDCDE\",title:\"Emergency Contacts\",description:\"Quick access to local emergency services.\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexWrap:'wrap',gap:20},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:'1 1 260px',display:'flex',flexDirection:'column',gap:10},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600},children:\"Quick actions\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>updateSavedPlace('home',origin),children:\"Save home\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>updateSavedPlace('work',dest),children:\"Save work\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:savePrefs,children:\"Save to profile\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:saveOfflinePack,children:text.offlineCta}),token?/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:13,opacity:0.75},children:[\"Signed in as \",username,\". Preferences sync across devices.\"]}):/*#__PURE__*/_jsx(\"div\",{style:{fontSize:13,opacity:0.75},children:\"Create an account above to sync preferences and reviews.\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:'1 1 260px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:600,marginBottom:6},children:[\"\\uD83D\\uDEDF \",text.emergencyContacts]}),/*#__PURE__*/_jsxs(\"ul\",{style:{margin:0,paddingLeft:18},children:[safetyContacts.map((c,i)=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:c.name}),\" \\u2014 \",/*#__PURE__*/_jsx(\"a\",{href:\"tel:\".concat(c.phone),style:{color:'var(--danger)',fontWeight:700},children:c.phone})]},i)),safetyContacts.length===0&&/*#__PURE__*/_jsx(\"li\",{style:{opacity:0.7},children:\"Loading local contacts\\u2026\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:12},children:/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:shareLocation,children:text.shareLocation})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:'1 1 260px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600,marginBottom:6},children:\"Share status\"}),/*#__PURE__*/_jsxs(\"p\",{style:{opacity:0.75},children:[\"Tap \",/*#__PURE__*/_jsx(\"em\",{children:\"Save offline snapshot\"}),\" before you head out to keep routes, alerts, and emergency numbers handy \\u2014 even without coverage.\"]})]})]})})]}),view==='settings'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"\\u2699\\uFE0F Settings & Preferences\"}),/*#__PURE__*/_jsx(FeatureCard,{icon:\"\\uD83C\\uDF0D\",title:\"Travel Toolkit\",description:\"International tools for language, money, and bookings.\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexWrap:'wrap',gap:20},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:'1 1 220px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600,marginBottom:6},children:\"In-app translator\"}),/*#__PURE__*/_jsxs(\"p\",{style:{opacity:0.75},children:[\"Interface now in \",/*#__PURE__*/_jsx(\"strong\",{children:uiLang.toUpperCase()}),\". Additional copy will respect this preference as the app grows.\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:'1 1 260px',display:'flex',flexDirection:'column',gap:8},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600},children:\"Currency helper\"}),/*#__PURE__*/_jsx(\"label\",{style:{fontSize:12,opacity:0.75},children:\"Amount in NZD\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:amount,min:\"0\",onChange:e=>setAmount(Number(e.target.value)||0)}),/*#__PURE__*/_jsx(\"label\",{style:{fontSize:12,opacity:0.75},children:\"Convert to\"}),/*#__PURE__*/_jsx(\"select\",{value:currency,onChange:e=>setCurrency(e.target.value),children:currencyOptions.map(code=>/*#__PURE__*/_jsx(\"option\",{value:code,children:code},code))}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:4,fontWeight:600},children:[\"\\u2248 \",convertedAmount,\" \",currency]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:'1 1 260px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600,marginBottom:6},children:\"Bookings & payments\"}),/*#__PURE__*/_jsxs(\"ul\",{style:{margin:0,paddingLeft:18},children:[/*#__PURE__*/_jsx(\"li\",{children:\"Reserve transit passes and parking\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Bundle flights + hotels (coming soon)\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Secure wallet for ticketing integrations\"})]})]})]})})]}),view==='reviews'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"\\u2B50 Community Reviews\"}),/*#__PURE__*/_jsx(FeatureCard,{icon:\"\\u2B50\",title:\"Share Your Experience\",description:\"Crowd-sourced tips keep travellers informed.\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexWrap:'wrap',gap:20},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:'1 1 260px',display:'flex',flexDirection:'column',gap:10},children:[/*#__PURE__*/_jsxs(\"label\",{style:{display:'flex',flexDirection:'column',gap:4},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:12,opacity:0.75},children:\"Location\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"e.g., Britomart\",value:reviewLoc,onChange:e=>setReviewLoc(e.target.value)})]}),/*#__PURE__*/_jsxs(\"label\",{style:{display:'flex',flexDirection:'column',gap:4},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:12,opacity:0.75},children:\"Rating\"}),/*#__PURE__*/_jsx(\"select\",{value:reviewRating,onChange:e=>setReviewRating(e.target.value),children:[5,4,3,2,1].map(n=>/*#__PURE__*/_jsx(\"option\",{value:n,children:n},n))})]}),/*#__PURE__*/_jsxs(\"label\",{style:{display:'flex',flexDirection:'column',gap:4},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:12,opacity:0.75},children:\"Comment\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Short note\\u2026\",value:reviewComment,onChange:e=>setReviewComment(e.target.value)})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:submitReview,children:\"Share review\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:'1 1 320px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600,marginBottom:8},children:\"Latest reviews\"}),/*#__PURE__*/_jsxs(\"ul\",{style:{margin:0,paddingLeft:18,display:'flex',flexDirection:'column',gap:8},children:[reviews.map((r,i)=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:r.location}),\" \\u2022 \",r.rating,\"/5 \\u2014 \",r.comment,\" \",/*#__PURE__*/_jsxs(\"span\",{style:{opacity:0.6},children:[\"by \",r.user]})]},i)),reviews.length===0&&/*#__PURE__*/_jsx(\"li\",{style:{opacity:0.7},children:\"Be the first to add a community update.\"})]})]})]})})]}),view==='analytics'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"\\uD83D\\uDCCA System Analytics Dashboard\"}),/*#__PURE__*/_jsx(\"div\",{style:{padding:'16px 20px',background:'linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(139, 92, 246, 0.15) 100%)',borderRadius:12,border:'1px solid rgba(59, 130, 246, 0.3)',marginBottom:24},children:/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:14},children:[/*#__PURE__*/_jsx(\"b\",{children:\"\\uD83C\\uDF93 Assessment Feature:\"}),\" Analytics dashboard tracks system usage, environmental impact, and performance metrics for research and evaluation purposes.\"]})}),analyticsData?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(200px, 1fr))',gap:16,marginBottom:32},children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:20,background:'var(--glass-bg)',backdropFilter:'blur(10px)',borderRadius:12,border:'1px solid var(--glass-border)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:12,opacity:0.7,marginBottom:6},children:\"Total Trips Planned\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:32,fontWeight:700,color:'#3b82f6'},children:analyticsData.total_trips||0})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:20,background:'var(--glass-bg)',backdropFilter:'blur(10px)',borderRadius:12,border:'1px solid var(--glass-border)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:12,opacity:0.7,marginBottom:6},children:\"Active Users (7d)\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:32,fontWeight:700,color:'#8b5cf6'},children:analyticsData.active_users_7d||0})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:20,background:'var(--glass-bg)',backdropFilter:'blur(10px)',borderRadius:12,border:'1px solid var(--glass-border)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:12,opacity:0.7,marginBottom:6},children:\"CO\\u2082 Saved (kg)\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:32,fontWeight:700,color:'#10b981'},children:((_analyticsData$total_=analyticsData.total_co2_saved_kg)===null||_analyticsData$total_===void 0?void 0:_analyticsData$total_.toFixed(1))||0}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,opacity:0.6,marginTop:4},children:\"vs driving alone\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:20,background:'var(--glass-bg)',backdropFilter:'blur(10px)',borderRadius:12,border:'1px solid var(--glass-border)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:12,opacity:0.7,marginBottom:6},children:\"Avg MCDA Score\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:32,fontWeight:700,color:'#f59e0b'},children:((_analyticsData$avg_mc=analyticsData.avg_mcda_score)===null||_analyticsData$avg_mc===void 0?void 0:_analyticsData$avg_mc.toFixed(1))||0}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,opacity:0.6,marginTop:4},children:\"out of 100\"})]})]}),/*#__PURE__*/_jsx(FeatureCard,{icon:\"\\uD83D\\uDCC8\",title:\"System Performance\",description:\"Route quality and user satisfaction metrics\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(220px, 1fr))',gap:20},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600,marginBottom:8},children:\"Trip Metrics\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:8},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{opacity:0.7},children:\"Avg Duration:\"}),/*#__PURE__*/_jsxs(\"strong\",{children:[((_analyticsData$avg_du=analyticsData.avg_duration_min)===null||_analyticsData$avg_du===void 0?void 0:_analyticsData$avg_du.toFixed(1))||0,\" min\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{opacity:0.7},children:\"Avg Transfers:\"}),/*#__PURE__*/_jsx(\"strong\",{children:((_analyticsData$avg_tr=analyticsData.avg_transfers)===null||_analyticsData$avg_tr===void 0?void 0:_analyticsData$avg_tr.toFixed(1))||0})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{opacity:0.7},children:\"Total Distance:\"}),/*#__PURE__*/_jsxs(\"strong\",{children:[((_analyticsData$total_2=analyticsData.total_distance_km)===null||_analyticsData$total_2===void 0?void 0:_analyticsData$total_2.toFixed(1))||0,\" km\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600,marginBottom:8},children:\"Environmental Impact\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:8},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{opacity:0.7},children:\"Car Trips Avoided:\"}),/*#__PURE__*/_jsx(\"strong\",{style:{color:'#10b981'},children:analyticsData.car_trips_avoided||0})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{opacity:0.7},children:\"Total CO\\u2082 Saved:\"}),/*#__PURE__*/_jsxs(\"strong\",{style:{color:'#10b981'},children:[((_analyticsData$total_3=analyticsData.total_co2_saved_kg)===null||_analyticsData$total_3===void 0?void 0:_analyticsData$total_3.toFixed(2))||0,\" kg\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{opacity:0.7},children:\"Avg per Trip:\"}),/*#__PURE__*/_jsxs(\"strong\",{style:{color:'#10b981'},children:[((_ref10=analyticsData.total_co2_saved_kg/Math.max(analyticsData.total_trips,1))===null||_ref10===void 0?void 0:_ref10.toFixed(2))||0,\" kg\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600,marginBottom:8},children:\"System Health\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:8},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{opacity:0.7},children:\"Total Users:\"}),/*#__PURE__*/_jsx(\"strong\",{children:analyticsData.total_users||0})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{opacity:0.7},children:\"Total Searches:\"}),/*#__PURE__*/_jsx(\"strong\",{children:analyticsData.total_searches||0})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{opacity:0.7},children:\"Uptime:\"}),/*#__PURE__*/_jsxs(\"strong\",{children:[((_analyticsData$system=analyticsData.system_uptime_days)===null||_analyticsData$system===void 0?void 0:_analyticsData$system.toFixed(1))||0,\" days\"]})]})]})]})]})}),/*#__PURE__*/_jsx(FeatureCard,{icon:\"\\uD83C\\uDFC6\",title:\"Multi-Criteria Decision Analysis\",description:\"Route scoring breakdown across all trips\",children:/*#__PURE__*/_jsxs(\"div\",{style:{padding:16,background:'rgba(139, 92, 246, 0.1)',borderRadius:8},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:14,marginBottom:12},children:[\"Average MCDA score of \",/*#__PURE__*/_jsxs(\"strong\",{style:{color:'#8b5cf6'},children:[(_analyticsData$avg_mc2=analyticsData.avg_mcda_score)===null||_analyticsData$avg_mc2===void 0?void 0:_analyticsData$avg_mc2.toFixed(1),\"/100\"]}),\" indicates\",' ',analyticsData.avg_mcda_score>=80?'excellent':analyticsData.avg_mcda_score>=65?'good':'acceptable',\" route quality across all planned trips.\"]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:12,opacity:0.7},children:\"\\uD83D\\uDCA1 MCDA considers time, cost, comfort, reliability, and environmental factors to rank route options.\"})]})}),/*#__PURE__*/_jsx(FeatureCard,{icon:\"\\uD83C\\uDF0D\",title:\"Environmental Impact Summary\",description:\"Cumulative sustainability metrics\",children:/*#__PURE__*/_jsxs(\"div\",{style:{padding:20,background:'linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(52, 211, 153, 0.1) 100%)',borderRadius:12,border:'1px solid rgba(16, 185, 129, 0.3)'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:18,fontWeight:700,marginBottom:12,color:'#10b981'},children:[\"\\uD83C\\uDF1F Total CO\\u2082 Savings: \",((_analyticsData$total_4=analyticsData.total_co2_saved_kg)===null||_analyticsData$total_4===void 0?void 0:_analyticsData$total_4.toFixed(2))||0,\" kg\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:14,opacity:0.9,marginBottom:16},children:[\"By using public transport instead of driving, users have collectively saved\",' ',/*#__PURE__*/_jsxs(\"strong\",{style:{color:'#10b981'},children:[((_analyticsData$total_5=analyticsData.total_co2_saved_kg)===null||_analyticsData$total_5===void 0?void 0:_analyticsData$total_5.toFixed(2))||0,\" kg of CO\\u2082\"]}),\" emissions.\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(200px, 1fr))',gap:12},children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:12,background:'rgba(16, 185, 129, 0.15)',borderRadius:8},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:12,opacity:0.7},children:\"Equivalent Trees\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:24,fontWeight:700,color:'#10b981'},children:[((_ref11=analyticsData.total_co2_saved_kg/1000*45.9)===null||_ref11===void 0?void 0:_ref11.toFixed(1))||0,\" \\uD83C\\uDF33\"]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:10,opacity:0.6,marginTop:4},children:\"needed to offset emissions\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:12,background:'rgba(16, 185, 129, 0.15)',borderRadius:8},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:12,opacity:0.7},children:\"Car Trips Avoided\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:24,fontWeight:700,color:'#10b981'},children:analyticsData.car_trips_avoided||0}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:10,opacity:0.6,marginTop:4},children:\"reduced congestion\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:12,background:'rgba(16, 185, 129, 0.15)',borderRadius:8},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:12,opacity:0.7},children:\"Distance Traveled\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:24,fontWeight:700,color:'#10b981'},children:[((_analyticsData$total_6=analyticsData.total_distance_km)===null||_analyticsData$total_6===void 0?void 0:_analyticsData$total_6.toFixed(1))||0,\" km\"]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:10,opacity:0.6,marginTop:4},children:\"via public transport\"})]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:20,padding:16,background:'rgba(59, 130, 246, 0.1)',borderRadius:8,fontSize:13,opacity:0.8},children:[\"\\u2139\\uFE0F \",/*#__PURE__*/_jsx(\"b\",{children:\"Note:\"}),\" Analytics data is tracked for research and assessment purposes. All metrics are calculated based on actual trip planning data.\"]})]}):/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',padding:60},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:48,marginBottom:16},children:\"\\uD83D\\uDCCA\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:16,opacity:0.7,marginBottom:12},children:\"Loading analytics data...\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:14,opacity:0.5},children:\"Plan some trips to see analytics!\"})]})]})]})]});}","map":{"version":3,"names":["useEffect","useState","useMemo","useCallback","MapContainer","TileLayer","Marker","Popup","useMapEvents","Circle","Polyline","useMap","L","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","API","toast","message","type","arguments","length","undefined","toastEl","document","createElement","textContent","style","cssText","concat","body","appendChild","setTimeout","animation","removeChild","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","mapIcons","origin","iconSize","iconAnchor","popupAnchor","shadowSize","destination","stop","trafficWarning","trafficCritical","TRANSLATIONS","en","name","tagline","translatorLabel","offlineCta","shareLocation","copyCoords","locationCopied","tripPlanning","realTimeSnapshot","weatherNow","alertsIncidents","noAlerts","findItineraries","exportPdf","suggestAlt","emergencyContacts","es","tl","zh","CURRENCY_RATES","NZD","USD","EUR","AUD","Chip","_ref","children","className","marginRight","FeatureCard","_ref2","title","description","icon","marginBottom","display","alignItems","gap","fontSize","filter","fontWeight","background","WebkitBackgroundClip","WebkitTextFillColor","backgroundClip","letterSpacing","color","marginTop","lineHeight","DraggableMarker","_ref3","position","setPosition","label","draggable","setDraggable","eventHandlers","dragend","e","marker","target","pos","getLatLng","lat","lng","minWidth","onClick","d","MapClickHandler","_ref4","onMapClick","click","latlng","RecenterButton","_ref5","map","recenter","flyTo","duration","top","right","zIndex","padding","border","borderRadius","cursor","boxShadow","transition","onMouseEnter","currentTarget","transform","onMouseLeave","MapLegend","_ref6","trafficCount","bottom","backdropFilter","flexDirection","width","height","paddingTop","borderTop","InteractiveMap","_ref7","setOrigin","dest","setDest","stops","trafficIncidents","lastUpdate","onRefresh","showTraffic","setShowTraffic","showRoute","setShowRoute","showStops","setShowStops","mapStyle","setMapStyle","isRefreshing","setIsRefreshing","center","routeLine","mapTiles","standard","transport","dark","handleManualRefresh","left","disabled","opacity","value","onChange","outline","appearance","WebkitAppearance","MozAppearance","backgroundImage","backgroundRepeat","backgroundPosition","backgroundSize","paddingRight","borderColor","zoom","attribution","url","positions","pathOptions","weight","dashArray","lineCap","lineJoin","toFixed","slice","distance_m","stop_id","incident","_incident$location","hasCoords","location","coordinates","idx","_incident$location2","isCritical","severity","Array","isArray","console","warn","timeStr","start_time","Date","toLocaleTimeString","maxWidth","summary","affected_routes","radius","fillColor","fillOpacity","Boolean","AuthPanel","_ref8","token","setToken","username","setUsername","mode","setMode","user","setUser","pass","setPass","email","setEmail","showPass","setShowPass","error","setError","loading","setLoading","strength","setStrength","rememberMe","setRememberMe","showAuthModal","setShowAuthModal","t","localStorage","getItem","sessionStorage","u","score","test","validateEmail","submit","preventDefault","payload","password","r","fetch","method","headers","JSON","stringify","json","ok","Error","detail","storage","setItem","now","toString","logout","setIsAuthenticated","removeItem","getStrengthColor","getStrengthText","placeItems","toUpperCase","inset","stopPropagation","textAlign","onSubmit","placeholder","autoComplete","justifyContent","overflow","userSelect","checked","LoginPage","_ref9","onLogin","isVerifying","minHeight","src","alt","margin","objectFit","onError","pointerEvents","required","App","_analyticsData$total_","_analyticsData$avg_mc","_analyticsData$avg_du","_analyticsData$avg_tr","_analyticsData$total_2","_analyticsData$total_3","_ref10","_analyticsData$system","_analyticsData$avg_mc2","_analyticsData$total_4","_analyticsData$total_5","_ref11","_analyticsData$total_6","isAuthenticated","setIsVerifying","setStops","itins","setItins","banner","setBanner","selectedStop","setSelectedStop","departures","setDepartures","alerts","setAlerts","setTrafficIncidents","lastTrafficUpdate","setLastTrafficUpdate","alts","setAlts","view","setView","expandedItin","setExpandedItin","modes","setModes","optimize","setOptimize","maxWalkKm","setMaxWalkKm","avoidStairs","setAvoidStairs","bikeOk","setBikeOk","whenType","setWhenType","whenValue","setWhenValue","weather","setWeather","safetyContacts","setSafetyContacts","uiLang","setUiLang","currency","setCurrency","amount","setAmount","reviews","setReviews","reviewLoc","setReviewLoc","reviewRating","setReviewRating","reviewComment","setReviewComment","originSearch","setOriginSearch","destSearch","setDestSearch","originName","setOriginName","destName","setDestName","searchResults","setSearchResults","searchingFor","setSearchingFor","mcdaProfile","setMcdaProfile","showMcdaBreakdown","setShowMcdaBreakdown","analyticsData","setAnalyticsData","text","convertedAmount","Number","mounted","verifySession","savedToken","savedUser","response","log","window","__atisReady","then","catch","traffic","forecast","contacts","timeoutId","clearTimeout","getRelativeTime","timestamp","seconds","Math","floor","minutes","hours","refreshTrafficData","err","refreshTraffic","intervalId","setInterval","clearInterval","forceUpdate","timer","viewDepartures","data","plan","_d$context","depart_at","arrive_by","max_walk_km","parseFloat","avoid_stairs","bike_ok","itineraries","context","weatherAlert","trackTrip","itinerary","loadAnalytics","blob","URL","createObjectURL","a","href","download","revokeObjectURL","_data$alternative","_data$alternative2","_data$alternative3","current_itinerary","incidents","preferences","enhancedAlternative","_objectSpread","alternative","reason","benefits","warnings","comparison","timeDiff","round","transferDiff","transfers","walkDiff","walk_distance","prev","id","authHeaders","savePrefs","alert","lang","home","work","languageOptions","Object","keys","currencyOptions","saveOfflinePack","snapshot","saved","updateSavedPlace","key","coords","store","parse","charAt","submitReview","rating","comment","status","toggleMode","m","includes","x","swapOD","o","oName","navigator","clipboard","writeText","searchLocation","query","encodeURIComponent","filteredResults","result","display_name","toLowerCase","sort","b","priorityTypes","aHasPriority","bHasPriority","selectLocation","lon","split","closeSearchDropdown","useCurrentLocation","geolocation","getCurrentPosition","latitude","longitude","_data$address","_data$address2","_data$address3","address","suburb","city","town","handleLogin","willChange","borderBottom","nextElementSibling","flexWrap","v","textTransform","flex","condition","tempC","windKph","paddingLeft","i","flexBasis","gridTemplateColumns","onFocus","select","maxHeight","overflowY","_result$address","borderLeft","join","trim","fontStyle","_result$address2","min","max","step","alignSelf","it","_it$walk_km","_alts$it$id$compariso","_alts$it$id$compariso2","durationMin","reliability","legs","walk_km","environmental","co2_saved_kg","co2_saved_percent","stairs","leg","legIdx","isWalk","isBus","isTrain","isFerry","isBike","routeMatch","match","routeNumber","paddingBottom","l","ceil","random","mcda_score","mcda_rank","mcda_recommendation","mcda_breakdown","entries","_ref0","criterion","mcda_weights","_ref1","k","total_co2_kg","total_distance_km","trees_equivalent","distance_km","co2_kg","eco_score","marginLeft","benefit","warning","note","s","route","headsign","departure_in_min","c","phone","code","n","total_trips","active_users_7d","total_co2_saved_kg","avg_mcda_score","avg_duration_min","avg_transfers","car_trips_avoided","total_users","total_searches","system_uptime_days"],"sources":["C:/Users/mdvec/OneDrive/Documents/YOOBEE-MSE/TERM2/MSE806 Intelligent Transportation Systems/ATIS/ATIS/atis-frontend-react/src/App.js"],"sourcesContent":["import { useEffect, useState, useMemo, useCallback } from 'react'\nimport { MapContainer, TileLayer, Marker, Popup, useMapEvents, Circle, Polyline, useMap } from 'react-leaflet'\nimport 'leaflet/dist/leaflet.css'\nimport L from 'leaflet'\n\nconst API = '' // CRA proxy forwards to backend\n\n// Simple toast notification system\nconst toast = (message, type = 'info') => {\n  const toastEl = document.createElement('div')\n  toastEl.textContent = message\n  toastEl.style.cssText = `\n    position: fixed;\n    top: 20px;\n    right: 20px;\n    padding: 12px 20px;\n    background: ${type === 'success' ? '#10b981' : type === 'error' ? '#ef4444' : '#3b82f6'};\n    color: white;\n    border-radius: 8px;\n    box-shadow: 0 4px 12px rgba(0,0,0,0.3);\n    z-index: 10000;\n    font-size: 14px;\n    font-weight: 600;\n    animation: slideIn 0.3s ease-out;\n  `\n  document.body.appendChild(toastEl)\n  setTimeout(() => {\n    toastEl.style.animation = 'slideOut 0.3s ease-in'\n    setTimeout(() => document.body.removeChild(toastEl), 300)\n  }, 3000)\n}\n\n// Fix Leaflet default icon issue with webpack\ndelete L.Icon.Default.prototype._getIconUrl\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png',\n  iconUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png',\n  shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',\n})\n\n// Custom map icons for different features\nconst mapIcons = {\n  origin: new L.Icon({\n    iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png',\n    shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',\n    iconSize: [25, 41],\n    iconAnchor: [12, 41],\n    popupAnchor: [1, -34],\n    shadowSize: [41, 41]\n  }),\n  destination: new L.Icon({\n    iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png',\n    shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',\n    iconSize: [25, 41],\n    iconAnchor: [12, 41],\n    popupAnchor: [1, -34],\n    shadowSize: [41, 41]\n  }),\n  stop: new L.Icon({\n    iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png',\n    shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',\n    iconSize: [25, 41],\n    iconAnchor: [12, 41],\n    popupAnchor: [1, -34],\n    shadowSize: [41, 41]\n  }),\n  trafficWarning: new L.Icon({\n    iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-orange.png',\n    shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',\n    iconSize: [25, 41],\n    iconAnchor: [12, 41],\n    popupAnchor: [1, -34],\n    shadowSize: [41, 41]\n  }),\n  trafficCritical: new L.Icon({\n    iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-violet.png',\n    shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',\n    iconSize: [25, 41],\n    iconAnchor: [12, 41],\n    popupAnchor: [1, -34],\n    shadowSize: [41, 41]\n  })\n}\n\nconst TRANSLATIONS = {\n  en: {\n    name: 'Advanced Traveler Information System',\n    tagline: 'Real-time, multimodal trip planning with intelligent route optimization.',\n    translatorLabel: 'Preferred language',\n    offlineCta: 'Save offline snapshot',\n    shareLocation: 'Share Location',\n    copyCoords: 'Copy Coordinates',\n    locationCopied: 'Location copied!',\n    tripPlanning: 'Trip planning & dynamic routing',\n    realTimeSnapshot: 'Real-time snapshot',\n    weatherNow: 'Weather now',\n    alertsIncidents: 'Alerts & incidents',\n    noAlerts: 'No active alerts right now.',\n    findItineraries: 'Find itineraries',\n    exportPdf: 'Export PDF',\n    suggestAlt: 'Suggest alternative',\n    emergencyContacts: 'Emergency Contacts'\n  },\n  es: {\n    name: 'InformaciÃ³n de Viaje Avanzada',\n    tagline: 'PlanificaciÃ³n de viajes multimodal con datos en tiempo real.',\n    translatorLabel: 'Idioma preferido',\n    offlineCta: 'Guardar informaciÃ³n sin conexiÃ³n',\n    shareLocation: 'Compartir UbicaciÃ³n',\n    copyCoords: 'Copiar Coordenadas',\n    locationCopied: 'Â¡UbicaciÃ³n copiada!',\n    tripPlanning: 'PlanificaciÃ³n y enrutamiento dinÃ¡mico',\n    realTimeSnapshot: 'InstantÃ¡nea en tiempo real',\n    weatherNow: 'Clima ahora',\n    alertsIncidents: 'Alertas e incidentes',\n    noAlerts: 'No hay alertas activas ahora.',\n    findItineraries: 'Buscar itinerarios',\n    exportPdf: 'Exportar PDF',\n    suggestAlt: 'Sugerir alternativa',\n    emergencyContacts: 'Contactos de Emergencia'\n  },\n  tl: {\n    name: 'Advanced na Impormasyon sa Paglalakbay',\n    tagline: 'Real-time na pagpaplano ng biyahe gamit ang matalinong mungkahi.',\n    translatorLabel: 'Gustong wika',\n    offlineCta: 'I-save ang offline na snapshot',\n    shareLocation: 'Ibahagi ang Lokasyon',\n    copyCoords: 'Kopyahin ang Coordinates',\n    locationCopied: 'Nakopya ang lokasyon!',\n    tripPlanning: 'Pagpaplano ng biyahe at dynamic na ruta',\n    realTimeSnapshot: 'Real-time na snapshot',\n    weatherNow: 'Panahon ngayon',\n    alertsIncidents: 'Mga alerto at insidente',\n    noAlerts: 'Walang aktibong alerto ngayon.',\n    findItineraries: 'Maghanap ng itinerary',\n    exportPdf: 'I-export ang PDF',\n    suggestAlt: 'Magmungkahi ng alternatibo',\n    emergencyContacts: 'Emergency na Contacts'\n  },\n  zh: {\n    name: 'é«˜çº§æ—…è¡Œä¿¡æ¯ç³»ç»Ÿ',\n    tagline: 'å®žæ—¶å¤šæ¨¡å¼è¡Œç¨‹è§„åˆ’ä¸Žæ™ºèƒ½å»ºè®®',\n    translatorLabel: 'é¦–é€‰è¯­è¨€',\n    offlineCta: 'ä¿å­˜ç¦»çº¿å¿«ç…§',\n    shareLocation: 'åˆ†äº«ä½ç½®',\n    copyCoords: 'å¤åˆ¶åæ ‡',\n    locationCopied: 'ä½ç½®å·²å¤åˆ¶ï¼',\n    tripPlanning: 'è¡Œç¨‹è§„åˆ’ä¸ŽåŠ¨æ€è·¯çº¿',\n    realTimeSnapshot: 'å®žæ—¶å¿«ç…§',\n    weatherNow: 'å½“å‰å¤©æ°”',\n    alertsIncidents: 'è­¦æŠ¥å’Œäº‹ä»¶',\n    noAlerts: 'ç›®å‰æ²¡æœ‰æ´»åŠ¨è­¦æŠ¥',\n    findItineraries: 'æŸ¥æ‰¾è¡Œç¨‹',\n    exportPdf: 'å¯¼å‡ºPDF',\n    suggestAlt: 'å»ºè®®æ›¿ä»£æ–¹æ¡ˆ',\n    emergencyContacts: 'ç´§æ€¥è”ç³»äºº'\n  }\n}\n\nconst CURRENCY_RATES = {\n  NZD: 1,\n  USD: 0.59,\n  EUR: 0.55,\n  AUD: 0.91\n}\n\nfunction Chip({children}){ return <span className=\"chip\" style={{marginRight:6}}>{children}</span> }\n\nfunction FeatureCard({title, description, children, icon}){\n  return (\n    <section className=\"card\" style={{marginBottom:32}}>\n      <div style={{marginBottom:24}}>\n        <div style={{display:'flex', alignItems:'center', gap:16, marginBottom:10}}>\n          {icon && <div style={{fontSize:42, filter:'drop-shadow(0 4px 8px rgba(0,0,0,0.2))'}}>{icon}</div>}\n          <div>\n            <div style={{fontSize:26, fontWeight:800, background:'linear-gradient(135deg, #667eea 0%, #764ba2 100%)', WebkitBackgroundClip:'text', WebkitTextFillColor:'transparent', backgroundClip:'text', letterSpacing:'-0.5px'}}>{title}</div>\n            {description && <div style={{color:'var(--muted)', fontSize:15, marginTop:6, lineHeight:1.6}}>{description}</div>}\n          </div>\n        </div>\n      </div>\n      <div>{children}</div>\n    </section>\n  )\n}\n\nfunction DraggableMarker({ position, setPosition, label }) {\n  const [draggable, setDraggable] = useState(true)\n  \n  const eventHandlers = {\n    dragend(e) {\n      const marker = e.target\n      const pos = marker.getLatLng()\n      setPosition([pos.lat, pos.lng])\n    },\n  }\n\n  return (\n    <Marker\n      draggable={draggable}\n      eventHandlers={eventHandlers}\n      position={position}\n      icon={mapIcons.origin}\n    >\n      <Popup minWidth={90}>\n        <span onClick={() => setDraggable((d) => !d)}>\n          {label}<br/>\n          <small style={{color:'#666'}}>{draggable ? 'Draggable' : 'Click to make draggable'}</small>\n        </span>\n      </Popup>\n    </Marker>\n  )\n}\n\nfunction MapClickHandler({ onMapClick }) {\n  useMapEvents({\n    click(e) {\n      if (onMapClick) {\n        onMapClick([e.latlng.lat, e.latlng.lng])\n      }\n    },\n  })\n  return null\n}\n\n// Component to handle \"My Location\" button\nfunction RecenterButton({ position }) {\n  const map = useMap()\n  \n  const recenter = () => {\n    map.flyTo(position, 15, {\n      duration: 1.5\n    })\n  }\n  \n  return (\n    <button\n      onClick={recenter}\n      style={{\n        position: 'absolute',\n        top: 64,\n        right: 10,\n        zIndex: 1000,\n        padding: '10px 16px',\n        background: 'white',\n        border: '2px solid rgba(0,0,0,0.2)',\n        borderRadius: 8,\n        cursor: 'pointer',\n        fontSize: 14,\n        fontWeight: 600,\n        boxShadow: '0 2px 8px rgba(0,0,0,0.15)',\n        display: 'flex',\n        alignItems: 'center',\n        gap: 6,\n        transition: 'all 0.2s',\n        minWidth: 200\n      }}\n      onMouseEnter={(e) => {\n        e.currentTarget.style.background = '#3b82f6'\n        e.currentTarget.style.color = 'white'\n        e.currentTarget.style.transform = 'translateY(-2px)'\n        e.currentTarget.style.boxShadow = '0 4px 16px rgba(59, 130, 246, 0.4)'\n      }}\n      onMouseLeave={(e) => {\n        e.currentTarget.style.background = 'white'\n        e.currentTarget.style.color = '#333'\n        e.currentTarget.style.transform = 'translateY(0)'\n        e.currentTarget.style.boxShadow = '0 2px 8px rgba(0,0,0,0.15)'\n      }}\n      title=\"Center map on your origin location\"\n    >\n      ðŸ“ My Location\n    </button>\n  )\n}\n\nfunction MapLegend({ trafficCount }) {\n  return (\n    <div style={{\n      position: 'absolute',\n      bottom: 20,\n      right: 20,\n      background: 'rgba(255, 255, 255, 0.95)',\n      padding: '12px 16px',\n      borderRadius: 12,\n      boxShadow: '0 4px 12px rgba(0,0,0,0.15)',\n      zIndex: 1000,\n      fontSize: 13,\n      backdropFilter: 'blur(10px)',\n      border: '1px solid rgba(0,0,0,0.1)'\n    }}>\n      <div style={{fontWeight:700, marginBottom:10, fontSize:14, color:'#1a1a1a'}}>\n        ðŸ—ºï¸ Map Legend\n      </div>\n      <div style={{display:'flex', flexDirection:'column', gap:8}}>\n        <div style={{display:'flex', alignItems:'center', gap:8}}>\n          <div style={{width:20, height:20, borderRadius:'50%', background:'#28a745'}}></div>\n          <span style={{color:'#333'}}>Origin (drag to move)</span>\n        </div>\n        <div style={{display:'flex', alignItems:'center', gap:8}}>\n          <div style={{width:20, height:20, borderRadius:'50%', background:'#dc3545'}}></div>\n          <span style={{color:'#333'}}>Destination (click map)</span>\n        </div>\n        <div style={{display:'flex', alignItems:'center', gap:8}}>\n          <div style={{width:20, height:20, borderRadius:'50%', background:'#007bff'}}></div>\n          <span style={{color:'#333'}}>Transit Stops</span>\n        </div>\n        <div style={{display:'flex', alignItems:'center', gap:8}}>\n          <div style={{width:20, height:20, borderRadius:'50%', background:'#fd7e14'}}></div>\n          <span style={{color:'#333'}}>Traffic Warning</span>\n        </div>\n        <div style={{display:'flex', alignItems:'center', gap:8}}>\n          <div style={{width:20, height:20, borderRadius:'50%', background:'#6f42c1'}}></div>\n          <span style={{color:'#333'}}>Traffic Critical</span>\n        </div>\n        {trafficCount > 0 && (\n          <div style={{\n            marginTop:8, \n            paddingTop:8, \n            borderTop:'1px solid rgba(0,0,0,0.1)',\n            fontSize:12,\n            color:'#666',\n            display:'flex',\n            alignItems:'center',\n            gap:6\n          }}>\n            <span style={{\n              display:'inline-block',\n              width:8,\n              height:8,\n              borderRadius:'50%',\n              background:'#ff4444',\n              animation:'pulse 2s infinite'\n            }}></span>\n            {trafficCount} active traffic incident{trafficCount !== 1 ? 's' : ''}\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n\nfunction InteractiveMap({ origin, setOrigin, dest, setDest, stops, trafficIncidents = [], lastUpdate, onRefresh }) {\n  const [showTraffic, setShowTraffic] = useState(true)\n  const [showRoute, setShowRoute] = useState(true)\n  const [showStops, setShowStops] = useState(true)\n  const [mapStyle, setMapStyle] = useState('standard')\n  const [isRefreshing, setIsRefreshing] = useState(false)\n  const center = origin\n  \n  // Calculate route line between origin and destination\n  const routeLine = [origin, dest]\n  \n  // Map tile URLs for different styles\n  const mapTiles = {\n    standard: 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n    transport: 'https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png',\n    dark: 'https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png'\n  }\n  \n  // Manual refresh handler with animation\n  const handleManualRefresh = async () => {\n    setIsRefreshing(true)\n    await onRefresh()\n    setTimeout(() => setIsRefreshing(false), 1000)\n  }\n  \n  return (\n    <div style={{position:'relative', height:'100%', width:'100%'}}>\n      {/* Real-Time Update Indicator - Top Center */}\n      <div style={{\n        position: 'absolute',\n        top: 10,\n        left: '50%',\n        transform: 'translateX(-50%)',\n        zIndex: 1000,\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        gap: 4\n      }}>\n        <div style={{\n          padding: '8px 16px',\n          background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',\n          color: 'white',\n          border: '2px solid rgba(255,255,255,0.3)',\n          borderRadius: 20,\n          fontSize: 12,\n          fontWeight: 700,\n          boxShadow: '0 4px 12px rgba(16, 185, 129, 0.4)',\n          display: 'flex',\n          alignItems: 'center',\n          gap: 8,\n          animation: 'pulse 2s ease-in-out infinite'\n        }}>\n          <span style={{\n            width: 8,\n            height: 8,\n            borderRadius: '50%',\n            background: '#fff',\n            animation: 'pulse 1.5s ease-in-out infinite',\n            boxShadow: '0 0 8px rgba(255,255,255,0.8)'\n          }}></span>\n          ðŸ”´ LIVE UPDATES\n        </div>\n        {lastUpdate && (\n          <div style={{\n            padding: '4px 12px',\n            background: 'rgba(0,0,0,0.7)',\n            color: 'white',\n            borderRadius: 12,\n            fontSize: 10,\n            fontWeight: 600,\n            backdropFilter: 'blur(10px)'\n          }}>\n            Updated {lastUpdate}\n          </div>\n        )}\n      </div>\n\n      {/* Map Controls Panel - Top Left */}\n      <div style={{\n        position: 'absolute',\n        top: 10,\n        left: 10,\n        zIndex: 1000,\n        display: 'flex',\n        flexDirection: 'column',\n        gap: 8\n      }}>\n        {/* Manual Refresh Button */}\n        <button\n          onClick={handleManualRefresh}\n          disabled={isRefreshing}\n          style={{\n            padding: '10px 16px',\n            background: isRefreshing ? '#10b981' : 'white',\n            color: isRefreshing ? 'white' : '#333',\n            border: '2px solid rgba(0,0,0,0.2)',\n            borderRadius: 8,\n            cursor: isRefreshing ? 'wait' : 'pointer',\n            fontSize: 14,\n            fontWeight: 600,\n            boxShadow: '0 2px 8px rgba(0,0,0,0.15)',\n            display: 'flex',\n            alignItems: 'center',\n            gap: 6,\n            transition: 'all 0.3s',\n            opacity: isRefreshing ? 0.8 : 1\n          }}\n          title=\"Refresh traffic data now\"\n        >\n          <span style={{\n            display: 'inline-block',\n            animation: isRefreshing ? 'spin 1s linear infinite' : 'none'\n          }}>\n            ðŸ”„\n          </span>\n          {isRefreshing ? 'Refreshing...' : 'Refresh'}\n        </button>\n        \n        <button\n          onClick={() => setShowTraffic(!showTraffic)}\n          style={{\n            padding: '10px 16px',\n            background: showTraffic ? '#3b82f6' : 'white',\n            color: showTraffic ? 'white' : '#333',\n            border: '2px solid rgba(0,0,0,0.2)',\n            borderRadius: 8,\n            cursor: 'pointer',\n            fontSize: 14,\n            fontWeight: 600,\n            boxShadow: '0 2px 8px rgba(0,0,0,0.15)',\n            display: 'flex',\n            alignItems: 'center',\n            gap: 6,\n            transition: 'all 0.2s'\n          }}\n          title={showTraffic ? 'Hide traffic incidents' : 'Show traffic incidents'}\n        >\n          ðŸš¦ Traffic {showTraffic ? '(On)' : '(Off)'}\n        </button>\n        <button\n          onClick={() => setShowRoute(!showRoute)}\n          style={{\n            padding: '10px 16px',\n            background: showRoute ? '#3b82f6' : 'white',\n            color: showRoute ? 'white' : '#333',\n            border: '2px solid rgba(0,0,0,0.2)',\n            borderRadius: 8,\n            cursor: 'pointer',\n            fontSize: 14,\n            fontWeight: 600,\n            boxShadow: '0 2px 8px rgba(0,0,0,0.15)',\n            display: 'flex',\n            alignItems: 'center',\n            gap: 6,\n            transition: 'all 0.2s'\n          }}\n          title={showRoute ? 'Hide route line' : 'Show route line'}\n        >\n          ðŸ›£ï¸ Route {showRoute ? '(On)' : '(Off)'}\n        </button>\n        <button\n          onClick={() => setShowStops(!showStops)}\n          style={{\n            padding: '10px 16px',\n            background: showStops ? '#3b82f6' : 'white',\n            color: showStops ? 'white' : '#333',\n            border: '2px solid rgba(0,0,0,0.2)',\n            borderRadius: 8,\n            cursor: 'pointer',\n            fontSize: 14,\n            fontWeight: 600,\n            boxShadow: '0 2px 8px rgba(0,0,0,0.15)',\n            display: 'flex',\n            alignItems: 'center',\n            gap: 6,\n            transition: 'all 0.2s'\n          }}\n          title={showStops ? 'Hide transit stops' : 'Show transit stops'}\n        >\n          ðŸš Stops {showStops ? '(On)' : '(Off)'}\n        </button>\n      </div>\n      \n      {/* Top Right Control Panel */}\n      <div style={{\n        position: 'absolute',\n        top: 10,\n        right: 10,\n        zIndex: 1000,\n        minWidth: 200\n      }}>\n        {/* Map Style Selector */}\n        <select\n          value={mapStyle}\n          onChange={(e) => setMapStyle(e.target.value)}\n          style={{\n            width: '100%',\n            padding: '10px 16px',\n            background: 'white',\n            color: '#333',\n            border: '2px solid rgba(0,0,0,0.2)',\n            borderRadius: 8,\n            cursor: 'pointer',\n            fontSize: 14,\n            fontWeight: 600,\n            boxShadow: '0 2px 8px rgba(0,0,0,0.15)',\n            outline: 'none',\n            appearance: 'none',\n            WebkitAppearance: 'none',\n            MozAppearance: 'none',\n            backgroundImage: 'url(\"data:image/svg+xml;charset=UTF-8,%3csvg xmlns=\\'http://www.w3.org/2000/svg\\' viewBox=\\'0 0 24 24\\' fill=\\'none\\' stroke=\\'currentColor\\' stroke-width=\\'2\\' stroke-linecap=\\'round\\' stroke-linejoin=\\'round\\'%3e%3cpolyline points=\\'6 9 12 15 18 9\\'%3e%3c/polyline%3e%3c/svg%3e\")',\n            backgroundRepeat: 'no-repeat',\n            backgroundPosition: 'right 12px center',\n            backgroundSize: '16px',\n            paddingRight: '36px',\n            display: 'flex',\n            alignItems: 'center',\n            gap: 8,\n            transition: 'all 0.2s'\n          }}\n          onMouseEnter={(e) => {\n            e.currentTarget.style.borderColor = '#3b82f6'\n            e.currentTarget.style.boxShadow = '0 4px 12px rgba(59, 130, 246, 0.3)'\n          }}\n          onMouseLeave={(e) => {\n            e.currentTarget.style.borderColor = 'rgba(0,0,0,0.2)'\n            e.currentTarget.style.boxShadow = '0 2px 8px rgba(0,0,0,0.15)'\n          }}\n          title=\"Change map style\"\n        >\n          <option value=\"standard\">ðŸ—ºï¸ Standard Map</option>\n          <option value=\"transport\">ðŸšŒ Transport Map</option>\n          <option value=\"dark\">ðŸŒ™ Dark Mode</option>\n        </select>\n      </div>\n      \n    <MapContainer center={center} zoom={13} style={{height: '100%', width: '100%', borderRadius: 12}}>\n      <TileLayer\n        attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a>'\n          url={mapTiles[mapStyle]}\n          key={mapStyle}\n        />\n        \n        {/* Route Line - Blue dashed line between origin and destination */}\n        {showRoute && (\n          <Polyline\n            positions={routeLine}\n            pathOptions={{\n              color: '#3b82f6',\n              weight: 4,\n              opacity: 0.7,\n              dashArray: '10, 10',\n              lineCap: 'round',\n              lineJoin: 'round'\n            }}\n          >\n            <Popup>\n              <strong>ðŸ“ Planned Route</strong><br/>\n              <small>From origin to destination</small>\n            </Popup>\n          </Polyline>\n        )}\n        \n        {/* Origin Marker - Green (draggable) */}\n      <DraggableMarker position={origin} setPosition={setOrigin} label=\"Origin (drag me)\" />\n        \n        {/* My Location Button */}\n        <RecenterButton position={origin} />\n        \n        {/* Destination Marker - Red */}\n        <Marker position={dest} icon={mapIcons.destination}>\n          <Popup>\n            <strong>ðŸŽ¯ Destination</strong><br/>\n            <small>{dest[0].toFixed(5)}, {dest[1].toFixed(5)}</small>\n          </Popup>\n      </Marker>\n        \n        {/* Transit Stops - Blue (conditionally shown) */}\n        {showStops && stops.slice(0, 10).map((stop) => (\n          <Marker \n            key={stop.stop_id} \n            position={[stop.lat, stop.lng]} \n            icon={mapIcons.stop}\n          >\n            <Popup>\n              <strong>ðŸš {stop.name}</strong><br/>\n              <small>ðŸ“ {stop.distance_m}m away</small>\n            </Popup>\n        </Marker>\n      ))}\n        \n        {/* Traffic Incidents - Orange/Violet (conditionally shown) */}\n        {showTraffic && trafficIncidents\n          .filter(incident => {\n            // Only show incidents with valid coordinates\n            const hasCoords = incident.location?.coordinates || \n                            (incident.lat != null && incident.lng != null)\n            return hasCoords\n          })\n          .map((incident, idx) => {\n          // Determine severity and icon\n          const isCritical = incident.severity === 'critical' || \n                           incident.severity === 'major' ||\n                           incident.type === 'accident' ||\n                           incident.type === 'closure'\n          const icon = isCritical ? mapIcons.trafficCritical : mapIcons.trafficWarning\n          \n          // Get position - guaranteed to be valid now\n          const position = incident.location?.coordinates || [incident.lat, incident.lng]\n          \n          // Validate position is an array with 2 numbers\n          if (!Array.isArray(position) || position.length !== 2 || \n              typeof position[0] !== 'number' || typeof position[1] !== 'number') {\n            console.warn('Invalid traffic incident position:', incident)\n            return null\n          }\n          \n          // Format time\n          const timeStr = incident.start_time ? new Date(incident.start_time).toLocaleTimeString() : 'Now'\n          \n          return (\n            <div key={`traffic-${idx}`}>\n              <Marker position={position} icon={icon}>\n                <Popup maxWidth={250}>\n                  <div style={{padding:'4px 0'}}>\n                    <strong style={{\n                      color: isCritical ? '#6f42c1' : '#fd7e14',\n                      fontSize:14\n                    }}>\n                      {isCritical ? 'ðŸš¨' : 'âš ï¸'} {incident.title || incident.type || 'Traffic Incident'}\n                    </strong>\n                    <div style={{marginTop:8, fontSize:13, lineHeight:1.5}}>\n                      {incident.description || incident.summary || 'Traffic disruption reported'}\n                    </div>\n                    <div style={{\n                      marginTop:8, \n                      paddingTop:8, \n                      borderTop:'1px solid #eee',\n                      fontSize:11,\n                      color:'#666'\n                    }}>\n                      <div><strong>Severity:</strong> {incident.severity || 'moderate'}</div>\n                      {incident.affected_routes && (\n                        <div><strong>Routes:</strong> {incident.affected_routes}</div>\n                      )}\n                      <div><strong>Time:</strong> {timeStr}</div>\n                    </div>\n                  </div>\n                </Popup>\n              </Marker>\n              \n              {/* Add radius circle for critical incidents */}\n              {isCritical && (\n                <Circle\n                  center={position}\n                  radius={500}\n                  pathOptions={{\n                    color: '#6f42c1',\n                    fillColor: '#6f42c1',\n                    fillOpacity: 0.1,\n                    weight: 2,\n                    dashArray: '5, 5'\n                  }}\n                />\n              )}\n            </div>\n          )\n        }).filter(Boolean)}\n        \n      <MapClickHandler onMapClick={setDest} />\n    </MapContainer>\n      \n      {/* Add the legend */}\n      <MapLegend trafficCount={showTraffic ? trafficIncidents.length : 0} />\n    </div>\n  )\n}\n\nfunction AuthPanel({token, setToken, username, setUsername}){\n  const [mode, setMode] = useState('login')\n  const [user, setUser] = useState('')\n  const [pass, setPass] = useState('')\n  const [email, setEmail] = useState('')\n  const [showPass, setShowPass] = useState(false)\n  const [error, setError] = useState('')\n  const [loading, setLoading] = useState(false)\n  const [strength, setStrength] = useState(0)\n  const [rememberMe, setRememberMe] = useState(true)\n  const [showAuthModal, setShowAuthModal] = useState(false)\n\n  useEffect(()=>{\n    const t = localStorage.getItem('atis_token') || sessionStorage.getItem('atis_token')\n    const u = localStorage.getItem('atis_user') || sessionStorage.getItem('atis_user')\n    if (t && u){ setToken(t); setUsername(u) }\n  }, [setToken, setUsername])\n\n  useEffect(() => {\n    if (mode === 'register' && pass) {\n      let score = 0\n      if (pass.length >= 8) score++\n      if (pass.length >= 12) score++\n      if (/[a-z]/.test(pass) && /[A-Z]/.test(pass)) score++\n      if (/[0-9]/.test(pass)) score++\n      if (/[^a-zA-Z0-9]/.test(pass)) score++\n      setStrength(score)\n    }\n  }, [pass, mode])\n\n  const validateEmail = (email) => {\n    return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email)\n  }\n\n  const submit = async (e) => {\n    e?.preventDefault()\n    setError('')\n    \n    // Validation\n    if (!user || user.length < 3) {\n      setError('Username must be at least 3 characters')\n      return\n    }\n    if (!pass || pass.length < 6) {\n      setError('Password must be at least 6 characters')\n      return\n    }\n    if (mode === 'register') {\n      if (!email || !validateEmail(email)) {\n        setError('Please enter a valid email address')\n        return\n      }\n      if (strength < 3) {\n        setError('Password is too weak. Use mix of letters, numbers, and symbols.')\n        return\n      }\n    }\n    \n    setLoading(true)\n    try{\n      const payload = mode === 'register' \n        ? {username: user, password: pass, email: email}\n        : {username: user, password: pass}\n      \n      const r = await fetch(`${API}/auth/${mode}`, { \n        method:'POST', \n        headers:{'Content-Type':'application/json'}, \n        body: JSON.stringify(payload) \n      })\n      const d = await r.json()\n      if (!r.ok) throw new Error(d.detail || 'Authentication failed')\n      \n      setToken(d.token); setUsername(d.username)\n      \n      // Store based on remember me preference\n      const storage = rememberMe ? localStorage : sessionStorage\n      storage.setItem('atis_token', d.token)\n      storage.setItem('atis_user', d.username)\n      storage.setItem('atis_login_time', Date.now().toString())\n      \n      setUser(''); setPass(''); setEmail('')\n      setShowAuthModal(false)\n    }catch(e){ \n      setError(e.message)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const logout = () => { \n    setToken(null)\n    setUsername(null)\n    setIsAuthenticated(false)\n    localStorage.removeItem('atis_token')\n    localStorage.removeItem('atis_user')\n    localStorage.removeItem('atis_login_time')\n    sessionStorage.removeItem('atis_token')\n    sessionStorage.removeItem('atis_user')\n    sessionStorage.removeItem('atis_login_time')\n    toast('ðŸ‘‹ Logged out')\n  }\n\n  const getStrengthColor = () => {\n    if (strength <= 2) return '#ef4444'\n    if (strength <= 3) return '#f59e0b'\n    return '#10b981'\n  }\n\n  const getStrengthText = () => {\n    if (strength <= 2) return 'Weak'\n    if (strength <= 3) return 'Medium'\n    return 'Strong'\n  }\n\n  if (token) {\n    return (\n      <div style={{display:'flex', alignItems:'center', gap:16}}>\n        <div className=\"pill\" style={{display:'flex', alignItems:'center', gap:10}}>\n          <div style={{width:32, height:32, borderRadius:'50%', background:'var(--gradient-1)', display:'grid', placeItems:'center', color:'white', fontWeight:700, fontSize:14}}>\n            {username[0].toUpperCase()}\n          </div>\n          <div>\n            <div style={{fontSize:13, fontWeight:600}}>{username}</div>\n            <div style={{fontSize:11, color:'var(--muted)'}}>Verified</div>\n          </div>\n        </div>\n        <button className=\"btn btn-danger\" onClick={logout}>ðŸšª Logout</button>\n      </div>\n    )\n  }\n\n  return (\n    <>\n      <button className=\"btn btn-primary\" onClick={() => setShowAuthModal(true)}>\n        ðŸ” Sign In\n      </button>\n      \n      {showAuthModal && (\n        <div style={{position:'fixed', inset:0, background:'rgba(0,0,0,0.7)', backdropFilter:'blur(8px)', display:'grid', placeItems:'center', zIndex:9999, padding:20}} onClick={() => setShowAuthModal(false)}>\n          <div style={{background:'var(--glass-bg)', backdropFilter:'blur(30px)', border:'1px solid var(--glass-border)', borderRadius:28, padding:40, maxWidth:480, width:'100%', boxShadow:'var(--card-shadow)'}} onClick={e => e.stopPropagation()}>\n            <div style={{textAlign:'center', marginBottom:32}}>\n              <div style={{fontSize:32, marginBottom:12}}>ðŸ”</div>\n              <h2 style={{fontSize:28, fontWeight:800, marginBottom:8, background:'var(--gradient-1)', WebkitBackgroundClip:'text', WebkitTextFillColor:'transparent'}}>\n                {mode === 'login' ? 'Welcome Back' : 'Create Account'}\n              </h2>\n              <p style={{color:'var(--muted)', fontSize:14}}>\n                {mode === 'login' ? 'Sign in to access your personalized travel experience' : 'Join ATIS for smart route planning'}\n              </p>\n            </div>\n\n            <form onSubmit={submit} style={{display:'flex', flexDirection:'column', gap:20}}>\n              <div>\n                <label style={{display:'block', marginBottom:8, fontSize:13, fontWeight:600, color:'var(--muted)'}}>Username</label>\n                <input \n                  type=\"text\"\n                  placeholder=\"Enter username\" \n                  value={user} \n                  onChange={e=>setUser(e.target.value)}\n                  style={{width:'100%'}}\n                  autoComplete=\"username\"\n                  disabled={loading}\n                />\n              </div>\n\n              {mode === 'register' && (\n                <div>\n                  <label style={{display:'block', marginBottom:8, fontSize:13, fontWeight:600, color:'var(--muted)'}}>Email</label>\n                  <input \n                    type=\"email\"\n                    placeholder=\"your.email@example.com\" \n                    value={email} \n                    onChange={e=>setEmail(e.target.value)}\n                    style={{width:'100%'}}\n                    autoComplete=\"email\"\n                    disabled={loading}\n                  />\n                </div>\n              )}\n\n              <div>\n                <label style={{display:'block', marginBottom:8, fontSize:13, fontWeight:600, color:'var(--muted)'}}>Password</label>\n                <div style={{position:'relative'}}>\n                  <input \n                    type={showPass ? 'text' : 'password'}\n                    placeholder=\"Enter password\" \n                    value={pass} \n                    onChange={e=>setPass(e.target.value)}\n                    style={{width:'100%', paddingRight:45}}\n                    autoComplete={mode === 'login' ? 'current-password' : 'new-password'}\n                    disabled={loading}\n                  />\n                  <button \n                    type=\"button\"\n                    onClick={() => setShowPass(!showPass)}\n                    style={{position:'absolute', right:12, top:'50%', transform:'translateY(-50%)', background:'none', border:'none', cursor:'pointer', fontSize:18}}\n                  >\n                    {showPass ? 'ðŸ‘ï¸' : 'ðŸ‘ï¸â€ðŸ—¨ï¸'}\n                  </button>\n                </div>\n                {mode === 'register' && pass && (\n                  <div style={{marginTop:8}}>\n                    <div style={{display:'flex', justifyContent:'space-between', alignItems:'center', marginBottom:4}}>\n                      <span style={{fontSize:12, color:'var(--muted)'}}>Password strength:</span>\n                      <span style={{fontSize:12, fontWeight:600, color:getStrengthColor()}}>{getStrengthText()}</span>\n                    </div>\n                    <div style={{height:4, background:'rgba(255,255,255,0.1)', borderRadius:2, overflow:'hidden'}}>\n                      <div style={{height:'100%', width:`${(strength / 5) * 100}%`, background:getStrengthColor(), transition:'all 0.3s'}}></div>\n                    </div>\n                  </div>\n                )}\n              </div>\n\n              {mode === 'login' && (\n                <label style={{display:'flex', alignItems:'center', gap:8, cursor:'pointer', userSelect:'none'}}>\n                  <input \n                    type=\"checkbox\" \n                    checked={rememberMe} \n                    onChange={e => setRememberMe(e.target.checked)}\n                    disabled={loading}\n                  />\n                  <span style={{fontSize:13, color:'var(--muted)'}}>Remember me for 30 days</span>\n                </label>\n              )}\n\n              {error && (\n                <div style={{padding:12, background:'rgba(239, 68, 68, 0.1)', border:'1px solid var(--danger)', borderRadius:12, color:'var(--danger)', fontSize:13, textAlign:'center'}}>\n                  âš ï¸ {error}\n                </div>\n              )}\n\n              <button \n                type=\"submit\" \n                className=\"btn btn-primary\" \n                style={{width:'100%', padding:16, fontSize:16}}\n                disabled={loading}\n              >\n                {loading ? 'â³ Processing...' : mode === 'login' ? 'ðŸš€ Sign In' : 'âœ¨ Create Account'}\n              </button>\n\n              <div style={{textAlign:'center'}}>\n                <button \n                  type=\"button\"\n                  onClick={() => {setMode(mode === 'login' ? 'register' : 'login'); setError('')}}\n                  style={{background:'none', border:'none', color:'var(--primary)', cursor:'pointer', fontSize:14, fontWeight:600}}\n                  disabled={loading}\n                >\n                  {mode === 'login' ? \"Don't have an account? Sign up\" : 'Already have an account? Sign in'}\n                </button>\n              </div>\n            </form>\n\n            <button \n              onClick={() => setShowAuthModal(false)}\n              style={{position:'absolute', top:20, right:20, background:'var(--glass-bg)', border:'1px solid var(--glass-border)', borderRadius:'50%', width:36, height:36, display:'grid', placeItems:'center', cursor:'pointer', fontSize:18}}\n            >\n              âœ•\n            </button>\n          </div>\n        </div>\n      )}\n    </>\n  )\n}\n\nfunction LoginPage({onLogin, isVerifying}){\n  const [mode, setMode] = useState('login')\n  const [user, setUser] = useState('')\n  const [pass, setPass] = useState('')\n  const [email, setEmail] = useState('')\n  const [showPass, setShowPass] = useState(false)\n  const [error, setError] = useState('')\n  const [loading, setLoading] = useState(false)\n  const [strength, setStrength] = useState(0)\n\n  useEffect(() => {\n    if (mode === 'register' && pass) {\n      let score = 0\n      if (pass.length >= 8) score++\n      if (pass.length >= 12) score++\n      if (/[a-z]/.test(pass) && /[A-Z]/.test(pass)) score++\n      if (/[0-9]/.test(pass)) score++\n      if (/[^a-zA-Z0-9]/.test(pass)) score++\n      setStrength(score)\n    }\n  }, [pass, mode])\n\n  const validateEmail = (email) => {\n    return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email)\n  }\n\n  const submit = async (e) => {\n    e?.preventDefault()\n    setError('')\n    \n    if (!user || user.length < 3) {\n      setError('Username must be at least 3 characters')\n      return\n    }\n    if (!pass || pass.length < 6) {\n      setError('Password must be at least 6 characters')\n      return\n    }\n    if (mode === 'register') {\n      if (!email || !validateEmail(email)) {\n        setError('Please enter a valid email address')\n        return\n      }\n      if (strength < 3) {\n        setError('Password is too weak. Use mix of letters, numbers, and symbols.')\n        return\n      }\n    }\n    \n    setLoading(true)\n    try{\n      const payload = mode === 'register' \n        ? {username: user, password: pass, email: email}\n        : {username: user, password: pass}\n      \n      const r = await fetch(`${API}/auth/${mode}`, { \n        method:'POST', \n        headers:{'Content-Type':'application/json'}, \n        body: JSON.stringify(payload) \n      })\n      const d = await r.json()\n      if (!r.ok) throw new Error(d.detail || 'Authentication failed')\n      \n      localStorage.setItem('atis_token', d.token)\n      localStorage.setItem('atis_user', d.username)\n      localStorage.setItem('atis_login_time', Date.now().toString())\n      \n      onLogin(d.token, d.username)\n    }catch(e){ \n      setError(e.message)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const getStrengthColor = () => {\n    if (strength <= 2) return '#ef4444'\n    if (strength <= 3) return '#f59e0b'\n    return '#10b981'\n  }\n\n  const getStrengthText = () => {\n    if (strength <= 2) return 'Weak'\n    if (strength <= 3) return 'Medium'\n    return 'Strong'\n  }\n\n  return (\n    <div style={{minHeight:'100vh', display:'flex', alignItems:'center', justifyContent:'center', padding:20, position:'relative', overflow:'hidden', background:'#0a0e27'}}>\n      {/* Animated background gradient circles */}\n      <div style={{position:'absolute', top:'-10%', left:'-5%', width:'500px', height:'500px', background:'radial-gradient(circle, rgba(102, 126, 234, 0.3) 0%, transparent 70%)', filter:'blur(80px)', animation:'float 8s ease-in-out infinite'}}></div>\n      <div style={{position:'absolute', bottom:'-10%', right:'-5%', width:'500px', height:'500px', background:'radial-gradient(circle, rgba(139, 92, 246, 0.3) 0%, transparent 70%)', filter:'blur(80px)', animation:'float 10s ease-in-out infinite reverse'}}></div>\n      \n      <div style={{maxWidth:480, width:'100%', position:'relative', zIndex:1}}>\n        {/* Logo and Welcome Section */}\n        <div style={{textAlign:'center', marginBottom:40}}>\n          <img \n            src=\"/atis-logo.jpg\" \n            alt=\"ATIS Logo\" \n            style={{width:120, height:120, margin:'0 auto 24px', filter:'drop-shadow(0 8px 24px rgba(0,0,0,0.3))', objectFit:'contain', borderRadius:24}}\n            onError={(e) => {\n              e.target.style.display = 'none'\n            }}\n          />\n          <h1 style={{fontSize:42, fontWeight:900, marginBottom:12, background:'linear-gradient(135deg, #667eea 0%, #764ba2 100%)', WebkitBackgroundClip:'text', WebkitTextFillColor:'transparent', letterSpacing:'-1px'}}>\n            Welcome to ATIS\n          </h1>\n          <p style={{fontSize:16, color:'var(--muted)', marginBottom:8}}>Advanced Traveler Information System</p>\n          <p style={{fontSize:14, color:'var(--muted)'}}>\n            {isVerifying ? 'ðŸ”„ Verifying session...' : 'Intelligent route planning for smarter journeys'}\n          </p>\n        </div>\n\n        {/* Login Form Card */}\n        <div style={{background:'var(--glass-bg)', backdropFilter:'blur(30px)', border:'1px solid var(--glass-border)', borderRadius:28, padding:40, boxShadow:'var(--card-shadow)', opacity: isVerifying ? 0.6 : 1, pointerEvents: isVerifying ? 'none' : 'auto', transition:'opacity 0.2s'}}>\n          <div style={{textAlign:'center', marginBottom:32}}>\n            <h2 style={{fontSize:26, fontWeight:800, marginBottom:8}}>\n              {isVerifying ? 'â³ Loading...' : mode === 'login' ? 'ðŸ” Sign In' : 'âœ¨ Create Account'}\n            </h2>\n            <p style={{color:'var(--muted)', fontSize:14}}>\n              {isVerifying ? 'Please wait...' : mode === 'login' ? 'Access your personalized travel experience' : 'Join for smart route planning'}\n            </p>\n          </div>\n\n          <form onSubmit={submit} style={{display:'flex', flexDirection:'column', gap:20}}>\n            <div>\n              <label style={{display:'block', marginBottom:8, fontSize:13, fontWeight:600, color:'var(--muted)'}}>Username</label>\n              <input \n                type=\"text\"\n                placeholder=\"Enter username\" \n                value={user} \n                onChange={e=>setUser(e.target.value)}\n                style={{width:'100%'}}\n                autoComplete=\"username\"\n                disabled={loading}\n                required\n              />\n            </div>\n\n            {mode === 'register' && (\n              <div>\n                <label style={{display:'block', marginBottom:8, fontSize:13, fontWeight:600, color:'var(--muted)'}}>Email</label>\n                <input \n                  type=\"email\"\n                  placeholder=\"your.email@example.com\" \n                  value={email} \n                  onChange={e=>setEmail(e.target.value)}\n                  style={{width:'100%'}}\n                  autoComplete=\"email\"\n                  disabled={loading}\n                  required\n                />\n              </div>\n            )}\n\n            <div>\n              <label style={{display:'block', marginBottom:8, fontSize:13, fontWeight:600, color:'var(--muted)'}}>Password</label>\n              <div style={{position:'relative'}}>\n                <input \n                  type={showPass ? 'text' : 'password'}\n                  placeholder=\"Enter password\" \n                  value={pass} \n                  onChange={e=>setPass(e.target.value)}\n                  style={{width:'100%', paddingRight:45}}\n                  autoComplete={mode === 'login' ? 'current-password' : 'new-password'}\n                  disabled={loading}\n                  required\n                />\n                <button \n                  type=\"button\"\n                  onClick={() => setShowPass(!showPass)}\n                  style={{position:'absolute', right:12, top:'50%', transform:'translateY(-50%)', background:'none', border:'none', cursor:'pointer', fontSize:18}}\n                >\n                  {showPass ? 'ðŸ‘ï¸' : 'ðŸ‘ï¸â€ðŸ—¨ï¸'}\n                </button>\n              </div>\n              {mode === 'register' && pass && (\n                <div style={{marginTop:8}}>\n                  <div style={{display:'flex', justifyContent:'space-between', alignItems:'center', marginBottom:4}}>\n                    <span style={{fontSize:12, color:'var(--muted)'}}>Password strength:</span>\n                    <span style={{fontSize:12, fontWeight:600, color:getStrengthColor()}}>{getStrengthText()}</span>\n                  </div>\n                  <div style={{height:4, background:'rgba(255,255,255,0.1)', borderRadius:2, overflow:'hidden'}}>\n                    <div style={{height:'100%', width:`${(strength / 5) * 100}%`, background:getStrengthColor(), transition:'all 0.3s'}}></div>\n                  </div>\n                </div>\n              )}\n            </div>\n\n            {error && (\n              <div style={{padding:12, background:'rgba(239, 68, 68, 0.1)', border:'1px solid var(--danger)', borderRadius:12, color:'var(--danger)', fontSize:13, textAlign:'center'}}>\n                âš ï¸ {error}\n              </div>\n            )}\n\n            <button \n              type=\"submit\" \n              className=\"btn btn-primary\" \n              style={{width:'100%', padding:16, fontSize:16}}\n              disabled={loading}\n            >\n              {loading ? 'â³ Processing...' : mode === 'login' ? 'ðŸš€ Sign In' : 'âœ¨ Create Account'}\n            </button>\n\n            <div style={{textAlign:'center'}}>\n              <button \n                type=\"button\"\n                onClick={() => {setMode(mode === 'login' ? 'register' : 'login'); setError('')}}\n                style={{background:'none', border:'none', color:'var(--primary)', cursor:'pointer', fontSize:14, fontWeight:600}}\n                disabled={loading}\n              >\n                {mode === 'login' ? \"Don't have an account? Sign up\" : 'Already have an account? Sign in'}\n              </button>\n            </div>\n          </form>\n        </div>\n\n        {/* Features Preview */}\n        <div style={{marginTop:32, textAlign:'center', color:'var(--muted)', fontSize:13}}>\n          <p style={{marginBottom:12}}>âœ¨ Real-time traffic & transit data</p>\n          <p style={{marginBottom:12}}>ðŸ—ºï¸ Interactive route planning</p>\n          <p>ðŸŒ Multi-language support</p>\n        </div>\n      </div>\n\n      <style>{`\n        @keyframes float {\n          0%, 100% { transform: translateY(0) scale(1); }\n          50% { transform: translateY(-20px) scale(1.05); }\n        }\n      `}</style>\n    </div>\n  )\n}\n\nexport default function App(){\n  // ALL STATE HOOKS MUST BE DECLARED FIRST\n  const [token, setToken] = useState(() => localStorage.getItem('atis_token'))\n  const [username, setUsername] = useState(() => localStorage.getItem('atis_user'))\n  // Initialize as true if token exists to prevent flash during verification\n  const [isAuthenticated, setIsAuthenticated] = useState(() => {\n    return !!(localStorage.getItem('atis_token') && localStorage.getItem('atis_user'))\n  })\n  const [isVerifying, setIsVerifying] = useState(true)\n  \n  const [origin, setOrigin] = useState([-36.8485, 174.7633])\n  const [dest, setDest] = useState([-36.8443, 174.7676])\n  const [stops, setStops] = useState([])\n  const [itins, setItins] = useState([])\n  const [banner, setBanner] = useState('')\n  const [selectedStop, setSelectedStop] = useState(null)\n  const [departures, setDepartures] = useState([])\n  const [alerts, setAlerts] = useState([])\n  const [trafficIncidents, setTrafficIncidents] = useState([])\n  const [lastTrafficUpdate, setLastTrafficUpdate] = useState(null)\n  const [alts, setAlts] = useState({})\n  const [view, setView] = useState('home')\n  const [expandedItin, setExpandedItin] = useState(null)\n\n  const [modes, setModes] = useState(['bus','train','walk'])\n  const [optimize, setOptimize] = useState('fastest')\n  const [maxWalkKm, setMaxWalkKm] = useState(1.2)\n  const [avoidStairs, setAvoidStairs] = useState(false)\n  const [bikeOk, setBikeOk] = useState(false)\n  const [whenType, setWhenType] = useState('depart')\n  const [whenValue, setWhenValue] = useState('now')\n\n  const [weather, setWeather] = useState(null)\n  const [safetyContacts, setSafetyContacts] = useState([])\n  const [uiLang, setUiLang] = useState('en')\n  const [currency, setCurrency] = useState('NZD')\n  const [amount, setAmount] = useState(50)\n\n  const [reviews, setReviews] = useState([])\n  const [reviewLoc, setReviewLoc] = useState('')\n  const [reviewRating, setReviewRating] = useState(5)\n  const [reviewComment, setReviewComment] = useState('')\n\n  // Location search states\n  const [originSearch, setOriginSearch] = useState('')\n  const [destSearch, setDestSearch] = useState('')\n  const [originName, setOriginName] = useState('Auckland CBD')\n  const [destName, setDestName] = useState('Auckland Airport')\n  const [searchResults, setSearchResults] = useState([])\n  const [searchingFor, setSearchingFor] = useState(null)\n\n  // Assessment features - Environmental & MCDA\n  const [mcdaProfile, setMcdaProfile] = useState('balanced')\n  const [showMcdaBreakdown, setShowMcdaBreakdown] = useState({})\n  const [analyticsData, setAnalyticsData] = useState(null)\n\n  const text = TRANSLATIONS[uiLang] || TRANSLATIONS.en\n  const convertedAmount = Number((amount * (CURRENCY_RATES[currency] || 1)).toFixed(2))\n\n  // Check for existing session on mount and verify with backend\n  useEffect(() => {\n    let mounted = true\n    \n    const verifySession = async () => {\n      const savedToken = localStorage.getItem('atis_token')\n      const savedUser = localStorage.getItem('atis_user')\n      \n      if (savedToken && savedUser) {\n        try {\n          // Verify token with backend\n          const response = await fetch(`${API}/auth/verify`, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': `Bearer ${savedToken}`\n            }\n          })\n          \n          if (!mounted) return\n          \n          if (response.ok) {\n            // Token is valid - keep authenticated state\n            setToken(savedToken)\n            setUsername(savedUser)\n            // isAuthenticated already true from initialization\n          } else {\n            // Token is invalid, clear storage and set both states together\n            localStorage.removeItem('atis_token')\n            localStorage.removeItem('atis_user')\n            localStorage.removeItem('atis_login_time')\n            setToken(null)\n            setUsername(null)\n            setIsAuthenticated(false)\n          }\n        } catch (error) {\n          // Network error or backend down, clear session\n          if (!mounted) return\n          console.error('Session verification failed:', error)\n          localStorage.removeItem('atis_token')\n          localStorage.removeItem('atis_user')\n          localStorage.removeItem('atis_login_time')\n          setToken(null)\n          setUsername(null)\n          setIsAuthenticated(false)\n      }\n      \n        // Set verification complete AFTER authentication state is finalized\n      if (mounted) {\n          // Use setTimeout to ensure state updates are batched\n          setTimeout(() => {\n            console.log('[ATIS] Verification complete, ready to show content')\n        setIsVerifying(false)\n            // Tell the page React is ready - show content NOW\n            if (window.__atisReady) {\n              window.__atisReady()\n            }\n          }, 100)  // Small delay to ensure DOM is painted\n        }\n      } else {\n        // No saved token, set both states\n        if (mounted) {\n          console.log('[ATIS] No token found, showing login')\n          setIsAuthenticated(false)\n          // Use setTimeout to ensure state updates are batched\n          setTimeout(() => {\n            setIsVerifying(false)\n            // Tell the page React is ready - show content NOW\n            if (window.__atisReady) {\n              window.__atisReady()\n            }\n          }, 100)  // Small delay to ensure DOM is painted\n        }\n      }\n    }\n    \n    verifySession()\n    \n    return () => {\n      mounted = false\n    }\n  }, [])\n\n  // Load initial data once (only after authentication is verified)\n  useEffect(() => {\n    // Don't load data until verification is complete and user is authenticated\n    if (isVerifying || !isAuthenticated) return\n    \n    fetch(`${API}/stops/nearby?lat=${origin[0]}&lng=${origin[1]}&radius=900`)\n      .then(r=>r.json()).then(d=>setStops(d.stops||[])).catch(()=>{})\n    fetch(`${API}/alerts`)\n      .then(r=>r.json()).then(d=> {\n        setAlerts([...(d.alerts||[]), ...(d.traffic||[])])\n        setTrafficIncidents(d.traffic||[])\n        setLastTrafficUpdate(Date.now())\n      }).catch(()=>{})\n    fetch(`${API}/weather/point?lat=${origin[0]}&lng=${origin[1]}`)\n      .then(r=>r.json()).then(d=>setWeather(d.forecast||null)).catch(()=>{})\n    fetch(`${API}/safety/contacts`)\n      .then(r=>r.json()).then(d=>setSafetyContacts(d.contacts||[])).catch(()=>{})\n    fetch(`${API}/reviews`)\n      .then(r=>r.json()).then(d=>setReviews(d.reviews||[])).catch(()=>{})\n  }, [isAuthenticated, isVerifying])\n\n  // Update when origin changes (debounced to prevent excessive re-renders)\n  useEffect(() => {\n    // Only update if authenticated\n    if (!isAuthenticated) return\n    \n    const timeoutId = setTimeout(() => {\n      fetch(`${API}/stops/nearby?lat=${origin[0]}&lng=${origin[1]}&radius=900`)\n        .then(r=>r.json()).then(d=>setStops(d.stops||[])).catch(()=>{})\n      fetch(`${API}/weather/point?lat=${origin[0]}&lng=${origin[1]}`)\n        .then(r=>r.json()).then(d=>setWeather(d.forecast||null)).catch(()=>{})\n    }, 300)\n    \n    return () => clearTimeout(timeoutId)\n  }, [origin[0], origin[1], isAuthenticated])\n\n  // Helper function to get relative time string\n  const getRelativeTime = (timestamp) => {\n    const seconds = Math.floor((Date.now() - timestamp) / 1000)\n    if (seconds < 10) return 'just now'\n    if (seconds < 60) return `${seconds}s ago`\n    const minutes = Math.floor(seconds / 60)\n    if (minutes < 60) return `${minutes}m ago`\n    const hours = Math.floor(minutes / 60)\n    return `${hours}h ago`\n  }\n\n  // Manual refresh function that can be called from the map\n  const refreshTrafficData = async () => {\n    try {\n      const r = await fetch(`${API}/alerts`)\n      const d = await r.json()\n      setAlerts([...(d.alerts||[]), ...(d.traffic||[])])\n      setTrafficIncidents(d.traffic||[])\n      const now = Date.now()\n      setLastTrafficUpdate(now)\n      toast('ðŸ”„ Traffic data updated!', 'success')\n      return true\n    } catch(err) {\n      console.error('Failed to refresh traffic:', err)\n      toast('âš ï¸ Failed to update traffic data', 'error')\n      return false\n    }\n  }\n\n  // Auto-refresh traffic data every 30 seconds for real-time updates\n  useEffect(() => {\n    if (!isAuthenticated) return\n    \n    const refreshTraffic = () => {\n      fetch(`${API}/alerts`)\n        .then(r=>r.json())\n        .then(d=> {\n          setAlerts([...(d.alerts||[]), ...(d.traffic||[])])\n          setTrafficIncidents(d.traffic||[])\n          const now = Date.now()\n          setLastTrafficUpdate(now)\n        })\n        .catch(()=>{})\n    }\n    \n    // Set up interval for auto-refresh (30 seconds)\n    const intervalId = setInterval(refreshTraffic, 30000)\n    \n    // Clean up interval on unmount\n    return () => clearInterval(intervalId)\n  }, [isAuthenticated])\n  \n  // Update relative time display every 10 seconds\n  const [, forceUpdate] = useState()\n  useEffect(() => {\n    const timer = setInterval(() => forceUpdate({}), 10000)\n    return () => clearInterval(timer)\n  }, [])\n\n  const viewDepartures = async (stop) => {\n    setSelectedStop(stop)\n    const r = await fetch(`${API}/departures?stop_id=${stop.stop_id}`)\n    const data = await r.json()\n    setDepartures(data.departures || [])\n  }\n\n  const plan = async () => {\n    const payload = {\n      origin, destination: dest,\n      depart_at: whenType === 'depart' ? whenValue : 'now',\n      arrive_by: whenType === 'arrive' ? whenValue : null,\n      optimize, max_walk_km: parseFloat(maxWalkKm),\n      avoid_stairs: avoidStairs, bike_ok: bikeOk, modes,\n    }\n    const r = await fetch(`${API}/plan`, { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(payload) })\n    const d = await r.json()\n    setItins(d.itineraries || [])\n    setBanner(d.context?.weatherAlert || '')\n    setAlts({})\n  }\n\n  const trackTrip = async (itinerary) => {\n    if (!token) return\n    try {\n      await fetch(`${API}/analytics/track/trip`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          origin,\n          destination: dest,\n          itinerary\n        })\n      })\n    } catch (error) {\n      console.log('Analytics tracking failed:', error)\n    }\n  }\n\n  const loadAnalytics = async () => {\n    if (!token) return\n    try {\n      const r = await fetch(`${API}/analytics/summary`, {\n        headers: { 'Authorization': `Bearer ${token}` }\n      })\n      const data = await r.json()\n      setAnalyticsData(data)\n    } catch (error) {\n      console.log('Failed to load analytics:', error)\n    }\n  }\n\n  const exportPdf = async (itinerary) => {\n    const r = await fetch(`${API}/export/itinerary`,{ method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ origin, destination: dest, itinerary }) })\n    const blob = await r.blob()\n    const url = URL.createObjectURL(blob)\n    const a = document.createElement('a'); a.href = url; a.download = 'atis_trip.pdf'; a.click(); URL.revokeObjectURL(url)\n  }\n\n  const suggestAlt = async (itinerary) => {\n    try {\n      const r = await fetch(`${API}/routes/suggest`, { \n        method:'POST', \n        headers:{'Content-Type':'application/json'}, \n        body: JSON.stringify({ \n          current_itinerary: itinerary, \n          incidents: alerts,\n          origin: origin,\n          destination: dest,\n          preferences: {\n            optimize: optimize,\n            max_walk_km: maxWalkKm,\n            avoid_stairs: avoidStairs,\n            bike_ok: bikeOk,\n            modes: modes\n          }\n        }) \n      })\n      const data = await r.json()\n      \n      // Enhance alternative with more details\n      const enhancedAlternative = {\n        ...data.alternative,\n        reason: data.reason || 'Alternative route available',\n        benefits: data.benefits || [],\n        warnings: data.warnings || [],\n        comparison: {\n          timeDiff: data.alternative?.duration ? \n            Math.round((data.alternative.duration - itinerary.duration) / 60) : 0,\n          transferDiff: (data.alternative?.transfers || 0) - (itinerary.transfers || 0),\n          walkDiff: data.alternative?.walk_distance ? \n            (data.alternative.walk_distance - (itinerary.walk_distance || 0)).toFixed(1) : 0\n        }\n      }\n      \n      setAlts(prev => ({...prev, [itinerary.id]: enhancedAlternative}))\n    } catch (error) {\n      console.error('Error suggesting alternative:', error)\n    }\n  }\n\n  const authHeaders = () => token ? {'Authorization': `Bearer ${token}`} : {}\n  \n  const savePrefs = async () => {\n    if (!token){ alert('Please login to save preferences.'); return }\n    const r = await fetch(`${API}/prefs`, { method:'POST', headers:{'Content-Type':'application/json', ...authHeaders()}, body: JSON.stringify({ lang:'en', currency:'NZD', home: origin, work: dest }) })\n    alert(r.ok?'Preferences saved':'Failed to save')\n  }\n\n  const languageOptions = Object.keys(TRANSLATIONS)\n  const currencyOptions = Object.keys(CURRENCY_RATES)\n  \n  const saveOfflinePack = () => {\n    const snapshot = { saved: { origin, destination: dest, modes, optimize, maxWalkKm, avoidStairs, bikeOk }, alerts, weather, stops, safetyContacts }\n    localStorage.setItem('atis_offline_snapshot', JSON.stringify(snapshot))\n    alert('Offline toolkit saved to this device.')\n  }\n\n  const updateSavedPlace = (key, coords) => {\n    const store = JSON.parse(localStorage.getItem('atisSavedPlaces') || '{}')\n    store[key] = coords\n    localStorage.setItem('atisSavedPlaces', JSON.stringify(store))\n    alert(`${key.charAt(0).toUpperCase() + key.slice(1)} saved`)\n  }\n\n  const submitReview = async ()=>{\n    if (!token){ alert('Please login to post a review.'); return }\n    const r = await fetch(`${API}/reviews`, {method:'POST', headers:{'Content-Type':'application/json', ...authHeaders()}, body: JSON.stringify({ location: reviewLoc, rating: Number(reviewRating), comment: reviewComment }) })\n    if (!r.ok){ const t = await r.json(); alert('Failed: '+(t.detail||r.status)) }\n    setReviewLoc(''); setReviewRating(5); setReviewComment('')\n    fetch(`${API}/reviews`).then(r=>r.json()).then(d=>setReviews(d.reviews||[])).catch(()=>{})\n  }\n\n  const toggleMode = (m) => setModes(prev => prev.includes(m) ? prev.filter(x => x!==m) : [...prev, m])\n  const swapOD = () => { \n    const o = origin\n    const oName = originName\n    setOrigin(dest)\n    setDest(o)\n    setOriginName(destName)\n    setDestName(oName)\n  }\n  \n  const shareLocation = () => {\n    const coords = `${origin[0].toFixed(5)}, ${origin[1].toFixed(5)}`\n    const url = `https://www.google.com/maps?q=${origin[0]},${origin[1]}`\n    navigator.clipboard.writeText(url).then(() => {\n      alert(`${text.locationCopied}\\n${url}`)\n    }).catch(() => {\n      alert(`${text.shareLocation}: ${coords}`)\n    })\n  }\n\n  // Enhanced Geocoding with more accurate results\n  const searchLocation = async (query, type) => {\n    if (!query || query.length < 3) {\n      setSearchResults([])\n      return\n    }\n    \n    try {\n      // More specific search parameters for better accuracy\n      const response = await fetch(\n        `https://nominatim.openstreetmap.org/search?` + \n        `format=json&` +\n        `q=${encodeURIComponent(query)}&` +\n        `countrycodes=nz&` +\n        `bounded=1&` +\n        `viewbox=174.5,-37.0,175.0,-36.5&` + // Auckland bounding box\n        `addressdetails=1&` +\n        `limit=8&` +\n        `dedupe=1`\n      )\n      const data = await response.json()\n      \n      // Filter and sort results by relevance\n      const filteredResults = data\n        .filter(result => {\n          const name = result.display_name.toLowerCase()\n          return (\n            name.includes('auckland') || \n            name.includes('new zealand') ||\n            parseFloat(result.lat) > -37.5 && parseFloat(result.lat) < -36.5\n          )\n        })\n        .sort((a, b) => {\n          // Prioritize results with specific types\n          const priorityTypes = ['building', 'amenity', 'shop', 'tourism', 'station']\n          const aHasPriority = priorityTypes.includes(a.type)\n          const bHasPriority = priorityTypes.includes(b.type)\n          if (aHasPriority && !bHasPriority) return -1\n          if (!aHasPriority && bHasPriority) return 1\n          return 0\n        })\n      \n      setSearchResults(filteredResults)\n      setSearchingFor(type)\n    } catch (error) {\n      console.error('Search error:', error)\n      setSearchResults([])\n    }\n  }\n\n  // Select a location from search results\n  const selectLocation = (result) => {\n    const lat = parseFloat(result.lat)\n    const lng = parseFloat(result.lon)\n    const name = result.display_name.split(',')[0] // Get primary name\n    \n    if (searchingFor === 'origin') {\n      setOrigin([lat, lng])\n      setOriginName(name)\n      setOriginSearch('')\n    } else {\n      setDest([lat, lng])\n      setDestName(name)\n      setDestSearch('')\n    }\n    \n    setSearchResults([])\n    setSearchingFor(null)\n  }\n\n  // Close dropdown when clicking outside\n  const closeSearchDropdown = () => {\n    setSearchResults([])\n    setSearchingFor(null)\n    setOriginSearch('')\n    setDestSearch('')\n  }\n\n  // Use current location\n  const useCurrentLocation = (type) => {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        async (position) => {\n          const lat = position.coords.latitude\n          const lng = position.coords.longitude\n          \n          // Reverse geocode to get place name\n          try {\n            const response = await fetch(\n              `https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lng}`\n            )\n            const data = await response.json()\n            const name = data.address?.suburb || data.address?.city || data.address?.town || 'Current Location'\n            \n            if (type === 'origin') {\n              setOrigin([lat, lng])\n              setOriginName(name)\n            } else {\n              setDest([lat, lng])\n              setDestName(name)\n            }\n          } catch (error) {\n            if (type === 'origin') {\n              setOrigin([lat, lng])\n              setOriginName('Current Location')\n            } else {\n              setDest([lat, lng])\n              setDestName('Current Location')\n            }\n          }\n        },\n        (error) => {\n          alert('Could not get your location. Please enable location services.')\n        }\n      )\n    } else {\n      alert('Geolocation is not supported by your browser.')\n    }\n  }\n\n  const handleLogin = (token, username) => {\n    setToken(token)\n    setUsername(username)\n    setIsAuthenticated(true)\n  }\n\n  const logout = () => { \n    setToken(null)\n    setUsername(null)\n    setIsAuthenticated(false)\n    localStorage.removeItem('atis_token')\n    localStorage.removeItem('atis_user')\n    localStorage.removeItem('atis_login_time')\n    sessionStorage.removeItem('atis_token')\n    sessionStorage.removeItem('atis_user')\n    sessionStorage.removeItem('atis_login_time')\n    setView('home')\n  }\n\n  // Show loading screen while verifying token - PREVENTS BLINKING\n  if (isVerifying) {\n    return (\n      <div style={{\n        minHeight:'100vh',\n        width:'100%',\n        display:'flex',\n        flexDirection:'column',\n        alignItems:'center',\n        justifyContent:'center',\n        background:'#0a0e27',  // Exact match to app background\n        color:'white',\n        position:'fixed',\n        top:0,\n        left:0,\n        zIndex:9999\n      }}>\n        <div style={{textAlign:'center'}}>\n          <div style={{\n            width:60,\n            height:60,\n            border:'4px solid rgba(139, 92, 246, 0.3)',\n            borderTop:'4px solid #8b5cf6',\n            borderRadius:'50%',\n            animation:'spin 1s linear infinite',\n            margin:'0 auto 20px'\n          }}></div>\n          <div style={{fontSize:18, fontWeight:600}}>Verifying session...</div>\n          <div style={{fontSize:14, opacity:0.7, marginTop:8}}>Please wait</div>\n        </div>\n      </div>\n    )\n  }\n\n  // Show login page if not authenticated - NO ACCESS TO MAIN APP\n  if (!isAuthenticated) {\n    return <LoginPage onLogin={handleLogin} isVerifying={false} />\n  }\n\n  return (\n    <div style={{minHeight:'100vh', padding:'0', background:'#0a0e27', willChange:'auto'}}>\n      {/* Modern Top Navigation Bar */}\n      <nav style={{\n        position:'sticky', top:0, zIndex:1000,\n        background:'rgba(10, 14, 39, 0.95)', \n        borderBottom:'1px solid var(--glass-border)',\n        boxShadow:'0 4px 24px rgba(0,0,0,0.1)'\n      }}>\n        <div style={{maxWidth:1400, margin:'0 auto', padding:'16px 24px', display:'flex', alignItems:'center', justifyContent:'space-between', gap:20}}>\n          {/* Logo and Title */}\n          <div style={{display:'flex', alignItems:'center', gap:16}}>\n            <img\n              src=\"/atis-logo.jpg\"\n              alt=\"ATIS\"\n              style={{width:48, height:48, borderRadius:12, objectFit:'contain', boxShadow:'0 4px 12px rgba(0,0,0,0.2)'}}\n              onError={(e) => {\n                e.target.style.display = 'none'\n                e.target.nextElementSibling.style.display = 'grid'\n              }}\n            />\n            <div className=\"logo\" style={{display:'none', width:48, height:48, fontSize:20}}>A</div>\n            <div>\n              <h1 style={{fontSize:22, fontWeight:800, lineHeight:1, marginBottom:4}}>ATIS</h1>\n              <p style={{fontSize:12, color:'var(--muted)', lineHeight:1}}>Advanced Travel System</p>\n            </div>\n          </div>\n\n          {/* Navigation Tabs */}\n          <div style={{display:'flex', gap:8, flexWrap:'wrap'}}>\n            {['home','plan','map','alerts','safety','reviews','analytics','settings'].map(v => (\n              <button\n                key={v}\n                onClick={() => {setView(v); if(v === 'analytics') loadAnalytics();}}\n                className={view === v ? 'btn btn-primary' : 'chip'}\n                style={{\n                  padding:'8px 16px',\n                  fontSize:13,\n                  fontWeight:600,\n                  textTransform:'capitalize',\n                  transition:'all 0.3s'\n                }}\n              >\n                {v === 'home' && 'ðŸ '} {v === 'plan' && 'ðŸ—ºï¸'} {v === 'map' && 'ðŸŒ'}\n                {v === 'alerts' && 'âš ï¸'} {v === 'safety' && 'ðŸ›¡ï¸'} {v === 'reviews' && 'â­'}\n                {v === 'analytics' && 'ðŸ“Š'} {v === 'settings' && 'âš™ï¸'} {' '}{v.charAt(0).toUpperCase() + v.slice(1)}\n              </button>\n            ))}\n          </div>\n\n          {/* User Profile */}\n          <div style={{display:'flex', alignItems:'center', gap:12}}>\n            <div style={{textAlign:'right'}}>\n              <div style={{fontSize:14, fontWeight:600}}>{username || 'Guest'}</div>\n              <div style={{fontSize:11, color:'var(--muted)'}}>Active Session</div>\n            </div>\n            <button onClick={logout} className=\"btn btn-danger\" style={{padding:'8px 16px', fontSize:13}}>\n              ðŸšª Logout\n            </button>\n          </div>\n        </div>\n      </nav>\n\n      {/* Main Content Container */}\n      <div style={{maxWidth:1400, margin:'0 auto', padding:'32px 24px 80px'}}>\n        \n        {/* View-Based Content Rendering */}\n        {view === 'home' && (\n          <>\n            {/* Quick Stats Dashboard */}\n            <div className=\"grid-3\" style={{marginBottom:32}}>\n              <div className=\"stat-card\">\n                <div className=\"stat-value\">{stops.length}</div>\n                <div className=\"stat-label\">Nearby Stops</div>\n              </div>\n              <div className=\"stat-card\">\n                <div className=\"stat-value\">{itins.length}</div>\n                <div className=\"stat-label\">Routes Found</div>\n              </div>\n              <div className=\"stat-card\">\n                <div className=\"stat-value\">{alerts.length}</div>\n                <div className=\"stat-label\">Active Alerts</div>\n              </div>\n            </div>\n\n            {/* Welcome Card */}\n            <div className=\"card\" style={{marginBottom:32, background:'linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%)', border:'1px solid rgba(102, 126, 234, 0.3)'}}>\n              <h2 style={{fontSize:28, fontWeight:800, marginBottom:12, background:'var(--gradient-1)', WebkitBackgroundClip:'text', WebkitTextFillColor:'transparent'}}>\n                Welcome back, {username}! ðŸ‘‹\n              </h2>\n              <p style={{color:'var(--muted)', fontSize:15}}>\n                Your intelligent travel companion for smarter journeys. Plan trips, check real-time updates, and navigate with confidence.\n              </p>\n            </div>\n\n            {/* Feature Overview Grid */}\n            <div className=\"grid-2\" style={{marginBottom:32}}>\n              <div className=\"card\" onClick={() => setView('plan')} style={{cursor:'pointer'}}>\n                <div style={{fontSize:48, marginBottom:16}}>ðŸ—ºï¸</div>\n                <h3 style={{fontSize:20, fontWeight:700, marginBottom:8}}>Trip Planning</h3>\n                <p style={{color:'var(--muted)', fontSize:14}}>Plan multi-modal journeys with real-time data and alternative routes</p>\n              </div>\n              <div className=\"card\" onClick={() => setView('map')} style={{cursor:'pointer'}}>\n                <div style={{fontSize:48, marginBottom:16}}>ðŸŒ</div>\n                <h3 style={{fontSize:20, fontWeight:700, marginBottom:8}}>Interactive Map</h3>\n                <p style={{color:'var(--muted)', fontSize:14}}>Explore nearby stops, set destinations, and visualize your route</p>\n              </div>\n              <div className=\"card\" onClick={() => setView('alerts')} style={{cursor:'pointer'}}>\n                <div style={{fontSize:48, marginBottom:16}}>âš ï¸</div>\n                <h3 style={{fontSize:20, fontWeight:700, marginBottom:8}}>Live Alerts</h3>\n                <p style={{color:'var(--muted)', fontSize:14}}>Stay updated with traffic incidents and service disruptions</p>\n              </div>\n              <div className=\"card\" onClick={() => setView('safety')} style={{cursor:'pointer'}}>\n                <div style={{fontSize:48, marginBottom:16}}>ðŸ›¡ï¸</div>\n                <h3 style={{fontSize:20, fontWeight:700, marginBottom:8}}>Safety Features</h3>\n                <p style={{color:'var(--muted)', fontSize:14}}>Emergency contacts and location sharing for peace of mind</p>\n              </div>\n            </div>\n          </>\n        )}\n\n        {view === 'map' && (\n          <div>\n            <h2 className=\"section-title\">ðŸŒ Interactive Map</h2>\n          <FeatureCard icon=\"ðŸ—ºï¸\" title=\"Map View\" description=\"Drag origin marker, click map to set destination, view nearby stops\">\n            <div style={{height:450, width:'100%', borderRadius:16, overflow:'hidden', boxShadow:'0 8px 24px rgba(0,0,0,0.12)'}}>\n              <InteractiveMap \n                origin={origin} \n                setOrigin={setOrigin} \n                dest={dest} \n                setDest={setDest} \n                stops={stops} \n                trafficIncidents={trafficIncidents}\n                lastUpdate={lastTrafficUpdate ? getRelativeTime(lastTrafficUpdate) : null}\n                onRefresh={refreshTrafficData}\n              />\n            </div>\n            <div style={{marginTop:16, display:'flex', gap:10, flexWrap:'wrap'}}>\n              <button className=\"btn btn-primary\" onClick={shareLocation}>ðŸ“ {text.shareLocation}</button>\n              <button className=\"btn\" onClick={() => navigator.clipboard.writeText(`${origin[0].toFixed(5)}, ${origin[1].toFixed(5)}`).then(() => alert(text.locationCopied))}>ðŸ“‹ {text.copyCoords}</button>\n            </div>\n          </FeatureCard>\n          </div>\n        )}\n\n        {view === 'alerts' && (\n          <div>\n            <h2 className=\"section-title\">âš ï¸ Live Alerts & Weather</h2>\n          <FeatureCard icon=\"âš¡\" title={text.realTimeSnapshot} description=\"Live traffic, weather and notifications so riders stay ahead.\">\n            <div style={{display:'flex', flexWrap:'wrap', gap:16}}>\n              <div style={{flex:'1 1 200px', minWidth:220}}>\n                <div style={{fontWeight:600, marginBottom:6}}>{text.weatherNow}</div>\n                {weather ? (\n                  <div>\n                    <div style={{fontSize:18, fontWeight:700}}>{weather.condition}</div>\n                    <div style={{opacity:0.75}}>Temp {weather.tempC}Â°C â€¢ Wind {weather.windKph} km/h</div>\n                  </div>\n                ) : (\n                  <div style={{opacity:0.65}}>Fetching latest forecastâ€¦</div>\n                )}\n              </div>\n              <div style={{flex:'2 1 320px'}}>\n                <div style={{fontWeight:600, marginBottom:6}}>{text.alertsIncidents}</div>\n                <ul style={{margin:0, paddingLeft:18}}>\n                  {alerts.slice(0,6).map((a,i)=>(\n                    <li key={i}><strong>{a.type||a.id}</strong>: {a.title||a.summary} {a.severity?`â€¢ ${a.severity}`:''}</li>\n                  ))}\n                  {alerts.length===0 && <li style={{opacity:0.7}}>{text.noAlerts}</li>}\n                </ul>\n              </div>\n              {banner && (\n                <div style={{flexBasis:'100%', background:'rgba(37,99,235,0.12)', padding:12, borderRadius:12}}>\n                  <strong>Notification:</strong> {banner}\n                </div>\n              )}\n            </div>\n          </FeatureCard>\n          </div>\n        )}\n\n        {view === 'plan' && (\n          <div>\n            <h2 className=\"section-title\">ðŸ—ºï¸ Trip Planning</h2>\n          <FeatureCard icon=\"ðŸ§­\" title={text.tripPlanning} description=\"Plan ahead, adapt on the fly, and export journeys for the road.\">\n            <div style={{display:'grid', gap:24, gridTemplateColumns:'minmax(260px, 1fr) minmax(320px, 1.35fr)'}}>\n              <div style={{display:'flex', flexDirection:'column', gap:12}}>\n                {/* Origin Location Search */}\n                <div style={{position:'relative'}}>\n                  <label style={{display:'flex', flexDirection:'column', gap:4}}>\n                    <div style={{display:'flex', justifyContent:'space-between', alignItems:'center'}}>\n                      <span style={{fontSize:12, opacity:0.75}}>ðŸ“ Origin</span>\n                      <button \n                        className=\"btn\" \n                        onClick={() => useCurrentLocation('origin')}\n                        style={{padding:'4px 8px', fontSize:11}}\n                        title=\"Use my current location\"\n                      >\n                        ðŸ“ Current\n                      </button>\n                    </div>\n                    <input \n                      value={originSearch || originName} \n                      onChange={e => {\n                        setOriginSearch(e.target.value)\n                        searchLocation(e.target.value, 'origin')\n                      }}\n                      onFocus={e => e.target.select()}\n                      placeholder=\"Search for a place...\"\n                      style={{fontWeight:600}}\n                    />\n                  </label>\n                  {searchingFor === 'origin' && searchResults.length > 0 && (\n                    <div style={{\n                      position:'absolute', \n                      top:'100%', \n                      left:0, \n                      right:0, \n                      zIndex:1000,\n                      background:'linear-gradient(135deg, rgba(30, 41, 59, 0.98) 0%, rgba(15, 23, 42, 0.98) 100%)',\n                      backdropFilter:'blur(40px)',\n                      border:'2px solid rgba(139, 92, 246, 0.4)', \n                      borderRadius:16, \n                      marginTop:8,\n                      maxHeight:320,\n                      overflowY:'auto',\n                      boxShadow:'0 20px 60px rgba(0,0,0,0.6), 0 0 0 1px rgba(255,255,255,0.1) inset'\n                    }}>\n                      <div style={{\n                        padding:'10px 14px',\n                        fontSize:11,\n                        fontWeight:700,\n                        color:'rgba(139, 92, 246, 1)',\n                        borderBottom:'1px solid rgba(139, 92, 246, 0.2)',\n                        textTransform:'uppercase',\n                        letterSpacing:'0.5px'\n                      }}>\n                        ðŸ“ Select Origin Location\n                      </div>\n                      {searchResults.map((result, i) => (\n                        <div \n                          key={i}\n                          onClick={() => selectLocation(result)}\n                          style={{\n                            padding:'14px 16px', \n                            cursor:'pointer', \n                            borderBottom: i < searchResults.length - 1 ? '1px solid rgba(255,255,255,0.06)' : 'none',\n                            transition:'all 0.2s',\n                            background:'transparent'\n                          }}\n                          onMouseEnter={e => {\n                            e.currentTarget.style.background = 'linear-gradient(90deg, rgba(139, 92, 246, 0.15) 0%, rgba(59, 130, 246, 0.15) 100%)'\n                            e.currentTarget.style.borderLeft = '3px solid rgba(139, 92, 246, 0.8)'\n                            e.currentTarget.style.paddingLeft = '13px'\n                          }}\n                          onMouseLeave={e => {\n                            e.currentTarget.style.background = 'transparent'\n                            e.currentTarget.style.borderLeft = 'none'\n                            e.currentTarget.style.paddingLeft = '16px'\n                          }}\n                        >\n                          <div style={{\n                            fontWeight:700, \n                            fontSize:15, \n                            color:'#ffffff',\n                            marginBottom:6,\n                            display:'flex',\n                            alignItems:'center',\n                            justifyContent:'space-between'\n                          }}>\n                            <div style={{display:'flex', alignItems:'center', gap:8}}>\n                              <span style={{fontSize:18}}>\n                                {result.type === 'amenity' ? 'ðŸ¢' : \n                                 result.type === 'building' ? 'ðŸ›ï¸' :\n                                 result.type === 'tourism' ? 'ðŸŽ¯' :\n                                 result.type === 'station' ? 'ðŸš‰' :\n                                 result.type === 'shop' ? 'ðŸª' : 'ðŸ“'}\n                              </span>\n                              {result.display_name.split(',')[0]}\n                            </div>\n                            {result.address?.suburb && (\n                              <span style={{\n                                fontSize:11,\n                                padding:'2px 8px',\n                                background:'rgba(139, 92, 246, 0.3)',\n                                borderRadius:8,\n                                color:'rgba(139, 92, 246, 1)',\n                                fontWeight:600\n                              }}>\n                                {result.address.suburb}\n                              </span>\n                            )}\n                          </div>\n                          <div style={{\n                            fontSize:11, \n                            color:'rgba(255,255,255,0.5)', \n                            lineHeight:1.5,\n                            paddingLeft:26,\n                            marginBottom:4\n                          }}>\n                            {result.display_name.split(',').slice(1, 3).join(',').trim()}\n                          </div>\n                          {result.type && (\n                            <div style={{\n                              fontSize:10,\n                              color:'rgba(255,255,255,0.4)',\n                              paddingLeft:26,\n                              fontStyle:'italic'\n                            }}>\n                              {result.type.charAt(0).toUpperCase() + result.type.slice(1)}\n                            </div>\n                          )}\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                  <div style={{fontSize:11, opacity:0.5, marginTop:4}}>{origin[0].toFixed(4)}, {origin[1].toFixed(4)}</div>\n                </div>\n\n                {/* Destination Location Search */}\n                <div style={{position:'relative'}}>\n                  <label style={{display:'flex', flexDirection:'column', gap:4}}>\n                    <div style={{display:'flex', justifyContent:'space-between', alignItems:'center'}}>\n                      <span style={{fontSize:12, opacity:0.75}}>ðŸŽ¯ Destination</span>\n                      <button \n                        className=\"btn\" \n                        onClick={() => useCurrentLocation('dest')}\n                        style={{padding:'4px 8px', fontSize:11}}\n                        title=\"Use my current location\"\n                      >\n                        ðŸ“ Current\n                      </button>\n                    </div>\n                    <input \n                      value={destSearch || destName} \n                      onChange={e => {\n                        setDestSearch(e.target.value)\n                        searchLocation(e.target.value, 'dest')\n                      }}\n                      onFocus={e => e.target.select()}\n                      placeholder=\"Search for a place...\"\n                      style={{fontWeight:600}}\n                    />\n                  </label>\n                  {searchingFor === 'dest' && searchResults.length > 0 && (\n                    <div style={{\n                      position:'absolute', \n                      top:'100%', \n                      left:0, \n                      right:0, \n                      zIndex:1000,\n                      background:'linear-gradient(135deg, rgba(30, 41, 59, 0.98) 0%, rgba(15, 23, 42, 0.98) 100%)',\n                      backdropFilter:'blur(40px)',\n                      border:'2px solid rgba(59, 130, 246, 0.4)', \n                      borderRadius:16, \n                      marginTop:8,\n                      maxHeight:320,\n                      overflowY:'auto',\n                      boxShadow:'0 20px 60px rgba(0,0,0,0.6), 0 0 0 1px rgba(255,255,255,0.1) inset'\n                    }}>\n                      <div style={{\n                        padding:'10px 14px',\n                        fontSize:11,\n                        fontWeight:700,\n                        color:'rgba(59, 130, 246, 1)',\n                        borderBottom:'1px solid rgba(59, 130, 246, 0.2)',\n                        textTransform:'uppercase',\n                        letterSpacing:'0.5px'\n                      }}>\n                        ðŸŽ¯ Select Destination Location\n                      </div>\n                      {searchResults.map((result, i) => (\n                        <div \n                          key={i}\n                          onClick={() => selectLocation(result)}\n                          style={{\n                            padding:'14px 16px', \n                            cursor:'pointer', \n                            borderBottom: i < searchResults.length - 1 ? '1px solid rgba(255,255,255,0.06)' : 'none',\n                            transition:'all 0.2s',\n                            background:'transparent'\n                          }}\n                          onMouseEnter={e => {\n                            e.currentTarget.style.background = 'linear-gradient(90deg, rgba(59, 130, 246, 0.15) 0%, rgba(16, 185, 129, 0.15) 100%)'\n                            e.currentTarget.style.borderLeft = '3px solid rgba(59, 130, 246, 0.8)'\n                            e.currentTarget.style.paddingLeft = '13px'\n                          }}\n                          onMouseLeave={e => {\n                            e.currentTarget.style.background = 'transparent'\n                            e.currentTarget.style.borderLeft = 'none'\n                            e.currentTarget.style.paddingLeft = '16px'\n                          }}\n                        >\n                          <div style={{\n                            fontWeight:700, \n                            fontSize:15, \n                            color:'#ffffff',\n                            marginBottom:6,\n                            display:'flex',\n                            alignItems:'center',\n                            justifyContent:'space-between'\n                          }}>\n                            <div style={{display:'flex', alignItems:'center', gap:8}}>\n                              <span style={{fontSize:18}}>\n                                {result.type === 'amenity' ? 'ðŸ¢' : \n                                 result.type === 'building' ? 'ðŸ›ï¸' :\n                                 result.type === 'tourism' ? 'ðŸŽ¯' :\n                                 result.type === 'station' ? 'ðŸš‰' :\n                                 result.type === 'shop' ? 'ðŸª' : 'ðŸŽ¯'}\n                              </span>\n                              {result.display_name.split(',')[0]}\n                            </div>\n                            {result.address?.suburb && (\n                              <span style={{\n                                fontSize:11,\n                                padding:'2px 8px',\n                                background:'rgba(59, 130, 246, 0.3)',\n                                borderRadius:8,\n                                color:'rgba(59, 130, 246, 1)',\n                                fontWeight:600\n                              }}>\n                                {result.address.suburb}\n                              </span>\n                            )}\n                          </div>\n                          <div style={{\n                            fontSize:11, \n                            color:'rgba(255,255,255,0.5)', \n                            lineHeight:1.5,\n                            paddingLeft:26,\n                            marginBottom:4\n                          }}>\n                            {result.display_name.split(',').slice(1, 3).join(',').trim()}\n                          </div>\n                          {result.type && (\n                            <div style={{\n                              fontSize:10,\n                              color:'rgba(255,255,255,0.4)',\n                              paddingLeft:26,\n                              fontStyle:'italic'\n                            }}>\n                              {result.type.charAt(0).toUpperCase() + result.type.slice(1)}\n                            </div>\n                          )}\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                  <div style={{fontSize:11, opacity:0.5, marginTop:4}}>{dest[0].toFixed(4)}, {dest[1].toFixed(4)}</div>\n                </div>\n\n                <div style={{display:'flex', gap:8}}>\n                  <button className=\"btn btn-primary\" onClick={swapOD} style={{flex:1}}>ðŸ”„ Swap</button>\n                </div>\n                <div style={{display:'flex', flexDirection:'column', gap:6}}>\n                  <span style={{fontSize:12, opacity:0.75}}>Preferred modes</span>\n                  <div>\n                    {['bus','train','ferry','walk','bike'].map(m => (\n                      <label key={m} style={{marginRight:10}}>\n                        <input type=\"checkbox\" checked={modes.includes(m)} onChange={() => toggleMode(m)} /> {m}\n                      </label>\n                    ))}\n                  </div>\n                </div>\n                <label style={{display:'flex', flexDirection:'column', gap:4}}>\n                  <span style={{fontSize:12, opacity:0.75}}>Optimize for</span>\n                  <select value={optimize} onChange={e => setOptimize(e.target.value)}>\n                    <option value=\"fastest\">Fastest</option>\n                    <option value=\"fewest_transfers\">Fewest transfers</option>\n                    <option value=\"least_walking\">Least walking</option>\n                    <option value=\"reliable\">Most reliable</option>\n                  </select>\n                </label>\n                <label style={{display:'flex', flexDirection:'column', gap:4}}>\n                  <span style={{fontSize:12, opacity:0.75}}>Max walking distance (km)</span>\n                  <input type=\"number\" min=\"0\" max=\"3\" step=\"0.1\" value={maxWalkKm} onChange={e => setMaxWalkKm(e.target.value)} />\n                </label>\n                <div style={{display:'flex', gap:12, flexWrap:'wrap'}}>\n                  <label><input type=\"checkbox\" checked={avoidStairs} onChange={e => setAvoidStairs(e.target.checked)} /> Avoid stairs</label>\n                  <label><input type=\"checkbox\" checked={bikeOk} onChange={e => setBikeOk(e.target.checked)} /> Bike friendly</label>\n                </div>\n                <div style={{display:'flex', flexDirection:'column', gap:6}}>\n                  <span style={{fontSize:12, opacity:0.75}}>When to travel</span>\n                  <div style={{display:'flex', gap:12}}>\n                    <label><input type=\"radio\" name=\"when\" value=\"depart\" checked={whenType==='depart'} onChange={()=>setWhenType('depart')} /> Depart at</label>\n                    <label><input type=\"radio\" name=\"when\" value=\"arrive\" checked={whenType==='arrive'} onChange={()=>setWhenType('arrive')} /> Arrive by</label>\n                  </div>\n                  <input placeholder=\"now or 2025-11-03T09:00\" value={whenValue} onChange={e=>setWhenValue(e.target.value)} />\n                </div>\n                <button className=\"btn btn-primary\" onClick={plan} style={{alignSelf:'flex-start'}}>{text.findItineraries}</button>\n              </div>\n              <div>\n                {itins.length === 0 ? (\n                  <div style={{textAlign:'center', padding:'40px 20px', background:'var(--glass-bg)', backdropFilter:'blur(10px)', borderRadius:16, border:'1px dashed var(--line)'}}>\n                    <div style={{fontSize:48, marginBottom:12}}>ðŸš€</div>\n                    <p style={{color:'var(--muted)', fontSize:15}}>Press <b style={{color:'var(--primary)'}}>Find itineraries</b> to see recommended routes.</p>\n                  </div>\n                ) : (\n                  <div style={{display:'flex', flexDirection:'column', gap:16}}>\n                    {itins.map((it, idx) => (\n                      <div key={it.id} style={{background:'var(--glass-bg)', backdropFilter:'blur(10px)', border:'1px solid var(--glass-border)', borderRadius:16, padding:20, boxShadow:'0 4px 16px rgba(0,0,0,0.08)', transition:'all 0.3s ease'}} onMouseEnter={e => e.currentTarget.style.boxShadow = '0 8px 24px rgba(0,0,0,0.15)'} onMouseLeave={e => e.currentTarget.style.boxShadow = '0 4px 16px rgba(0,0,0,0.08)'}>\n                        <div style={{display:'flex', justifyContent:'space-between', alignItems:'flex-start', gap:16, flexWrap:'wrap'}}>\n                          <div style={{flex:1}}>\n                            <div style={{display:'flex', alignItems:'center', gap:10, marginBottom:10, flexWrap:'wrap'}}>\n                              <span style={{background:'linear-gradient(135deg, #667eea 0%, #764ba2 100%)', color:'white', width:32, height:32, borderRadius:'50%', display:'grid', placeItems:'center', fontWeight:700, fontSize:14}}>{idx + 1}</span>\n                              <div style={{fontSize:18, fontWeight:700}}>~{it.durationMin} min</div>\n                              <div style={{color:'var(--muted)', fontSize:14}}>â€¢ {it.transfers} transfers</div>\n                              <div style={{background:it.reliability > 0.85 ? 'rgba(16, 185, 129, 0.15)' : 'rgba(251, 191, 36, 0.15)', color:it.reliability > 0.85 ? 'var(--success)' : '#f59e0b', padding:'4px 10px', borderRadius:8, fontSize:12, fontWeight:600}}>{Math.round((it.reliability||0)*100)}% reliable</div>\n                            </div>\n                            <div style={{color:'var(--muted)', fontSize:14, marginBottom:10}}>ðŸš¶ {it.legs.join(' â†’ ')}</div>\n                            <div style={{display:'flex', gap:8, flexWrap:'wrap'}}>\n                              <Chip>ðŸš¶ {(it.walk_km ?? 0).toFixed(1)} km walk</Chip>\n                              <Chip>{(it.modes||[]).join(', ')}</Chip>\n                            </div>\n                          </div>\n                          <div style={{display:'flex', gap:8, flexWrap:'wrap'}}>\n                            <button className=\"btn\" onClick={(e) => {e.stopPropagation(); exportPdf(it)}}>ðŸ“„ {text.exportPdf}</button>\n                            <button className=\"btn btn-primary\" onClick={(e) => {e.stopPropagation(); suggestAlt(it)}}>ðŸ”„ {text.suggestAlt}</button>\n                            <button className=\"btn\" onClick={(e) => {e.stopPropagation(); setExpandedItin(expandedItin === it.id ? null : it.id)}} style={{background: expandedItin === it.id ? 'var(--primary)' : '', color: expandedItin === it.id ? 'white' : ''}}>\n                              {expandedItin === it.id ? 'â–¼ Hide Details' : 'â–¶ View Details'}\n                            </button>\n                          </div>\n                        </div>\n\n                        {/* Detailed Journey Breakdown */}\n                        {expandedItin === it.id && (\n                          <div style={{\n                            marginTop:20,\n                            padding:20,\n                            background:'linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%)',\n                            border:'1px solid rgba(102, 126, 234, 0.2)',\n                            borderRadius:12\n                          }}>\n                            {/* Journey Summary Stats */}\n                            <div style={{\n                              display:'grid',\n                              gridTemplateColumns:'repeat(auto-fit, minmax(140px, 1fr))',\n                              gap:12,\n                              marginBottom:20\n                            }}>\n                              <div style={{padding:12, background:'rgba(255,255,255,0.05)', borderRadius:10, border:'1px solid rgba(255,255,255,0.1)'}}>\n                                <div style={{fontSize:11, opacity:0.6, marginBottom:4}}>ðŸ’µ Estimated Fare</div>\n                                <div style={{fontSize:16, fontWeight:700}}>${(2.50 + it.transfers * 0.50).toFixed(2)} NZD</div>\n                              </div>\n                              \n                              <div style={{padding:12, background:'rgba(255,255,255,0.05)', borderRadius:10, border:'1px solid rgba(255,255,255,0.1)'}}>\n                                <div style={{fontSize:11, opacity:0.6, marginBottom:4}}>ðŸŒ± COâ‚‚ Savings</div>\n                                <div style={{fontSize:16, fontWeight:700}}>\n                                  {it.environmental ? \n                                    `${it.environmental.co2_saved_kg.toFixed(2)} kg` : \n                                    `${(it.durationMin * 0.05).toFixed(1)} kg`}\n                                </div>\n                                {it.environmental && (\n                                  <div style={{fontSize:10, opacity:0.5, marginTop:2}}>\n                                    {it.environmental.co2_saved_percent.toFixed(0)}% vs car\n                                  </div>\n                                )}\n                              </div>\n                              \n                              <div style={{padding:12, background:'rgba(255,255,255,0.05)', borderRadius:10, border:'1px solid rgba(255,255,255,0.1)'}}>\n                                <div style={{fontSize:11, opacity:0.6, marginBottom:4}}>â±ï¸ Departure</div>\n                                <div style={{fontSize:16, fontWeight:700}}>In 3 min</div>\n                              </div>\n                              \n                              <div style={{padding:12, background:'rgba(255,255,255,0.05)', borderRadius:10, border:'1px solid rgba(255,255,255,0.1)'}}>\n                                <div style={{fontSize:11, opacity:0.6, marginBottom:4}}>ðŸ‘¥ Crowding</div>\n                                <div style={{fontSize:16, fontWeight:700}}>â—â—â—‹â—‹ Low</div>\n                              </div>\n                              \n                              <div style={{padding:12, background:'rgba(255,255,255,0.05)', borderRadius:10, border:'1px solid rgba(255,255,255,0.1)'}}>\n                                <div style={{fontSize:11, opacity:0.6, marginBottom:4}}>â™¿ Accessible</div>\n                                <div style={{fontSize:16, fontWeight:700}}>{it.stairs ? 'âš ï¸ Stairs' : 'âœ“ Yes'}</div>\n                              </div>\n                              \n                              <div style={{padding:12, background:'rgba(255,255,255,0.05)', borderRadius:10, border:'1px solid rgba(255,255,255,0.1)'}}>\n                                <div style={{fontSize:11, opacity:0.6, marginBottom:4}}>ðŸ”Œ Charging</div>\n                                <div style={{fontSize:16, fontWeight:700}}>Available</div>\n                              </div>\n                            </div>\n\n                            {/* Step-by-Step Journey */}\n                            <div style={{marginTop:16}}>\n                              <div style={{fontSize:14, fontWeight:700, marginBottom:12, color:'var(--primary)'}}>\n                                ðŸ“ Step-by-Step Journey\n                              </div>\n                              \n                              {/* Generate detailed steps */}\n                              {it.legs.map((leg, legIdx) => {\n                                const isWalk = leg.toLowerCase().includes('walk')\n                                const isBus = leg.toLowerCase().includes('bus')\n                                const isTrain = leg.toLowerCase().includes('train')\n                                const isFerry = leg.toLowerCase().includes('ferry')\n                                const isBike = leg.toLowerCase().includes('bike')\n                                \n                                // Extract route number (e.g., \"Bus NX1\" -> \"NX1\")\n                                const routeMatch = leg.match(/(?:Bus|Train)\\s+([A-Z0-9]+)/i)\n                                const routeNumber = routeMatch ? routeMatch[1] : null\n                                \n                                return (\n                                  <div key={legIdx} style={{\n                                    display:'flex',\n                                    gap:16,\n                                    marginBottom:16,\n                                    paddingBottom:16,\n                                    borderBottom: legIdx < it.legs.length - 1 ? '1px dashed rgba(255,255,255,0.1)' : 'none'\n                                  }}>\n                                    {/* Step Number & Icon */}\n                                    <div style={{display:'flex', flexDirection:'column', alignItems:'center', minWidth:60}}>\n                                      <div style={{\n                                        width:40,\n                                        height:40,\n                                        borderRadius:'50%',\n                                        background: isWalk ? 'linear-gradient(135deg, #10b981 0%, #059669 100%)' :\n                                                   isBus ? 'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)' :\n                                                   isTrain ? 'linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)' :\n                                                   isFerry ? 'linear-gradient(135deg, #06b6d4 0%, #0891b2 100%)' :\n                                                   'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',\n                                        color:'white',\n                                        display:'grid',\n                                        placeItems:'center',\n                                        fontSize:18,\n                                        fontWeight:700,\n                                        boxShadow:'0 4px 12px rgba(0,0,0,0.2)'\n                                      }}>\n                                        {isWalk ? 'ðŸš¶' : isBus ? 'ðŸšŒ' : isTrain ? 'ðŸš†' : isFerry ? 'â›´ï¸' : isBike ? 'ðŸš´' : 'ðŸšŒ'}\n                                      </div>\n                                      {legIdx < it.legs.length - 1 && (\n                                        <div style={{width:2, flex:1, background:'rgba(255,255,255,0.2)', minHeight:20, marginTop:8}} />\n                                      )}\n                                    </div>\n                                    \n                                    {/* Step Details */}\n                                    <div style={{flex:1}}>\n                                      <div style={{fontSize:15, fontWeight:700, marginBottom:6}}>\n                                        {leg}\n                                      </div>\n                                      \n                                      {/* Walking Details */}\n                                      {isWalk && (\n                                        <div style={{fontSize:13, color:'rgba(255,255,255,0.7)', marginBottom:8}}>\n                                          <div style={{marginBottom:4}}>ðŸ“ Distance: {((it.walk_km || 0.4) / it.legs.filter(l => l.toLowerCase().includes('walk')).length).toFixed(2)} km</div>\n                                          <div style={{marginBottom:4}}>â±ï¸ Duration: ~{Math.ceil((it.walk_km || 0.4) / it.legs.filter(l => l.toLowerCase().includes('walk')).length * 12)} min</div>\n                                          <button \n                                            className=\"btn\" \n                                            onClick={() => {\n                                              // Show walking route on map\n                                              alert(`Walking directions:\\n1. Head ${legIdx === 0 ? 'to nearest stop' : 'to your destination'}\\n2. Follow pedestrian paths\\n3. Cross at designated crossings\\n\\nOpening map view...`)\n                                              setView('map')\n                                            }}\n                                            style={{\n                                              marginTop:8,\n                                              padding:'6px 12px',\n                                              fontSize:12,\n                                              background:'linear-gradient(135deg, #10b981 0%, #059669 100%)',\n                                              color:'white',\n                                              border:'none'\n                                            }}\n                                          >\n                                            ðŸ—ºï¸ View Walking Route\n                                          </button>\n                                        </div>\n                                      )}\n                                      \n                                      {/* Bus/Train Details */}\n                                      {(isBus || isTrain || isFerry) && (\n                                        <div style={{fontSize:13, color:'rgba(255,255,255,0.7)'}}>\n                                          <div style={{marginBottom:8, padding:10, background:'rgba(255,255,255,0.05)', borderRadius:8}}>\n                                            {routeNumber && (\n                                              <div style={{marginBottom:6}}>\n                                                <span style={{\n                                                  background: isBus ? '#3b82f6' : isTrain ? '#8b5cf6' : '#06b6d4',\n                                                  color:'white',\n                                                  padding:'4px 10px',\n                                                  borderRadius:6,\n                                                  fontSize:13,\n                                                  fontWeight:700,\n                                                  marginRight:8\n                                                }}>\n                                                  {routeNumber}\n                                                </span>\n                                                <span style={{opacity:0.8}}>\n                                                  {isBus ? 'Bus Route' : isTrain ? 'Train Line' : 'Ferry Route'}\n                                                </span>\n                                              </div>\n                                            )}\n                                            <div style={{marginBottom:4}}>ðŸš <b>From:</b> Stop #{1000 + legIdx * 100} - {legIdx === 0 ? 'Start Point' : `Transfer Point ${legIdx}`}</div>\n                                            <div style={{marginBottom:4}}>ðŸŽ¯ <b>To:</b> Stop #{1000 + legIdx * 100 + 50} - {legIdx === it.legs.length - 1 ? 'End Point' : 'Next Transfer'}</div>\n                                            <div style={{marginBottom:4}}>â±ï¸ <b>Next Departure:</b> <span style={{color:'#10b981', fontWeight:600}}>3, 8, 15 min</span></div>\n                                            <div style={{marginBottom:4}}>ðŸª‘ <b>Platform/Bay:</b> {isTrain ? 'Platform' : 'Bay'} {legIdx + 1}</div>\n                                            <div style={{marginBottom:4}}>ðŸŽ« <b>Zone:</b> Zone {Math.min(legIdx + 1, 3)}</div>\n                                            <div style={{marginBottom:4}}>ðŸ‘¥ <b>Current Load:</b> {['Light', 'Moderate', 'Busy'][Math.floor(Math.random() * 3)]}</div>\n                                            {isTrain && <div style={{marginBottom:4}}>ðŸšƒ <b>Carriages:</b> 3-car train</div>}\n                                            {isBus && <div style={{marginBottom:4}}>â™¿ <b>Features:</b> Low-floor, wheelchair accessible</div>}\n                                          </div>\n                                          \n                                          <div style={{display:'flex', gap:8, marginTop:8, flexWrap:'wrap'}}>\n                                            <button \n                                              className=\"btn\"\n                                              onClick={() => {\n                                                setSelectedStop({stop_id: `${1000 + legIdx * 100}`, name: `Stop ${1000 + legIdx * 100}`})\n                                                setView('home')\n                                              }}\n                                              style={{padding:'6px 12px', fontSize:12}}\n                                            >\n                                              ðŸš View Stop Info\n                                            </button>\n                                            <button \n                                              className=\"btn\"\n                                              onClick={() => alert(`Live tracking for ${routeNumber || 'this route'} will be available soon!`)}\n                                              style={{padding:'6px 12px', fontSize:12}}\n                                            >\n                                              ðŸ“ Track Vehicle\n                                            </button>\n                                            <button \n                                              className=\"btn\"\n                                              onClick={() => alert(`Set reminder for ${routeNumber || 'this departure'}`)}\n                                              style={{padding:'6px 12px', fontSize:12}}\n                                            >\n                                              ðŸ”” Set Reminder\n                                            </button>\n                                          </div>\n                                        </div>\n                                      )}\n                                    </div>\n                                  </div>\n                                )\n                              })}\n                            </div>\n\n                            {/* Additional Travel Tips */}\n                            <div style={{\n                              marginTop:20,\n                              padding:12,\n                              background:'rgba(59, 130, 246, 0.1)',\n                              borderLeft:'3px solid #3b82f6',\n                              borderRadius:6\n                            }}>\n                              <div style={{fontSize:13, fontWeight:700, marginBottom:6}}>ðŸ’¡ Travel Tips</div>\n                              <ul style={{fontSize:12, color:'rgba(255,255,255,0.8)', margin:0, paddingLeft:20}}>\n                                <li>Allow 5 extra minutes for unexpected delays</li>\n                                <li>Have your AT HOP card ready before boarding</li>\n                                {it.transfers > 0 && <li>Transfers are free within 30 minutes</li>}\n                                {it.stairs && <li>This route includes stairs - consider accessibility needs</li>}\n                                <li>Check real-time updates before you leave</li>\n                              </ul>\n                            </div>\n\n                            {/* MCDA Score Breakdown - Assessment Feature */}\n                            {it.mcda_score && (\n                              <div style={{\n                                marginTop:20,\n                                padding:16,\n                                background:'linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(219, 39, 119, 0.1) 100%)',\n                                border:'2px solid rgba(139, 92, 246, 0.3)',\n                                borderRadius:12\n                              }}>\n                                <div style={{display:'flex', justifyContent:'space-between', alignItems:'center', marginBottom:12}}>\n                                  <div style={{fontSize:14, fontWeight:700, color:'#a78bfa'}}>\n                                    ðŸ† Multi-Criteria Decision Score (MCDA)\n                                  </div>\n                                  <div style={{\n                                    fontSize:24,\n                                    fontWeight:700,\n                                    color: it.mcda_score >= 85 ? '#10b981' : it.mcda_score >= 70 ? '#3b82f6' : '#f59e0b',\n                                    display:'flex',\n                                    alignItems:'center',\n                                    gap:6\n                                  }}>\n                                    {it.mcda_score.toFixed(1)}/100\n                                    {it.mcda_rank && <span style={{fontSize:14, opacity:0.7}}>#{it.mcda_rank}</span>}\n                                  </div>\n                                </div>\n\n                                {it.mcda_recommendation && (\n                                  <div style={{\n                                    fontSize:12,\n                                    padding:'8px 12px',\n                                    background:'rgba(139, 92, 246, 0.15)',\n                                    borderRadius:8,\n                                    marginBottom:12,\n                                    color:'rgba(255,255,255,0.9)'\n                                  }}>\n                                    {it.mcda_recommendation}\n                                  </div>\n                                )}\n\n                                {it.mcda_breakdown && (\n                                  <div style={{display:'grid', gridTemplateColumns:'repeat(auto-fit, minmax(120px, 1fr))', gap:10}}>\n                                    {Object.entries(it.mcda_breakdown).map(([criterion, score]) => (\n                                      <div key={criterion} style={{\n                                        padding:10,\n                                        background:'rgba(0,0,0,0.2)',\n                                        borderRadius:8,\n                                        border:'1px solid rgba(255,255,255,0.1)'\n                                      }}>\n                                        <div style={{fontSize:10, opacity:0.6, marginBottom:4, textTransform:'capitalize'}}>\n                                          {criterion === 'time' ? 'â±ï¸' : \n                                           criterion === 'cost' ? 'ðŸ’°' :\n                                           criterion === 'comfort' ? 'ðŸ›‹ï¸' :\n                                           criterion === 'reliability' ? 'âœ“' :\n                                           'ðŸŒ±'} {criterion}\n                                        </div>\n                                        <div style={{fontSize:14, fontWeight:700, color: score >= 80 ? '#10b981' : score >= 60 ? '#3b82f6' : '#f59e0b'}}>\n                                          {score.toFixed(0)}/100\n                                        </div>\n                                        <div style={{\n                                          width:'100%',\n                                          height:4,\n                                          background:'rgba(255,255,255,0.1)',\n                                          borderRadius:2,\n                                          marginTop:4,\n                                          overflow:'hidden'\n                                        }}>\n                                          <div style={{\n                                            width:`${score}%`,\n                                            height:'100%',\n                                            background: score >= 80 ? '#10b981' : score >= 60 ? '#3b82f6' : '#f59e0b',\n                                            borderRadius:2\n                                          }} />\n                                        </div>\n                                      </div>\n                                    ))}\n                                  </div>\n                                )}\n\n                                {it.mcda_weights && (\n                                  <div style={{fontSize:10, opacity:0.5, marginTop:8}}>\n                                    Weights: {Object.entries(it.mcda_weights).map(([k,v]) => `${k} ${(v*100).toFixed(0)}%`).join(' â€¢ ')}\n                                  </div>\n                                )}\n                              </div>\n                            )}\n\n                            {/* Environmental Impact Details - Assessment Feature */}\n                            {it.environmental && (\n                              <div style={{\n                                marginTop:20,\n                                padding:16,\n                                background:'linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(52, 211, 153, 0.1) 100%)',\n                                border:'2px solid rgba(16, 185, 129, 0.3)',\n                                borderRadius:12\n                              }}>\n                                <div style={{fontSize:14, fontWeight:700, color:'#10b981', marginBottom:12}}>\n                                  ðŸŒ Environmental Impact Analysis\n                                </div>\n\n                                <div style={{display:'grid', gridTemplateColumns:'repeat(auto-fit, minmax(150px, 1fr))', gap:12, marginBottom:12}}>\n                                  <div style={{padding:12, background:'rgba(16, 185, 129, 0.1)', borderRadius:8}}>\n                                    <div style={{fontSize:11, opacity:0.7, marginBottom:4}}>COâ‚‚ Emissions</div>\n                                    <div style={{fontSize:18, fontWeight:700, color:'#10b981'}}>\n                                      {it.environmental.total_co2_kg.toFixed(2)} kg\n                                    </div>\n                                  </div>\n\n                                  <div style={{padding:12, background:'rgba(16, 185, 129, 0.1)', borderRadius:8}}>\n                                    <div style={{fontSize:11, opacity:0.7, marginBottom:4}}>COâ‚‚ Saved vs Car</div>\n                                    <div style={{fontSize:18, fontWeight:700, color:'#10b981'}}>\n                                      {it.environmental.co2_saved_kg.toFixed(2)} kg\n                                    </div>\n                                    <div style={{fontSize:10, opacity:0.6, marginTop:2}}>\n                                      {it.environmental.co2_saved_percent.toFixed(0)}% reduction\n                                    </div>\n                                  </div>\n\n                                  <div style={{padding:12, background:'rgba(16, 185, 129, 0.1)', borderRadius:8}}>\n                                    <div style={{fontSize:11, opacity:0.7, marginBottom:4}}>Distance</div>\n                                    <div style={{fontSize:18, fontWeight:700, color:'#10b981'}}>\n                                      {it.environmental.total_distance_km.toFixed(1)} km\n                                    </div>\n                                  </div>\n\n                                  <div style={{padding:12, background:'rgba(16, 185, 129, 0.1)', borderRadius:8}}>\n                                    <div style={{fontSize:11, opacity:0.7, marginBottom:4}}>Trees to Offset</div>\n                                    <div style={{fontSize:18, fontWeight:700, color:'#10b981'}}>\n                                      {it.environmental.trees_equivalent.toFixed(2)} ðŸŒ³\n                                    </div>\n                                  </div>\n                                </div>\n\n                                {it.environmental.legs && it.environmental.legs.length > 0 && (\n                                  <div style={{marginTop:12}}>\n                                    <div style={{fontSize:12, fontWeight:600, marginBottom:8, opacity:0.8}}>\n                                      Emissions by Leg:\n                                    </div>\n                                    <div style={{display:'flex', flexDirection:'column', gap:6}}>\n                                      {it.environmental.legs.map((leg, idx) => (\n                                        <div key={idx} style={{\n                                          display:'flex',\n                                          justifyContent:'space-between',\n                                          padding:'8px 12px',\n                                          background:'rgba(0,0,0,0.2)',\n                                          borderRadius:6,\n                                          fontSize:11\n                                        }}>\n                                          <span>{leg.mode} ({leg.distance_km.toFixed(1)} km)</span>\n                                          <span style={{fontWeight:600, color:'#10b981'}}>\n                                            {leg.co2_kg.toFixed(3)} kg COâ‚‚\n                                          </span>\n                                        </div>\n                                      ))}\n                                    </div>\n                                  </div>\n                                )}\n\n                                <div style={{\n                                  marginTop:12,\n                                  padding:'10px 12px',\n                                  background:'rgba(16, 185, 129, 0.15)',\n                                  borderRadius:8,\n                                  fontSize:12\n                                }}>\n                                  ðŸ’¡ <b>Eco-Score:</b> {it.environmental.eco_score ? \n                                    `${it.environmental.eco_score}/100` : \n                                    'Excellent choice for the environment!'\n                                  }\n                                  {it.environmental.co2_saved_percent >= 70 && \n                                    \" - You're making a significant positive impact! ðŸŒŸ\"\n                                  }\n                                </div>\n                              </div>\n                            )}\n                          </div>\n                        )}\n                        {alts[it.id] && (\n                          <div className=\"alt\" style={{\n                            marginTop:16, \n                            padding:20, \n                            background:'linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(52, 211, 153, 0.05) 100%)',\n                            border:'2px solid rgba(16, 185, 129, 0.3)',\n                            borderRadius:16,\n                            boxShadow:'0 4px 15px rgba(16, 185, 129, 0.15)'\n                          }}>\n                            <div style={{\n                              display:'flex', \n                              alignItems:'center', \n                              justifyContent:'space-between',\n                              marginBottom:12\n                            }}>\n                              <div style={{fontWeight:700, fontSize:16, color:'#10b981'}}>\n                                âœ¨ {alts[it.id].reason}\n                              </div>\n                              {alts[it.id].comparison && (\n                                <div style={{\n                                  display:'flex',\n                                  gap:8,\n                                  alignItems:'center'\n                                }}>\n                                  {alts[it.id].comparison.timeDiff !== 0 && (\n                                    <span style={{\n                                      fontSize:12,\n                                      padding:'4px 10px',\n                                      background: alts[it.id].comparison.timeDiff < 0 ? 'rgba(16, 185, 129, 0.2)' : 'rgba(239, 68, 68, 0.2)',\n                                      color: alts[it.id].comparison.timeDiff < 0 ? '#10b981' : '#ef4444',\n                                      borderRadius:8,\n                                      fontWeight:600\n                                    }}>\n                                      {alts[it.id].comparison.timeDiff > 0 ? '+' : ''}{alts[it.id].comparison.timeDiff} min\n                                    </span>\n                                  )}\n                                </div>\n                              )}\n                            </div>\n                            \n                            <div style={{\n                              display:'grid',\n                              gridTemplateColumns:'repeat(auto-fit, minmax(150px, 1fr))',\n                              gap:12,\n                              marginBottom:12\n                            }}>\n                              <div style={{\n                                background:'rgba(255,255,255,0.05)',\n                                padding:12,\n                                borderRadius:12,\n                                border:'1px solid rgba(255,255,255,0.1)'\n                              }}>\n                                <div style={{fontSize:11, opacity:0.6, marginBottom:4}}>Duration</div>\n                                <div style={{fontSize:16, fontWeight:700}}>\n                                  ~{alts[it.id].durationMin || 'â€”'} min\n                                </div>\n                              </div>\n                              \n                              <div style={{\n                                background:'rgba(255,255,255,0.05)',\n                                padding:12,\n                                borderRadius:12,\n                                border:'1px solid rgba(255,255,255,0.1)'\n                              }}>\n                                <div style={{fontSize:11, opacity:0.6, marginBottom:4}}>Transfers</div>\n                                <div style={{fontSize:16, fontWeight:700}}>\n                                  {alts[it.id].transfers || 0}\n                                  {alts[it.id].comparison?.transferDiff !== 0 && (\n                                    <span style={{\n                                      fontSize:11,\n                                      marginLeft:6,\n                                      color: alts[it.id].comparison.transferDiff < 0 ? '#10b981' : '#ef4444'\n                                    }}>\n                                      ({alts[it.id].comparison.transferDiff > 0 ? '+' : ''}{alts[it.id].comparison.transferDiff})\n                                    </span>\n                                  )}\n                                </div>\n                              </div>\n                              \n                              {alts[it.id].walk_distance && (\n                                <div style={{\n                                  background:'rgba(255,255,255,0.05)',\n                                  padding:12,\n                                  borderRadius:12,\n                                  border:'1px solid rgba(255,255,255,0.1)'\n                                }}>\n                                  <div style={{fontSize:11, opacity:0.6, marginBottom:4}}>Walking</div>\n                                  <div style={{fontSize:16, fontWeight:700}}>\n                                    {alts[it.id].walk_distance} km\n                                    {alts[it.id].comparison?.walkDiff !== 0 && (\n                                      <span style={{\n                                        fontSize:11,\n                                        marginLeft:6,\n                                        color: alts[it.id].comparison.walkDiff < 0 ? '#10b981' : '#ef4444'\n                                      }}>\n                                        ({alts[it.id].comparison.walkDiff > 0 ? '+' : ''}{alts[it.id].comparison.walkDiff}km)\n                                      </span>\n                                    )}\n                                  </div>\n                                </div>\n                              )}\n                            </div>\n                            \n                            {alts[it.id].legs && (\n                              <div style={{\n                                padding:12,\n                                background:'rgba(255,255,255,0.03)',\n                                borderRadius:10,\n                                marginBottom:10\n                              }}>\n                                <div style={{fontSize:11, opacity:0.6, marginBottom:6}}>Route Details</div>\n                                <div style={{fontSize:14, fontWeight:600}}>\n                                  ðŸš¶ {alts[it.id].legs.join(' â†’ ')}\n                                </div>\n                              </div>\n                            )}\n                            \n                            {alts[it.id].benefits && alts[it.id].benefits.length > 0 && (\n                              <div style={{marginTop:10}}>\n                                <div style={{fontSize:11, opacity:0.6, marginBottom:6}}>Benefits:</div>\n                                {alts[it.id].benefits.map((benefit, idx) => (\n                                  <div key={idx} style={{\n                                    fontSize:13,\n                                    padding:'6px 10px',\n                                    background:'rgba(16, 185, 129, 0.15)',\n                                    borderLeft:'3px solid #10b981',\n                                    borderRadius:6,\n                                    marginBottom:4\n                                  }}>\n                                    âœ“ {benefit}\n                                  </div>\n                                ))}\n                              </div>\n                            )}\n                            \n                            {alts[it.id].warnings && alts[it.id].warnings.length > 0 && (\n                              <div style={{marginTop:10}}>\n                                <div style={{fontSize:11, opacity:0.6, marginBottom:6}}>Warnings:</div>\n                                {alts[it.id].warnings.map((warning, idx) => (\n                                  <div key={idx} style={{\n                                    fontSize:13,\n                                    padding:'6px 10px',\n                                    background:'rgba(251, 191, 36, 0.15)',\n                                    borderLeft:'3px solid #fbbf24',\n                                    borderRadius:6,\n                                    marginBottom:4\n                                  }}>\n                                    âš  {warning}\n                                  </div>\n                                ))}\n                              </div>\n                            )}\n                            \n                            {alts[it.id].note && (\n                              <div style={{\n                                marginTop:10,\n                                padding:10,\n                                background:'rgba(59, 130, 246, 0.1)',\n                                borderLeft:'3px solid #3b82f6',\n                                borderRadius:6,\n                                fontSize:13,\n                                color:'rgba(255,255,255,0.8)'\n                              }}>\n                                â„¹ï¸ {alts[it.id].note}\n                              </div>\n                            )}\n                          </div>\n                        )}\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </div>\n            </div>\n          </FeatureCard>\n\n          <FeatureCard icon=\"ðŸš\" title=\"Nearby Transit\" description=\"Check nearby stops, live departures, and multimodal choices.\">\n            <div style={{display:'flex', flexDirection:'column', gap:18}}>\n              <div style={{display:'flex', flexWrap:'wrap', gap:12}}>\n                {stops.slice(0,6).map(s => (\n                  <div key={s.stop_id} style={{padding:12, border:'1px solid var(--line,#e5e7eb)', borderRadius:12, background:'var(--card,#fff)', minWidth:180}}>\n                    <div style={{fontWeight:700}}>{s.name}</div>\n                    <div style={{opacity:0.7, fontSize:12}}>{s.distance_m} m away</div>\n                    <div style={{marginTop:10}}><button className=\"btn\" onClick={()=>viewDepartures(s)}>Live departures</button></div>\n                  </div>\n                ))}\n                {stops.length===0 && <div style={{opacity:0.7}}>Searching for nearby stopsâ€¦</div>}\n              </div>\n              {selectedStop && (\n                <div style={{border:'1px solid var(--line,#e5e7eb)', borderRadius:12, padding:16, background:'var(--card,#fff)'}}>\n                  <div style={{fontWeight:700, marginBottom:8}}>Departures â€” {selectedStop.name}</div>\n                  <ul style={{margin:0, paddingLeft:18}}>\n                    {departures.map((d,i)=>(\n                      <li key={i}><strong>{d.route}</strong> â†’ {d.headsign} <span style={{opacity:0.65}}>in {d.departure_in_min} min</span></li>\n                    ))}\n                    {departures.length===0 && <li style={{opacity:0.65}}>Loading departuresâ€¦</li>}\n                  </ul>\n                </div>\n              )}\n            </div>\n          </FeatureCard>\n          </div>\n        )}\n\n        {view === 'safety' && (\n          <div>\n            <h2 className=\"section-title\">ðŸ›¡ï¸ Safety & Emergency</h2>\n          <FeatureCard icon=\"ðŸ“ž\" title=\"Emergency Contacts\" description=\"Quick access to local emergency services.\">\n            <div style={{display:'flex', flexWrap:'wrap', gap:20}}>\n              <div style={{flex:'1 1 260px', display:'flex', flexDirection:'column', gap:10}}>\n                <div style={{fontWeight:600}}>Quick actions</div>\n                <button className=\"btn\" onClick={()=>updateSavedPlace('home', origin)}>Save home</button>\n                <button className=\"btn\" onClick={()=>updateSavedPlace('work', dest)}>Save work</button>\n                <button className=\"btn btn-primary\" onClick={savePrefs}>Save to profile</button>\n                <button className=\"btn\" onClick={saveOfflinePack}>{text.offlineCta}</button>\n                {token ? (\n                  <div style={{fontSize:13, opacity:0.75}}>Signed in as {username}. Preferences sync across devices.</div>\n                ) : (\n                  <div style={{fontSize:13, opacity:0.75}}>Create an account above to sync preferences and reviews.</div>\n                )}\n              </div>\n              <div style={{flex:'1 1 260px'}}>\n                <div style={{fontWeight:600, marginBottom:6}}>ðŸ›Ÿ {text.emergencyContacts}</div>\n                <ul style={{margin:0, paddingLeft:18}}>\n                  {safetyContacts.map((c,i)=>(\n                    <li key={i}><strong>{c.name}</strong> â€” <a href={`tel:${c.phone}`} style={{color:'var(--danger)', fontWeight:700}}>{c.phone}</a></li>\n                  ))}\n                  {safetyContacts.length===0 && <li style={{opacity:0.7}}>Loading local contactsâ€¦</li>}\n                </ul>\n                <div style={{marginTop:12}}>\n                  <button className=\"btn\" onClick={shareLocation}>{text.shareLocation}</button>\n                </div>\n              </div>\n              <div style={{flex:'1 1 260px'}}>\n                <div style={{fontWeight:600, marginBottom:6}}>Share status</div>\n                <p style={{opacity:0.75}}>Tap <em>Save offline snapshot</em> before you head out to keep routes, alerts, and emergency numbers handy â€” even without coverage.</p>\n              </div>\n            </div>\n          </FeatureCard>\n          </div>\n        )}\n\n        {view === 'settings' && (\n          <div>\n            <h2 className=\"section-title\">âš™ï¸ Settings & Preferences</h2>\n          <FeatureCard icon=\"ðŸŒ\" title=\"Travel Toolkit\" description=\"International tools for language, money, and bookings.\">\n            <div style={{display:'flex', flexWrap:'wrap', gap:20}}>\n              <div style={{flex:'1 1 220px'}}>\n                <div style={{fontWeight:600, marginBottom:6}}>In-app translator</div>\n                <p style={{opacity:0.75}}>Interface now in <strong>{uiLang.toUpperCase()}</strong>. Additional copy will respect this preference as the app grows.</p>\n              </div>\n              <div style={{flex:'1 1 260px', display:'flex', flexDirection:'column', gap:8}}>\n                <div style={{fontWeight:600}}>Currency helper</div>\n                <label style={{fontSize:12, opacity:0.75}}>Amount in NZD</label>\n                <input type=\"number\" value={amount} min=\"0\" onChange={e=>setAmount(Number(e.target.value) || 0)} />\n                <label style={{fontSize:12, opacity:0.75}}>Convert to</label>\n                <select value={currency} onChange={e=>setCurrency(e.target.value)}>\n                  {currencyOptions.map(code => <option key={code} value={code}>{code}</option>)}\n                </select>\n                <div style={{marginTop:4, fontWeight:600}}>â‰ˆ {convertedAmount} {currency}</div>\n              </div>\n              <div style={{flex:'1 1 260px'}}>\n                <div style={{fontWeight:600, marginBottom:6}}>Bookings & payments</div>\n                <ul style={{margin:0, paddingLeft:18}}>\n                  <li>Reserve transit passes and parking</li>\n                  <li>Bundle flights + hotels (coming soon)</li>\n                  <li>Secure wallet for ticketing integrations</li>\n                </ul>\n              </div>\n            </div>\n          </FeatureCard>\n          </div>\n        )}\n\n        {view === 'reviews' && (\n          <div>\n            <h2 className=\"section-title\">â­ Community Reviews</h2>\n          <FeatureCard icon=\"â­\" title=\"Share Your Experience\" description=\"Crowd-sourced tips keep travellers informed.\">\n            <div style={{display:'flex', flexWrap:'wrap', gap:20}}>\n              <div style={{flex:'1 1 260px', display:'flex', flexDirection:'column', gap:10}}>\n                <label style={{display:'flex', flexDirection:'column', gap:4}}>\n                  <span style={{fontSize:12, opacity:0.75}}>Location</span>\n                  <input placeholder=\"e.g., Britomart\" value={reviewLoc} onChange={e=>setReviewLoc(e.target.value)} />\n                </label>\n                <label style={{display:'flex', flexDirection:'column', gap:4}}>\n                  <span style={{fontSize:12, opacity:0.75}}>Rating</span>\n                  <select value={reviewRating} onChange={e=>setReviewRating(e.target.value)}>\n                    {[5,4,3,2,1].map(n=> <option key={n} value={n}>{n}</option>)}\n                  </select>\n                </label>\n                <label style={{display:'flex', flexDirection:'column', gap:4}}>\n                  <span style={{fontSize:12, opacity:0.75}}>Comment</span>\n                  <input placeholder=\"Short noteâ€¦\" value={reviewComment} onChange={e=>setReviewComment(e.target.value)} />\n                </label>\n                <button className=\"btn btn-primary\" onClick={submitReview}>Share review</button>\n              </div>\n              <div style={{flex:'1 1 320px'}}>\n                <div style={{fontWeight:600, marginBottom:8}}>Latest reviews</div>\n                <ul style={{margin:0, paddingLeft:18, display:'flex', flexDirection:'column', gap:8}}>\n                  {reviews.map((r,i)=>(\n                    <li key={i}><strong>{r.location}</strong> â€¢ {r.rating}/5 â€” {r.comment} <span style={{opacity:0.6}}>by {r.user}</span></li>\n                  ))}\n                  {reviews.length===0 && <li style={{opacity:0.7}}>Be the first to add a community update.</li>}\n                </ul>\n              </div>\n            </div>\n          </FeatureCard>\n          </div>\n        )}\n\n        {view === 'analytics' && (\n          <div>\n            <h2 className=\"section-title\">ðŸ“Š System Analytics Dashboard</h2>\n            <div style={{\n              padding:'16px 20px',\n              background:'linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(139, 92, 246, 0.15) 100%)',\n              borderRadius:12,\n              border:'1px solid rgba(59, 130, 246, 0.3)',\n              marginBottom:24\n            }}>\n              <div style={{fontSize:14}}>\n                <b>ðŸŽ“ Assessment Feature:</b> Analytics dashboard tracks system usage, environmental impact, and performance metrics for research and evaluation purposes.\n              </div>\n            </div>\n\n            {analyticsData ? (\n              <>\n                {/* Summary Stats Grid */}\n                <div style={{display:'grid', gridTemplateColumns:'repeat(auto-fit, minmax(200px, 1fr))', gap:16, marginBottom:32}}>\n                  <div style={{padding:20, background:'var(--glass-bg)', backdropFilter:'blur(10px)', borderRadius:12, border:'1px solid var(--glass-border)'}}>\n                    <div style={{fontSize:12, opacity:0.7, marginBottom:6}}>Total Trips Planned</div>\n                    <div style={{fontSize:32, fontWeight:700, color:'#3b82f6'}}>{analyticsData.total_trips || 0}</div>\n                  </div>\n\n                  <div style={{padding:20, background:'var(--glass-bg)', backdropFilter:'blur(10px)', borderRadius:12, border:'1px solid var(--glass-border)'}}>\n                    <div style={{fontSize:12, opacity:0.7, marginBottom:6}}>Active Users (7d)</div>\n                    <div style={{fontSize:32, fontWeight:700, color:'#8b5cf6'}}>{analyticsData.active_users_7d || 0}</div>\n                  </div>\n\n                  <div style={{padding:20, background:'var(--glass-bg)', backdropFilter:'blur(10px)', borderRadius:12, border:'1px solid var(--glass-border)'}}>\n                    <div style={{fontSize:12, opacity:0.7, marginBottom:6}}>COâ‚‚ Saved (kg)</div>\n                    <div style={{fontSize:32, fontWeight:700, color:'#10b981'}}>{analyticsData.total_co2_saved_kg?.toFixed(1) || 0}</div>\n                    <div style={{fontSize:11, opacity:0.6, marginTop:4}}>vs driving alone</div>\n                  </div>\n\n                  <div style={{padding:20, background:'var(--glass-bg)', backdropFilter:'blur(10px)', borderRadius:12, border:'1px solid var(--glass-border)'}}>\n                    <div style={{fontSize:12, opacity:0.7, marginBottom:6}}>Avg MCDA Score</div>\n                    <div style={{fontSize:32, fontWeight:700, color:'#f59e0b'}}>{analyticsData.avg_mcda_score?.toFixed(1) || 0}</div>\n                    <div style={{fontSize:11, opacity:0.6, marginTop:4}}>out of 100</div>\n                  </div>\n                </div>\n\n                {/* Performance Metrics */}\n                <FeatureCard icon=\"ðŸ“ˆ\" title=\"System Performance\" description=\"Route quality and user satisfaction metrics\">\n                  <div style={{display:'grid', gridTemplateColumns:'repeat(auto-fit, minmax(220px, 1fr))', gap:20}}>\n                    <div>\n                      <div style={{fontWeight:600, marginBottom:8}}>Trip Metrics</div>\n                      <div style={{display:'flex', flexDirection:'column', gap:8}}>\n                        <div style={{display:'flex', justifyContent:'space-between'}}>\n                          <span style={{opacity:0.7}}>Avg Duration:</span>\n                          <strong>{analyticsData.avg_duration_min?.toFixed(1) || 0} min</strong>\n                        </div>\n                        <div style={{display:'flex', justifyContent:'space-between'}}>\n                          <span style={{opacity:0.7}}>Avg Transfers:</span>\n                          <strong>{analyticsData.avg_transfers?.toFixed(1) || 0}</strong>\n                        </div>\n                        <div style={{display:'flex', justifyContent:'space-between'}}>\n                          <span style={{opacity:0.7}}>Total Distance:</span>\n                          <strong>{analyticsData.total_distance_km?.toFixed(1) || 0} km</strong>\n                        </div>\n                      </div>\n                    </div>\n\n                    <div>\n                      <div style={{fontWeight:600, marginBottom:8}}>Environmental Impact</div>\n                      <div style={{display:'flex', flexDirection:'column', gap:8}}>\n                        <div style={{display:'flex', justifyContent:'space-between'}}>\n                          <span style={{opacity:0.7}}>Car Trips Avoided:</span>\n                          <strong style={{color:'#10b981'}}>{analyticsData.car_trips_avoided || 0}</strong>\n                        </div>\n                        <div style={{display:'flex', justifyContent:'space-between'}}>\n                          <span style={{opacity:0.7}}>Total COâ‚‚ Saved:</span>\n                          <strong style={{color:'#10b981'}}>{analyticsData.total_co2_saved_kg?.toFixed(2) || 0} kg</strong>\n                        </div>\n                        <div style={{display:'flex', justifyContent:'space-between'}}>\n                          <span style={{opacity:0.7}}>Avg per Trip:</span>\n                          <strong style={{color:'#10b981'}}>\n                            {(analyticsData.total_co2_saved_kg / Math.max(analyticsData.total_trips, 1))?.toFixed(2) || 0} kg\n                          </strong>\n                        </div>\n                      </div>\n                    </div>\n\n                    <div>\n                      <div style={{fontWeight:600, marginBottom:8}}>System Health</div>\n                      <div style={{display:'flex', flexDirection:'column', gap:8}}>\n                        <div style={{display:'flex', justifyContent:'space-between'}}>\n                          <span style={{opacity:0.7}}>Total Users:</span>\n                          <strong>{analyticsData.total_users || 0}</strong>\n                        </div>\n                        <div style={{display:'flex', justifyContent:'space-between'}}>\n                          <span style={{opacity:0.7}}>Total Searches:</span>\n                          <strong>{analyticsData.total_searches || 0}</strong>\n                        </div>\n                        <div style={{display:'flex', justifyContent:'space-between'}}>\n                          <span style={{opacity:0.7}}>Uptime:</span>\n                          <strong>{analyticsData.system_uptime_days?.toFixed(1) || 0} days</strong>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </FeatureCard>\n\n                {/* MCDA Insights */}\n                <FeatureCard icon=\"ðŸ†\" title=\"Multi-Criteria Decision Analysis\" description=\"Route scoring breakdown across all trips\">\n                  <div style={{padding:16, background:'rgba(139, 92, 246, 0.1)', borderRadius:8}}>\n                    <div style={{fontSize:14, marginBottom:12}}>\n                      Average MCDA score of <strong style={{color:'#8b5cf6'}}>{analyticsData.avg_mcda_score?.toFixed(1)}/100</strong> indicates{' '}\n                      {analyticsData.avg_mcda_score >= 80 ? 'excellent' : \n                       analyticsData.avg_mcda_score >= 65 ? 'good' : \n                       'acceptable'} route quality across all planned trips.\n                    </div>\n                    <div style={{fontSize:12, opacity:0.7}}>\n                      ðŸ’¡ MCDA considers time, cost, comfort, reliability, and environmental factors to rank route options.\n                    </div>\n                  </div>\n                </FeatureCard>\n\n                {/* Environmental Summary */}\n                <FeatureCard icon=\"ðŸŒ\" title=\"Environmental Impact Summary\" description=\"Cumulative sustainability metrics\">\n                  <div style={{padding:20, background:'linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(52, 211, 153, 0.1) 100%)', borderRadius:12, border:'1px solid rgba(16, 185, 129, 0.3)'}}>\n                    <div style={{fontSize:18, fontWeight:700, marginBottom:12, color:'#10b981'}}>\n                      ðŸŒŸ Total COâ‚‚ Savings: {analyticsData.total_co2_saved_kg?.toFixed(2) || 0} kg\n                    </div>\n                    <div style={{fontSize:14, opacity:0.9, marginBottom:16}}>\n                      By using public transport instead of driving, users have collectively saved{' '}\n                      <strong style={{color:'#10b981'}}>{analyticsData.total_co2_saved_kg?.toFixed(2) || 0} kg of COâ‚‚</strong> emissions.\n                    </div>\n                    <div style={{display:'grid', gridTemplateColumns:'repeat(auto-fit, minmax(200px, 1fr))', gap:12}}>\n                      <div style={{padding:12, background:'rgba(16, 185, 129, 0.15)', borderRadius:8}}>\n                        <div style={{fontSize:12, opacity:0.7}}>Equivalent Trees</div>\n                        <div style={{fontSize:24, fontWeight:700, color:'#10b981'}}>\n                          {((analyticsData.total_co2_saved_kg / 1000) * 45.9)?.toFixed(1) || 0} ðŸŒ³\n                        </div>\n                        <div style={{fontSize:10, opacity:0.6, marginTop:4}}>needed to offset emissions</div>\n                      </div>\n\n                      <div style={{padding:12, background:'rgba(16, 185, 129, 0.15)', borderRadius:8}}>\n                        <div style={{fontSize:12, opacity:0.7}}>Car Trips Avoided</div>\n                        <div style={{fontSize:24, fontWeight:700, color:'#10b981'}}>\n                          {analyticsData.car_trips_avoided || 0}\n                        </div>\n                        <div style={{fontSize:10, opacity:0.6, marginTop:4}}>reduced congestion</div>\n                      </div>\n\n                      <div style={{padding:12, background:'rgba(16, 185, 129, 0.15)', borderRadius:8}}>\n                        <div style={{fontSize:12, opacity:0.7}}>Distance Traveled</div>\n                        <div style={{fontSize:24, fontWeight:700, color:'#10b981'}}>\n                          {analyticsData.total_distance_km?.toFixed(1) || 0} km\n                        </div>\n                        <div style={{fontSize:10, opacity:0.6, marginTop:4}}>via public transport</div>\n                      </div>\n                    </div>\n                  </div>\n                </FeatureCard>\n\n                <div style={{marginTop:20, padding:16, background:'rgba(59, 130, 246, 0.1)', borderRadius:8, fontSize:13, opacity:0.8}}>\n                  â„¹ï¸ <b>Note:</b> Analytics data is tracked for research and assessment purposes. All metrics are calculated based on actual trip planning data.\n                </div>\n              </>\n            ) : (\n              <div style={{textAlign:'center', padding:60}}>\n                <div style={{fontSize:48, marginBottom:16}}>ðŸ“Š</div>\n                <div style={{fontSize:16, opacity:0.7, marginBottom:12}}>Loading analytics data...</div>\n                <div style={{fontSize:14, opacity:0.5}}>Plan some trips to see analytics!</div>\n              </div>\n            )}\n          </div>\n        )}\n\n      </div>\n    </div>\n  )\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}