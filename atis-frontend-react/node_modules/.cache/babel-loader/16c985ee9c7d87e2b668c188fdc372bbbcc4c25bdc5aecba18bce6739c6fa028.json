{"ast":null,"code":"import _objectSpread from\"C:/Users/mdvec/OneDrive/Documents/YOOBEE-MSE/TERM2/MSE806 Intelligent Transportation Systems/ATIS/ATIS/atis-frontend-react/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useEffect,useState,useMemo,useCallback}from'react';import{MapContainer,TileLayer,Marker,Popup,useMapEvents}from'react-leaflet';import'leaflet/dist/leaflet.css';import L from'leaflet';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const API='';// CRA proxy forwards to backend\n// Fix Leaflet default icon issue with webpack\ndelete L.Icon.Default.prototype._getIconUrl;L.Icon.Default.mergeOptions({iconRetinaUrl:'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png',iconUrl:'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png',shadowUrl:'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png'});const TRANSLATIONS={en:{name:'Advanced Traveler Information System',tagline:'Real-time, multimodal trip planning with intelligent route optimization.',translatorLabel:'Preferred language',offlineCta:'Save offline snapshot',shareLocation:'Share Location',copyCoords:'Copy Coordinates',locationCopied:'Location copied!',tripPlanning:'Trip planning & dynamic routing',realTimeSnapshot:'Real-time snapshot',weatherNow:'Weather now',alertsIncidents:'Alerts & incidents',noAlerts:'No active alerts right now.',findItineraries:'Find itineraries',exportPdf:'Export PDF',suggestAlt:'Suggest alternative',emergencyContacts:'Emergency Contacts'},es:{name:'InformaciÃ³n de Viaje Avanzada',tagline:'PlanificaciÃ³n de viajes multimodal con datos en tiempo real.',translatorLabel:'Idioma preferido',offlineCta:'Guardar informaciÃ³n sin conexiÃ³n',shareLocation:'Compartir UbicaciÃ³n',copyCoords:'Copiar Coordenadas',locationCopied:'Â¡UbicaciÃ³n copiada!',tripPlanning:'PlanificaciÃ³n y enrutamiento dinÃ¡mico',realTimeSnapshot:'InstantÃ¡nea en tiempo real',weatherNow:'Clima ahora',alertsIncidents:'Alertas e incidentes',noAlerts:'No hay alertas activas ahora.',findItineraries:'Buscar itinerarios',exportPdf:'Exportar PDF',suggestAlt:'Sugerir alternativa',emergencyContacts:'Contactos de Emergencia'},tl:{name:'Advanced na Impormasyon sa Paglalakbay',tagline:'Real-time na pagpaplano ng biyahe gamit ang matalinong mungkahi.',translatorLabel:'Gustong wika',offlineCta:'I-save ang offline na snapshot',shareLocation:'Ibahagi ang Lokasyon',copyCoords:'Kopyahin ang Coordinates',locationCopied:'Nakopya ang lokasyon!',tripPlanning:'Pagpaplano ng biyahe at dynamic na ruta',realTimeSnapshot:'Real-time na snapshot',weatherNow:'Panahon ngayon',alertsIncidents:'Mga alerto at insidente',noAlerts:'Walang aktibong alerto ngayon.',findItineraries:'Maghanap ng itinerary',exportPdf:'I-export ang PDF',suggestAlt:'Magmungkahi ng alternatibo',emergencyContacts:'Emergency na Contacts'},zh:{name:'é«˜çº§æ—…è¡Œä¿¡æ¯ç³»ç»Ÿ',tagline:'å®žæ—¶å¤šæ¨¡å¼è¡Œç¨‹è§„åˆ’ä¸Žæ™ºèƒ½å»ºè®®',translatorLabel:'é¦–é€‰è¯­è¨€',offlineCta:'ä¿å­˜ç¦»çº¿å¿«ç…§',shareLocation:'åˆ†äº«ä½ç½®',copyCoords:'å¤åˆ¶åæ ‡',locationCopied:'ä½ç½®å·²å¤åˆ¶ï¼',tripPlanning:'è¡Œç¨‹è§„åˆ’ä¸ŽåŠ¨æ€è·¯çº¿',realTimeSnapshot:'å®žæ—¶å¿«ç…§',weatherNow:'å½“å‰å¤©æ°”',alertsIncidents:'è­¦æŠ¥å’Œäº‹ä»¶',noAlerts:'ç›®å‰æ²¡æœ‰æ´»åŠ¨è­¦æŠ¥',findItineraries:'æŸ¥æ‰¾è¡Œç¨‹',exportPdf:'å¯¼å‡ºPDF',suggestAlt:'å»ºè®®æ›¿ä»£æ–¹æ¡ˆ',emergencyContacts:'ç´§æ€¥è”ç³»äºº'}};const CURRENCY_RATES={NZD:1,USD:0.59,EUR:0.55,AUD:0.91};function Chip(_ref){let{children}=_ref;return/*#__PURE__*/_jsx(\"span\",{className:\"chip\",style:{marginRight:6},children:children});}function FeatureCard(_ref2){let{title,description,children,icon}=_ref2;return/*#__PURE__*/_jsxs(\"section\",{className:\"card\",style:{marginBottom:32},children:[/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:24},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:16,marginBottom:10},children:[icon&&/*#__PURE__*/_jsx(\"div\",{style:{fontSize:42,filter:'drop-shadow(0 4px 8px rgba(0,0,0,0.2))'},children:icon}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:26,fontWeight:800,background:'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',WebkitBackgroundClip:'text',WebkitTextFillColor:'transparent',backgroundClip:'text',letterSpacing:'-0.5px'},children:title}),description&&/*#__PURE__*/_jsx(\"div\",{style:{color:'var(--muted)',fontSize:15,marginTop:6,lineHeight:1.6},children:description})]})]})}),/*#__PURE__*/_jsx(\"div\",{children:children})]});}function DraggableMarker(_ref3){let{position,setPosition,label}=_ref3;const[draggable,setDraggable]=useState(true);const eventHandlers={dragend(e){const marker=e.target;const pos=marker.getLatLng();setPosition([pos.lat,pos.lng]);}};return/*#__PURE__*/_jsx(Marker,{draggable:draggable,eventHandlers:eventHandlers,position:position,children:/*#__PURE__*/_jsx(Popup,{minWidth:90,children:/*#__PURE__*/_jsxs(\"span\",{onClick:()=>setDraggable(d=>!d),children:[label,/*#__PURE__*/_jsx(\"br\",{}),draggable?'Draggable':'Click to make draggable']})})});}function MapClickHandler(_ref4){let{onMapClick}=_ref4;useMapEvents({click(e){if(onMapClick){onMapClick([e.latlng.lat,e.latlng.lng]);}}});return null;}function InteractiveMap(_ref5){let{origin,setOrigin,dest,setDest,stops}=_ref5;const center=origin;return/*#__PURE__*/_jsxs(MapContainer,{center:center,zoom:13,style:{height:'100%',width:'100%',borderRadius:12},children:[/*#__PURE__*/_jsx(TileLayer,{attribution:\"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a>\",url:\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"}),/*#__PURE__*/_jsx(DraggableMarker,{position:origin,setPosition:setOrigin,label:\"Origin (drag me)\"}),/*#__PURE__*/_jsx(Marker,{position:dest,children:/*#__PURE__*/_jsx(Popup,{children:\"Destination\"})}),stops.slice(0,10).map(stop=>/*#__PURE__*/_jsx(Marker,{position:[stop.lat,stop.lng],icon:new L.Icon({iconUrl:'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png',shadowUrl:'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),children:/*#__PURE__*/_jsxs(Popup,{children:[/*#__PURE__*/_jsx(\"strong\",{children:stop.name}),/*#__PURE__*/_jsx(\"br\",{}),stop.distance_m,\"m away\"]})},stop.stop_id)),/*#__PURE__*/_jsx(MapClickHandler,{onMapClick:setDest})]});}function AuthPanel(_ref6){let{token,setToken,username,setUsername}=_ref6;const[mode,setMode]=useState('login');const[user,setUser]=useState('');const[pass,setPass]=useState('');const[email,setEmail]=useState('');const[showPass,setShowPass]=useState(false);const[error,setError]=useState('');const[loading,setLoading]=useState(false);const[strength,setStrength]=useState(0);const[rememberMe,setRememberMe]=useState(true);const[showAuthModal,setShowAuthModal]=useState(false);useEffect(()=>{const t=localStorage.getItem('atis_token')||sessionStorage.getItem('atis_token');const u=localStorage.getItem('atis_user')||sessionStorage.getItem('atis_user');if(t&&u){setToken(t);setUsername(u);}},[setToken,setUsername]);useEffect(()=>{if(mode==='register'&&pass){let score=0;if(pass.length>=8)score++;if(pass.length>=12)score++;if(/[a-z]/.test(pass)&&/[A-Z]/.test(pass))score++;if(/[0-9]/.test(pass))score++;if(/[^a-zA-Z0-9]/.test(pass))score++;setStrength(score);}},[pass,mode]);const validateEmail=email=>{return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email);};const submit=async e=>{e===null||e===void 0?void 0:e.preventDefault();setError('');// Validation\nif(!user||user.length<3){setError('Username must be at least 3 characters');return;}if(!pass||pass.length<6){setError('Password must be at least 6 characters');return;}if(mode==='register'){if(!email||!validateEmail(email)){setError('Please enter a valid email address');return;}if(strength<3){setError('Password is too weak. Use mix of letters, numbers, and symbols.');return;}}setLoading(true);try{const payload=mode==='register'?{username:user,password:pass,email:email}:{username:user,password:pass};const r=await fetch(\"\".concat(API,\"/auth/\").concat(mode),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});const d=await r.json();if(!r.ok)throw new Error(d.detail||'Authentication failed');setToken(d.token);setUsername(d.username);// Store based on remember me preference\nconst storage=rememberMe?localStorage:sessionStorage;storage.setItem('atis_token',d.token);storage.setItem('atis_user',d.username);storage.setItem('atis_login_time',Date.now().toString());setUser('');setPass('');setEmail('');setShowAuthModal(false);}catch(e){setError(e.message);}finally{setLoading(false);}};const logout=()=>{setToken(null);setUsername(null);setIsAuthenticated(false);localStorage.removeItem('atis_token');localStorage.removeItem('atis_user');localStorage.removeItem('atis_login_time');sessionStorage.removeItem('atis_token');sessionStorage.removeItem('atis_user');sessionStorage.removeItem('atis_login_time');toast('ðŸ‘‹ Logged out');};const getStrengthColor=()=>{if(strength<=2)return'#ef4444';if(strength<=3)return'#f59e0b';return'#10b981';};const getStrengthText=()=>{if(strength<=2)return'Weak';if(strength<=3)return'Medium';return'Strong';};if(token){return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:16},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pill\",style:{display:'flex',alignItems:'center',gap:10},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:32,height:32,borderRadius:'50%',background:'var(--gradient-1)',display:'grid',placeItems:'center',color:'white',fontWeight:700,fontSize:14},children:username[0].toUpperCase()}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:13,fontWeight:600},children:username}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,color:'var(--muted)'},children:\"Verified\"})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:logout,children:\"\\uD83D\\uDEAA Logout\"})]});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>setShowAuthModal(true),children:\"\\uD83D\\uDD10 Sign In\"}),showAuthModal&&/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',inset:0,background:'rgba(0,0,0,0.7)',backdropFilter:'blur(8px)',display:'grid',placeItems:'center',zIndex:9999,padding:20},onClick:()=>setShowAuthModal(false),children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'var(--glass-bg)',backdropFilter:'blur(30px)',border:'1px solid var(--glass-border)',borderRadius:28,padding:40,maxWidth:480,width:'100%',boxShadow:'var(--card-shadow)'},onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',marginBottom:32},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:32,marginBottom:12},children:\"\\uD83D\\uDD10\"}),/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:28,fontWeight:800,marginBottom:8,background:'var(--gradient-1)',WebkitBackgroundClip:'text',WebkitTextFillColor:'transparent'},children:mode==='login'?'Welcome Back':'Create Account'}),/*#__PURE__*/_jsx(\"p\",{style:{color:'var(--muted)',fontSize:14},children:mode==='login'?'Sign in to access your personalized travel experience':'Join ATIS for smart route planning'})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:submit,style:{display:'flex',flexDirection:'column',gap:20},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:8,fontSize:13,fontWeight:600,color:'var(--muted)'},children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter username\",value:user,onChange:e=>setUser(e.target.value),style:{width:'100%'},autoComplete:\"username\",disabled:loading})]}),mode==='register'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:8,fontSize:13,fontWeight:600,color:'var(--muted)'},children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"your.email@example.com\",value:email,onChange:e=>setEmail(e.target.value),style:{width:'100%'},autoComplete:\"email\",disabled:loading})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:8,fontSize:13,fontWeight:600,color:'var(--muted)'},children:\"Password\"}),/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"input\",{type:showPass?'text':'password',placeholder:\"Enter password\",value:pass,onChange:e=>setPass(e.target.value),style:{width:'100%',paddingRight:45},autoComplete:mode==='login'?'current-password':'new-password',disabled:loading}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowPass(!showPass),style:{position:'absolute',right:12,top:'50%',transform:'translateY(-50%)',background:'none',border:'none',cursor:'pointer',fontSize:18},children:showPass?'ðŸ‘ï¸':'ðŸ‘ï¸â€ðŸ—¨ï¸'})]}),mode==='register'&&pass&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:8},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:4},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:12,color:'var(--muted)'},children:\"Password strength:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:12,fontWeight:600,color:getStrengthColor()},children:getStrengthText()})]}),/*#__PURE__*/_jsx(\"div\",{style:{height:4,background:'rgba(255,255,255,0.1)',borderRadius:2,overflow:'hidden'},children:/*#__PURE__*/_jsx(\"div\",{style:{height:'100%',width:\"\".concat(strength/5*100,\"%\"),background:getStrengthColor(),transition:'all 0.3s'}})})]})]}),mode==='login'&&/*#__PURE__*/_jsxs(\"label\",{style:{display:'flex',alignItems:'center',gap:8,cursor:'pointer',userSelect:'none'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:rememberMe,onChange:e=>setRememberMe(e.target.checked),disabled:loading}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:13,color:'var(--muted)'},children:\"Remember me for 30 days\"})]}),error&&/*#__PURE__*/_jsxs(\"div\",{style:{padding:12,background:'rgba(239, 68, 68, 0.1)',border:'1px solid var(--danger)',borderRadius:12,color:'var(--danger)',fontSize:13,textAlign:'center'},children:[\"\\u26A0\\uFE0F \",error]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",style:{width:'100%',padding:16,fontSize:16},disabled:loading,children:loading?'â³ Processing...':mode==='login'?'ðŸš€ Sign In':'âœ¨ Create Account'}),/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center'},children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setMode(mode==='login'?'register':'login');setError('');},style:{background:'none',border:'none',color:'var(--primary)',cursor:'pointer',fontSize:14,fontWeight:600},disabled:loading,children:mode==='login'?\"Don't have an account? Sign up\":'Already have an account? Sign in'})})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAuthModal(false),style:{position:'absolute',top:20,right:20,background:'var(--glass-bg)',border:'1px solid var(--glass-border)',borderRadius:'50%',width:36,height:36,display:'grid',placeItems:'center',cursor:'pointer',fontSize:18},children:\"\\u2715\"})]})})]});}function LoginPage(_ref7){let{onLogin,isVerifying}=_ref7;const[mode,setMode]=useState('login');const[user,setUser]=useState('');const[pass,setPass]=useState('');const[email,setEmail]=useState('');const[showPass,setShowPass]=useState(false);const[error,setError]=useState('');const[loading,setLoading]=useState(false);const[strength,setStrength]=useState(0);useEffect(()=>{if(mode==='register'&&pass){let score=0;if(pass.length>=8)score++;if(pass.length>=12)score++;if(/[a-z]/.test(pass)&&/[A-Z]/.test(pass))score++;if(/[0-9]/.test(pass))score++;if(/[^a-zA-Z0-9]/.test(pass))score++;setStrength(score);}},[pass,mode]);const validateEmail=email=>{return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email);};const submit=async e=>{e===null||e===void 0?void 0:e.preventDefault();setError('');if(!user||user.length<3){setError('Username must be at least 3 characters');return;}if(!pass||pass.length<6){setError('Password must be at least 6 characters');return;}if(mode==='register'){if(!email||!validateEmail(email)){setError('Please enter a valid email address');return;}if(strength<3){setError('Password is too weak. Use mix of letters, numbers, and symbols.');return;}}setLoading(true);try{const payload=mode==='register'?{username:user,password:pass,email:email}:{username:user,password:pass};const r=await fetch(\"\".concat(API,\"/auth/\").concat(mode),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});const d=await r.json();if(!r.ok)throw new Error(d.detail||'Authentication failed');localStorage.setItem('atis_token',d.token);localStorage.setItem('atis_user',d.username);localStorage.setItem('atis_login_time',Date.now().toString());onLogin(d.token,d.username);}catch(e){setError(e.message);}finally{setLoading(false);}};const getStrengthColor=()=>{if(strength<=2)return'#ef4444';if(strength<=3)return'#f59e0b';return'#10b981';};const getStrengthText=()=>{if(strength<=2)return'Weak';if(strength<=3)return'Medium';return'Strong';};return/*#__PURE__*/_jsxs(\"div\",{style:{minHeight:'100vh',display:'flex',alignItems:'center',justifyContent:'center',padding:20,position:'relative',overflow:'hidden'},children:[/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',top:'-10%',left:'-5%',width:'500px',height:'500px',background:'radial-gradient(circle, rgba(102, 126, 234, 0.3) 0%, transparent 70%)',filter:'blur(80px)',animation:'float 8s ease-in-out infinite'}}),/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',bottom:'-10%',right:'-5%',width:'500px',height:'500px',background:'radial-gradient(circle, rgba(139, 92, 246, 0.3) 0%, transparent 70%)',filter:'blur(80px)',animation:'float 10s ease-in-out infinite reverse'}}),/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:480,width:'100%',position:'relative',zIndex:1},children:[/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',marginBottom:40},children:[/*#__PURE__*/_jsx(\"img\",{src:\"/atis-logo.jpg\",alt:\"ATIS Logo\",style:{width:120,height:120,margin:'0 auto 24px',filter:'drop-shadow(0 8px 24px rgba(0,0,0,0.3))',objectFit:'contain',borderRadius:24},onError:e=>{e.target.style.display='none';}}),/*#__PURE__*/_jsx(\"h1\",{style:{fontSize:42,fontWeight:900,marginBottom:12,background:'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',WebkitBackgroundClip:'text',WebkitTextFillColor:'transparent',letterSpacing:'-1px'},children:\"Welcome to ATIS\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:16,color:'var(--muted)',marginBottom:8},children:\"Advanced Traveler Information System\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:14,color:'var(--muted)'},children:isVerifying?'ðŸ”„ Verifying session...':'Intelligent route planning for smarter journeys'})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'var(--glass-bg)',backdropFilter:'blur(30px)',border:'1px solid var(--glass-border)',borderRadius:28,padding:40,boxShadow:'var(--card-shadow)',opacity:isVerifying?0.6:1,pointerEvents:isVerifying?'none':'auto',transition:'opacity 0.2s'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',marginBottom:32},children:[/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:26,fontWeight:800,marginBottom:8},children:isVerifying?'â³ Loading...':mode==='login'?'ðŸ” Sign In':'âœ¨ Create Account'}),/*#__PURE__*/_jsx(\"p\",{style:{color:'var(--muted)',fontSize:14},children:isVerifying?'Please wait...':mode==='login'?'Access your personalized travel experience':'Join for smart route planning'})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:submit,style:{display:'flex',flexDirection:'column',gap:20},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:8,fontSize:13,fontWeight:600,color:'var(--muted)'},children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter username\",value:user,onChange:e=>setUser(e.target.value),style:{width:'100%'},autoComplete:\"username\",disabled:loading,required:true})]}),mode==='register'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:8,fontSize:13,fontWeight:600,color:'var(--muted)'},children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"your.email@example.com\",value:email,onChange:e=>setEmail(e.target.value),style:{width:'100%'},autoComplete:\"email\",disabled:loading,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:8,fontSize:13,fontWeight:600,color:'var(--muted)'},children:\"Password\"}),/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"input\",{type:showPass?'text':'password',placeholder:\"Enter password\",value:pass,onChange:e=>setPass(e.target.value),style:{width:'100%',paddingRight:45},autoComplete:mode==='login'?'current-password':'new-password',disabled:loading,required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowPass(!showPass),style:{position:'absolute',right:12,top:'50%',transform:'translateY(-50%)',background:'none',border:'none',cursor:'pointer',fontSize:18},children:showPass?'ðŸ‘ï¸':'ðŸ‘ï¸â€ðŸ—¨ï¸'})]}),mode==='register'&&pass&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:8},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:4},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:12,color:'var(--muted)'},children:\"Password strength:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:12,fontWeight:600,color:getStrengthColor()},children:getStrengthText()})]}),/*#__PURE__*/_jsx(\"div\",{style:{height:4,background:'rgba(255,255,255,0.1)',borderRadius:2,overflow:'hidden'},children:/*#__PURE__*/_jsx(\"div\",{style:{height:'100%',width:\"\".concat(strength/5*100,\"%\"),background:getStrengthColor(),transition:'all 0.3s'}})})]})]}),error&&/*#__PURE__*/_jsxs(\"div\",{style:{padding:12,background:'rgba(239, 68, 68, 0.1)',border:'1px solid var(--danger)',borderRadius:12,color:'var(--danger)',fontSize:13,textAlign:'center'},children:[\"\\u26A0\\uFE0F \",error]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",style:{width:'100%',padding:16,fontSize:16},disabled:loading,children:loading?'â³ Processing...':mode==='login'?'ðŸš€ Sign In':'âœ¨ Create Account'}),/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center'},children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setMode(mode==='login'?'register':'login');setError('');},style:{background:'none',border:'none',color:'var(--primary)',cursor:'pointer',fontSize:14,fontWeight:600},disabled:loading,children:mode==='login'?\"Don't have an account? Sign up\":'Already have an account? Sign in'})})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:32,textAlign:'center',color:'var(--muted)',fontSize:13},children:[/*#__PURE__*/_jsx(\"p\",{style:{marginBottom:12},children:\"\\u2728 Real-time traffic & transit data\"}),/*#__PURE__*/_jsx(\"p\",{style:{marginBottom:12},children:\"\\uD83D\\uDDFA\\uFE0F Interactive route planning\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\uD83C\\uDF0D Multi-language support\"})]})]}),/*#__PURE__*/_jsx(\"style\",{children:\"\\n        @keyframes float {\\n          0%, 100% { transform: translateY(0) scale(1); }\\n          50% { transform: translateY(-20px) scale(1.05); }\\n        }\\n      \"})]});}export default function App(){// ALL STATE HOOKS MUST BE DECLARED FIRST\nconst[token,setToken]=useState(()=>localStorage.getItem('atis_token'));const[username,setUsername]=useState(()=>localStorage.getItem('atis_user'));const[isAuthenticated,setIsAuthenticated]=useState(false);const[isVerifying,setIsVerifying]=useState(true);const[origin,setOrigin]=useState([-36.8485,174.7633]);const[dest,setDest]=useState([-36.8443,174.7676]);const[stops,setStops]=useState([]);const[itins,setItins]=useState([]);const[banner,setBanner]=useState('');const[selectedStop,setSelectedStop]=useState(null);const[departures,setDepartures]=useState([]);const[alerts,setAlerts]=useState([]);const[alts,setAlts]=useState({});const[view,setView]=useState('home');const[modes,setModes]=useState(['bus','train','walk']);const[optimize,setOptimize]=useState('fastest');const[maxWalkKm,setMaxWalkKm]=useState(1.2);const[avoidStairs,setAvoidStairs]=useState(false);const[bikeOk,setBikeOk]=useState(false);const[whenType,setWhenType]=useState('depart');const[whenValue,setWhenValue]=useState('now');const[weather,setWeather]=useState(null);const[safetyContacts,setSafetyContacts]=useState([]);const[uiLang,setUiLang]=useState('en');const[currency,setCurrency]=useState('NZD');const[amount,setAmount]=useState(50);const[reviews,setReviews]=useState([]);const[reviewLoc,setReviewLoc]=useState('');const[reviewRating,setReviewRating]=useState(5);const[reviewComment,setReviewComment]=useState('');// Location search states\nconst[originSearch,setOriginSearch]=useState('');const[destSearch,setDestSearch]=useState('');const[originName,setOriginName]=useState('Auckland CBD');const[destName,setDestName]=useState('Auckland Airport');const[searchResults,setSearchResults]=useState([]);const[searchingFor,setSearchingFor]=useState(null);const text=TRANSLATIONS[uiLang]||TRANSLATIONS.en;const convertedAmount=Number((amount*(CURRENCY_RATES[currency]||1)).toFixed(2));// Check for existing session on mount and verify with backend\nuseEffect(()=>{let mounted=true;const verifySession=async()=>{const savedToken=localStorage.getItem('atis_token');const savedUser=localStorage.getItem('atis_user');if(savedToken&&savedUser){try{// Verify token with backend\nconst response=await fetch(\"\".concat(API,\"/auth/verify\"),{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(savedToken)}});if(!mounted)return;if(response.ok){// Token is valid - update state in one batch\nsetToken(savedToken);setUsername(savedUser);setIsAuthenticated(true);}else{// Token is invalid, clear storage\nlocalStorage.removeItem('atis_token');localStorage.removeItem('atis_user');localStorage.removeItem('atis_login_time');setToken(null);setUsername(null);setIsAuthenticated(false);}}catch(error){// Network error or backend down, clear session\nif(!mounted)return;console.error('Session verification failed:',error);localStorage.removeItem('atis_token');localStorage.removeItem('atis_user');localStorage.removeItem('atis_login_time');setToken(null);setUsername(null);setIsAuthenticated(false);}}if(mounted){setIsVerifying(false);}};verifySession();return()=>{mounted=false;};},[]);// Load initial data once\nuseEffect(()=>{fetch(\"\".concat(API,\"/stops/nearby?lat=\").concat(origin[0],\"&lng=\").concat(origin[1],\"&radius=900\")).then(r=>r.json()).then(d=>setStops(d.stops||[])).catch(()=>{});fetch(\"\".concat(API,\"/alerts\")).then(r=>r.json()).then(d=>setAlerts([...(d.alerts||[]),...(d.traffic||[])])).catch(()=>{});fetch(\"\".concat(API,\"/weather/point?lat=\").concat(origin[0],\"&lng=\").concat(origin[1])).then(r=>r.json()).then(d=>setWeather(d.forecast||null)).catch(()=>{});fetch(\"\".concat(API,\"/safety/contacts\")).then(r=>r.json()).then(d=>setSafetyContacts(d.contacts||[])).catch(()=>{});fetch(\"\".concat(API,\"/reviews\")).then(r=>r.json()).then(d=>setReviews(d.reviews||[])).catch(()=>{});},[]);// Update when origin changes (debounced to prevent excessive re-renders)\nuseEffect(()=>{const timeoutId=setTimeout(()=>{fetch(\"\".concat(API,\"/stops/nearby?lat=\").concat(origin[0],\"&lng=\").concat(origin[1],\"&radius=900\")).then(r=>r.json()).then(d=>setStops(d.stops||[])).catch(()=>{});fetch(\"\".concat(API,\"/weather/point?lat=\").concat(origin[0],\"&lng=\").concat(origin[1])).then(r=>r.json()).then(d=>setWeather(d.forecast||null)).catch(()=>{});},300);return()=>clearTimeout(timeoutId);},[origin]);const viewDepartures=async stop=>{setSelectedStop(stop);const r=await fetch(\"\".concat(API,\"/departures?stop_id=\").concat(stop.stop_id));const data=await r.json();setDepartures(data.departures||[]);};const plan=async()=>{var _d$context;const payload={origin,destination:dest,depart_at:whenType==='depart'?whenValue:'now',arrive_by:whenType==='arrive'?whenValue:null,optimize,max_walk_km:parseFloat(maxWalkKm),avoid_stairs:avoidStairs,bike_ok:bikeOk,modes};const r=await fetch(\"\".concat(API,\"/plan\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});const d=await r.json();setItins(d.itineraries||[]);setBanner(((_d$context=d.context)===null||_d$context===void 0?void 0:_d$context.weatherAlert)||'');setAlts({});};const exportPdf=async itinerary=>{const r=await fetch(\"\".concat(API,\"/export/itinerary\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({origin,destination:dest,itinerary})});const blob=await r.blob();const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download='atis_trip.pdf';a.click();URL.revokeObjectURL(url);};const suggestAlt=async itinerary=>{const r=await fetch(\"\".concat(API,\"/routes/suggest\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({current_itinerary:itinerary,incidents:alerts})});const data=await r.json();setAlts(prev=>_objectSpread(_objectSpread({},prev),{},{[itinerary.id]:data.alternative}));};const authHeaders=()=>token?{'Authorization':\"Bearer \".concat(token)}:{};const savePrefs=async()=>{if(!token){alert('Please login to save preferences.');return;}const r=await fetch(\"\".concat(API,\"/prefs\"),{method:'POST',headers:_objectSpread({'Content-Type':'application/json'},authHeaders()),body:JSON.stringify({lang:'en',currency:'NZD',home:origin,work:dest})});alert(r.ok?'Preferences saved':'Failed to save');};const languageOptions=Object.keys(TRANSLATIONS);const currencyOptions=Object.keys(CURRENCY_RATES);const saveOfflinePack=()=>{const snapshot={saved:{origin,destination:dest,modes,optimize,maxWalkKm,avoidStairs,bikeOk},alerts,weather,stops,safetyContacts};localStorage.setItem('atis_offline_snapshot',JSON.stringify(snapshot));alert('Offline toolkit saved to this device.');};const updateSavedPlace=(key,coords)=>{const store=JSON.parse(localStorage.getItem('atisSavedPlaces')||'{}');store[key]=coords;localStorage.setItem('atisSavedPlaces',JSON.stringify(store));alert(\"\".concat(key.charAt(0).toUpperCase()+key.slice(1),\" saved\"));};const submitReview=async()=>{if(!token){alert('Please login to post a review.');return;}const r=await fetch(\"\".concat(API,\"/reviews\"),{method:'POST',headers:_objectSpread({'Content-Type':'application/json'},authHeaders()),body:JSON.stringify({location:reviewLoc,rating:Number(reviewRating),comment:reviewComment})});if(!r.ok){const t=await r.json();alert('Failed: '+(t.detail||r.status));}setReviewLoc('');setReviewRating(5);setReviewComment('');fetch(\"\".concat(API,\"/reviews\")).then(r=>r.json()).then(d=>setReviews(d.reviews||[])).catch(()=>{});};const toggleMode=m=>setModes(prev=>prev.includes(m)?prev.filter(x=>x!==m):[...prev,m]);const swapOD=()=>{const o=origin;const oName=originName;setOrigin(dest);setDest(o);setOriginName(destName);setDestName(oName);};const shareLocation=()=>{const coords=\"\".concat(origin[0].toFixed(5),\", \").concat(origin[1].toFixed(5));const url=\"https://www.google.com/maps?q=\".concat(origin[0],\",\").concat(origin[1]);navigator.clipboard.writeText(url).then(()=>{alert(\"\".concat(text.locationCopied,\"\\n\").concat(url));}).catch(()=>{alert(\"\".concat(text.shareLocation,\": \").concat(coords));});};// Geocoding: Search for places by name using Nominatim (OpenStreetMap)\nconst searchLocation=async(query,type)=>{if(!query||query.length<3){setSearchResults([]);return;}try{const response=await fetch(\"https://nominatim.openstreetmap.org/search?format=json&q=\".concat(encodeURIComponent(query+', Auckland, New Zealand'),\"&limit=5\"));const data=await response.json();setSearchResults(data);setSearchingFor(type);}catch(error){console.error('Search error:',error);setSearchResults([]);}};// Select a location from search results\nconst selectLocation=result=>{const lat=parseFloat(result.lat);const lng=parseFloat(result.lon);const name=result.display_name.split(',')[0];// Get primary name\nif(searchingFor==='origin'){setOrigin([lat,lng]);setOriginName(name);setOriginSearch('');}else{setDest([lat,lng]);setDestName(name);setDestSearch('');}setSearchResults([]);setSearchingFor(null);};// Close dropdown when clicking outside\nconst closeSearchDropdown=()=>{setSearchResults([]);setSearchingFor(null);setOriginSearch('');setDestSearch('');};// Use current location\nconst useCurrentLocation=type=>{if(navigator.geolocation){navigator.geolocation.getCurrentPosition(async position=>{const lat=position.coords.latitude;const lng=position.coords.longitude;// Reverse geocode to get place name\ntry{var _data$address,_data$address2,_data$address3;const response=await fetch(\"https://nominatim.openstreetmap.org/reverse?format=json&lat=\".concat(lat,\"&lon=\").concat(lng));const data=await response.json();const name=((_data$address=data.address)===null||_data$address===void 0?void 0:_data$address.suburb)||((_data$address2=data.address)===null||_data$address2===void 0?void 0:_data$address2.city)||((_data$address3=data.address)===null||_data$address3===void 0?void 0:_data$address3.town)||'Current Location';if(type==='origin'){setOrigin([lat,lng]);setOriginName(name);}else{setDest([lat,lng]);setDestName(name);}}catch(error){if(type==='origin'){setOrigin([lat,lng]);setOriginName('Current Location');}else{setDest([lat,lng]);setDestName('Current Location');}}},error=>{alert('Could not get your location. Please enable location services.');});}else{alert('Geolocation is not supported by your browser.');}};const handleLogin=(token,username)=>{setToken(token);setUsername(username);setIsAuthenticated(true);};const logout=()=>{setToken(null);setUsername(null);setIsAuthenticated(false);localStorage.removeItem('atis_token');localStorage.removeItem('atis_user');localStorage.removeItem('atis_login_time');sessionStorage.removeItem('atis_token');sessionStorage.removeItem('atis_user');sessionStorage.removeItem('atis_login_time');setView('home');};// Show login page if not authenticated - NO ACCESS TO MAIN APP\nif(!isAuthenticated){return/*#__PURE__*/_jsx(LoginPage,{onLogin:handleLogin,isVerifying:isVerifying});}return/*#__PURE__*/_jsxs(\"div\",{style:{minHeight:'100vh',padding:'0',background:'var(--app-bg)',willChange:'auto'},children:[/*#__PURE__*/_jsx(\"nav\",{style:{position:'sticky',top:0,zIndex:1000,background:'rgba(10, 14, 39, 0.95)',borderBottom:'1px solid var(--glass-border)',boxShadow:'0 4px 24px rgba(0,0,0,0.1)'},children:/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:1400,margin:'0 auto',padding:'16px 24px',display:'flex',alignItems:'center',justifyContent:'space-between',gap:20},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:16},children:[/*#__PURE__*/_jsx(\"img\",{src:\"/atis-logo.jpg\",alt:\"ATIS\",style:{width:48,height:48,borderRadius:12,objectFit:'contain',boxShadow:'0 4px 12px rgba(0,0,0,0.2)'},onError:e=>{e.target.style.display='none';e.target.nextElementSibling.style.display='grid';}}),/*#__PURE__*/_jsx(\"div\",{className:\"logo\",style:{display:'none',width:48,height:48,fontSize:20},children:\"A\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{style:{fontSize:22,fontWeight:800,lineHeight:1,marginBottom:4},children:\"ATIS\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:12,color:'var(--muted)',lineHeight:1},children:\"Advanced Travel System\"})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',gap:8,flexWrap:'wrap'},children:['home','plan','map','alerts','safety','reviews','settings'].map(v=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setView(v),className:view===v?'btn btn-primary':'chip',style:{padding:'8px 16px',fontSize:13,fontWeight:600,textTransform:'capitalize',transition:'all 0.3s'},children:[v==='home'&&'ðŸ ',\" \",v==='plan'&&'ðŸ—ºï¸',\" \",v==='map'&&'ðŸŒ',v==='alerts'&&'âš ï¸',\" \",v==='safety'&&'ðŸ›¡ï¸',\" \",v==='reviews'&&'â­',v==='settings'&&'âš™ï¸',\" \",' ',v.charAt(0).toUpperCase()+v.slice(1)]},v))}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:12},children:[/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'right'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:14,fontWeight:600},children:username||'Guest'}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,color:'var(--muted)'},children:\"Active Session\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:logout,className:\"btn btn-danger\",style:{padding:'8px 16px',fontSize:13},children:\"\\uD83D\\uDEAA Logout\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:1400,margin:'0 auto',padding:'32px 24px 80px'},children:[view==='home'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid-3\",style:{marginBottom:32},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:stops.length}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Nearby Stops\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:itins.length}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Routes Found\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:alerts.length}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Active Alerts\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",style:{marginBottom:32,background:'linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%)',border:'1px solid rgba(102, 126, 234, 0.3)'},children:[/*#__PURE__*/_jsxs(\"h2\",{style:{fontSize:28,fontWeight:800,marginBottom:12,background:'var(--gradient-1)',WebkitBackgroundClip:'text',WebkitTextFillColor:'transparent'},children:[\"Welcome back, \",username,\"! \\uD83D\\uDC4B\"]}),/*#__PURE__*/_jsx(\"p\",{style:{color:'var(--muted)',fontSize:15},children:\"Your intelligent travel companion for smarter journeys. Plan trips, check real-time updates, and navigate with confidence.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid-2\",style:{marginBottom:32},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card\",onClick:()=>setView('plan'),style:{cursor:'pointer'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:48,marginBottom:16},children:\"\\uD83D\\uDDFA\\uFE0F\"}),/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:20,fontWeight:700,marginBottom:8},children:\"Trip Planning\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'var(--muted)',fontSize:14},children:\"Plan multi-modal journeys with real-time data and alternative routes\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",onClick:()=>setView('map'),style:{cursor:'pointer'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:48,marginBottom:16},children:\"\\uD83C\\uDF0D\"}),/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:20,fontWeight:700,marginBottom:8},children:\"Interactive Map\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'var(--muted)',fontSize:14},children:\"Explore nearby stops, set destinations, and visualize your route\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",onClick:()=>setView('alerts'),style:{cursor:'pointer'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:48,marginBottom:16},children:\"\\u26A0\\uFE0F\"}),/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:20,fontWeight:700,marginBottom:8},children:\"Live Alerts\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'var(--muted)',fontSize:14},children:\"Stay updated with traffic incidents and service disruptions\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",onClick:()=>setView('safety'),style:{cursor:'pointer'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:48,marginBottom:16},children:\"\\uD83D\\uDEE1\\uFE0F\"}),/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:20,fontWeight:700,marginBottom:8},children:\"Safety Features\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'var(--muted)',fontSize:14},children:\"Emergency contacts and location sharing for peace of mind\"})]})]})]}),view==='map'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"\\uD83C\\uDF0D Interactive Map\"}),/*#__PURE__*/_jsxs(FeatureCard,{icon:\"\\uD83D\\uDDFA\\uFE0F\",title:\"Map View\",description:\"Drag origin marker, click map to set destination, view nearby stops\",children:[/*#__PURE__*/_jsx(\"div\",{style:{height:450,width:'100%',borderRadius:16,overflow:'hidden',boxShadow:'0 8px 24px rgba(0,0,0,0.12)'},children:/*#__PURE__*/_jsx(InteractiveMap,{origin:origin,setOrigin:setOrigin,dest:dest,setDest:setDest,stops:stops})}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:16,display:'flex',gap:10,flexWrap:'wrap'},children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary\",onClick:shareLocation,children:[\"\\uD83D\\uDCCD \",text.shareLocation]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn\",onClick:()=>navigator.clipboard.writeText(\"\".concat(origin[0].toFixed(5),\", \").concat(origin[1].toFixed(5))).then(()=>alert(text.locationCopied)),children:[\"\\uD83D\\uDCCB \",text.copyCoords]})]})]})]}),view==='alerts'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"\\u26A0\\uFE0F Live Alerts & Weather\"}),/*#__PURE__*/_jsx(FeatureCard,{icon:\"\\u26A1\",title:text.realTimeSnapshot,description:\"Live traffic, weather and notifications so riders stay ahead.\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexWrap:'wrap',gap:16},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:'1 1 200px',minWidth:220},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600,marginBottom:6},children:text.weatherNow}),weather?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:18,fontWeight:700},children:weather.condition}),/*#__PURE__*/_jsxs(\"div\",{style:{opacity:0.75},children:[\"Temp \",weather.tempC,\"\\xB0C \\u2022 Wind \",weather.windKph,\" km/h\"]})]}):/*#__PURE__*/_jsx(\"div\",{style:{opacity:0.65},children:\"Fetching latest forecast\\u2026\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:'2 1 320px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600,marginBottom:6},children:text.alertsIncidents}),/*#__PURE__*/_jsxs(\"ul\",{style:{margin:0,paddingLeft:18},children:[alerts.slice(0,6).map((a,i)=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:a.type||a.id}),\": \",a.title||a.summary,\" \",a.severity?\"\\u2022 \".concat(a.severity):'']},i)),alerts.length===0&&/*#__PURE__*/_jsx(\"li\",{style:{opacity:0.7},children:text.noAlerts})]})]}),banner&&/*#__PURE__*/_jsxs(\"div\",{style:{flexBasis:'100%',background:'rgba(37,99,235,0.12)',padding:12,borderRadius:12},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Notification:\"}),\" \",banner]})]})})]}),view==='plan'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"\\uD83D\\uDDFA\\uFE0F Trip Planning\"}),/*#__PURE__*/_jsx(FeatureCard,{icon:\"\\uD83E\\uDDED\",title:text.tripPlanning,description:\"Plan ahead, adapt on the fly, and export journeys for the road.\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gap:24,gridTemplateColumns:'minmax(260px, 1fr) minmax(320px, 1.35fr)'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:12},children:[/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsxs(\"label\",{style:{display:'flex',flexDirection:'column',gap:4},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:12,opacity:0.75},children:\"\\uD83D\\uDCCD Origin\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>useCurrentLocation('origin'),style:{padding:'4px 8px',fontSize:11},title:\"Use my current location\",children:\"\\uD83D\\uDCCD Current\"})]}),/*#__PURE__*/_jsx(\"input\",{value:originSearch||originName,onChange:e=>{setOriginSearch(e.target.value);searchLocation(e.target.value,'origin');},onFocus:e=>e.target.select(),placeholder:\"Search for a place...\",style:{fontWeight:600}})]}),searchingFor==='origin'&&searchResults.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',top:'100%',left:0,right:0,zIndex:1000,background:'linear-gradient(135deg, rgba(30, 41, 59, 0.98) 0%, rgba(15, 23, 42, 0.98) 100%)',backdropFilter:'blur(40px)',border:'2px solid rgba(139, 92, 246, 0.4)',borderRadius:16,marginTop:8,maxHeight:320,overflowY:'auto',boxShadow:'0 20px 60px rgba(0,0,0,0.6), 0 0 0 1px rgba(255,255,255,0.1) inset'},children:[/*#__PURE__*/_jsx(\"div\",{style:{padding:'10px 14px',fontSize:11,fontWeight:700,color:'rgba(139, 92, 246, 1)',borderBottom:'1px solid rgba(139, 92, 246, 0.2)',textTransform:'uppercase',letterSpacing:'0.5px'},children:\"\\uD83D\\uDCCD Select Origin Location\"}),searchResults.map((result,i)=>/*#__PURE__*/_jsxs(\"div\",{onClick:()=>selectLocation(result),style:{padding:'14px 16px',cursor:'pointer',borderBottom:i<searchResults.length-1?'1px solid rgba(255,255,255,0.06)':'none',transition:'all 0.2s',background:'transparent'},onMouseEnter:e=>{e.currentTarget.style.background='linear-gradient(90deg, rgba(139, 92, 246, 0.15) 0%, rgba(59, 130, 246, 0.15) 100%)';e.currentTarget.style.borderLeft='3px solid rgba(139, 92, 246, 0.8)';e.currentTarget.style.paddingLeft='13px';},onMouseLeave:e=>{e.currentTarget.style.background='transparent';e.currentTarget.style.borderLeft='none';e.currentTarget.style.paddingLeft='16px';},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:700,fontSize:15,color:'#ffffff',marginBottom:6,display:'flex',alignItems:'center',gap:8},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:18},children:\"\\uD83D\\uDCCD\"}),result.display_name.split(',')[0]]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:12,color:'rgba(255,255,255,0.6)',lineHeight:1.5,paddingLeft:26},children:result.display_name.split(',').slice(1).join(',').trim()})]},i))]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:11,opacity:0.5,marginTop:4},children:[origin[0].toFixed(4),\", \",origin[1].toFixed(4)]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsxs(\"label\",{style:{display:'flex',flexDirection:'column',gap:4},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:12,opacity:0.75},children:\"\\uD83C\\uDFAF Destination\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>useCurrentLocation('dest'),style:{padding:'4px 8px',fontSize:11},title:\"Use my current location\",children:\"\\uD83D\\uDCCD Current\"})]}),/*#__PURE__*/_jsx(\"input\",{value:destSearch||destName,onChange:e=>{setDestSearch(e.target.value);searchLocation(e.target.value,'dest');},onFocus:e=>e.target.select(),placeholder:\"Search for a place...\",style:{fontWeight:600}})]}),searchingFor==='dest'&&searchResults.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',top:'100%',left:0,right:0,zIndex:1000,background:'linear-gradient(135deg, rgba(30, 41, 59, 0.98) 0%, rgba(15, 23, 42, 0.98) 100%)',backdropFilter:'blur(40px)',border:'2px solid rgba(59, 130, 246, 0.4)',borderRadius:16,marginTop:8,maxHeight:320,overflowY:'auto',boxShadow:'0 20px 60px rgba(0,0,0,0.6), 0 0 0 1px rgba(255,255,255,0.1) inset'},children:[/*#__PURE__*/_jsx(\"div\",{style:{padding:'10px 14px',fontSize:11,fontWeight:700,color:'rgba(59, 130, 246, 1)',borderBottom:'1px solid rgba(59, 130, 246, 0.2)',textTransform:'uppercase',letterSpacing:'0.5px'},children:\"\\uD83C\\uDFAF Select Destination Location\"}),searchResults.map((result,i)=>/*#__PURE__*/_jsxs(\"div\",{onClick:()=>selectLocation(result),style:{padding:'14px 16px',cursor:'pointer',borderBottom:i<searchResults.length-1?'1px solid rgba(255,255,255,0.06)':'none',transition:'all 0.2s',background:'transparent'},onMouseEnter:e=>{e.currentTarget.style.background='linear-gradient(90deg, rgba(59, 130, 246, 0.15) 0%, rgba(16, 185, 129, 0.15) 100%)';e.currentTarget.style.borderLeft='3px solid rgba(59, 130, 246, 0.8)';e.currentTarget.style.paddingLeft='13px';},onMouseLeave:e=>{e.currentTarget.style.background='transparent';e.currentTarget.style.borderLeft='none';e.currentTarget.style.paddingLeft='16px';},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:700,fontSize:15,color:'#ffffff',marginBottom:6,display:'flex',alignItems:'center',gap:8},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:18},children:\"\\uD83C\\uDFAF\"}),result.display_name.split(',')[0]]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:12,color:'rgba(255,255,255,0.6)',lineHeight:1.5,paddingLeft:26},children:result.display_name.split(',').slice(1).join(',').trim()})]},i))]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:11,opacity:0.5,marginTop:4},children:[dest[0].toFixed(4),\", \",dest[1].toFixed(4)]})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',gap:8},children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:swapOD,style:{flex:1},children:\"\\uD83D\\uDD04 Swap\"})}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:6},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:12,opacity:0.75},children:\"Preferred modes\"}),/*#__PURE__*/_jsx(\"div\",{children:['bus','train','ferry','walk','bike'].map(m=>/*#__PURE__*/_jsxs(\"label\",{style:{marginRight:10},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:modes.includes(m),onChange:()=>toggleMode(m)}),\" \",m]},m))})]}),/*#__PURE__*/_jsxs(\"label\",{style:{display:'flex',flexDirection:'column',gap:4},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:12,opacity:0.75},children:\"Optimize for\"}),/*#__PURE__*/_jsxs(\"select\",{value:optimize,onChange:e=>setOptimize(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"fastest\",children:\"Fastest\"}),/*#__PURE__*/_jsx(\"option\",{value:\"fewest_transfers\",children:\"Fewest transfers\"}),/*#__PURE__*/_jsx(\"option\",{value:\"least_walking\",children:\"Least walking\"}),/*#__PURE__*/_jsx(\"option\",{value:\"reliable\",children:\"Most reliable\"})]})]}),/*#__PURE__*/_jsxs(\"label\",{style:{display:'flex',flexDirection:'column',gap:4},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:12,opacity:0.75},children:\"Max walking distance (km)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",max:\"3\",step:\"0.1\",value:maxWalkKm,onChange:e=>setMaxWalkKm(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:12,flexWrap:'wrap'},children:[/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:avoidStairs,onChange:e=>setAvoidStairs(e.target.checked)}),\" Avoid stairs\"]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:bikeOk,onChange:e=>setBikeOk(e.target.checked)}),\" Bike friendly\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:6},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:12,opacity:0.75},children:\"When to travel\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:12},children:[/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"when\",value:\"depart\",checked:whenType==='depart',onChange:()=>setWhenType('depart')}),\" Depart at\"]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"when\",value:\"arrive\",checked:whenType==='arrive',onChange:()=>setWhenType('arrive')}),\" Arrive by\"]})]}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"now or 2025-11-03T09:00\",value:whenValue,onChange:e=>setWhenValue(e.target.value)})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:plan,style:{alignSelf:'flex-start'},children:text.findItineraries})]}),/*#__PURE__*/_jsx(\"div\",{children:itins.length===0?/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',padding:'40px 20px',background:'var(--glass-bg)',backdropFilter:'blur(10px)',borderRadius:16,border:'1px dashed var(--line)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:48,marginBottom:12},children:\"\\uD83D\\uDE80\"}),/*#__PURE__*/_jsxs(\"p\",{style:{color:'var(--muted)',fontSize:15},children:[\"Press \",/*#__PURE__*/_jsx(\"b\",{style:{color:'var(--primary)'},children:\"Find itineraries\"}),\" to see recommended routes.\"]})]}):/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexDirection:'column',gap:16},children:itins.map((it,idx)=>{var _it$walk_km;return/*#__PURE__*/_jsxs(\"div\",{style:{background:'var(--glass-bg)',backdropFilter:'blur(10px)',border:'1px solid var(--glass-border)',borderRadius:16,padding:20,boxShadow:'0 4px 16px rgba(0,0,0,0.08)',transition:'all 0.3s ease',cursor:'pointer'},onMouseEnter:e=>e.currentTarget.style.transform='translateY(-4px)',onMouseLeave:e=>e.currentTarget.style.transform='translateY(0)',children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'flex-start',gap:16,flexWrap:'wrap'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:10,marginBottom:10},children:[/*#__PURE__*/_jsx(\"span\",{style:{background:'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',color:'white',width:32,height:32,borderRadius:'50%',display:'grid',placeItems:'center',fontWeight:700,fontSize:14},children:idx+1}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:18,fontWeight:700},children:[\"~\",it.durationMin,\" min\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'var(--muted)',fontSize:14},children:[\"\\u2022 \",it.transfers,\" transfers\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:it.reliability>0.85?'rgba(16, 185, 129, 0.15)':'rgba(251, 191, 36, 0.15)',color:it.reliability>0.85?'var(--success)':'#f59e0b',padding:'4px 10px',borderRadius:8,fontSize:12,fontWeight:600},children:[Math.round((it.reliability||0)*100),\"% reliable\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'var(--muted)',fontSize:14,marginBottom:10},children:[\"\\uD83D\\uDEB6 \",it.legs.join(' â†’ ')]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:8,flexWrap:'wrap'},children:[/*#__PURE__*/_jsxs(Chip,{children:[\"\\uD83D\\uDEB6 \",((_it$walk_km=it.walk_km)!==null&&_it$walk_km!==void 0?_it$walk_km:0).toFixed(1),\" km walk\"]}),/*#__PURE__*/_jsx(Chip,{children:(it.modes||[]).join(', ')})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:8,flexWrap:'wrap'},children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn\",onClick:()=>exportPdf(it),children:[\"\\uD83D\\uDCC4 \",text.exportPdf]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary\",onClick:()=>suggestAlt(it),children:[\"\\uD83D\\uDD04 \",text.suggestAlt]})]})]}),alts[it.id]&&/*#__PURE__*/_jsxs(\"div\",{className:\"alt\",style:{marginTop:16},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600,marginBottom:6},children:\"\\u2728 Alternative route available\"}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'var(--muted)',fontSize:14},children:[\"~\",alts[it.id].durationMin||'â€”',\" min \\u2022 \",alts[it.id].transfers||0,\" transfers\"]}),alts[it.id].note&&/*#__PURE__*/_jsx(\"div\",{style:{color:'var(--muted)',fontSize:14,marginTop:4},children:alts[it.id].note}),alts[it.id].legs&&/*#__PURE__*/_jsxs(\"div\",{style:{color:'var(--muted)',fontSize:14},children:[\"\\uD83D\\uDEB6 \",alts[it.id].legs.join(' â†’ ')]})]})]},it.id);})})})]})}),/*#__PURE__*/_jsx(FeatureCard,{icon:\"\\uD83D\\uDE8D\",title:\"Nearby Transit\",description:\"Check nearby stops, live departures, and multimodal choices.\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:18},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexWrap:'wrap',gap:12},children:[stops.slice(0,6).map(s=>/*#__PURE__*/_jsxs(\"div\",{style:{padding:12,border:'1px solid var(--line,#e5e7eb)',borderRadius:12,background:'var(--card,#fff)',minWidth:180},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700},children:s.name}),/*#__PURE__*/_jsxs(\"div\",{style:{opacity:0.7,fontSize:12},children:[s.distance_m,\" m away\"]}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:10},children:/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>viewDepartures(s),children:\"Live departures\"})})]},s.stop_id)),stops.length===0&&/*#__PURE__*/_jsx(\"div\",{style:{opacity:0.7},children:\"Searching for nearby stops\\u2026\"})]}),selectedStop&&/*#__PURE__*/_jsxs(\"div\",{style:{border:'1px solid var(--line,#e5e7eb)',borderRadius:12,padding:16,background:'var(--card,#fff)'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:700,marginBottom:8},children:[\"Departures \\u2014 \",selectedStop.name]}),/*#__PURE__*/_jsxs(\"ul\",{style:{margin:0,paddingLeft:18},children:[departures.map((d,i)=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:d.route}),\" \\u2192 \",d.headsign,\" \",/*#__PURE__*/_jsxs(\"span\",{style:{opacity:0.65},children:[\"in \",d.departure_in_min,\" min\"]})]},i)),departures.length===0&&/*#__PURE__*/_jsx(\"li\",{style:{opacity:0.65},children:\"Loading departures\\u2026\"})]})]})]})})]}),view==='safety'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"\\uD83D\\uDEE1\\uFE0F Safety & Emergency\"}),/*#__PURE__*/_jsx(FeatureCard,{icon:\"\\uD83D\\uDCDE\",title:\"Emergency Contacts\",description:\"Quick access to local emergency services.\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexWrap:'wrap',gap:20},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:'1 1 260px',display:'flex',flexDirection:'column',gap:10},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600},children:\"Quick actions\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>updateSavedPlace('home',origin),children:\"Save home\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>updateSavedPlace('work',dest),children:\"Save work\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:savePrefs,children:\"Save to profile\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:saveOfflinePack,children:text.offlineCta}),token?/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:13,opacity:0.75},children:[\"Signed in as \",username,\". Preferences sync across devices.\"]}):/*#__PURE__*/_jsx(\"div\",{style:{fontSize:13,opacity:0.75},children:\"Create an account above to sync preferences and reviews.\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:'1 1 260px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:600,marginBottom:6},children:[\"\\uD83D\\uDEDF \",text.emergencyContacts]}),/*#__PURE__*/_jsxs(\"ul\",{style:{margin:0,paddingLeft:18},children:[safetyContacts.map((c,i)=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:c.name}),\" \\u2014 \",/*#__PURE__*/_jsx(\"a\",{href:\"tel:\".concat(c.phone),style:{color:'var(--danger)',fontWeight:700},children:c.phone})]},i)),safetyContacts.length===0&&/*#__PURE__*/_jsx(\"li\",{style:{opacity:0.7},children:\"Loading local contacts\\u2026\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:12},children:/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:shareLocation,children:text.shareLocation})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:'1 1 260px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600,marginBottom:6},children:\"Share status\"}),/*#__PURE__*/_jsxs(\"p\",{style:{opacity:0.75},children:[\"Tap \",/*#__PURE__*/_jsx(\"em\",{children:\"Save offline snapshot\"}),\" before you head out to keep routes, alerts, and emergency numbers handy \\u2014 even without coverage.\"]})]})]})})]}),view==='settings'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"\\u2699\\uFE0F Settings & Preferences\"}),/*#__PURE__*/_jsx(FeatureCard,{icon:\"\\uD83C\\uDF0D\",title:\"Travel Toolkit\",description:\"International tools for language, money, and bookings.\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexWrap:'wrap',gap:20},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:'1 1 220px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600,marginBottom:6},children:\"In-app translator\"}),/*#__PURE__*/_jsxs(\"p\",{style:{opacity:0.75},children:[\"Interface now in \",/*#__PURE__*/_jsx(\"strong\",{children:uiLang.toUpperCase()}),\". Additional copy will respect this preference as the app grows.\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:'1 1 260px',display:'flex',flexDirection:'column',gap:8},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600},children:\"Currency helper\"}),/*#__PURE__*/_jsx(\"label\",{style:{fontSize:12,opacity:0.75},children:\"Amount in NZD\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:amount,min:\"0\",onChange:e=>setAmount(Number(e.target.value)||0)}),/*#__PURE__*/_jsx(\"label\",{style:{fontSize:12,opacity:0.75},children:\"Convert to\"}),/*#__PURE__*/_jsx(\"select\",{value:currency,onChange:e=>setCurrency(e.target.value),children:currencyOptions.map(code=>/*#__PURE__*/_jsx(\"option\",{value:code,children:code},code))}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:4,fontWeight:600},children:[\"\\u2248 \",convertedAmount,\" \",currency]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:'1 1 260px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600,marginBottom:6},children:\"Bookings & payments\"}),/*#__PURE__*/_jsxs(\"ul\",{style:{margin:0,paddingLeft:18},children:[/*#__PURE__*/_jsx(\"li\",{children:\"Reserve transit passes and parking\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Bundle flights + hotels (coming soon)\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Secure wallet for ticketing integrations\"})]})]})]})})]}),view==='reviews'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"\\u2B50 Community Reviews\"}),/*#__PURE__*/_jsx(FeatureCard,{icon:\"\\u2B50\",title:\"Share Your Experience\",description:\"Crowd-sourced tips keep travellers informed.\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexWrap:'wrap',gap:20},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:'1 1 260px',display:'flex',flexDirection:'column',gap:10},children:[/*#__PURE__*/_jsxs(\"label\",{style:{display:'flex',flexDirection:'column',gap:4},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:12,opacity:0.75},children:\"Location\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"e.g., Britomart\",value:reviewLoc,onChange:e=>setReviewLoc(e.target.value)})]}),/*#__PURE__*/_jsxs(\"label\",{style:{display:'flex',flexDirection:'column',gap:4},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:12,opacity:0.75},children:\"Rating\"}),/*#__PURE__*/_jsx(\"select\",{value:reviewRating,onChange:e=>setReviewRating(e.target.value),children:[5,4,3,2,1].map(n=>/*#__PURE__*/_jsx(\"option\",{value:n,children:n},n))})]}),/*#__PURE__*/_jsxs(\"label\",{style:{display:'flex',flexDirection:'column',gap:4},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:12,opacity:0.75},children:\"Comment\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Short note\\u2026\",value:reviewComment,onChange:e=>setReviewComment(e.target.value)})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:submitReview,children:\"Share review\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:'1 1 320px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600,marginBottom:8},children:\"Latest reviews\"}),/*#__PURE__*/_jsxs(\"ul\",{style:{margin:0,paddingLeft:18,display:'flex',flexDirection:'column',gap:8},children:[reviews.map((r,i)=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:r.location}),\" \\u2022 \",r.rating,\"/5 \\u2014 \",r.comment,\" \",/*#__PURE__*/_jsxs(\"span\",{style:{opacity:0.6},children:[\"by \",r.user]})]},i)),reviews.length===0&&/*#__PURE__*/_jsx(\"li\",{style:{opacity:0.7},children:\"Be the first to add a community update.\"})]})]})]})})]})]})]});}","map":{"version":3,"names":["useEffect","useState","useMemo","useCallback","MapContainer","TileLayer","Marker","Popup","useMapEvents","L","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","API","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","TRANSLATIONS","en","name","tagline","translatorLabel","offlineCta","shareLocation","copyCoords","locationCopied","tripPlanning","realTimeSnapshot","weatherNow","alertsIncidents","noAlerts","findItineraries","exportPdf","suggestAlt","emergencyContacts","es","tl","zh","CURRENCY_RATES","NZD","USD","EUR","AUD","Chip","_ref","children","className","style","marginRight","FeatureCard","_ref2","title","description","icon","marginBottom","display","alignItems","gap","fontSize","filter","fontWeight","background","WebkitBackgroundClip","WebkitTextFillColor","backgroundClip","letterSpacing","color","marginTop","lineHeight","DraggableMarker","_ref3","position","setPosition","label","draggable","setDraggable","eventHandlers","dragend","e","marker","target","pos","getLatLng","lat","lng","minWidth","onClick","d","MapClickHandler","_ref4","onMapClick","click","latlng","InteractiveMap","_ref5","origin","setOrigin","dest","setDest","stops","center","zoom","height","width","borderRadius","attribution","url","slice","map","stop","iconSize","iconAnchor","popupAnchor","shadowSize","distance_m","stop_id","AuthPanel","_ref6","token","setToken","username","setUsername","mode","setMode","user","setUser","pass","setPass","email","setEmail","showPass","setShowPass","error","setError","loading","setLoading","strength","setStrength","rememberMe","setRememberMe","showAuthModal","setShowAuthModal","t","localStorage","getItem","sessionStorage","u","score","length","test","validateEmail","submit","preventDefault","payload","password","r","fetch","concat","method","headers","body","JSON","stringify","json","ok","Error","detail","storage","setItem","Date","now","toString","message","logout","setIsAuthenticated","removeItem","toast","getStrengthColor","getStrengthText","placeItems","toUpperCase","inset","backdropFilter","zIndex","padding","border","maxWidth","boxShadow","stopPropagation","textAlign","onSubmit","flexDirection","type","placeholder","value","onChange","autoComplete","disabled","paddingRight","right","top","transform","cursor","justifyContent","overflow","transition","userSelect","checked","LoginPage","_ref7","onLogin","isVerifying","minHeight","left","animation","bottom","src","alt","margin","objectFit","onError","opacity","pointerEvents","required","App","isAuthenticated","setIsVerifying","setStops","itins","setItins","banner","setBanner","selectedStop","setSelectedStop","departures","setDepartures","alerts","setAlerts","alts","setAlts","view","setView","modes","setModes","optimize","setOptimize","maxWalkKm","setMaxWalkKm","avoidStairs","setAvoidStairs","bikeOk","setBikeOk","whenType","setWhenType","whenValue","setWhenValue","weather","setWeather","safetyContacts","setSafetyContacts","uiLang","setUiLang","currency","setCurrency","amount","setAmount","reviews","setReviews","reviewLoc","setReviewLoc","reviewRating","setReviewRating","reviewComment","setReviewComment","originSearch","setOriginSearch","destSearch","setDestSearch","originName","setOriginName","destName","setDestName","searchResults","setSearchResults","searchingFor","setSearchingFor","text","convertedAmount","Number","toFixed","mounted","verifySession","savedToken","savedUser","response","console","then","catch","traffic","forecast","contacts","timeoutId","setTimeout","clearTimeout","viewDepartures","data","plan","_d$context","destination","depart_at","arrive_by","max_walk_km","parseFloat","avoid_stairs","bike_ok","itineraries","context","weatherAlert","itinerary","blob","URL","createObjectURL","a","document","createElement","href","download","revokeObjectURL","current_itinerary","incidents","prev","_objectSpread","id","alternative","authHeaders","savePrefs","alert","lang","home","work","languageOptions","Object","keys","currencyOptions","saveOfflinePack","snapshot","saved","updateSavedPlace","key","coords","store","parse","charAt","submitReview","location","rating","comment","status","toggleMode","m","includes","x","swapOD","o","oName","navigator","clipboard","writeText","searchLocation","query","encodeURIComponent","selectLocation","result","lon","display_name","split","closeSearchDropdown","useCurrentLocation","geolocation","getCurrentPosition","latitude","longitude","_data$address","_data$address2","_data$address3","address","suburb","city","town","handleLogin","willChange","borderBottom","nextElementSibling","flexWrap","v","textTransform","flex","condition","tempC","windKph","paddingLeft","i","summary","severity","flexBasis","gridTemplateColumns","onFocus","select","maxHeight","overflowY","onMouseEnter","currentTarget","borderLeft","onMouseLeave","join","trim","min","max","step","alignSelf","it","idx","_it$walk_km","durationMin","transfers","reliability","Math","round","legs","walk_km","note","s","route","headsign","departure_in_min","c","phone","code","n"],"sources":["C:/Users/mdvec/OneDrive/Documents/YOOBEE-MSE/TERM2/MSE806 Intelligent Transportation Systems/ATIS/ATIS/atis-frontend-react/src/App.js"],"sourcesContent":["import { useEffect, useState, useMemo, useCallback } from 'react'\nimport { MapContainer, TileLayer, Marker, Popup, useMapEvents } from 'react-leaflet'\nimport 'leaflet/dist/leaflet.css'\nimport L from 'leaflet'\n\nconst API = '' // CRA proxy forwards to backend\n\n// Fix Leaflet default icon issue with webpack\ndelete L.Icon.Default.prototype._getIconUrl\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png',\n  iconUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png',\n  shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',\n})\n\nconst TRANSLATIONS = {\n  en: {\n    name: 'Advanced Traveler Information System',\n    tagline: 'Real-time, multimodal trip planning with intelligent route optimization.',\n    translatorLabel: 'Preferred language',\n    offlineCta: 'Save offline snapshot',\n    shareLocation: 'Share Location',\n    copyCoords: 'Copy Coordinates',\n    locationCopied: 'Location copied!',\n    tripPlanning: 'Trip planning & dynamic routing',\n    realTimeSnapshot: 'Real-time snapshot',\n    weatherNow: 'Weather now',\n    alertsIncidents: 'Alerts & incidents',\n    noAlerts: 'No active alerts right now.',\n    findItineraries: 'Find itineraries',\n    exportPdf: 'Export PDF',\n    suggestAlt: 'Suggest alternative',\n    emergencyContacts: 'Emergency Contacts'\n  },\n  es: {\n    name: 'InformaciÃ³n de Viaje Avanzada',\n    tagline: 'PlanificaciÃ³n de viajes multimodal con datos en tiempo real.',\n    translatorLabel: 'Idioma preferido',\n    offlineCta: 'Guardar informaciÃ³n sin conexiÃ³n',\n    shareLocation: 'Compartir UbicaciÃ³n',\n    copyCoords: 'Copiar Coordenadas',\n    locationCopied: 'Â¡UbicaciÃ³n copiada!',\n    tripPlanning: 'PlanificaciÃ³n y enrutamiento dinÃ¡mico',\n    realTimeSnapshot: 'InstantÃ¡nea en tiempo real',\n    weatherNow: 'Clima ahora',\n    alertsIncidents: 'Alertas e incidentes',\n    noAlerts: 'No hay alertas activas ahora.',\n    findItineraries: 'Buscar itinerarios',\n    exportPdf: 'Exportar PDF',\n    suggestAlt: 'Sugerir alternativa',\n    emergencyContacts: 'Contactos de Emergencia'\n  },\n  tl: {\n    name: 'Advanced na Impormasyon sa Paglalakbay',\n    tagline: 'Real-time na pagpaplano ng biyahe gamit ang matalinong mungkahi.',\n    translatorLabel: 'Gustong wika',\n    offlineCta: 'I-save ang offline na snapshot',\n    shareLocation: 'Ibahagi ang Lokasyon',\n    copyCoords: 'Kopyahin ang Coordinates',\n    locationCopied: 'Nakopya ang lokasyon!',\n    tripPlanning: 'Pagpaplano ng biyahe at dynamic na ruta',\n    realTimeSnapshot: 'Real-time na snapshot',\n    weatherNow: 'Panahon ngayon',\n    alertsIncidents: 'Mga alerto at insidente',\n    noAlerts: 'Walang aktibong alerto ngayon.',\n    findItineraries: 'Maghanap ng itinerary',\n    exportPdf: 'I-export ang PDF',\n    suggestAlt: 'Magmungkahi ng alternatibo',\n    emergencyContacts: 'Emergency na Contacts'\n  },\n  zh: {\n    name: 'é«˜çº§æ—…è¡Œä¿¡æ¯ç³»ç»Ÿ',\n    tagline: 'å®žæ—¶å¤šæ¨¡å¼è¡Œç¨‹è§„åˆ’ä¸Žæ™ºèƒ½å»ºè®®',\n    translatorLabel: 'é¦–é€‰è¯­è¨€',\n    offlineCta: 'ä¿å­˜ç¦»çº¿å¿«ç…§',\n    shareLocation: 'åˆ†äº«ä½ç½®',\n    copyCoords: 'å¤åˆ¶åæ ‡',\n    locationCopied: 'ä½ç½®å·²å¤åˆ¶ï¼',\n    tripPlanning: 'è¡Œç¨‹è§„åˆ’ä¸ŽåŠ¨æ€è·¯çº¿',\n    realTimeSnapshot: 'å®žæ—¶å¿«ç…§',\n    weatherNow: 'å½“å‰å¤©æ°”',\n    alertsIncidents: 'è­¦æŠ¥å’Œäº‹ä»¶',\n    noAlerts: 'ç›®å‰æ²¡æœ‰æ´»åŠ¨è­¦æŠ¥',\n    findItineraries: 'æŸ¥æ‰¾è¡Œç¨‹',\n    exportPdf: 'å¯¼å‡ºPDF',\n    suggestAlt: 'å»ºè®®æ›¿ä»£æ–¹æ¡ˆ',\n    emergencyContacts: 'ç´§æ€¥è”ç³»äºº'\n  }\n}\n\nconst CURRENCY_RATES = {\n  NZD: 1,\n  USD: 0.59,\n  EUR: 0.55,\n  AUD: 0.91\n}\n\nfunction Chip({children}){ return <span className=\"chip\" style={{marginRight:6}}>{children}</span> }\n\nfunction FeatureCard({title, description, children, icon}){\n  return (\n    <section className=\"card\" style={{marginBottom:32}}>\n      <div style={{marginBottom:24}}>\n        <div style={{display:'flex', alignItems:'center', gap:16, marginBottom:10}}>\n          {icon && <div style={{fontSize:42, filter:'drop-shadow(0 4px 8px rgba(0,0,0,0.2))'}}>{icon}</div>}\n          <div>\n            <div style={{fontSize:26, fontWeight:800, background:'linear-gradient(135deg, #667eea 0%, #764ba2 100%)', WebkitBackgroundClip:'text', WebkitTextFillColor:'transparent', backgroundClip:'text', letterSpacing:'-0.5px'}}>{title}</div>\n            {description && <div style={{color:'var(--muted)', fontSize:15, marginTop:6, lineHeight:1.6}}>{description}</div>}\n          </div>\n        </div>\n      </div>\n      <div>{children}</div>\n    </section>\n  )\n}\n\nfunction DraggableMarker({ position, setPosition, label }) {\n  const [draggable, setDraggable] = useState(true)\n  \n  const eventHandlers = {\n    dragend(e) {\n      const marker = e.target\n      const pos = marker.getLatLng()\n      setPosition([pos.lat, pos.lng])\n    },\n  }\n\n  return (\n    <Marker\n      draggable={draggable}\n      eventHandlers={eventHandlers}\n      position={position}\n    >\n      <Popup minWidth={90}>\n        <span onClick={() => setDraggable((d) => !d)}>\n          {label}<br/>\n          {draggable ? 'Draggable' : 'Click to make draggable'}\n        </span>\n      </Popup>\n    </Marker>\n  )\n}\n\nfunction MapClickHandler({ onMapClick }) {\n  useMapEvents({\n    click(e) {\n      if (onMapClick) {\n        onMapClick([e.latlng.lat, e.latlng.lng])\n      }\n    },\n  })\n  return null\n}\n\nfunction InteractiveMap({ origin, setOrigin, dest, setDest, stops }) {\n  const center = origin\n  \n  return (\n    <MapContainer center={center} zoom={13} style={{height: '100%', width: '100%', borderRadius: 12}}>\n      <TileLayer\n        attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a>'\n        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      />\n      <DraggableMarker position={origin} setPosition={setOrigin} label=\"Origin (drag me)\" />\n      <Marker position={dest}>\n        <Popup>Destination</Popup>\n      </Marker>\n      {stops.slice(0, 10).map((stop) => (\n        <Marker key={stop.stop_id} position={[stop.lat, stop.lng]} icon={new L.Icon({\n          iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png',\n          shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',\n          iconSize: [25, 41],\n          iconAnchor: [12, 41],\n          popupAnchor: [1, -34],\n          shadowSize: [41, 41]\n        })}>\n          <Popup><strong>{stop.name}</strong><br/>{stop.distance_m}m away</Popup>\n        </Marker>\n      ))}\n      <MapClickHandler onMapClick={setDest} />\n    </MapContainer>\n  )\n}\n\nfunction AuthPanel({token, setToken, username, setUsername}){\n  const [mode, setMode] = useState('login')\n  const [user, setUser] = useState('')\n  const [pass, setPass] = useState('')\n  const [email, setEmail] = useState('')\n  const [showPass, setShowPass] = useState(false)\n  const [error, setError] = useState('')\n  const [loading, setLoading] = useState(false)\n  const [strength, setStrength] = useState(0)\n  const [rememberMe, setRememberMe] = useState(true)\n  const [showAuthModal, setShowAuthModal] = useState(false)\n\n  useEffect(()=>{\n    const t = localStorage.getItem('atis_token') || sessionStorage.getItem('atis_token')\n    const u = localStorage.getItem('atis_user') || sessionStorage.getItem('atis_user')\n    if (t && u){ setToken(t); setUsername(u) }\n  }, [setToken, setUsername])\n\n  useEffect(() => {\n    if (mode === 'register' && pass) {\n      let score = 0\n      if (pass.length >= 8) score++\n      if (pass.length >= 12) score++\n      if (/[a-z]/.test(pass) && /[A-Z]/.test(pass)) score++\n      if (/[0-9]/.test(pass)) score++\n      if (/[^a-zA-Z0-9]/.test(pass)) score++\n      setStrength(score)\n    }\n  }, [pass, mode])\n\n  const validateEmail = (email) => {\n    return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email)\n  }\n\n  const submit = async (e) => {\n    e?.preventDefault()\n    setError('')\n    \n    // Validation\n    if (!user || user.length < 3) {\n      setError('Username must be at least 3 characters')\n      return\n    }\n    if (!pass || pass.length < 6) {\n      setError('Password must be at least 6 characters')\n      return\n    }\n    if (mode === 'register') {\n      if (!email || !validateEmail(email)) {\n        setError('Please enter a valid email address')\n        return\n      }\n      if (strength < 3) {\n        setError('Password is too weak. Use mix of letters, numbers, and symbols.')\n        return\n      }\n    }\n    \n    setLoading(true)\n    try{\n      const payload = mode === 'register' \n        ? {username: user, password: pass, email: email}\n        : {username: user, password: pass}\n      \n      const r = await fetch(`${API}/auth/${mode}`, { \n        method:'POST', \n        headers:{'Content-Type':'application/json'}, \n        body: JSON.stringify(payload) \n      })\n      const d = await r.json()\n      if (!r.ok) throw new Error(d.detail || 'Authentication failed')\n      \n      setToken(d.token); setUsername(d.username)\n      \n      // Store based on remember me preference\n      const storage = rememberMe ? localStorage : sessionStorage\n      storage.setItem('atis_token', d.token)\n      storage.setItem('atis_user', d.username)\n      storage.setItem('atis_login_time', Date.now().toString())\n      \n      setUser(''); setPass(''); setEmail('')\n      setShowAuthModal(false)\n    }catch(e){ \n      setError(e.message)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const logout = () => { \n    setToken(null)\n    setUsername(null)\n    setIsAuthenticated(false)\n    localStorage.removeItem('atis_token')\n    localStorage.removeItem('atis_user')\n    localStorage.removeItem('atis_login_time')\n    sessionStorage.removeItem('atis_token')\n    sessionStorage.removeItem('atis_user')\n    sessionStorage.removeItem('atis_login_time')\n    toast('ðŸ‘‹ Logged out')\n  }\n\n  const getStrengthColor = () => {\n    if (strength <= 2) return '#ef4444'\n    if (strength <= 3) return '#f59e0b'\n    return '#10b981'\n  }\n\n  const getStrengthText = () => {\n    if (strength <= 2) return 'Weak'\n    if (strength <= 3) return 'Medium'\n    return 'Strong'\n  }\n\n  if (token) {\n    return (\n      <div style={{display:'flex', alignItems:'center', gap:16}}>\n        <div className=\"pill\" style={{display:'flex', alignItems:'center', gap:10}}>\n          <div style={{width:32, height:32, borderRadius:'50%', background:'var(--gradient-1)', display:'grid', placeItems:'center', color:'white', fontWeight:700, fontSize:14}}>\n            {username[0].toUpperCase()}\n          </div>\n          <div>\n            <div style={{fontSize:13, fontWeight:600}}>{username}</div>\n            <div style={{fontSize:11, color:'var(--muted)'}}>Verified</div>\n          </div>\n        </div>\n        <button className=\"btn btn-danger\" onClick={logout}>ðŸšª Logout</button>\n      </div>\n    )\n  }\n\n  return (\n    <>\n      <button className=\"btn btn-primary\" onClick={() => setShowAuthModal(true)}>\n        ðŸ” Sign In\n      </button>\n      \n      {showAuthModal && (\n        <div style={{position:'fixed', inset:0, background:'rgba(0,0,0,0.7)', backdropFilter:'blur(8px)', display:'grid', placeItems:'center', zIndex:9999, padding:20}} onClick={() => setShowAuthModal(false)}>\n          <div style={{background:'var(--glass-bg)', backdropFilter:'blur(30px)', border:'1px solid var(--glass-border)', borderRadius:28, padding:40, maxWidth:480, width:'100%', boxShadow:'var(--card-shadow)'}} onClick={e => e.stopPropagation()}>\n            <div style={{textAlign:'center', marginBottom:32}}>\n              <div style={{fontSize:32, marginBottom:12}}>ðŸ”</div>\n              <h2 style={{fontSize:28, fontWeight:800, marginBottom:8, background:'var(--gradient-1)', WebkitBackgroundClip:'text', WebkitTextFillColor:'transparent'}}>\n                {mode === 'login' ? 'Welcome Back' : 'Create Account'}\n              </h2>\n              <p style={{color:'var(--muted)', fontSize:14}}>\n                {mode === 'login' ? 'Sign in to access your personalized travel experience' : 'Join ATIS for smart route planning'}\n              </p>\n            </div>\n\n            <form onSubmit={submit} style={{display:'flex', flexDirection:'column', gap:20}}>\n              <div>\n                <label style={{display:'block', marginBottom:8, fontSize:13, fontWeight:600, color:'var(--muted)'}}>Username</label>\n                <input \n                  type=\"text\"\n                  placeholder=\"Enter username\" \n                  value={user} \n                  onChange={e=>setUser(e.target.value)}\n                  style={{width:'100%'}}\n                  autoComplete=\"username\"\n                  disabled={loading}\n                />\n              </div>\n\n              {mode === 'register' && (\n                <div>\n                  <label style={{display:'block', marginBottom:8, fontSize:13, fontWeight:600, color:'var(--muted)'}}>Email</label>\n                  <input \n                    type=\"email\"\n                    placeholder=\"your.email@example.com\" \n                    value={email} \n                    onChange={e=>setEmail(e.target.value)}\n                    style={{width:'100%'}}\n                    autoComplete=\"email\"\n                    disabled={loading}\n                  />\n                </div>\n              )}\n\n              <div>\n                <label style={{display:'block', marginBottom:8, fontSize:13, fontWeight:600, color:'var(--muted)'}}>Password</label>\n                <div style={{position:'relative'}}>\n                  <input \n                    type={showPass ? 'text' : 'password'}\n                    placeholder=\"Enter password\" \n                    value={pass} \n                    onChange={e=>setPass(e.target.value)}\n                    style={{width:'100%', paddingRight:45}}\n                    autoComplete={mode === 'login' ? 'current-password' : 'new-password'}\n                    disabled={loading}\n                  />\n                  <button \n                    type=\"button\"\n                    onClick={() => setShowPass(!showPass)}\n                    style={{position:'absolute', right:12, top:'50%', transform:'translateY(-50%)', background:'none', border:'none', cursor:'pointer', fontSize:18}}\n                  >\n                    {showPass ? 'ðŸ‘ï¸' : 'ðŸ‘ï¸â€ðŸ—¨ï¸'}\n                  </button>\n                </div>\n                {mode === 'register' && pass && (\n                  <div style={{marginTop:8}}>\n                    <div style={{display:'flex', justifyContent:'space-between', alignItems:'center', marginBottom:4}}>\n                      <span style={{fontSize:12, color:'var(--muted)'}}>Password strength:</span>\n                      <span style={{fontSize:12, fontWeight:600, color:getStrengthColor()}}>{getStrengthText()}</span>\n                    </div>\n                    <div style={{height:4, background:'rgba(255,255,255,0.1)', borderRadius:2, overflow:'hidden'}}>\n                      <div style={{height:'100%', width:`${(strength / 5) * 100}%`, background:getStrengthColor(), transition:'all 0.3s'}}></div>\n                    </div>\n                  </div>\n                )}\n              </div>\n\n              {mode === 'login' && (\n                <label style={{display:'flex', alignItems:'center', gap:8, cursor:'pointer', userSelect:'none'}}>\n                  <input \n                    type=\"checkbox\" \n                    checked={rememberMe} \n                    onChange={e => setRememberMe(e.target.checked)}\n                    disabled={loading}\n                  />\n                  <span style={{fontSize:13, color:'var(--muted)'}}>Remember me for 30 days</span>\n                </label>\n              )}\n\n              {error && (\n                <div style={{padding:12, background:'rgba(239, 68, 68, 0.1)', border:'1px solid var(--danger)', borderRadius:12, color:'var(--danger)', fontSize:13, textAlign:'center'}}>\n                  âš ï¸ {error}\n                </div>\n              )}\n\n              <button \n                type=\"submit\" \n                className=\"btn btn-primary\" \n                style={{width:'100%', padding:16, fontSize:16}}\n                disabled={loading}\n              >\n                {loading ? 'â³ Processing...' : mode === 'login' ? 'ðŸš€ Sign In' : 'âœ¨ Create Account'}\n              </button>\n\n              <div style={{textAlign:'center'}}>\n                <button \n                  type=\"button\"\n                  onClick={() => {setMode(mode === 'login' ? 'register' : 'login'); setError('')}}\n                  style={{background:'none', border:'none', color:'var(--primary)', cursor:'pointer', fontSize:14, fontWeight:600}}\n                  disabled={loading}\n                >\n                  {mode === 'login' ? \"Don't have an account? Sign up\" : 'Already have an account? Sign in'}\n                </button>\n              </div>\n            </form>\n\n            <button \n              onClick={() => setShowAuthModal(false)}\n              style={{position:'absolute', top:20, right:20, background:'var(--glass-bg)', border:'1px solid var(--glass-border)', borderRadius:'50%', width:36, height:36, display:'grid', placeItems:'center', cursor:'pointer', fontSize:18}}\n            >\n              âœ•\n            </button>\n          </div>\n        </div>\n      )}\n    </>\n  )\n}\n\nfunction LoginPage({onLogin, isVerifying}){\n  const [mode, setMode] = useState('login')\n  const [user, setUser] = useState('')\n  const [pass, setPass] = useState('')\n  const [email, setEmail] = useState('')\n  const [showPass, setShowPass] = useState(false)\n  const [error, setError] = useState('')\n  const [loading, setLoading] = useState(false)\n  const [strength, setStrength] = useState(0)\n\n  useEffect(() => {\n    if (mode === 'register' && pass) {\n      let score = 0\n      if (pass.length >= 8) score++\n      if (pass.length >= 12) score++\n      if (/[a-z]/.test(pass) && /[A-Z]/.test(pass)) score++\n      if (/[0-9]/.test(pass)) score++\n      if (/[^a-zA-Z0-9]/.test(pass)) score++\n      setStrength(score)\n    }\n  }, [pass, mode])\n\n  const validateEmail = (email) => {\n    return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email)\n  }\n\n  const submit = async (e) => {\n    e?.preventDefault()\n    setError('')\n    \n    if (!user || user.length < 3) {\n      setError('Username must be at least 3 characters')\n      return\n    }\n    if (!pass || pass.length < 6) {\n      setError('Password must be at least 6 characters')\n      return\n    }\n    if (mode === 'register') {\n      if (!email || !validateEmail(email)) {\n        setError('Please enter a valid email address')\n        return\n      }\n      if (strength < 3) {\n        setError('Password is too weak. Use mix of letters, numbers, and symbols.')\n        return\n      }\n    }\n    \n    setLoading(true)\n    try{\n      const payload = mode === 'register' \n        ? {username: user, password: pass, email: email}\n        : {username: user, password: pass}\n      \n      const r = await fetch(`${API}/auth/${mode}`, { \n        method:'POST', \n        headers:{'Content-Type':'application/json'}, \n        body: JSON.stringify(payload) \n      })\n      const d = await r.json()\n      if (!r.ok) throw new Error(d.detail || 'Authentication failed')\n      \n      localStorage.setItem('atis_token', d.token)\n      localStorage.setItem('atis_user', d.username)\n      localStorage.setItem('atis_login_time', Date.now().toString())\n      \n      onLogin(d.token, d.username)\n    }catch(e){ \n      setError(e.message)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const getStrengthColor = () => {\n    if (strength <= 2) return '#ef4444'\n    if (strength <= 3) return '#f59e0b'\n    return '#10b981'\n  }\n\n  const getStrengthText = () => {\n    if (strength <= 2) return 'Weak'\n    if (strength <= 3) return 'Medium'\n    return 'Strong'\n  }\n\n  return (\n    <div style={{minHeight:'100vh', display:'flex', alignItems:'center', justifyContent:'center', padding:20, position:'relative', overflow:'hidden'}}>\n      {/* Animated background gradient circles */}\n      <div style={{position:'absolute', top:'-10%', left:'-5%', width:'500px', height:'500px', background:'radial-gradient(circle, rgba(102, 126, 234, 0.3) 0%, transparent 70%)', filter:'blur(80px)', animation:'float 8s ease-in-out infinite'}}></div>\n      <div style={{position:'absolute', bottom:'-10%', right:'-5%', width:'500px', height:'500px', background:'radial-gradient(circle, rgba(139, 92, 246, 0.3) 0%, transparent 70%)', filter:'blur(80px)', animation:'float 10s ease-in-out infinite reverse'}}></div>\n      \n      <div style={{maxWidth:480, width:'100%', position:'relative', zIndex:1}}>\n        {/* Logo and Welcome Section */}\n        <div style={{textAlign:'center', marginBottom:40}}>\n          <img \n            src=\"/atis-logo.jpg\" \n            alt=\"ATIS Logo\" \n            style={{width:120, height:120, margin:'0 auto 24px', filter:'drop-shadow(0 8px 24px rgba(0,0,0,0.3))', objectFit:'contain', borderRadius:24}}\n            onError={(e) => {\n              e.target.style.display = 'none'\n            }}\n          />\n          <h1 style={{fontSize:42, fontWeight:900, marginBottom:12, background:'linear-gradient(135deg, #667eea 0%, #764ba2 100%)', WebkitBackgroundClip:'text', WebkitTextFillColor:'transparent', letterSpacing:'-1px'}}>\n            Welcome to ATIS\n          </h1>\n          <p style={{fontSize:16, color:'var(--muted)', marginBottom:8}}>Advanced Traveler Information System</p>\n          <p style={{fontSize:14, color:'var(--muted)'}}>\n            {isVerifying ? 'ðŸ”„ Verifying session...' : 'Intelligent route planning for smarter journeys'}\n          </p>\n        </div>\n\n        {/* Login Form Card */}\n        <div style={{background:'var(--glass-bg)', backdropFilter:'blur(30px)', border:'1px solid var(--glass-border)', borderRadius:28, padding:40, boxShadow:'var(--card-shadow)', opacity: isVerifying ? 0.6 : 1, pointerEvents: isVerifying ? 'none' : 'auto', transition:'opacity 0.2s'}}>\n          <div style={{textAlign:'center', marginBottom:32}}>\n            <h2 style={{fontSize:26, fontWeight:800, marginBottom:8}}>\n              {isVerifying ? 'â³ Loading...' : mode === 'login' ? 'ðŸ” Sign In' : 'âœ¨ Create Account'}\n            </h2>\n            <p style={{color:'var(--muted)', fontSize:14}}>\n              {isVerifying ? 'Please wait...' : mode === 'login' ? 'Access your personalized travel experience' : 'Join for smart route planning'}\n            </p>\n          </div>\n\n          <form onSubmit={submit} style={{display:'flex', flexDirection:'column', gap:20}}>\n            <div>\n              <label style={{display:'block', marginBottom:8, fontSize:13, fontWeight:600, color:'var(--muted)'}}>Username</label>\n              <input \n                type=\"text\"\n                placeholder=\"Enter username\" \n                value={user} \n                onChange={e=>setUser(e.target.value)}\n                style={{width:'100%'}}\n                autoComplete=\"username\"\n                disabled={loading}\n                required\n              />\n            </div>\n\n            {mode === 'register' && (\n              <div>\n                <label style={{display:'block', marginBottom:8, fontSize:13, fontWeight:600, color:'var(--muted)'}}>Email</label>\n                <input \n                  type=\"email\"\n                  placeholder=\"your.email@example.com\" \n                  value={email} \n                  onChange={e=>setEmail(e.target.value)}\n                  style={{width:'100%'}}\n                  autoComplete=\"email\"\n                  disabled={loading}\n                  required\n                />\n              </div>\n            )}\n\n            <div>\n              <label style={{display:'block', marginBottom:8, fontSize:13, fontWeight:600, color:'var(--muted)'}}>Password</label>\n              <div style={{position:'relative'}}>\n                <input \n                  type={showPass ? 'text' : 'password'}\n                  placeholder=\"Enter password\" \n                  value={pass} \n                  onChange={e=>setPass(e.target.value)}\n                  style={{width:'100%', paddingRight:45}}\n                  autoComplete={mode === 'login' ? 'current-password' : 'new-password'}\n                  disabled={loading}\n                  required\n                />\n                <button \n                  type=\"button\"\n                  onClick={() => setShowPass(!showPass)}\n                  style={{position:'absolute', right:12, top:'50%', transform:'translateY(-50%)', background:'none', border:'none', cursor:'pointer', fontSize:18}}\n                >\n                  {showPass ? 'ðŸ‘ï¸' : 'ðŸ‘ï¸â€ðŸ—¨ï¸'}\n                </button>\n              </div>\n              {mode === 'register' && pass && (\n                <div style={{marginTop:8}}>\n                  <div style={{display:'flex', justifyContent:'space-between', alignItems:'center', marginBottom:4}}>\n                    <span style={{fontSize:12, color:'var(--muted)'}}>Password strength:</span>\n                    <span style={{fontSize:12, fontWeight:600, color:getStrengthColor()}}>{getStrengthText()}</span>\n                  </div>\n                  <div style={{height:4, background:'rgba(255,255,255,0.1)', borderRadius:2, overflow:'hidden'}}>\n                    <div style={{height:'100%', width:`${(strength / 5) * 100}%`, background:getStrengthColor(), transition:'all 0.3s'}}></div>\n                  </div>\n                </div>\n              )}\n            </div>\n\n            {error && (\n              <div style={{padding:12, background:'rgba(239, 68, 68, 0.1)', border:'1px solid var(--danger)', borderRadius:12, color:'var(--danger)', fontSize:13, textAlign:'center'}}>\n                âš ï¸ {error}\n              </div>\n            )}\n\n            <button \n              type=\"submit\" \n              className=\"btn btn-primary\" \n              style={{width:'100%', padding:16, fontSize:16}}\n              disabled={loading}\n            >\n              {loading ? 'â³ Processing...' : mode === 'login' ? 'ðŸš€ Sign In' : 'âœ¨ Create Account'}\n            </button>\n\n            <div style={{textAlign:'center'}}>\n              <button \n                type=\"button\"\n                onClick={() => {setMode(mode === 'login' ? 'register' : 'login'); setError('')}}\n                style={{background:'none', border:'none', color:'var(--primary)', cursor:'pointer', fontSize:14, fontWeight:600}}\n                disabled={loading}\n              >\n                {mode === 'login' ? \"Don't have an account? Sign up\" : 'Already have an account? Sign in'}\n              </button>\n            </div>\n          </form>\n        </div>\n\n        {/* Features Preview */}\n        <div style={{marginTop:32, textAlign:'center', color:'var(--muted)', fontSize:13}}>\n          <p style={{marginBottom:12}}>âœ¨ Real-time traffic & transit data</p>\n          <p style={{marginBottom:12}}>ðŸ—ºï¸ Interactive route planning</p>\n          <p>ðŸŒ Multi-language support</p>\n        </div>\n      </div>\n\n      <style>{`\n        @keyframes float {\n          0%, 100% { transform: translateY(0) scale(1); }\n          50% { transform: translateY(-20px) scale(1.05); }\n        }\n      `}</style>\n    </div>\n  )\n}\n\nexport default function App(){\n  // ALL STATE HOOKS MUST BE DECLARED FIRST\n  const [token, setToken] = useState(() => localStorage.getItem('atis_token'))\n  const [username, setUsername] = useState(() => localStorage.getItem('atis_user'))\n  const [isAuthenticated, setIsAuthenticated] = useState(false)\n  const [isVerifying, setIsVerifying] = useState(true)\n  \n  const [origin, setOrigin] = useState([-36.8485, 174.7633])\n  const [dest, setDest] = useState([-36.8443, 174.7676])\n  const [stops, setStops] = useState([])\n  const [itins, setItins] = useState([])\n  const [banner, setBanner] = useState('')\n  const [selectedStop, setSelectedStop] = useState(null)\n  const [departures, setDepartures] = useState([])\n  const [alerts, setAlerts] = useState([])\n  const [alts, setAlts] = useState({})\n  const [view, setView] = useState('home')\n\n  const [modes, setModes] = useState(['bus','train','walk'])\n  const [optimize, setOptimize] = useState('fastest')\n  const [maxWalkKm, setMaxWalkKm] = useState(1.2)\n  const [avoidStairs, setAvoidStairs] = useState(false)\n  const [bikeOk, setBikeOk] = useState(false)\n  const [whenType, setWhenType] = useState('depart')\n  const [whenValue, setWhenValue] = useState('now')\n\n  const [weather, setWeather] = useState(null)\n  const [safetyContacts, setSafetyContacts] = useState([])\n  const [uiLang, setUiLang] = useState('en')\n  const [currency, setCurrency] = useState('NZD')\n  const [amount, setAmount] = useState(50)\n\n  const [reviews, setReviews] = useState([])\n  const [reviewLoc, setReviewLoc] = useState('')\n  const [reviewRating, setReviewRating] = useState(5)\n  const [reviewComment, setReviewComment] = useState('')\n\n  // Location search states\n  const [originSearch, setOriginSearch] = useState('')\n  const [destSearch, setDestSearch] = useState('')\n  const [originName, setOriginName] = useState('Auckland CBD')\n  const [destName, setDestName] = useState('Auckland Airport')\n  const [searchResults, setSearchResults] = useState([])\n  const [searchingFor, setSearchingFor] = useState(null)\n\n  const text = TRANSLATIONS[uiLang] || TRANSLATIONS.en\n  const convertedAmount = Number((amount * (CURRENCY_RATES[currency] || 1)).toFixed(2))\n\n  // Check for existing session on mount and verify with backend\n  useEffect(() => {\n    let mounted = true\n    \n    const verifySession = async () => {\n      const savedToken = localStorage.getItem('atis_token')\n      const savedUser = localStorage.getItem('atis_user')\n      \n      if (savedToken && savedUser) {\n        try {\n          // Verify token with backend\n          const response = await fetch(`${API}/auth/verify`, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': `Bearer ${savedToken}`\n            }\n          })\n          \n          if (!mounted) return\n          \n          if (response.ok) {\n            // Token is valid - update state in one batch\n            setToken(savedToken)\n            setUsername(savedUser)\n            setIsAuthenticated(true)\n          } else {\n            // Token is invalid, clear storage\n            localStorage.removeItem('atis_token')\n            localStorage.removeItem('atis_user')\n            localStorage.removeItem('atis_login_time')\n            setToken(null)\n            setUsername(null)\n            setIsAuthenticated(false)\n          }\n        } catch (error) {\n          // Network error or backend down, clear session\n          if (!mounted) return\n          console.error('Session verification failed:', error)\n          localStorage.removeItem('atis_token')\n          localStorage.removeItem('atis_user')\n          localStorage.removeItem('atis_login_time')\n          setToken(null)\n          setUsername(null)\n          setIsAuthenticated(false)\n        }\n      }\n      \n      if (mounted) {\n        setIsVerifying(false)\n      }\n    }\n    \n    verifySession()\n    \n    return () => {\n      mounted = false\n    }\n  }, [])\n\n  // Load initial data once\n  useEffect(() => {\n    fetch(`${API}/stops/nearby?lat=${origin[0]}&lng=${origin[1]}&radius=900`)\n      .then(r=>r.json()).then(d=>setStops(d.stops||[])).catch(()=>{})\n    fetch(`${API}/alerts`)\n      .then(r=>r.json()).then(d=> setAlerts([...(d.alerts||[]), ...(d.traffic||[])])).catch(()=>{})\n    fetch(`${API}/weather/point?lat=${origin[0]}&lng=${origin[1]}`)\n      .then(r=>r.json()).then(d=>setWeather(d.forecast||null)).catch(()=>{})\n    fetch(`${API}/safety/contacts`)\n      .then(r=>r.json()).then(d=>setSafetyContacts(d.contacts||[])).catch(()=>{})\n    fetch(`${API}/reviews`)\n      .then(r=>r.json()).then(d=>setReviews(d.reviews||[])).catch(()=>{})\n  }, [])\n\n  // Update when origin changes (debounced to prevent excessive re-renders)\n  useEffect(() => {\n    const timeoutId = setTimeout(() => {\n      fetch(`${API}/stops/nearby?lat=${origin[0]}&lng=${origin[1]}&radius=900`)\n        .then(r=>r.json()).then(d=>setStops(d.stops||[])).catch(()=>{})\n      fetch(`${API}/weather/point?lat=${origin[0]}&lng=${origin[1]}`)\n        .then(r=>r.json()).then(d=>setWeather(d.forecast||null)).catch(()=>{})\n    }, 300)\n    \n    return () => clearTimeout(timeoutId)\n  }, [origin])\n\n  const viewDepartures = async (stop) => {\n    setSelectedStop(stop)\n    const r = await fetch(`${API}/departures?stop_id=${stop.stop_id}`)\n    const data = await r.json()\n    setDepartures(data.departures || [])\n  }\n\n  const plan = async () => {\n    const payload = {\n      origin, destination: dest,\n      depart_at: whenType === 'depart' ? whenValue : 'now',\n      arrive_by: whenType === 'arrive' ? whenValue : null,\n      optimize, max_walk_km: parseFloat(maxWalkKm),\n      avoid_stairs: avoidStairs, bike_ok: bikeOk, modes,\n    }\n    const r = await fetch(`${API}/plan`, { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(payload) })\n    const d = await r.json()\n    setItins(d.itineraries || [])\n    setBanner(d.context?.weatherAlert || '')\n    setAlts({})\n  }\n\n  const exportPdf = async (itinerary) => {\n    const r = await fetch(`${API}/export/itinerary`,{ method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ origin, destination: dest, itinerary }) })\n    const blob = await r.blob()\n    const url = URL.createObjectURL(blob)\n    const a = document.createElement('a'); a.href = url; a.download = 'atis_trip.pdf'; a.click(); URL.revokeObjectURL(url)\n  }\n\n  const suggestAlt = async (itinerary) => {\n    const r = await fetch(`${API}/routes/suggest`, { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ current_itinerary: itinerary, incidents: alerts }) })\n    const data = await r.json()\n    setAlts(prev => ({...prev, [itinerary.id]: data.alternative}))\n  }\n\n  const authHeaders = () => token ? {'Authorization': `Bearer ${token}`} : {}\n  \n  const savePrefs = async () => {\n    if (!token){ alert('Please login to save preferences.'); return }\n    const r = await fetch(`${API}/prefs`, { method:'POST', headers:{'Content-Type':'application/json', ...authHeaders()}, body: JSON.stringify({ lang:'en', currency:'NZD', home: origin, work: dest }) })\n    alert(r.ok?'Preferences saved':'Failed to save')\n  }\n\n  const languageOptions = Object.keys(TRANSLATIONS)\n  const currencyOptions = Object.keys(CURRENCY_RATES)\n  \n  const saveOfflinePack = () => {\n    const snapshot = { saved: { origin, destination: dest, modes, optimize, maxWalkKm, avoidStairs, bikeOk }, alerts, weather, stops, safetyContacts }\n    localStorage.setItem('atis_offline_snapshot', JSON.stringify(snapshot))\n    alert('Offline toolkit saved to this device.')\n  }\n\n  const updateSavedPlace = (key, coords) => {\n    const store = JSON.parse(localStorage.getItem('atisSavedPlaces') || '{}')\n    store[key] = coords\n    localStorage.setItem('atisSavedPlaces', JSON.stringify(store))\n    alert(`${key.charAt(0).toUpperCase() + key.slice(1)} saved`)\n  }\n\n  const submitReview = async ()=>{\n    if (!token){ alert('Please login to post a review.'); return }\n    const r = await fetch(`${API}/reviews`, {method:'POST', headers:{'Content-Type':'application/json', ...authHeaders()}, body: JSON.stringify({ location: reviewLoc, rating: Number(reviewRating), comment: reviewComment }) })\n    if (!r.ok){ const t = await r.json(); alert('Failed: '+(t.detail||r.status)) }\n    setReviewLoc(''); setReviewRating(5); setReviewComment('')\n    fetch(`${API}/reviews`).then(r=>r.json()).then(d=>setReviews(d.reviews||[])).catch(()=>{})\n  }\n\n  const toggleMode = (m) => setModes(prev => prev.includes(m) ? prev.filter(x => x!==m) : [...prev, m])\n  const swapOD = () => { \n    const o = origin\n    const oName = originName\n    setOrigin(dest)\n    setDest(o)\n    setOriginName(destName)\n    setDestName(oName)\n  }\n  \n  const shareLocation = () => {\n    const coords = `${origin[0].toFixed(5)}, ${origin[1].toFixed(5)}`\n    const url = `https://www.google.com/maps?q=${origin[0]},${origin[1]}`\n    navigator.clipboard.writeText(url).then(() => {\n      alert(`${text.locationCopied}\\n${url}`)\n    }).catch(() => {\n      alert(`${text.shareLocation}: ${coords}`)\n    })\n  }\n\n  // Geocoding: Search for places by name using Nominatim (OpenStreetMap)\n  const searchLocation = async (query, type) => {\n    if (!query || query.length < 3) {\n      setSearchResults([])\n      return\n    }\n    \n    try {\n      const response = await fetch(\n        `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(query + ', Auckland, New Zealand')}&limit=5`\n      )\n      const data = await response.json()\n      setSearchResults(data)\n      setSearchingFor(type)\n    } catch (error) {\n      console.error('Search error:', error)\n      setSearchResults([])\n    }\n  }\n\n  // Select a location from search results\n  const selectLocation = (result) => {\n    const lat = parseFloat(result.lat)\n    const lng = parseFloat(result.lon)\n    const name = result.display_name.split(',')[0] // Get primary name\n    \n    if (searchingFor === 'origin') {\n      setOrigin([lat, lng])\n      setOriginName(name)\n      setOriginSearch('')\n    } else {\n      setDest([lat, lng])\n      setDestName(name)\n      setDestSearch('')\n    }\n    \n    setSearchResults([])\n    setSearchingFor(null)\n  }\n\n  // Close dropdown when clicking outside\n  const closeSearchDropdown = () => {\n    setSearchResults([])\n    setSearchingFor(null)\n    setOriginSearch('')\n    setDestSearch('')\n  }\n\n  // Use current location\n  const useCurrentLocation = (type) => {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        async (position) => {\n          const lat = position.coords.latitude\n          const lng = position.coords.longitude\n          \n          // Reverse geocode to get place name\n          try {\n            const response = await fetch(\n              `https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lng}`\n            )\n            const data = await response.json()\n            const name = data.address?.suburb || data.address?.city || data.address?.town || 'Current Location'\n            \n            if (type === 'origin') {\n              setOrigin([lat, lng])\n              setOriginName(name)\n            } else {\n              setDest([lat, lng])\n              setDestName(name)\n            }\n          } catch (error) {\n            if (type === 'origin') {\n              setOrigin([lat, lng])\n              setOriginName('Current Location')\n            } else {\n              setDest([lat, lng])\n              setDestName('Current Location')\n            }\n          }\n        },\n        (error) => {\n          alert('Could not get your location. Please enable location services.')\n        }\n      )\n    } else {\n      alert('Geolocation is not supported by your browser.')\n    }\n  }\n\n  const handleLogin = (token, username) => {\n    setToken(token)\n    setUsername(username)\n    setIsAuthenticated(true)\n  }\n\n  const logout = () => { \n    setToken(null)\n    setUsername(null)\n    setIsAuthenticated(false)\n    localStorage.removeItem('atis_token')\n    localStorage.removeItem('atis_user')\n    localStorage.removeItem('atis_login_time')\n    sessionStorage.removeItem('atis_token')\n    sessionStorage.removeItem('atis_user')\n    sessionStorage.removeItem('atis_login_time')\n    setView('home')\n  }\n\n  // Show login page if not authenticated - NO ACCESS TO MAIN APP\n  if (!isAuthenticated) {\n    return <LoginPage onLogin={handleLogin} isVerifying={isVerifying} />\n  }\n\n  return (\n    <div style={{minHeight:'100vh', padding:'0', background:'var(--app-bg)', willChange:'auto'}}>\n      {/* Modern Top Navigation Bar */}\n      <nav style={{\n        position:'sticky', top:0, zIndex:1000,\n        background:'rgba(10, 14, 39, 0.95)', \n        borderBottom:'1px solid var(--glass-border)',\n        boxShadow:'0 4px 24px rgba(0,0,0,0.1)'\n      }}>\n        <div style={{maxWidth:1400, margin:'0 auto', padding:'16px 24px', display:'flex', alignItems:'center', justifyContent:'space-between', gap:20}}>\n          {/* Logo and Title */}\n          <div style={{display:'flex', alignItems:'center', gap:16}}>\n            <img\n              src=\"/atis-logo.jpg\"\n              alt=\"ATIS\"\n              style={{width:48, height:48, borderRadius:12, objectFit:'contain', boxShadow:'0 4px 12px rgba(0,0,0,0.2)'}}\n              onError={(e) => {\n                e.target.style.display = 'none'\n                e.target.nextElementSibling.style.display = 'grid'\n              }}\n            />\n            <div className=\"logo\" style={{display:'none', width:48, height:48, fontSize:20}}>A</div>\n            <div>\n              <h1 style={{fontSize:22, fontWeight:800, lineHeight:1, marginBottom:4}}>ATIS</h1>\n              <p style={{fontSize:12, color:'var(--muted)', lineHeight:1}}>Advanced Travel System</p>\n            </div>\n          </div>\n\n          {/* Navigation Tabs */}\n          <div style={{display:'flex', gap:8, flexWrap:'wrap'}}>\n            {['home','plan','map','alerts','safety','reviews','settings'].map(v => (\n              <button\n                key={v}\n                onClick={() => setView(v)}\n                className={view === v ? 'btn btn-primary' : 'chip'}\n                style={{\n                  padding:'8px 16px',\n                  fontSize:13,\n                  fontWeight:600,\n                  textTransform:'capitalize',\n                  transition:'all 0.3s'\n                }}\n              >\n                {v === 'home' && 'ðŸ '} {v === 'plan' && 'ðŸ—ºï¸'} {v === 'map' && 'ðŸŒ'}\n                {v === 'alerts' && 'âš ï¸'} {v === 'safety' && 'ðŸ›¡ï¸'} {v === 'reviews' && 'â­'}\n                {v === 'settings' && 'âš™ï¸'} {' '}{v.charAt(0).toUpperCase() + v.slice(1)}\n              </button>\n            ))}\n          </div>\n\n          {/* User Profile */}\n          <div style={{display:'flex', alignItems:'center', gap:12}}>\n            <div style={{textAlign:'right'}}>\n              <div style={{fontSize:14, fontWeight:600}}>{username || 'Guest'}</div>\n              <div style={{fontSize:11, color:'var(--muted)'}}>Active Session</div>\n            </div>\n            <button onClick={logout} className=\"btn btn-danger\" style={{padding:'8px 16px', fontSize:13}}>\n              ðŸšª Logout\n            </button>\n          </div>\n        </div>\n      </nav>\n\n      {/* Main Content Container */}\n      <div style={{maxWidth:1400, margin:'0 auto', padding:'32px 24px 80px'}}>\n        \n        {/* View-Based Content Rendering */}\n        {view === 'home' && (\n          <>\n            {/* Quick Stats Dashboard */}\n            <div className=\"grid-3\" style={{marginBottom:32}}>\n              <div className=\"stat-card\">\n                <div className=\"stat-value\">{stops.length}</div>\n                <div className=\"stat-label\">Nearby Stops</div>\n              </div>\n              <div className=\"stat-card\">\n                <div className=\"stat-value\">{itins.length}</div>\n                <div className=\"stat-label\">Routes Found</div>\n              </div>\n              <div className=\"stat-card\">\n                <div className=\"stat-value\">{alerts.length}</div>\n                <div className=\"stat-label\">Active Alerts</div>\n              </div>\n            </div>\n\n            {/* Welcome Card */}\n            <div className=\"card\" style={{marginBottom:32, background:'linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%)', border:'1px solid rgba(102, 126, 234, 0.3)'}}>\n              <h2 style={{fontSize:28, fontWeight:800, marginBottom:12, background:'var(--gradient-1)', WebkitBackgroundClip:'text', WebkitTextFillColor:'transparent'}}>\n                Welcome back, {username}! ðŸ‘‹\n              </h2>\n              <p style={{color:'var(--muted)', fontSize:15}}>\n                Your intelligent travel companion for smarter journeys. Plan trips, check real-time updates, and navigate with confidence.\n              </p>\n            </div>\n\n            {/* Feature Overview Grid */}\n            <div className=\"grid-2\" style={{marginBottom:32}}>\n              <div className=\"card\" onClick={() => setView('plan')} style={{cursor:'pointer'}}>\n                <div style={{fontSize:48, marginBottom:16}}>ðŸ—ºï¸</div>\n                <h3 style={{fontSize:20, fontWeight:700, marginBottom:8}}>Trip Planning</h3>\n                <p style={{color:'var(--muted)', fontSize:14}}>Plan multi-modal journeys with real-time data and alternative routes</p>\n              </div>\n              <div className=\"card\" onClick={() => setView('map')} style={{cursor:'pointer'}}>\n                <div style={{fontSize:48, marginBottom:16}}>ðŸŒ</div>\n                <h3 style={{fontSize:20, fontWeight:700, marginBottom:8}}>Interactive Map</h3>\n                <p style={{color:'var(--muted)', fontSize:14}}>Explore nearby stops, set destinations, and visualize your route</p>\n              </div>\n              <div className=\"card\" onClick={() => setView('alerts')} style={{cursor:'pointer'}}>\n                <div style={{fontSize:48, marginBottom:16}}>âš ï¸</div>\n                <h3 style={{fontSize:20, fontWeight:700, marginBottom:8}}>Live Alerts</h3>\n                <p style={{color:'var(--muted)', fontSize:14}}>Stay updated with traffic incidents and service disruptions</p>\n              </div>\n              <div className=\"card\" onClick={() => setView('safety')} style={{cursor:'pointer'}}>\n                <div style={{fontSize:48, marginBottom:16}}>ðŸ›¡ï¸</div>\n                <h3 style={{fontSize:20, fontWeight:700, marginBottom:8}}>Safety Features</h3>\n                <p style={{color:'var(--muted)', fontSize:14}}>Emergency contacts and location sharing for peace of mind</p>\n              </div>\n            </div>\n          </>\n        )}\n\n        {view === 'map' && (\n          <div>\n            <h2 className=\"section-title\">ðŸŒ Interactive Map</h2>\n          <FeatureCard icon=\"ðŸ—ºï¸\" title=\"Map View\" description=\"Drag origin marker, click map to set destination, view nearby stops\">\n            <div style={{height:450, width:'100%', borderRadius:16, overflow:'hidden', boxShadow:'0 8px 24px rgba(0,0,0,0.12)'}}>\n              <InteractiveMap origin={origin} setOrigin={setOrigin} dest={dest} setDest={setDest} stops={stops} />\n            </div>\n            <div style={{marginTop:16, display:'flex', gap:10, flexWrap:'wrap'}}>\n              <button className=\"btn btn-primary\" onClick={shareLocation}>ðŸ“ {text.shareLocation}</button>\n              <button className=\"btn\" onClick={() => navigator.clipboard.writeText(`${origin[0].toFixed(5)}, ${origin[1].toFixed(5)}`).then(() => alert(text.locationCopied))}>ðŸ“‹ {text.copyCoords}</button>\n            </div>\n          </FeatureCard>\n          </div>\n        )}\n\n        {view === 'alerts' && (\n          <div>\n            <h2 className=\"section-title\">âš ï¸ Live Alerts & Weather</h2>\n          <FeatureCard icon=\"âš¡\" title={text.realTimeSnapshot} description=\"Live traffic, weather and notifications so riders stay ahead.\">\n            <div style={{display:'flex', flexWrap:'wrap', gap:16}}>\n              <div style={{flex:'1 1 200px', minWidth:220}}>\n                <div style={{fontWeight:600, marginBottom:6}}>{text.weatherNow}</div>\n                {weather ? (\n                  <div>\n                    <div style={{fontSize:18, fontWeight:700}}>{weather.condition}</div>\n                    <div style={{opacity:0.75}}>Temp {weather.tempC}Â°C â€¢ Wind {weather.windKph} km/h</div>\n                  </div>\n                ) : (\n                  <div style={{opacity:0.65}}>Fetching latest forecastâ€¦</div>\n                )}\n              </div>\n              <div style={{flex:'2 1 320px'}}>\n                <div style={{fontWeight:600, marginBottom:6}}>{text.alertsIncidents}</div>\n                <ul style={{margin:0, paddingLeft:18}}>\n                  {alerts.slice(0,6).map((a,i)=>(\n                    <li key={i}><strong>{a.type||a.id}</strong>: {a.title||a.summary} {a.severity?`â€¢ ${a.severity}`:''}</li>\n                  ))}\n                  {alerts.length===0 && <li style={{opacity:0.7}}>{text.noAlerts}</li>}\n                </ul>\n              </div>\n              {banner && (\n                <div style={{flexBasis:'100%', background:'rgba(37,99,235,0.12)', padding:12, borderRadius:12}}>\n                  <strong>Notification:</strong> {banner}\n                </div>\n              )}\n            </div>\n          </FeatureCard>\n          </div>\n        )}\n\n        {view === 'plan' && (\n          <div>\n            <h2 className=\"section-title\">ðŸ—ºï¸ Trip Planning</h2>\n          <FeatureCard icon=\"ðŸ§­\" title={text.tripPlanning} description=\"Plan ahead, adapt on the fly, and export journeys for the road.\">\n            <div style={{display:'grid', gap:24, gridTemplateColumns:'minmax(260px, 1fr) minmax(320px, 1.35fr)'}}>\n              <div style={{display:'flex', flexDirection:'column', gap:12}}>\n                {/* Origin Location Search */}\n                <div style={{position:'relative'}}>\n                  <label style={{display:'flex', flexDirection:'column', gap:4}}>\n                    <div style={{display:'flex', justifyContent:'space-between', alignItems:'center'}}>\n                      <span style={{fontSize:12, opacity:0.75}}>ðŸ“ Origin</span>\n                      <button \n                        className=\"btn\" \n                        onClick={() => useCurrentLocation('origin')}\n                        style={{padding:'4px 8px', fontSize:11}}\n                        title=\"Use my current location\"\n                      >\n                        ðŸ“ Current\n                      </button>\n                    </div>\n                    <input \n                      value={originSearch || originName} \n                      onChange={e => {\n                        setOriginSearch(e.target.value)\n                        searchLocation(e.target.value, 'origin')\n                      }}\n                      onFocus={e => e.target.select()}\n                      placeholder=\"Search for a place...\"\n                      style={{fontWeight:600}}\n                    />\n                  </label>\n                  {searchingFor === 'origin' && searchResults.length > 0 && (\n                    <div style={{\n                      position:'absolute', \n                      top:'100%', \n                      left:0, \n                      right:0, \n                      zIndex:1000,\n                      background:'linear-gradient(135deg, rgba(30, 41, 59, 0.98) 0%, rgba(15, 23, 42, 0.98) 100%)',\n                      backdropFilter:'blur(40px)',\n                      border:'2px solid rgba(139, 92, 246, 0.4)', \n                      borderRadius:16, \n                      marginTop:8,\n                      maxHeight:320,\n                      overflowY:'auto',\n                      boxShadow:'0 20px 60px rgba(0,0,0,0.6), 0 0 0 1px rgba(255,255,255,0.1) inset'\n                    }}>\n                      <div style={{\n                        padding:'10px 14px',\n                        fontSize:11,\n                        fontWeight:700,\n                        color:'rgba(139, 92, 246, 1)',\n                        borderBottom:'1px solid rgba(139, 92, 246, 0.2)',\n                        textTransform:'uppercase',\n                        letterSpacing:'0.5px'\n                      }}>\n                        ðŸ“ Select Origin Location\n                      </div>\n                      {searchResults.map((result, i) => (\n                        <div \n                          key={i}\n                          onClick={() => selectLocation(result)}\n                          style={{\n                            padding:'14px 16px', \n                            cursor:'pointer', \n                            borderBottom: i < searchResults.length - 1 ? '1px solid rgba(255,255,255,0.06)' : 'none',\n                            transition:'all 0.2s',\n                            background:'transparent'\n                          }}\n                          onMouseEnter={e => {\n                            e.currentTarget.style.background = 'linear-gradient(90deg, rgba(139, 92, 246, 0.15) 0%, rgba(59, 130, 246, 0.15) 100%)'\n                            e.currentTarget.style.borderLeft = '3px solid rgba(139, 92, 246, 0.8)'\n                            e.currentTarget.style.paddingLeft = '13px'\n                          }}\n                          onMouseLeave={e => {\n                            e.currentTarget.style.background = 'transparent'\n                            e.currentTarget.style.borderLeft = 'none'\n                            e.currentTarget.style.paddingLeft = '16px'\n                          }}\n                        >\n                          <div style={{\n                            fontWeight:700, \n                            fontSize:15, \n                            color:'#ffffff',\n                            marginBottom:6,\n                            display:'flex',\n                            alignItems:'center',\n                            gap:8\n                          }}>\n                            <span style={{fontSize:18}}>ðŸ“</span>\n                            {result.display_name.split(',')[0]}\n                          </div>\n                          <div style={{\n                            fontSize:12, \n                            color:'rgba(255,255,255,0.6)', \n                            lineHeight:1.5,\n                            paddingLeft:26\n                          }}>\n                            {result.display_name.split(',').slice(1).join(',').trim()}\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                  <div style={{fontSize:11, opacity:0.5, marginTop:4}}>{origin[0].toFixed(4)}, {origin[1].toFixed(4)}</div>\n                </div>\n\n                {/* Destination Location Search */}\n                <div style={{position:'relative'}}>\n                  <label style={{display:'flex', flexDirection:'column', gap:4}}>\n                    <div style={{display:'flex', justifyContent:'space-between', alignItems:'center'}}>\n                      <span style={{fontSize:12, opacity:0.75}}>ðŸŽ¯ Destination</span>\n                      <button \n                        className=\"btn\" \n                        onClick={() => useCurrentLocation('dest')}\n                        style={{padding:'4px 8px', fontSize:11}}\n                        title=\"Use my current location\"\n                      >\n                        ðŸ“ Current\n                      </button>\n                    </div>\n                    <input \n                      value={destSearch || destName} \n                      onChange={e => {\n                        setDestSearch(e.target.value)\n                        searchLocation(e.target.value, 'dest')\n                      }}\n                      onFocus={e => e.target.select()}\n                      placeholder=\"Search for a place...\"\n                      style={{fontWeight:600}}\n                    />\n                  </label>\n                  {searchingFor === 'dest' && searchResults.length > 0 && (\n                    <div style={{\n                      position:'absolute', \n                      top:'100%', \n                      left:0, \n                      right:0, \n                      zIndex:1000,\n                      background:'linear-gradient(135deg, rgba(30, 41, 59, 0.98) 0%, rgba(15, 23, 42, 0.98) 100%)',\n                      backdropFilter:'blur(40px)',\n                      border:'2px solid rgba(59, 130, 246, 0.4)', \n                      borderRadius:16, \n                      marginTop:8,\n                      maxHeight:320,\n                      overflowY:'auto',\n                      boxShadow:'0 20px 60px rgba(0,0,0,0.6), 0 0 0 1px rgba(255,255,255,0.1) inset'\n                    }}>\n                      <div style={{\n                        padding:'10px 14px',\n                        fontSize:11,\n                        fontWeight:700,\n                        color:'rgba(59, 130, 246, 1)',\n                        borderBottom:'1px solid rgba(59, 130, 246, 0.2)',\n                        textTransform:'uppercase',\n                        letterSpacing:'0.5px'\n                      }}>\n                        ðŸŽ¯ Select Destination Location\n                      </div>\n                      {searchResults.map((result, i) => (\n                        <div \n                          key={i}\n                          onClick={() => selectLocation(result)}\n                          style={{\n                            padding:'14px 16px', \n                            cursor:'pointer', \n                            borderBottom: i < searchResults.length - 1 ? '1px solid rgba(255,255,255,0.06)' : 'none',\n                            transition:'all 0.2s',\n                            background:'transparent'\n                          }}\n                          onMouseEnter={e => {\n                            e.currentTarget.style.background = 'linear-gradient(90deg, rgba(59, 130, 246, 0.15) 0%, rgba(16, 185, 129, 0.15) 100%)'\n                            e.currentTarget.style.borderLeft = '3px solid rgba(59, 130, 246, 0.8)'\n                            e.currentTarget.style.paddingLeft = '13px'\n                          }}\n                          onMouseLeave={e => {\n                            e.currentTarget.style.background = 'transparent'\n                            e.currentTarget.style.borderLeft = 'none'\n                            e.currentTarget.style.paddingLeft = '16px'\n                          }}\n                        >\n                          <div style={{\n                            fontWeight:700, \n                            fontSize:15, \n                            color:'#ffffff',\n                            marginBottom:6,\n                            display:'flex',\n                            alignItems:'center',\n                            gap:8\n                          }}>\n                            <span style={{fontSize:18}}>ðŸŽ¯</span>\n                            {result.display_name.split(',')[0]}\n                          </div>\n                          <div style={{\n                            fontSize:12, \n                            color:'rgba(255,255,255,0.6)', \n                            lineHeight:1.5,\n                            paddingLeft:26\n                          }}>\n                            {result.display_name.split(',').slice(1).join(',').trim()}\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                  <div style={{fontSize:11, opacity:0.5, marginTop:4}}>{dest[0].toFixed(4)}, {dest[1].toFixed(4)}</div>\n                </div>\n\n                <div style={{display:'flex', gap:8}}>\n                  <button className=\"btn btn-primary\" onClick={swapOD} style={{flex:1}}>ðŸ”„ Swap</button>\n                </div>\n                <div style={{display:'flex', flexDirection:'column', gap:6}}>\n                  <span style={{fontSize:12, opacity:0.75}}>Preferred modes</span>\n                  <div>\n                    {['bus','train','ferry','walk','bike'].map(m => (\n                      <label key={m} style={{marginRight:10}}>\n                        <input type=\"checkbox\" checked={modes.includes(m)} onChange={() => toggleMode(m)} /> {m}\n                      </label>\n                    ))}\n                  </div>\n                </div>\n                <label style={{display:'flex', flexDirection:'column', gap:4}}>\n                  <span style={{fontSize:12, opacity:0.75}}>Optimize for</span>\n                  <select value={optimize} onChange={e => setOptimize(e.target.value)}>\n                    <option value=\"fastest\">Fastest</option>\n                    <option value=\"fewest_transfers\">Fewest transfers</option>\n                    <option value=\"least_walking\">Least walking</option>\n                    <option value=\"reliable\">Most reliable</option>\n                  </select>\n                </label>\n                <label style={{display:'flex', flexDirection:'column', gap:4}}>\n                  <span style={{fontSize:12, opacity:0.75}}>Max walking distance (km)</span>\n                  <input type=\"number\" min=\"0\" max=\"3\" step=\"0.1\" value={maxWalkKm} onChange={e => setMaxWalkKm(e.target.value)} />\n                </label>\n                <div style={{display:'flex', gap:12, flexWrap:'wrap'}}>\n                  <label><input type=\"checkbox\" checked={avoidStairs} onChange={e => setAvoidStairs(e.target.checked)} /> Avoid stairs</label>\n                  <label><input type=\"checkbox\" checked={bikeOk} onChange={e => setBikeOk(e.target.checked)} /> Bike friendly</label>\n                </div>\n                <div style={{display:'flex', flexDirection:'column', gap:6}}>\n                  <span style={{fontSize:12, opacity:0.75}}>When to travel</span>\n                  <div style={{display:'flex', gap:12}}>\n                    <label><input type=\"radio\" name=\"when\" value=\"depart\" checked={whenType==='depart'} onChange={()=>setWhenType('depart')} /> Depart at</label>\n                    <label><input type=\"radio\" name=\"when\" value=\"arrive\" checked={whenType==='arrive'} onChange={()=>setWhenType('arrive')} /> Arrive by</label>\n                  </div>\n                  <input placeholder=\"now or 2025-11-03T09:00\" value={whenValue} onChange={e=>setWhenValue(e.target.value)} />\n                </div>\n                <button className=\"btn btn-primary\" onClick={plan} style={{alignSelf:'flex-start'}}>{text.findItineraries}</button>\n              </div>\n              <div>\n                {itins.length === 0 ? (\n                  <div style={{textAlign:'center', padding:'40px 20px', background:'var(--glass-bg)', backdropFilter:'blur(10px)', borderRadius:16, border:'1px dashed var(--line)'}}>\n                    <div style={{fontSize:48, marginBottom:12}}>ðŸš€</div>\n                    <p style={{color:'var(--muted)', fontSize:15}}>Press <b style={{color:'var(--primary)'}}>Find itineraries</b> to see recommended routes.</p>\n                  </div>\n                ) : (\n                  <div style={{display:'flex', flexDirection:'column', gap:16}}>\n                    {itins.map((it, idx) => (\n                      <div key={it.id} style={{background:'var(--glass-bg)', backdropFilter:'blur(10px)', border:'1px solid var(--glass-border)', borderRadius:16, padding:20, boxShadow:'0 4px 16px rgba(0,0,0,0.08)', transition:'all 0.3s ease', cursor:'pointer'}} onMouseEnter={e => e.currentTarget.style.transform = 'translateY(-4px)'} onMouseLeave={e => e.currentTarget.style.transform = 'translateY(0)'}>\n                        <div style={{display:'flex', justifyContent:'space-between', alignItems:'flex-start', gap:16, flexWrap:'wrap'}}>\n                          <div style={{flex:1}}>\n                            <div style={{display:'flex', alignItems:'center', gap:10, marginBottom:10}}>\n                              <span style={{background:'linear-gradient(135deg, #667eea 0%, #764ba2 100%)', color:'white', width:32, height:32, borderRadius:'50%', display:'grid', placeItems:'center', fontWeight:700, fontSize:14}}>{idx + 1}</span>\n                              <div style={{fontSize:18, fontWeight:700}}>~{it.durationMin} min</div>\n                              <div style={{color:'var(--muted)', fontSize:14}}>â€¢ {it.transfers} transfers</div>\n                              <div style={{background:it.reliability > 0.85 ? 'rgba(16, 185, 129, 0.15)' : 'rgba(251, 191, 36, 0.15)', color:it.reliability > 0.85 ? 'var(--success)' : '#f59e0b', padding:'4px 10px', borderRadius:8, fontSize:12, fontWeight:600}}>{Math.round((it.reliability||0)*100)}% reliable</div>\n                            </div>\n                            <div style={{color:'var(--muted)', fontSize:14, marginBottom:10}}>ðŸš¶ {it.legs.join(' â†’ ')}</div>\n                            <div style={{display:'flex', gap:8, flexWrap:'wrap'}}>\n                              <Chip>ðŸš¶ {(it.walk_km ?? 0).toFixed(1)} km walk</Chip>\n                              <Chip>{(it.modes||[]).join(', ')}</Chip>\n                            </div>\n                          </div>\n                          <div style={{display:'flex', gap:8, flexWrap:'wrap'}}>\n                            <button className=\"btn\" onClick={()=>exportPdf(it)}>ðŸ“„ {text.exportPdf}</button>\n                            <button className=\"btn btn-primary\" onClick={()=>suggestAlt(it)}>ðŸ”„ {text.suggestAlt}</button>\n                          </div>\n                        </div>\n                        {alts[it.id] && (\n                          <div className=\"alt\" style={{marginTop:16}}>\n                            <div style={{fontWeight:600, marginBottom:6}}>âœ¨ Alternative route available</div>\n                            <div style={{color:'var(--muted)', fontSize:14}}>~{alts[it.id].durationMin || 'â€”'} min â€¢ {alts[it.id].transfers || 0} transfers</div>\n                            {alts[it.id].note && <div style={{color:'var(--muted)', fontSize:14, marginTop:4}}>{alts[it.id].note}</div>}\n                            {alts[it.id].legs && <div style={{color:'var(--muted)', fontSize:14}}>ðŸš¶ {alts[it.id].legs.join(' â†’ ')}</div>}\n                          </div>\n                        )}\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </div>\n            </div>\n          </FeatureCard>\n\n          <FeatureCard icon=\"ðŸš\" title=\"Nearby Transit\" description=\"Check nearby stops, live departures, and multimodal choices.\">\n            <div style={{display:'flex', flexDirection:'column', gap:18}}>\n              <div style={{display:'flex', flexWrap:'wrap', gap:12}}>\n                {stops.slice(0,6).map(s => (\n                  <div key={s.stop_id} style={{padding:12, border:'1px solid var(--line,#e5e7eb)', borderRadius:12, background:'var(--card,#fff)', minWidth:180}}>\n                    <div style={{fontWeight:700}}>{s.name}</div>\n                    <div style={{opacity:0.7, fontSize:12}}>{s.distance_m} m away</div>\n                    <div style={{marginTop:10}}><button className=\"btn\" onClick={()=>viewDepartures(s)}>Live departures</button></div>\n                  </div>\n                ))}\n                {stops.length===0 && <div style={{opacity:0.7}}>Searching for nearby stopsâ€¦</div>}\n              </div>\n              {selectedStop && (\n                <div style={{border:'1px solid var(--line,#e5e7eb)', borderRadius:12, padding:16, background:'var(--card,#fff)'}}>\n                  <div style={{fontWeight:700, marginBottom:8}}>Departures â€” {selectedStop.name}</div>\n                  <ul style={{margin:0, paddingLeft:18}}>\n                    {departures.map((d,i)=>(\n                      <li key={i}><strong>{d.route}</strong> â†’ {d.headsign} <span style={{opacity:0.65}}>in {d.departure_in_min} min</span></li>\n                    ))}\n                    {departures.length===0 && <li style={{opacity:0.65}}>Loading departuresâ€¦</li>}\n                  </ul>\n                </div>\n              )}\n            </div>\n          </FeatureCard>\n          </div>\n        )}\n\n        {view === 'safety' && (\n          <div>\n            <h2 className=\"section-title\">ðŸ›¡ï¸ Safety & Emergency</h2>\n          <FeatureCard icon=\"ðŸ“ž\" title=\"Emergency Contacts\" description=\"Quick access to local emergency services.\">\n            <div style={{display:'flex', flexWrap:'wrap', gap:20}}>\n              <div style={{flex:'1 1 260px', display:'flex', flexDirection:'column', gap:10}}>\n                <div style={{fontWeight:600}}>Quick actions</div>\n                <button className=\"btn\" onClick={()=>updateSavedPlace('home', origin)}>Save home</button>\n                <button className=\"btn\" onClick={()=>updateSavedPlace('work', dest)}>Save work</button>\n                <button className=\"btn btn-primary\" onClick={savePrefs}>Save to profile</button>\n                <button className=\"btn\" onClick={saveOfflinePack}>{text.offlineCta}</button>\n                {token ? (\n                  <div style={{fontSize:13, opacity:0.75}}>Signed in as {username}. Preferences sync across devices.</div>\n                ) : (\n                  <div style={{fontSize:13, opacity:0.75}}>Create an account above to sync preferences and reviews.</div>\n                )}\n              </div>\n              <div style={{flex:'1 1 260px'}}>\n                <div style={{fontWeight:600, marginBottom:6}}>ðŸ›Ÿ {text.emergencyContacts}</div>\n                <ul style={{margin:0, paddingLeft:18}}>\n                  {safetyContacts.map((c,i)=>(\n                    <li key={i}><strong>{c.name}</strong> â€” <a href={`tel:${c.phone}`} style={{color:'var(--danger)', fontWeight:700}}>{c.phone}</a></li>\n                  ))}\n                  {safetyContacts.length===0 && <li style={{opacity:0.7}}>Loading local contactsâ€¦</li>}\n                </ul>\n                <div style={{marginTop:12}}>\n                  <button className=\"btn\" onClick={shareLocation}>{text.shareLocation}</button>\n                </div>\n              </div>\n              <div style={{flex:'1 1 260px'}}>\n                <div style={{fontWeight:600, marginBottom:6}}>Share status</div>\n                <p style={{opacity:0.75}}>Tap <em>Save offline snapshot</em> before you head out to keep routes, alerts, and emergency numbers handy â€” even without coverage.</p>\n              </div>\n            </div>\n          </FeatureCard>\n          </div>\n        )}\n\n        {view === 'settings' && (\n          <div>\n            <h2 className=\"section-title\">âš™ï¸ Settings & Preferences</h2>\n          <FeatureCard icon=\"ðŸŒ\" title=\"Travel Toolkit\" description=\"International tools for language, money, and bookings.\">\n            <div style={{display:'flex', flexWrap:'wrap', gap:20}}>\n              <div style={{flex:'1 1 220px'}}>\n                <div style={{fontWeight:600, marginBottom:6}}>In-app translator</div>\n                <p style={{opacity:0.75}}>Interface now in <strong>{uiLang.toUpperCase()}</strong>. Additional copy will respect this preference as the app grows.</p>\n              </div>\n              <div style={{flex:'1 1 260px', display:'flex', flexDirection:'column', gap:8}}>\n                <div style={{fontWeight:600}}>Currency helper</div>\n                <label style={{fontSize:12, opacity:0.75}}>Amount in NZD</label>\n                <input type=\"number\" value={amount} min=\"0\" onChange={e=>setAmount(Number(e.target.value) || 0)} />\n                <label style={{fontSize:12, opacity:0.75}}>Convert to</label>\n                <select value={currency} onChange={e=>setCurrency(e.target.value)}>\n                  {currencyOptions.map(code => <option key={code} value={code}>{code}</option>)}\n                </select>\n                <div style={{marginTop:4, fontWeight:600}}>â‰ˆ {convertedAmount} {currency}</div>\n              </div>\n              <div style={{flex:'1 1 260px'}}>\n                <div style={{fontWeight:600, marginBottom:6}}>Bookings & payments</div>\n                <ul style={{margin:0, paddingLeft:18}}>\n                  <li>Reserve transit passes and parking</li>\n                  <li>Bundle flights + hotels (coming soon)</li>\n                  <li>Secure wallet for ticketing integrations</li>\n                </ul>\n              </div>\n            </div>\n          </FeatureCard>\n          </div>\n        )}\n\n        {view === 'reviews' && (\n          <div>\n            <h2 className=\"section-title\">â­ Community Reviews</h2>\n          <FeatureCard icon=\"â­\" title=\"Share Your Experience\" description=\"Crowd-sourced tips keep travellers informed.\">\n            <div style={{display:'flex', flexWrap:'wrap', gap:20}}>\n              <div style={{flex:'1 1 260px', display:'flex', flexDirection:'column', gap:10}}>\n                <label style={{display:'flex', flexDirection:'column', gap:4}}>\n                  <span style={{fontSize:12, opacity:0.75}}>Location</span>\n                  <input placeholder=\"e.g., Britomart\" value={reviewLoc} onChange={e=>setReviewLoc(e.target.value)} />\n                </label>\n                <label style={{display:'flex', flexDirection:'column', gap:4}}>\n                  <span style={{fontSize:12, opacity:0.75}}>Rating</span>\n                  <select value={reviewRating} onChange={e=>setReviewRating(e.target.value)}>\n                    {[5,4,3,2,1].map(n=> <option key={n} value={n}>{n}</option>)}\n                  </select>\n                </label>\n                <label style={{display:'flex', flexDirection:'column', gap:4}}>\n                  <span style={{fontSize:12, opacity:0.75}}>Comment</span>\n                  <input placeholder=\"Short noteâ€¦\" value={reviewComment} onChange={e=>setReviewComment(e.target.value)} />\n                </label>\n                <button className=\"btn btn-primary\" onClick={submitReview}>Share review</button>\n              </div>\n              <div style={{flex:'1 1 320px'}}>\n                <div style={{fontWeight:600, marginBottom:8}}>Latest reviews</div>\n                <ul style={{margin:0, paddingLeft:18, display:'flex', flexDirection:'column', gap:8}}>\n                  {reviews.map((r,i)=>(\n                    <li key={i}><strong>{r.location}</strong> â€¢ {r.rating}/5 â€” {r.comment} <span style={{opacity:0.6}}>by {r.user}</span></li>\n                  ))}\n                  {reviews.length===0 && <li style={{opacity:0.7}}>Be the first to add a community update.</li>}\n                </ul>\n              </div>\n            </div>\n          </FeatureCard>\n          </div>\n        )}\n\n      </div>\n    </div>\n  )\n}\n"],"mappings":"+MAAA,OAASA,SAAS,CAAEC,QAAQ,CAAEC,OAAO,CAAEC,WAAW,KAAQ,OAAO,CACjE,OAASC,YAAY,CAAEC,SAAS,CAAEC,MAAM,CAAEC,KAAK,CAAEC,YAAY,KAAQ,eAAe,CACpF,MAAO,0BAA0B,CACjC,MAAO,CAAAC,CAAC,KAAM,SAAS,QAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAEvB,KAAM,CAAAC,GAAG,CAAG,EAAE,CAAC;AAEf;AACA,MAAO,CAAAP,CAAC,CAACQ,IAAI,CAACC,OAAO,CAACC,SAAS,CAACC,WAAW,CAC3CX,CAAC,CAACQ,IAAI,CAACC,OAAO,CAACG,YAAY,CAAC,CAC1BC,aAAa,CAAE,gEAAgE,CAC/EC,OAAO,CAAE,6DAA6D,CACtEC,SAAS,CAAE,+DACb,CAAC,CAAC,CAEF,KAAM,CAAAC,YAAY,CAAG,CACnBC,EAAE,CAAE,CACFC,IAAI,CAAE,sCAAsC,CAC5CC,OAAO,CAAE,0EAA0E,CACnFC,eAAe,CAAE,oBAAoB,CACrCC,UAAU,CAAE,uBAAuB,CACnCC,aAAa,CAAE,gBAAgB,CAC/BC,UAAU,CAAE,kBAAkB,CAC9BC,cAAc,CAAE,kBAAkB,CAClCC,YAAY,CAAE,iCAAiC,CAC/CC,gBAAgB,CAAE,oBAAoB,CACtCC,UAAU,CAAE,aAAa,CACzBC,eAAe,CAAE,oBAAoB,CACrCC,QAAQ,CAAE,6BAA6B,CACvCC,eAAe,CAAE,kBAAkB,CACnCC,SAAS,CAAE,YAAY,CACvBC,UAAU,CAAE,qBAAqB,CACjCC,iBAAiB,CAAE,oBACrB,CAAC,CACDC,EAAE,CAAE,CACFhB,IAAI,CAAE,+BAA+B,CACrCC,OAAO,CAAE,8DAA8D,CACvEC,eAAe,CAAE,kBAAkB,CACnCC,UAAU,CAAE,kCAAkC,CAC9CC,aAAa,CAAE,qBAAqB,CACpCC,UAAU,CAAE,oBAAoB,CAChCC,cAAc,CAAE,qBAAqB,CACrCC,YAAY,CAAE,uCAAuC,CACrDC,gBAAgB,CAAE,4BAA4B,CAC9CC,UAAU,CAAE,aAAa,CACzBC,eAAe,CAAE,sBAAsB,CACvCC,QAAQ,CAAE,+BAA+B,CACzCC,eAAe,CAAE,oBAAoB,CACrCC,SAAS,CAAE,cAAc,CACzBC,UAAU,CAAE,qBAAqB,CACjCC,iBAAiB,CAAE,yBACrB,CAAC,CACDE,EAAE,CAAE,CACFjB,IAAI,CAAE,wCAAwC,CAC9CC,OAAO,CAAE,kEAAkE,CAC3EC,eAAe,CAAE,cAAc,CAC/BC,UAAU,CAAE,gCAAgC,CAC5CC,aAAa,CAAE,sBAAsB,CACrCC,UAAU,CAAE,0BAA0B,CACtCC,cAAc,CAAE,uBAAuB,CACvCC,YAAY,CAAE,yCAAyC,CACvDC,gBAAgB,CAAE,uBAAuB,CACzCC,UAAU,CAAE,gBAAgB,CAC5BC,eAAe,CAAE,yBAAyB,CAC1CC,QAAQ,CAAE,gCAAgC,CAC1CC,eAAe,CAAE,uBAAuB,CACxCC,SAAS,CAAE,kBAAkB,CAC7BC,UAAU,CAAE,4BAA4B,CACxCC,iBAAiB,CAAE,uBACrB,CAAC,CACDG,EAAE,CAAE,CACFlB,IAAI,CAAE,UAAU,CAChBC,OAAO,CAAE,gBAAgB,CACzBC,eAAe,CAAE,MAAM,CACvBC,UAAU,CAAE,QAAQ,CACpBC,aAAa,CAAE,MAAM,CACrBC,UAAU,CAAE,MAAM,CAClBC,cAAc,CAAE,QAAQ,CACxBC,YAAY,CAAE,WAAW,CACzBC,gBAAgB,CAAE,MAAM,CACxBC,UAAU,CAAE,MAAM,CAClBC,eAAe,CAAE,OAAO,CACxBC,QAAQ,CAAE,UAAU,CACpBC,eAAe,CAAE,MAAM,CACvBC,SAAS,CAAE,OAAO,CAClBC,UAAU,CAAE,QAAQ,CACpBC,iBAAiB,CAAE,OACrB,CACF,CAAC,CAED,KAAM,CAAAI,cAAc,CAAG,CACrBC,GAAG,CAAE,CAAC,CACNC,GAAG,CAAE,IAAI,CACTC,GAAG,CAAE,IAAI,CACTC,GAAG,CAAE,IACP,CAAC,CAED,QAAS,CAAAC,IAAIA,CAAAC,IAAA,CAAY,IAAX,CAACC,QAAQ,CAAC,CAAAD,IAAA,CAAG,mBAAOzC,IAAA,SAAM2C,SAAS,CAAC,MAAM,CAACC,KAAK,CAAE,CAACC,WAAW,CAAC,CAAC,CAAE,CAAAH,QAAA,CAAEA,QAAQ,CAAO,CAAC,CAAC,CAEnG,QAAS,CAAAI,WAAWA,CAAAC,KAAA,CAAsC,IAArC,CAACC,KAAK,CAAEC,WAAW,CAAEP,QAAQ,CAAEQ,IAAI,CAAC,CAAAH,KAAA,CACvD,mBACE7C,KAAA,YAASyC,SAAS,CAAC,MAAM,CAACC,KAAK,CAAE,CAACO,YAAY,CAAC,EAAE,CAAE,CAAAT,QAAA,eACjD1C,IAAA,QAAK4C,KAAK,CAAE,CAACO,YAAY,CAAC,EAAE,CAAE,CAAAT,QAAA,cAC5BxC,KAAA,QAAK0C,KAAK,CAAE,CAACQ,OAAO,CAAC,MAAM,CAAEC,UAAU,CAAC,QAAQ,CAAEC,GAAG,CAAC,EAAE,CAAEH,YAAY,CAAC,EAAE,CAAE,CAAAT,QAAA,EACxEQ,IAAI,eAAIlD,IAAA,QAAK4C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEC,MAAM,CAAC,wCAAwC,CAAE,CAAAd,QAAA,CAAEQ,IAAI,CAAM,CAAC,cACjGhD,KAAA,QAAAwC,QAAA,eACE1C,IAAA,QAAK4C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEE,UAAU,CAAC,GAAG,CAAEC,UAAU,CAAC,mDAAmD,CAAEC,oBAAoB,CAAC,MAAM,CAAEC,mBAAmB,CAAC,aAAa,CAAEC,cAAc,CAAC,MAAM,CAAEC,aAAa,CAAC,QAAQ,CAAE,CAAApB,QAAA,CAAEM,KAAK,CAAM,CAAC,CACtOC,WAAW,eAAIjD,IAAA,QAAK4C,KAAK,CAAE,CAACmB,KAAK,CAAC,cAAc,CAAER,QAAQ,CAAC,EAAE,CAAES,SAAS,CAAC,CAAC,CAAEC,UAAU,CAAC,GAAG,CAAE,CAAAvB,QAAA,CAAEO,WAAW,CAAM,CAAC,EAC9G,CAAC,EACH,CAAC,CACH,CAAC,cACNjD,IAAA,QAAA0C,QAAA,CAAMA,QAAQ,CAAM,CAAC,EACd,CAAC,CAEd,CAEA,QAAS,CAAAwB,eAAeA,CAAAC,KAAA,CAAmC,IAAlC,CAAEC,QAAQ,CAAEC,WAAW,CAAEC,KAAM,CAAC,CAAAH,KAAA,CACvD,KAAM,CAACI,SAAS,CAAEC,YAAY,CAAC,CAAGlF,QAAQ,CAAC,IAAI,CAAC,CAEhD,KAAM,CAAAmF,aAAa,CAAG,CACpBC,OAAOA,CAACC,CAAC,CAAE,CACT,KAAM,CAAAC,MAAM,CAAGD,CAAC,CAACE,MAAM,CACvB,KAAM,CAAAC,GAAG,CAAGF,MAAM,CAACG,SAAS,CAAC,CAAC,CAC9BV,WAAW,CAAC,CAACS,GAAG,CAACE,GAAG,CAAEF,GAAG,CAACG,GAAG,CAAC,CAAC,CACjC,CACF,CAAC,CAED,mBACEjF,IAAA,CAACL,MAAM,EACL4E,SAAS,CAAEA,SAAU,CACrBE,aAAa,CAAEA,aAAc,CAC7BL,QAAQ,CAAEA,QAAS,CAAA1B,QAAA,cAEnB1C,IAAA,CAACJ,KAAK,EAACsF,QAAQ,CAAE,EAAG,CAAAxC,QAAA,cAClBxC,KAAA,SAAMiF,OAAO,CAAEA,CAAA,GAAMX,YAAY,CAAEY,CAAC,EAAK,CAACA,CAAC,CAAE,CAAA1C,QAAA,EAC1C4B,KAAK,cAACtE,IAAA,QAAI,CAAC,CACXuE,SAAS,CAAG,WAAW,CAAG,yBAAyB,EAChD,CAAC,CACF,CAAC,CACF,CAAC,CAEb,CAEA,QAAS,CAAAc,eAAeA,CAAAC,KAAA,CAAiB,IAAhB,CAAEC,UAAW,CAAC,CAAAD,KAAA,CACrCzF,YAAY,CAAC,CACX2F,KAAKA,CAACb,CAAC,CAAE,CACP,GAAIY,UAAU,CAAE,CACdA,UAAU,CAAC,CAACZ,CAAC,CAACc,MAAM,CAACT,GAAG,CAAEL,CAAC,CAACc,MAAM,CAACR,GAAG,CAAC,CAAC,CAC1C,CACF,CACF,CAAC,CAAC,CACF,MAAO,KAAI,CACb,CAEA,QAAS,CAAAS,cAAcA,CAAAC,KAAA,CAA8C,IAA7C,CAAEC,MAAM,CAAEC,SAAS,CAAEC,IAAI,CAAEC,OAAO,CAAEC,KAAM,CAAC,CAAAL,KAAA,CACjE,KAAM,CAAAM,MAAM,CAAGL,MAAM,CAErB,mBACE1F,KAAA,CAACT,YAAY,EAACwG,MAAM,CAAEA,MAAO,CAACC,IAAI,CAAE,EAAG,CAACtD,KAAK,CAAE,CAACuD,MAAM,CAAE,MAAM,CAAEC,KAAK,CAAE,MAAM,CAAEC,YAAY,CAAE,EAAE,CAAE,CAAA3D,QAAA,eAC/F1C,IAAA,CAACN,SAAS,EACR4G,WAAW,CAAC,4EAA4E,CACxFC,GAAG,CAAC,oDAAoD,CACzD,CAAC,cACFvG,IAAA,CAACkE,eAAe,EAACE,QAAQ,CAAEwB,MAAO,CAACvB,WAAW,CAAEwB,SAAU,CAACvB,KAAK,CAAC,kBAAkB,CAAE,CAAC,cACtFtE,IAAA,CAACL,MAAM,EAACyE,QAAQ,CAAE0B,IAAK,CAAApD,QAAA,cACrB1C,IAAA,CAACJ,KAAK,EAAA8C,QAAA,CAAC,aAAW,CAAO,CAAC,CACpB,CAAC,CACRsD,KAAK,CAACQ,KAAK,CAAC,CAAC,CAAE,EAAE,CAAC,CAACC,GAAG,CAAEC,IAAI,eAC3B1G,IAAA,CAACL,MAAM,EAAoByE,QAAQ,CAAE,CAACsC,IAAI,CAAC1B,GAAG,CAAE0B,IAAI,CAACzB,GAAG,CAAE,CAAC/B,IAAI,CAAE,GAAI,CAAApD,CAAC,CAACQ,IAAI,CAAC,CAC1EM,OAAO,CAAE,oGAAoG,CAC7GC,SAAS,CAAE,+DAA+D,CAC1E8F,QAAQ,CAAE,CAAC,EAAE,CAAE,EAAE,CAAC,CAClBC,UAAU,CAAE,CAAC,EAAE,CAAE,EAAE,CAAC,CACpBC,WAAW,CAAE,CAAC,CAAC,CAAE,CAAC,EAAE,CAAC,CACrBC,UAAU,CAAE,CAAC,EAAE,CAAE,EAAE,CACrB,CAAC,CAAE,CAAApE,QAAA,cACDxC,KAAA,CAACN,KAAK,EAAA8C,QAAA,eAAC1C,IAAA,WAAA0C,QAAA,CAASgE,IAAI,CAAC1F,IAAI,CAAS,CAAC,cAAAhB,IAAA,QAAI,CAAC,CAAC0G,IAAI,CAACK,UAAU,CAAC,QAAM,EAAO,CAAC,EAR5DL,IAAI,CAACM,OASV,CACT,CAAC,cACFhH,IAAA,CAACqF,eAAe,EAACE,UAAU,CAAEQ,OAAQ,CAAE,CAAC,EAC5B,CAAC,CAEnB,CAEA,QAAS,CAAAkB,SAASA,CAAAC,KAAA,CAA0C,IAAzC,CAACC,KAAK,CAAEC,QAAQ,CAAEC,QAAQ,CAAEC,WAAW,CAAC,CAAAJ,KAAA,CACzD,KAAM,CAACK,IAAI,CAAEC,OAAO,CAAC,CAAGlI,QAAQ,CAAC,OAAO,CAAC,CACzC,KAAM,CAACmI,IAAI,CAAEC,OAAO,CAAC,CAAGpI,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAACqI,IAAI,CAAEC,OAAO,CAAC,CAAGtI,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAACuI,KAAK,CAAEC,QAAQ,CAAC,CAAGxI,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACyI,QAAQ,CAAEC,WAAW,CAAC,CAAG1I,QAAQ,CAAC,KAAK,CAAC,CAC/C,KAAM,CAAC2I,KAAK,CAAEC,QAAQ,CAAC,CAAG5I,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAAC6I,OAAO,CAAEC,UAAU,CAAC,CAAG9I,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAAC+I,QAAQ,CAAEC,WAAW,CAAC,CAAGhJ,QAAQ,CAAC,CAAC,CAAC,CAC3C,KAAM,CAACiJ,UAAU,CAAEC,aAAa,CAAC,CAAGlJ,QAAQ,CAAC,IAAI,CAAC,CAClD,KAAM,CAACmJ,aAAa,CAAEC,gBAAgB,CAAC,CAAGpJ,QAAQ,CAAC,KAAK,CAAC,CAEzDD,SAAS,CAAC,IAAI,CACZ,KAAM,CAAAsJ,CAAC,CAAGC,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC,EAAIC,cAAc,CAACD,OAAO,CAAC,YAAY,CAAC,CACpF,KAAM,CAAAE,CAAC,CAAGH,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC,EAAIC,cAAc,CAACD,OAAO,CAAC,WAAW,CAAC,CAClF,GAAIF,CAAC,EAAII,CAAC,CAAC,CAAE3B,QAAQ,CAACuB,CAAC,CAAC,CAAErB,WAAW,CAACyB,CAAC,CAAC,CAAC,CAC3C,CAAC,CAAE,CAAC3B,QAAQ,CAAEE,WAAW,CAAC,CAAC,CAE3BjI,SAAS,CAAC,IAAM,CACd,GAAIkI,IAAI,GAAK,UAAU,EAAII,IAAI,CAAE,CAC/B,GAAI,CAAAqB,KAAK,CAAG,CAAC,CACb,GAAIrB,IAAI,CAACsB,MAAM,EAAI,CAAC,CAAED,KAAK,EAAE,CAC7B,GAAIrB,IAAI,CAACsB,MAAM,EAAI,EAAE,CAAED,KAAK,EAAE,CAC9B,GAAI,OAAO,CAACE,IAAI,CAACvB,IAAI,CAAC,EAAI,OAAO,CAACuB,IAAI,CAACvB,IAAI,CAAC,CAAEqB,KAAK,EAAE,CACrD,GAAI,OAAO,CAACE,IAAI,CAACvB,IAAI,CAAC,CAAEqB,KAAK,EAAE,CAC/B,GAAI,cAAc,CAACE,IAAI,CAACvB,IAAI,CAAC,CAAEqB,KAAK,EAAE,CACtCV,WAAW,CAACU,KAAK,CAAC,CACpB,CACF,CAAC,CAAE,CAACrB,IAAI,CAAEJ,IAAI,CAAC,CAAC,CAEhB,KAAM,CAAA4B,aAAa,CAAItB,KAAK,EAAK,CAC/B,MAAO,6BAA4B,CAACqB,IAAI,CAACrB,KAAK,CAAC,CACjD,CAAC,CAED,KAAM,CAAAuB,MAAM,CAAG,KAAO,CAAAzE,CAAC,EAAK,CAC1BA,CAAC,SAADA,CAAC,iBAADA,CAAC,CAAE0E,cAAc,CAAC,CAAC,CACnBnB,QAAQ,CAAC,EAAE,CAAC,CAEZ;AACA,GAAI,CAACT,IAAI,EAAIA,IAAI,CAACwB,MAAM,CAAG,CAAC,CAAE,CAC5Bf,QAAQ,CAAC,wCAAwC,CAAC,CAClD,OACF,CACA,GAAI,CAACP,IAAI,EAAIA,IAAI,CAACsB,MAAM,CAAG,CAAC,CAAE,CAC5Bf,QAAQ,CAAC,wCAAwC,CAAC,CAClD,OACF,CACA,GAAIX,IAAI,GAAK,UAAU,CAAE,CACvB,GAAI,CAACM,KAAK,EAAI,CAACsB,aAAa,CAACtB,KAAK,CAAC,CAAE,CACnCK,QAAQ,CAAC,oCAAoC,CAAC,CAC9C,OACF,CACA,GAAIG,QAAQ,CAAG,CAAC,CAAE,CAChBH,QAAQ,CAAC,iEAAiE,CAAC,CAC3E,OACF,CACF,CAEAE,UAAU,CAAC,IAAI,CAAC,CAChB,GAAG,CACD,KAAM,CAAAkB,OAAO,CAAG/B,IAAI,GAAK,UAAU,CAC/B,CAACF,QAAQ,CAAEI,IAAI,CAAE8B,QAAQ,CAAE5B,IAAI,CAAEE,KAAK,CAAEA,KAAK,CAAC,CAC9C,CAACR,QAAQ,CAAEI,IAAI,CAAE8B,QAAQ,CAAE5B,IAAI,CAAC,CAEpC,KAAM,CAAA6B,CAAC,CAAG,KAAM,CAAAC,KAAK,IAAAC,MAAA,CAAIrJ,GAAG,WAAAqJ,MAAA,CAASnC,IAAI,EAAI,CAC3CoC,MAAM,CAAC,MAAM,CACbC,OAAO,CAAC,CAAC,cAAc,CAAC,kBAAkB,CAAC,CAC3CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACT,OAAO,CAC9B,CAAC,CAAC,CACF,KAAM,CAAAlE,CAAC,CAAG,KAAM,CAAAoE,CAAC,CAACQ,IAAI,CAAC,CAAC,CACxB,GAAI,CAACR,CAAC,CAACS,EAAE,CAAE,KAAM,IAAI,CAAAC,KAAK,CAAC9E,CAAC,CAAC+E,MAAM,EAAI,uBAAuB,CAAC,CAE/D/C,QAAQ,CAAChC,CAAC,CAAC+B,KAAK,CAAC,CAAEG,WAAW,CAAClC,CAAC,CAACiC,QAAQ,CAAC,CAE1C;AACA,KAAM,CAAA+C,OAAO,CAAG7B,UAAU,CAAGK,YAAY,CAAGE,cAAc,CAC1DsB,OAAO,CAACC,OAAO,CAAC,YAAY,CAAEjF,CAAC,CAAC+B,KAAK,CAAC,CACtCiD,OAAO,CAACC,OAAO,CAAC,WAAW,CAAEjF,CAAC,CAACiC,QAAQ,CAAC,CACxC+C,OAAO,CAACC,OAAO,CAAC,iBAAiB,CAAEC,IAAI,CAACC,GAAG,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAAC,CAEzD9C,OAAO,CAAC,EAAE,CAAC,CAAEE,OAAO,CAAC,EAAE,CAAC,CAAEE,QAAQ,CAAC,EAAE,CAAC,CACtCY,gBAAgB,CAAC,KAAK,CAAC,CACzB,CAAC,MAAM/D,CAAC,CAAC,CACPuD,QAAQ,CAACvD,CAAC,CAAC8F,OAAO,CAAC,CACrB,CAAC,OAAS,CACRrC,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,KAAM,CAAAsC,MAAM,CAAGA,CAAA,GAAM,CACnBtD,QAAQ,CAAC,IAAI,CAAC,CACdE,WAAW,CAAC,IAAI,CAAC,CACjBqD,kBAAkB,CAAC,KAAK,CAAC,CACzB/B,YAAY,CAACgC,UAAU,CAAC,YAAY,CAAC,CACrChC,YAAY,CAACgC,UAAU,CAAC,WAAW,CAAC,CACpChC,YAAY,CAACgC,UAAU,CAAC,iBAAiB,CAAC,CAC1C9B,cAAc,CAAC8B,UAAU,CAAC,YAAY,CAAC,CACvC9B,cAAc,CAAC8B,UAAU,CAAC,WAAW,CAAC,CACtC9B,cAAc,CAAC8B,UAAU,CAAC,iBAAiB,CAAC,CAC5CC,KAAK,CAAC,eAAe,CAAC,CACxB,CAAC,CAED,KAAM,CAAAC,gBAAgB,CAAGA,CAAA,GAAM,CAC7B,GAAIzC,QAAQ,EAAI,CAAC,CAAE,MAAO,SAAS,CACnC,GAAIA,QAAQ,EAAI,CAAC,CAAE,MAAO,SAAS,CACnC,MAAO,SAAS,CAClB,CAAC,CAED,KAAM,CAAA0C,eAAe,CAAGA,CAAA,GAAM,CAC5B,GAAI1C,QAAQ,EAAI,CAAC,CAAE,MAAO,MAAM,CAChC,GAAIA,QAAQ,EAAI,CAAC,CAAE,MAAO,QAAQ,CAClC,MAAO,QAAQ,CACjB,CAAC,CAED,GAAIlB,KAAK,CAAE,CACT,mBACEjH,KAAA,QAAK0C,KAAK,CAAE,CAACQ,OAAO,CAAC,MAAM,CAAEC,UAAU,CAAC,QAAQ,CAAEC,GAAG,CAAC,EAAE,CAAE,CAAAZ,QAAA,eACxDxC,KAAA,QAAKyC,SAAS,CAAC,MAAM,CAACC,KAAK,CAAE,CAACQ,OAAO,CAAC,MAAM,CAAEC,UAAU,CAAC,QAAQ,CAAEC,GAAG,CAAC,EAAE,CAAE,CAAAZ,QAAA,eACzE1C,IAAA,QAAK4C,KAAK,CAAE,CAACwD,KAAK,CAAC,EAAE,CAAED,MAAM,CAAC,EAAE,CAAEE,YAAY,CAAC,KAAK,CAAE3C,UAAU,CAAC,mBAAmB,CAAEN,OAAO,CAAC,MAAM,CAAE4H,UAAU,CAAC,QAAQ,CAAEjH,KAAK,CAAC,OAAO,CAAEN,UAAU,CAAC,GAAG,CAAEF,QAAQ,CAAC,EAAE,CAAE,CAAAb,QAAA,CACpK2E,QAAQ,CAAC,CAAC,CAAC,CAAC4D,WAAW,CAAC,CAAC,CACvB,CAAC,cACN/K,KAAA,QAAAwC,QAAA,eACE1C,IAAA,QAAK4C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEE,UAAU,CAAC,GAAG,CAAE,CAAAf,QAAA,CAAE2E,QAAQ,CAAM,CAAC,cAC3DrH,IAAA,QAAK4C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEQ,KAAK,CAAC,cAAc,CAAE,CAAArB,QAAA,CAAC,UAAQ,CAAK,CAAC,EAC5D,CAAC,EACH,CAAC,cACN1C,IAAA,WAAQ2C,SAAS,CAAC,gBAAgB,CAACwC,OAAO,CAAEuF,MAAO,CAAAhI,QAAA,CAAC,qBAAS,CAAQ,CAAC,EACnE,CAAC,CAEV,CAEA,mBACExC,KAAA,CAAAE,SAAA,EAAAsC,QAAA,eACE1C,IAAA,WAAQ2C,SAAS,CAAC,iBAAiB,CAACwC,OAAO,CAAEA,CAAA,GAAMuD,gBAAgB,CAAC,IAAI,CAAE,CAAAhG,QAAA,CAAC,sBAE3E,CAAQ,CAAC,CAER+F,aAAa,eACZzI,IAAA,QAAK4C,KAAK,CAAE,CAACwB,QAAQ,CAAC,OAAO,CAAE8G,KAAK,CAAC,CAAC,CAAExH,UAAU,CAAC,iBAAiB,CAAEyH,cAAc,CAAC,WAAW,CAAE/H,OAAO,CAAC,MAAM,CAAE4H,UAAU,CAAC,QAAQ,CAAEI,MAAM,CAAC,IAAI,CAAEC,OAAO,CAAC,EAAE,CAAE,CAAClG,OAAO,CAAEA,CAAA,GAAMuD,gBAAgB,CAAC,KAAK,CAAE,CAAAhG,QAAA,cACtMxC,KAAA,QAAK0C,KAAK,CAAE,CAACc,UAAU,CAAC,iBAAiB,CAAEyH,cAAc,CAAC,YAAY,CAAEG,MAAM,CAAC,+BAA+B,CAAEjF,YAAY,CAAC,EAAE,CAAEgF,OAAO,CAAC,EAAE,CAAEE,QAAQ,CAAC,GAAG,CAAEnF,KAAK,CAAC,MAAM,CAAEoF,SAAS,CAAC,oBAAoB,CAAE,CAACrG,OAAO,CAAER,CAAC,EAAIA,CAAC,CAAC8G,eAAe,CAAC,CAAE,CAAA/I,QAAA,eAC1OxC,KAAA,QAAK0C,KAAK,CAAE,CAAC8I,SAAS,CAAC,QAAQ,CAAEvI,YAAY,CAAC,EAAE,CAAE,CAAAT,QAAA,eAChD1C,IAAA,QAAK4C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEJ,YAAY,CAAC,EAAE,CAAE,CAAAT,QAAA,CAAC,cAAE,CAAK,CAAC,cACpD1C,IAAA,OAAI4C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEE,UAAU,CAAC,GAAG,CAAEN,YAAY,CAAC,CAAC,CAAEO,UAAU,CAAC,mBAAmB,CAAEC,oBAAoB,CAAC,MAAM,CAAEC,mBAAmB,CAAC,aAAa,CAAE,CAAAlB,QAAA,CACtJ6E,IAAI,GAAK,OAAO,CAAG,cAAc,CAAG,gBAAgB,CACnD,CAAC,cACLvH,IAAA,MAAG4C,KAAK,CAAE,CAACmB,KAAK,CAAC,cAAc,CAAER,QAAQ,CAAC,EAAE,CAAE,CAAAb,QAAA,CAC3C6E,IAAI,GAAK,OAAO,CAAG,uDAAuD,CAAG,oCAAoC,CACjH,CAAC,EACD,CAAC,cAENrH,KAAA,SAAMyL,QAAQ,CAAEvC,MAAO,CAACxG,KAAK,CAAE,CAACQ,OAAO,CAAC,MAAM,CAAEwI,aAAa,CAAC,QAAQ,CAAEtI,GAAG,CAAC,EAAE,CAAE,CAAAZ,QAAA,eAC9ExC,KAAA,QAAAwC,QAAA,eACE1C,IAAA,UAAO4C,KAAK,CAAE,CAACQ,OAAO,CAAC,OAAO,CAAED,YAAY,CAAC,CAAC,CAAEI,QAAQ,CAAC,EAAE,CAAEE,UAAU,CAAC,GAAG,CAAEM,KAAK,CAAC,cAAc,CAAE,CAAArB,QAAA,CAAC,UAAQ,CAAO,CAAC,cACpH1C,IAAA,UACE6L,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,gBAAgB,CAC5BC,KAAK,CAAEtE,IAAK,CACZuE,QAAQ,CAAErH,CAAC,EAAE+C,OAAO,CAAC/C,CAAC,CAACE,MAAM,CAACkH,KAAK,CAAE,CACrCnJ,KAAK,CAAE,CAACwD,KAAK,CAAC,MAAM,CAAE,CACtB6F,YAAY,CAAC,UAAU,CACvBC,QAAQ,CAAE/D,OAAQ,CACnB,CAAC,EACC,CAAC,CAELZ,IAAI,GAAK,UAAU,eAClBrH,KAAA,QAAAwC,QAAA,eACE1C,IAAA,UAAO4C,KAAK,CAAE,CAACQ,OAAO,CAAC,OAAO,CAAED,YAAY,CAAC,CAAC,CAAEI,QAAQ,CAAC,EAAE,CAAEE,UAAU,CAAC,GAAG,CAAEM,KAAK,CAAC,cAAc,CAAE,CAAArB,QAAA,CAAC,OAAK,CAAO,CAAC,cACjH1C,IAAA,UACE6L,IAAI,CAAC,OAAO,CACZC,WAAW,CAAC,wBAAwB,CACpCC,KAAK,CAAElE,KAAM,CACbmE,QAAQ,CAAErH,CAAC,EAAEmD,QAAQ,CAACnD,CAAC,CAACE,MAAM,CAACkH,KAAK,CAAE,CACtCnJ,KAAK,CAAE,CAACwD,KAAK,CAAC,MAAM,CAAE,CACtB6F,YAAY,CAAC,OAAO,CACpBC,QAAQ,CAAE/D,OAAQ,CACnB,CAAC,EACC,CACN,cAEDjI,KAAA,QAAAwC,QAAA,eACE1C,IAAA,UAAO4C,KAAK,CAAE,CAACQ,OAAO,CAAC,OAAO,CAAED,YAAY,CAAC,CAAC,CAAEI,QAAQ,CAAC,EAAE,CAAEE,UAAU,CAAC,GAAG,CAAEM,KAAK,CAAC,cAAc,CAAE,CAAArB,QAAA,CAAC,UAAQ,CAAO,CAAC,cACpHxC,KAAA,QAAK0C,KAAK,CAAE,CAACwB,QAAQ,CAAC,UAAU,CAAE,CAAA1B,QAAA,eAChC1C,IAAA,UACE6L,IAAI,CAAE9D,QAAQ,CAAG,MAAM,CAAG,UAAW,CACrC+D,WAAW,CAAC,gBAAgB,CAC5BC,KAAK,CAAEpE,IAAK,CACZqE,QAAQ,CAAErH,CAAC,EAAEiD,OAAO,CAACjD,CAAC,CAACE,MAAM,CAACkH,KAAK,CAAE,CACrCnJ,KAAK,CAAE,CAACwD,KAAK,CAAC,MAAM,CAAE+F,YAAY,CAAC,EAAE,CAAE,CACvCF,YAAY,CAAE1E,IAAI,GAAK,OAAO,CAAG,kBAAkB,CAAG,cAAe,CACrE2E,QAAQ,CAAE/D,OAAQ,CACnB,CAAC,cACFnI,IAAA,WACE6L,IAAI,CAAC,QAAQ,CACb1G,OAAO,CAAEA,CAAA,GAAM6C,WAAW,CAAC,CAACD,QAAQ,CAAE,CACtCnF,KAAK,CAAE,CAACwB,QAAQ,CAAC,UAAU,CAAEgI,KAAK,CAAC,EAAE,CAAEC,GAAG,CAAC,KAAK,CAAEC,SAAS,CAAC,kBAAkB,CAAE5I,UAAU,CAAC,MAAM,CAAE4H,MAAM,CAAC,MAAM,CAAEiB,MAAM,CAAC,SAAS,CAAEhJ,QAAQ,CAAC,EAAE,CAAE,CAAAb,QAAA,CAEhJqF,QAAQ,CAAG,KAAK,CAAG,SAAS,CACvB,CAAC,EACN,CAAC,CACLR,IAAI,GAAK,UAAU,EAAII,IAAI,eAC1BzH,KAAA,QAAK0C,KAAK,CAAE,CAACoB,SAAS,CAAC,CAAC,CAAE,CAAAtB,QAAA,eACxBxC,KAAA,QAAK0C,KAAK,CAAE,CAACQ,OAAO,CAAC,MAAM,CAAEoJ,cAAc,CAAC,eAAe,CAAEnJ,UAAU,CAAC,QAAQ,CAAEF,YAAY,CAAC,CAAC,CAAE,CAAAT,QAAA,eAChG1C,IAAA,SAAM4C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEQ,KAAK,CAAC,cAAc,CAAE,CAAArB,QAAA,CAAC,oBAAkB,CAAM,CAAC,cAC3E1C,IAAA,SAAM4C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEE,UAAU,CAAC,GAAG,CAAEM,KAAK,CAAC+G,gBAAgB,CAAC,CAAC,CAAE,CAAApI,QAAA,CAAEqI,eAAe,CAAC,CAAC,CAAO,CAAC,EAC7F,CAAC,cACN/K,IAAA,QAAK4C,KAAK,CAAE,CAACuD,MAAM,CAAC,CAAC,CAAEzC,UAAU,CAAC,uBAAuB,CAAE2C,YAAY,CAAC,CAAC,CAAEoG,QAAQ,CAAC,QAAQ,CAAE,CAAA/J,QAAA,cAC5F1C,IAAA,QAAK4C,KAAK,CAAE,CAACuD,MAAM,CAAC,MAAM,CAAEC,KAAK,IAAAsD,MAAA,CAAKrB,QAAQ,CAAG,CAAC,CAAI,GAAG,KAAG,CAAE3E,UAAU,CAACoH,gBAAgB,CAAC,CAAC,CAAE4B,UAAU,CAAC,UAAU,CAAE,CAAM,CAAC,CACxH,CAAC,EACH,CACN,EACE,CAAC,CAELnF,IAAI,GAAK,OAAO,eACfrH,KAAA,UAAO0C,KAAK,CAAE,CAACQ,OAAO,CAAC,MAAM,CAAEC,UAAU,CAAC,QAAQ,CAAEC,GAAG,CAAC,CAAC,CAAEiJ,MAAM,CAAC,SAAS,CAAEI,UAAU,CAAC,MAAM,CAAE,CAAAjK,QAAA,eAC9F1C,IAAA,UACE6L,IAAI,CAAC,UAAU,CACfe,OAAO,CAAErE,UAAW,CACpByD,QAAQ,CAAErH,CAAC,EAAI6D,aAAa,CAAC7D,CAAC,CAACE,MAAM,CAAC+H,OAAO,CAAE,CAC/CV,QAAQ,CAAE/D,OAAQ,CACnB,CAAC,cACFnI,IAAA,SAAM4C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEQ,KAAK,CAAC,cAAc,CAAE,CAAArB,QAAA,CAAC,yBAAuB,CAAM,CAAC,EAC3E,CACR,CAEAuF,KAAK,eACJ/H,KAAA,QAAK0C,KAAK,CAAE,CAACyI,OAAO,CAAC,EAAE,CAAE3H,UAAU,CAAC,wBAAwB,CAAE4H,MAAM,CAAC,yBAAyB,CAAEjF,YAAY,CAAC,EAAE,CAAEtC,KAAK,CAAC,eAAe,CAAER,QAAQ,CAAC,EAAE,CAAEmI,SAAS,CAAC,QAAQ,CAAE,CAAAhJ,QAAA,EAAC,eACrK,CAACuF,KAAK,EACN,CACN,cAEDjI,IAAA,WACE6L,IAAI,CAAC,QAAQ,CACblJ,SAAS,CAAC,iBAAiB,CAC3BC,KAAK,CAAE,CAACwD,KAAK,CAAC,MAAM,CAAEiF,OAAO,CAAC,EAAE,CAAE9H,QAAQ,CAAC,EAAE,CAAE,CAC/C2I,QAAQ,CAAE/D,OAAQ,CAAAzF,QAAA,CAEjByF,OAAO,CAAG,iBAAiB,CAAGZ,IAAI,GAAK,OAAO,CAAG,YAAY,CAAG,kBAAkB,CAC7E,CAAC,cAETvH,IAAA,QAAK4C,KAAK,CAAE,CAAC8I,SAAS,CAAC,QAAQ,CAAE,CAAAhJ,QAAA,cAC/B1C,IAAA,WACE6L,IAAI,CAAC,QAAQ,CACb1G,OAAO,CAAEA,CAAA,GAAM,CAACqC,OAAO,CAACD,IAAI,GAAK,OAAO,CAAG,UAAU,CAAG,OAAO,CAAC,CAAEW,QAAQ,CAAC,EAAE,CAAC,EAAE,CAChFtF,KAAK,CAAE,CAACc,UAAU,CAAC,MAAM,CAAE4H,MAAM,CAAC,MAAM,CAAEvH,KAAK,CAAC,gBAAgB,CAAEwI,MAAM,CAAC,SAAS,CAAEhJ,QAAQ,CAAC,EAAE,CAAEE,UAAU,CAAC,GAAG,CAAE,CACjHyI,QAAQ,CAAE/D,OAAQ,CAAAzF,QAAA,CAEjB6E,IAAI,GAAK,OAAO,CAAG,gCAAgC,CAAG,kCAAkC,CACnF,CAAC,CACN,CAAC,EACF,CAAC,cAEPvH,IAAA,WACEmF,OAAO,CAAEA,CAAA,GAAMuD,gBAAgB,CAAC,KAAK,CAAE,CACvC9F,KAAK,CAAE,CAACwB,QAAQ,CAAC,UAAU,CAAEiI,GAAG,CAAC,EAAE,CAAED,KAAK,CAAC,EAAE,CAAE1I,UAAU,CAAC,iBAAiB,CAAE4H,MAAM,CAAC,+BAA+B,CAAEjF,YAAY,CAAC,KAAK,CAAED,KAAK,CAAC,EAAE,CAAED,MAAM,CAAC,EAAE,CAAE/C,OAAO,CAAC,MAAM,CAAE4H,UAAU,CAAC,QAAQ,CAAEuB,MAAM,CAAC,SAAS,CAAEhJ,QAAQ,CAAC,EAAE,CAAE,CAAAb,QAAA,CACnO,QAED,CAAQ,CAAC,EACN,CAAC,CACH,CACN,EACD,CAAC,CAEP,CAEA,QAAS,CAAAmK,SAASA,CAAAC,KAAA,CAAwB,IAAvB,CAACC,OAAO,CAAEC,WAAW,CAAC,CAAAF,KAAA,CACvC,KAAM,CAACvF,IAAI,CAAEC,OAAO,CAAC,CAAGlI,QAAQ,CAAC,OAAO,CAAC,CACzC,KAAM,CAACmI,IAAI,CAAEC,OAAO,CAAC,CAAGpI,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAACqI,IAAI,CAAEC,OAAO,CAAC,CAAGtI,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAACuI,KAAK,CAAEC,QAAQ,CAAC,CAAGxI,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACyI,QAAQ,CAAEC,WAAW,CAAC,CAAG1I,QAAQ,CAAC,KAAK,CAAC,CAC/C,KAAM,CAAC2I,KAAK,CAAEC,QAAQ,CAAC,CAAG5I,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAAC6I,OAAO,CAAEC,UAAU,CAAC,CAAG9I,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAAC+I,QAAQ,CAAEC,WAAW,CAAC,CAAGhJ,QAAQ,CAAC,CAAC,CAAC,CAE3CD,SAAS,CAAC,IAAM,CACd,GAAIkI,IAAI,GAAK,UAAU,EAAII,IAAI,CAAE,CAC/B,GAAI,CAAAqB,KAAK,CAAG,CAAC,CACb,GAAIrB,IAAI,CAACsB,MAAM,EAAI,CAAC,CAAED,KAAK,EAAE,CAC7B,GAAIrB,IAAI,CAACsB,MAAM,EAAI,EAAE,CAAED,KAAK,EAAE,CAC9B,GAAI,OAAO,CAACE,IAAI,CAACvB,IAAI,CAAC,EAAI,OAAO,CAACuB,IAAI,CAACvB,IAAI,CAAC,CAAEqB,KAAK,EAAE,CACrD,GAAI,OAAO,CAACE,IAAI,CAACvB,IAAI,CAAC,CAAEqB,KAAK,EAAE,CAC/B,GAAI,cAAc,CAACE,IAAI,CAACvB,IAAI,CAAC,CAAEqB,KAAK,EAAE,CACtCV,WAAW,CAACU,KAAK,CAAC,CACpB,CACF,CAAC,CAAE,CAACrB,IAAI,CAAEJ,IAAI,CAAC,CAAC,CAEhB,KAAM,CAAA4B,aAAa,CAAItB,KAAK,EAAK,CAC/B,MAAO,6BAA4B,CAACqB,IAAI,CAACrB,KAAK,CAAC,CACjD,CAAC,CAED,KAAM,CAAAuB,MAAM,CAAG,KAAO,CAAAzE,CAAC,EAAK,CAC1BA,CAAC,SAADA,CAAC,iBAADA,CAAC,CAAE0E,cAAc,CAAC,CAAC,CACnBnB,QAAQ,CAAC,EAAE,CAAC,CAEZ,GAAI,CAACT,IAAI,EAAIA,IAAI,CAACwB,MAAM,CAAG,CAAC,CAAE,CAC5Bf,QAAQ,CAAC,wCAAwC,CAAC,CAClD,OACF,CACA,GAAI,CAACP,IAAI,EAAIA,IAAI,CAACsB,MAAM,CAAG,CAAC,CAAE,CAC5Bf,QAAQ,CAAC,wCAAwC,CAAC,CAClD,OACF,CACA,GAAIX,IAAI,GAAK,UAAU,CAAE,CACvB,GAAI,CAACM,KAAK,EAAI,CAACsB,aAAa,CAACtB,KAAK,CAAC,CAAE,CACnCK,QAAQ,CAAC,oCAAoC,CAAC,CAC9C,OACF,CACA,GAAIG,QAAQ,CAAG,CAAC,CAAE,CAChBH,QAAQ,CAAC,iEAAiE,CAAC,CAC3E,OACF,CACF,CAEAE,UAAU,CAAC,IAAI,CAAC,CAChB,GAAG,CACD,KAAM,CAAAkB,OAAO,CAAG/B,IAAI,GAAK,UAAU,CAC/B,CAACF,QAAQ,CAAEI,IAAI,CAAE8B,QAAQ,CAAE5B,IAAI,CAAEE,KAAK,CAAEA,KAAK,CAAC,CAC9C,CAACR,QAAQ,CAAEI,IAAI,CAAE8B,QAAQ,CAAE5B,IAAI,CAAC,CAEpC,KAAM,CAAA6B,CAAC,CAAG,KAAM,CAAAC,KAAK,IAAAC,MAAA,CAAIrJ,GAAG,WAAAqJ,MAAA,CAASnC,IAAI,EAAI,CAC3CoC,MAAM,CAAC,MAAM,CACbC,OAAO,CAAC,CAAC,cAAc,CAAC,kBAAkB,CAAC,CAC3CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACT,OAAO,CAC9B,CAAC,CAAC,CACF,KAAM,CAAAlE,CAAC,CAAG,KAAM,CAAAoE,CAAC,CAACQ,IAAI,CAAC,CAAC,CACxB,GAAI,CAACR,CAAC,CAACS,EAAE,CAAE,KAAM,IAAI,CAAAC,KAAK,CAAC9E,CAAC,CAAC+E,MAAM,EAAI,uBAAuB,CAAC,CAE/DvB,YAAY,CAACyB,OAAO,CAAC,YAAY,CAAEjF,CAAC,CAAC+B,KAAK,CAAC,CAC3CyB,YAAY,CAACyB,OAAO,CAAC,WAAW,CAAEjF,CAAC,CAACiC,QAAQ,CAAC,CAC7CuB,YAAY,CAACyB,OAAO,CAAC,iBAAiB,CAAEC,IAAI,CAACC,GAAG,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAAC,CAE9DuC,OAAO,CAAC3H,CAAC,CAAC+B,KAAK,CAAE/B,CAAC,CAACiC,QAAQ,CAAC,CAC9B,CAAC,MAAM1C,CAAC,CAAC,CACPuD,QAAQ,CAACvD,CAAC,CAAC8F,OAAO,CAAC,CACrB,CAAC,OAAS,CACRrC,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,KAAM,CAAA0C,gBAAgB,CAAGA,CAAA,GAAM,CAC7B,GAAIzC,QAAQ,EAAI,CAAC,CAAE,MAAO,SAAS,CACnC,GAAIA,QAAQ,EAAI,CAAC,CAAE,MAAO,SAAS,CACnC,MAAO,SAAS,CAClB,CAAC,CAED,KAAM,CAAA0C,eAAe,CAAGA,CAAA,GAAM,CAC5B,GAAI1C,QAAQ,EAAI,CAAC,CAAE,MAAO,MAAM,CAChC,GAAIA,QAAQ,EAAI,CAAC,CAAE,MAAO,QAAQ,CAClC,MAAO,QAAQ,CACjB,CAAC,CAED,mBACEnI,KAAA,QAAK0C,KAAK,CAAE,CAACqK,SAAS,CAAC,OAAO,CAAE7J,OAAO,CAAC,MAAM,CAAEC,UAAU,CAAC,QAAQ,CAAEmJ,cAAc,CAAC,QAAQ,CAAEnB,OAAO,CAAC,EAAE,CAAEjH,QAAQ,CAAC,UAAU,CAAEqI,QAAQ,CAAC,QAAQ,CAAE,CAAA/J,QAAA,eAEhJ1C,IAAA,QAAK4C,KAAK,CAAE,CAACwB,QAAQ,CAAC,UAAU,CAAEiI,GAAG,CAAC,MAAM,CAAEa,IAAI,CAAC,KAAK,CAAE9G,KAAK,CAAC,OAAO,CAAED,MAAM,CAAC,OAAO,CAAEzC,UAAU,CAAC,uEAAuE,CAAEF,MAAM,CAAC,YAAY,CAAE2J,SAAS,CAAC,+BAA+B,CAAE,CAAM,CAAC,cACpPnN,IAAA,QAAK4C,KAAK,CAAE,CAACwB,QAAQ,CAAC,UAAU,CAAEgJ,MAAM,CAAC,MAAM,CAAEhB,KAAK,CAAC,KAAK,CAAEhG,KAAK,CAAC,OAAO,CAAED,MAAM,CAAC,OAAO,CAAEzC,UAAU,CAAC,sEAAsE,CAAEF,MAAM,CAAC,YAAY,CAAE2J,SAAS,CAAC,wCAAwC,CAAE,CAAM,CAAC,cAEhQjN,KAAA,QAAK0C,KAAK,CAAE,CAAC2I,QAAQ,CAAC,GAAG,CAAEnF,KAAK,CAAC,MAAM,CAAEhC,QAAQ,CAAC,UAAU,CAAEgH,MAAM,CAAC,CAAC,CAAE,CAAA1I,QAAA,eAEtExC,KAAA,QAAK0C,KAAK,CAAE,CAAC8I,SAAS,CAAC,QAAQ,CAAEvI,YAAY,CAAC,EAAE,CAAE,CAAAT,QAAA,eAChD1C,IAAA,QACEqN,GAAG,CAAC,gBAAgB,CACpBC,GAAG,CAAC,WAAW,CACf1K,KAAK,CAAE,CAACwD,KAAK,CAAC,GAAG,CAAED,MAAM,CAAC,GAAG,CAAEoH,MAAM,CAAC,aAAa,CAAE/J,MAAM,CAAC,yCAAyC,CAAEgK,SAAS,CAAC,SAAS,CAAEnH,YAAY,CAAC,EAAE,CAAE,CAC7IoH,OAAO,CAAG9I,CAAC,EAAK,CACdA,CAAC,CAACE,MAAM,CAACjC,KAAK,CAACQ,OAAO,CAAG,MAAM,CACjC,CAAE,CACH,CAAC,cACFpD,IAAA,OAAI4C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEE,UAAU,CAAC,GAAG,CAAEN,YAAY,CAAC,EAAE,CAAEO,UAAU,CAAC,mDAAmD,CAAEC,oBAAoB,CAAC,MAAM,CAAEC,mBAAmB,CAAC,aAAa,CAAEE,aAAa,CAAC,MAAM,CAAE,CAAApB,QAAA,CAAC,iBAEjN,CAAI,CAAC,cACL1C,IAAA,MAAG4C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEQ,KAAK,CAAC,cAAc,CAAEZ,YAAY,CAAC,CAAC,CAAE,CAAAT,QAAA,CAAC,sCAAoC,CAAG,CAAC,cACvG1C,IAAA,MAAG4C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEQ,KAAK,CAAC,cAAc,CAAE,CAAArB,QAAA,CAC3CsK,WAAW,CAAG,yBAAyB,CAAG,iDAAiD,CAC3F,CAAC,EACD,CAAC,cAGN9M,KAAA,QAAK0C,KAAK,CAAE,CAACc,UAAU,CAAC,iBAAiB,CAAEyH,cAAc,CAAC,YAAY,CAAEG,MAAM,CAAC,+BAA+B,CAAEjF,YAAY,CAAC,EAAE,CAAEgF,OAAO,CAAC,EAAE,CAAEG,SAAS,CAAC,oBAAoB,CAAEkC,OAAO,CAAEV,WAAW,CAAG,GAAG,CAAG,CAAC,CAAEW,aAAa,CAAEX,WAAW,CAAG,MAAM,CAAG,MAAM,CAAEN,UAAU,CAAC,cAAc,CAAE,CAAAhK,QAAA,eACpRxC,KAAA,QAAK0C,KAAK,CAAE,CAAC8I,SAAS,CAAC,QAAQ,CAAEvI,YAAY,CAAC,EAAE,CAAE,CAAAT,QAAA,eAChD1C,IAAA,OAAI4C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEE,UAAU,CAAC,GAAG,CAAEN,YAAY,CAAC,CAAC,CAAE,CAAAT,QAAA,CACtDsK,WAAW,CAAG,cAAc,CAAGzF,IAAI,GAAK,OAAO,CAAG,YAAY,CAAG,kBAAkB,CAClF,CAAC,cACLvH,IAAA,MAAG4C,KAAK,CAAE,CAACmB,KAAK,CAAC,cAAc,CAAER,QAAQ,CAAC,EAAE,CAAE,CAAAb,QAAA,CAC3CsK,WAAW,CAAG,gBAAgB,CAAGzF,IAAI,GAAK,OAAO,CAAG,4CAA4C,CAAG,+BAA+B,CAClI,CAAC,EACD,CAAC,cAENrH,KAAA,SAAMyL,QAAQ,CAAEvC,MAAO,CAACxG,KAAK,CAAE,CAACQ,OAAO,CAAC,MAAM,CAAEwI,aAAa,CAAC,QAAQ,CAAEtI,GAAG,CAAC,EAAE,CAAE,CAAAZ,QAAA,eAC9ExC,KAAA,QAAAwC,QAAA,eACE1C,IAAA,UAAO4C,KAAK,CAAE,CAACQ,OAAO,CAAC,OAAO,CAAED,YAAY,CAAC,CAAC,CAAEI,QAAQ,CAAC,EAAE,CAAEE,UAAU,CAAC,GAAG,CAAEM,KAAK,CAAC,cAAc,CAAE,CAAArB,QAAA,CAAC,UAAQ,CAAO,CAAC,cACpH1C,IAAA,UACE6L,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,gBAAgB,CAC5BC,KAAK,CAAEtE,IAAK,CACZuE,QAAQ,CAAErH,CAAC,EAAE+C,OAAO,CAAC/C,CAAC,CAACE,MAAM,CAACkH,KAAK,CAAE,CACrCnJ,KAAK,CAAE,CAACwD,KAAK,CAAC,MAAM,CAAE,CACtB6F,YAAY,CAAC,UAAU,CACvBC,QAAQ,CAAE/D,OAAQ,CAClByF,QAAQ,MACT,CAAC,EACC,CAAC,CAELrG,IAAI,GAAK,UAAU,eAClBrH,KAAA,QAAAwC,QAAA,eACE1C,IAAA,UAAO4C,KAAK,CAAE,CAACQ,OAAO,CAAC,OAAO,CAAED,YAAY,CAAC,CAAC,CAAEI,QAAQ,CAAC,EAAE,CAAEE,UAAU,CAAC,GAAG,CAAEM,KAAK,CAAC,cAAc,CAAE,CAAArB,QAAA,CAAC,OAAK,CAAO,CAAC,cACjH1C,IAAA,UACE6L,IAAI,CAAC,OAAO,CACZC,WAAW,CAAC,wBAAwB,CACpCC,KAAK,CAAElE,KAAM,CACbmE,QAAQ,CAAErH,CAAC,EAAEmD,QAAQ,CAACnD,CAAC,CAACE,MAAM,CAACkH,KAAK,CAAE,CACtCnJ,KAAK,CAAE,CAACwD,KAAK,CAAC,MAAM,CAAE,CACtB6F,YAAY,CAAC,OAAO,CACpBC,QAAQ,CAAE/D,OAAQ,CAClByF,QAAQ,MACT,CAAC,EACC,CACN,cAED1N,KAAA,QAAAwC,QAAA,eACE1C,IAAA,UAAO4C,KAAK,CAAE,CAACQ,OAAO,CAAC,OAAO,CAAED,YAAY,CAAC,CAAC,CAAEI,QAAQ,CAAC,EAAE,CAAEE,UAAU,CAAC,GAAG,CAAEM,KAAK,CAAC,cAAc,CAAE,CAAArB,QAAA,CAAC,UAAQ,CAAO,CAAC,cACpHxC,KAAA,QAAK0C,KAAK,CAAE,CAACwB,QAAQ,CAAC,UAAU,CAAE,CAAA1B,QAAA,eAChC1C,IAAA,UACE6L,IAAI,CAAE9D,QAAQ,CAAG,MAAM,CAAG,UAAW,CACrC+D,WAAW,CAAC,gBAAgB,CAC5BC,KAAK,CAAEpE,IAAK,CACZqE,QAAQ,CAAErH,CAAC,EAAEiD,OAAO,CAACjD,CAAC,CAACE,MAAM,CAACkH,KAAK,CAAE,CACrCnJ,KAAK,CAAE,CAACwD,KAAK,CAAC,MAAM,CAAE+F,YAAY,CAAC,EAAE,CAAE,CACvCF,YAAY,CAAE1E,IAAI,GAAK,OAAO,CAAG,kBAAkB,CAAG,cAAe,CACrE2E,QAAQ,CAAE/D,OAAQ,CAClByF,QAAQ,MACT,CAAC,cACF5N,IAAA,WACE6L,IAAI,CAAC,QAAQ,CACb1G,OAAO,CAAEA,CAAA,GAAM6C,WAAW,CAAC,CAACD,QAAQ,CAAE,CACtCnF,KAAK,CAAE,CAACwB,QAAQ,CAAC,UAAU,CAAEgI,KAAK,CAAC,EAAE,CAAEC,GAAG,CAAC,KAAK,CAAEC,SAAS,CAAC,kBAAkB,CAAE5I,UAAU,CAAC,MAAM,CAAE4H,MAAM,CAAC,MAAM,CAAEiB,MAAM,CAAC,SAAS,CAAEhJ,QAAQ,CAAC,EAAE,CAAE,CAAAb,QAAA,CAEhJqF,QAAQ,CAAG,KAAK,CAAG,SAAS,CACvB,CAAC,EACN,CAAC,CACLR,IAAI,GAAK,UAAU,EAAII,IAAI,eAC1BzH,KAAA,QAAK0C,KAAK,CAAE,CAACoB,SAAS,CAAC,CAAC,CAAE,CAAAtB,QAAA,eACxBxC,KAAA,QAAK0C,KAAK,CAAE,CAACQ,OAAO,CAAC,MAAM,CAAEoJ,cAAc,CAAC,eAAe,CAAEnJ,UAAU,CAAC,QAAQ,CAAEF,YAAY,CAAC,CAAC,CAAE,CAAAT,QAAA,eAChG1C,IAAA,SAAM4C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEQ,KAAK,CAAC,cAAc,CAAE,CAAArB,QAAA,CAAC,oBAAkB,CAAM,CAAC,cAC3E1C,IAAA,SAAM4C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEE,UAAU,CAAC,GAAG,CAAEM,KAAK,CAAC+G,gBAAgB,CAAC,CAAC,CAAE,CAAApI,QAAA,CAAEqI,eAAe,CAAC,CAAC,CAAO,CAAC,EAC7F,CAAC,cACN/K,IAAA,QAAK4C,KAAK,CAAE,CAACuD,MAAM,CAAC,CAAC,CAAEzC,UAAU,CAAC,uBAAuB,CAAE2C,YAAY,CAAC,CAAC,CAAEoG,QAAQ,CAAC,QAAQ,CAAE,CAAA/J,QAAA,cAC5F1C,IAAA,QAAK4C,KAAK,CAAE,CAACuD,MAAM,CAAC,MAAM,CAAEC,KAAK,IAAAsD,MAAA,CAAKrB,QAAQ,CAAG,CAAC,CAAI,GAAG,KAAG,CAAE3E,UAAU,CAACoH,gBAAgB,CAAC,CAAC,CAAE4B,UAAU,CAAC,UAAU,CAAE,CAAM,CAAC,CACxH,CAAC,EACH,CACN,EACE,CAAC,CAELzE,KAAK,eACJ/H,KAAA,QAAK0C,KAAK,CAAE,CAACyI,OAAO,CAAC,EAAE,CAAE3H,UAAU,CAAC,wBAAwB,CAAE4H,MAAM,CAAC,yBAAyB,CAAEjF,YAAY,CAAC,EAAE,CAAEtC,KAAK,CAAC,eAAe,CAAER,QAAQ,CAAC,EAAE,CAAEmI,SAAS,CAAC,QAAQ,CAAE,CAAAhJ,QAAA,EAAC,eACrK,CAACuF,KAAK,EACN,CACN,cAEDjI,IAAA,WACE6L,IAAI,CAAC,QAAQ,CACblJ,SAAS,CAAC,iBAAiB,CAC3BC,KAAK,CAAE,CAACwD,KAAK,CAAC,MAAM,CAAEiF,OAAO,CAAC,EAAE,CAAE9H,QAAQ,CAAC,EAAE,CAAE,CAC/C2I,QAAQ,CAAE/D,OAAQ,CAAAzF,QAAA,CAEjByF,OAAO,CAAG,iBAAiB,CAAGZ,IAAI,GAAK,OAAO,CAAG,YAAY,CAAG,kBAAkB,CAC7E,CAAC,cAETvH,IAAA,QAAK4C,KAAK,CAAE,CAAC8I,SAAS,CAAC,QAAQ,CAAE,CAAAhJ,QAAA,cAC/B1C,IAAA,WACE6L,IAAI,CAAC,QAAQ,CACb1G,OAAO,CAAEA,CAAA,GAAM,CAACqC,OAAO,CAACD,IAAI,GAAK,OAAO,CAAG,UAAU,CAAG,OAAO,CAAC,CAAEW,QAAQ,CAAC,EAAE,CAAC,EAAE,CAChFtF,KAAK,CAAE,CAACc,UAAU,CAAC,MAAM,CAAE4H,MAAM,CAAC,MAAM,CAAEvH,KAAK,CAAC,gBAAgB,CAAEwI,MAAM,CAAC,SAAS,CAAEhJ,QAAQ,CAAC,EAAE,CAAEE,UAAU,CAAC,GAAG,CAAE,CACjHyI,QAAQ,CAAE/D,OAAQ,CAAAzF,QAAA,CAEjB6E,IAAI,GAAK,OAAO,CAAG,gCAAgC,CAAG,kCAAkC,CACnF,CAAC,CACN,CAAC,EACF,CAAC,EACJ,CAAC,cAGNrH,KAAA,QAAK0C,KAAK,CAAE,CAACoB,SAAS,CAAC,EAAE,CAAE0H,SAAS,CAAC,QAAQ,CAAE3H,KAAK,CAAC,cAAc,CAAER,QAAQ,CAAC,EAAE,CAAE,CAAAb,QAAA,eAChF1C,IAAA,MAAG4C,KAAK,CAAE,CAACO,YAAY,CAAC,EAAE,CAAE,CAAAT,QAAA,CAAC,yCAAkC,CAAG,CAAC,cACnE1C,IAAA,MAAG4C,KAAK,CAAE,CAACO,YAAY,CAAC,EAAE,CAAE,CAAAT,QAAA,CAAC,+CAA8B,CAAG,CAAC,cAC/D1C,IAAA,MAAA0C,QAAA,CAAG,qCAAyB,CAAG,CAAC,EAC7B,CAAC,EACH,CAAC,cAEN1C,IAAA,UAAA0C,QAAA,2KAKS,CAAC,EACP,CAAC,CAEV,CAEA,cAAe,SAAS,CAAAmL,GAAGA,CAAA,CAAE,CAC3B;AACA,KAAM,CAAC1G,KAAK,CAAEC,QAAQ,CAAC,CAAG9H,QAAQ,CAAC,IAAMsJ,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC,CAAC,CAC5E,KAAM,CAACxB,QAAQ,CAAEC,WAAW,CAAC,CAAGhI,QAAQ,CAAC,IAAMsJ,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC,CAAC,CACjF,KAAM,CAACiF,eAAe,CAAEnD,kBAAkB,CAAC,CAAGrL,QAAQ,CAAC,KAAK,CAAC,CAC7D,KAAM,CAAC0N,WAAW,CAAEe,cAAc,CAAC,CAAGzO,QAAQ,CAAC,IAAI,CAAC,CAEpD,KAAM,CAACsG,MAAM,CAAEC,SAAS,CAAC,CAAGvG,QAAQ,CAAC,CAAC,CAAC,OAAO,CAAE,QAAQ,CAAC,CAAC,CAC1D,KAAM,CAACwG,IAAI,CAAEC,OAAO,CAAC,CAAGzG,QAAQ,CAAC,CAAC,CAAC,OAAO,CAAE,QAAQ,CAAC,CAAC,CACtD,KAAM,CAAC0G,KAAK,CAAEgI,QAAQ,CAAC,CAAG1O,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAAC2O,KAAK,CAAEC,QAAQ,CAAC,CAAG5O,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAAC6O,MAAM,CAAEC,SAAS,CAAC,CAAG9O,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAAC+O,YAAY,CAAEC,eAAe,CAAC,CAAGhP,QAAQ,CAAC,IAAI,CAAC,CACtD,KAAM,CAACiP,UAAU,CAAEC,aAAa,CAAC,CAAGlP,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAACmP,MAAM,CAAEC,SAAS,CAAC,CAAGpP,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACqP,IAAI,CAAEC,OAAO,CAAC,CAAGtP,QAAQ,CAAC,CAAC,CAAC,CAAC,CACpC,KAAM,CAACuP,IAAI,CAAEC,OAAO,CAAC,CAAGxP,QAAQ,CAAC,MAAM,CAAC,CAExC,KAAM,CAACyP,KAAK,CAAEC,QAAQ,CAAC,CAAG1P,QAAQ,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAC1D,KAAM,CAAC2P,QAAQ,CAAEC,WAAW,CAAC,CAAG5P,QAAQ,CAAC,SAAS,CAAC,CACnD,KAAM,CAAC6P,SAAS,CAAEC,YAAY,CAAC,CAAG9P,QAAQ,CAAC,GAAG,CAAC,CAC/C,KAAM,CAAC+P,WAAW,CAAEC,cAAc,CAAC,CAAGhQ,QAAQ,CAAC,KAAK,CAAC,CACrD,KAAM,CAACiQ,MAAM,CAAEC,SAAS,CAAC,CAAGlQ,QAAQ,CAAC,KAAK,CAAC,CAC3C,KAAM,CAACmQ,QAAQ,CAAEC,WAAW,CAAC,CAAGpQ,QAAQ,CAAC,QAAQ,CAAC,CAClD,KAAM,CAACqQ,SAAS,CAAEC,YAAY,CAAC,CAAGtQ,QAAQ,CAAC,KAAK,CAAC,CAEjD,KAAM,CAACuQ,OAAO,CAAEC,UAAU,CAAC,CAAGxQ,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACyQ,cAAc,CAAEC,iBAAiB,CAAC,CAAG1Q,QAAQ,CAAC,EAAE,CAAC,CACxD,KAAM,CAAC2Q,MAAM,CAAEC,SAAS,CAAC,CAAG5Q,QAAQ,CAAC,IAAI,CAAC,CAC1C,KAAM,CAAC6Q,QAAQ,CAAEC,WAAW,CAAC,CAAG9Q,QAAQ,CAAC,KAAK,CAAC,CAC/C,KAAM,CAAC+Q,MAAM,CAAEC,SAAS,CAAC,CAAGhR,QAAQ,CAAC,EAAE,CAAC,CAExC,KAAM,CAACiR,OAAO,CAAEC,UAAU,CAAC,CAAGlR,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACmR,SAAS,CAAEC,YAAY,CAAC,CAAGpR,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAACqR,YAAY,CAAEC,eAAe,CAAC,CAAGtR,QAAQ,CAAC,CAAC,CAAC,CACnD,KAAM,CAACuR,aAAa,CAAEC,gBAAgB,CAAC,CAAGxR,QAAQ,CAAC,EAAE,CAAC,CAEtD;AACA,KAAM,CAACyR,YAAY,CAAEC,eAAe,CAAC,CAAG1R,QAAQ,CAAC,EAAE,CAAC,CACpD,KAAM,CAAC2R,UAAU,CAAEC,aAAa,CAAC,CAAG5R,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAAC6R,UAAU,CAAEC,aAAa,CAAC,CAAG9R,QAAQ,CAAC,cAAc,CAAC,CAC5D,KAAM,CAAC+R,QAAQ,CAAEC,WAAW,CAAC,CAAGhS,QAAQ,CAAC,kBAAkB,CAAC,CAC5D,KAAM,CAACiS,aAAa,CAAEC,gBAAgB,CAAC,CAAGlS,QAAQ,CAAC,EAAE,CAAC,CACtD,KAAM,CAACmS,YAAY,CAAEC,eAAe,CAAC,CAAGpS,QAAQ,CAAC,IAAI,CAAC,CAEtD,KAAM,CAAAqS,IAAI,CAAG7Q,YAAY,CAACmP,MAAM,CAAC,EAAInP,YAAY,CAACC,EAAE,CACpD,KAAM,CAAA6Q,eAAe,CAAGC,MAAM,CAAC,CAACxB,MAAM,EAAIlO,cAAc,CAACgO,QAAQ,CAAC,EAAI,CAAC,CAAC,EAAE2B,OAAO,CAAC,CAAC,CAAC,CAAC,CAErF;AACAzS,SAAS,CAAC,IAAM,CACd,GAAI,CAAA0S,OAAO,CAAG,IAAI,CAElB,KAAM,CAAAC,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,KAAM,CAAAC,UAAU,CAAGrJ,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC,CACrD,KAAM,CAAAqJ,SAAS,CAAGtJ,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC,CAEnD,GAAIoJ,UAAU,EAAIC,SAAS,CAAE,CAC3B,GAAI,CACF;AACA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAA1I,KAAK,IAAAC,MAAA,CAAIrJ,GAAG,iBAAgB,CACjDsJ,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClC,eAAe,WAAAF,MAAA,CAAYuI,UAAU,CACvC,CACF,CAAC,CAAC,CAEF,GAAI,CAACF,OAAO,CAAE,OAEd,GAAII,QAAQ,CAAClI,EAAE,CAAE,CACf;AACA7C,QAAQ,CAAC6K,UAAU,CAAC,CACpB3K,WAAW,CAAC4K,SAAS,CAAC,CACtBvH,kBAAkB,CAAC,IAAI,CAAC,CAC1B,CAAC,IAAM,CACL;AACA/B,YAAY,CAACgC,UAAU,CAAC,YAAY,CAAC,CACrChC,YAAY,CAACgC,UAAU,CAAC,WAAW,CAAC,CACpChC,YAAY,CAACgC,UAAU,CAAC,iBAAiB,CAAC,CAC1CxD,QAAQ,CAAC,IAAI,CAAC,CACdE,WAAW,CAAC,IAAI,CAAC,CACjBqD,kBAAkB,CAAC,KAAK,CAAC,CAC3B,CACF,CAAE,MAAO1C,KAAK,CAAE,CACd;AACA,GAAI,CAAC8J,OAAO,CAAE,OACdK,OAAO,CAACnK,KAAK,CAAC,8BAA8B,CAAEA,KAAK,CAAC,CACpDW,YAAY,CAACgC,UAAU,CAAC,YAAY,CAAC,CACrChC,YAAY,CAACgC,UAAU,CAAC,WAAW,CAAC,CACpChC,YAAY,CAACgC,UAAU,CAAC,iBAAiB,CAAC,CAC1CxD,QAAQ,CAAC,IAAI,CAAC,CACdE,WAAW,CAAC,IAAI,CAAC,CACjBqD,kBAAkB,CAAC,KAAK,CAAC,CAC3B,CACF,CAEA,GAAIoH,OAAO,CAAE,CACXhE,cAAc,CAAC,KAAK,CAAC,CACvB,CACF,CAAC,CAEDiE,aAAa,CAAC,CAAC,CAEf,MAAO,IAAM,CACXD,OAAO,CAAG,KAAK,CACjB,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN;AACA1S,SAAS,CAAC,IAAM,CACdoK,KAAK,IAAAC,MAAA,CAAIrJ,GAAG,uBAAAqJ,MAAA,CAAqB9D,MAAM,CAAC,CAAC,CAAC,UAAA8D,MAAA,CAAQ9D,MAAM,CAAC,CAAC,CAAC,eAAa,CAAC,CACtEyM,IAAI,CAAC7I,CAAC,EAAEA,CAAC,CAACQ,IAAI,CAAC,CAAC,CAAC,CAACqI,IAAI,CAACjN,CAAC,EAAE4I,QAAQ,CAAC5I,CAAC,CAACY,KAAK,EAAE,EAAE,CAAC,CAAC,CAACsM,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CACjE7I,KAAK,IAAAC,MAAA,CAAIrJ,GAAG,WAAS,CAAC,CACnBgS,IAAI,CAAC7I,CAAC,EAAEA,CAAC,CAACQ,IAAI,CAAC,CAAC,CAAC,CAACqI,IAAI,CAACjN,CAAC,EAAGsJ,SAAS,CAAC,CAAC,IAAItJ,CAAC,CAACqJ,MAAM,EAAE,EAAE,CAAC,CAAE,IAAIrJ,CAAC,CAACmN,OAAO,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAACD,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAC/F7I,KAAK,IAAAC,MAAA,CAAIrJ,GAAG,wBAAAqJ,MAAA,CAAsB9D,MAAM,CAAC,CAAC,CAAC,UAAA8D,MAAA,CAAQ9D,MAAM,CAAC,CAAC,CAAC,CAAE,CAAC,CAC5DyM,IAAI,CAAC7I,CAAC,EAAEA,CAAC,CAACQ,IAAI,CAAC,CAAC,CAAC,CAACqI,IAAI,CAACjN,CAAC,EAAE0K,UAAU,CAAC1K,CAAC,CAACoN,QAAQ,EAAE,IAAI,CAAC,CAAC,CAACF,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CACxE7I,KAAK,IAAAC,MAAA,CAAIrJ,GAAG,oBAAkB,CAAC,CAC5BgS,IAAI,CAAC7I,CAAC,EAAEA,CAAC,CAACQ,IAAI,CAAC,CAAC,CAAC,CAACqI,IAAI,CAACjN,CAAC,EAAE4K,iBAAiB,CAAC5K,CAAC,CAACqN,QAAQ,EAAE,EAAE,CAAC,CAAC,CAACH,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAC7E7I,KAAK,IAAAC,MAAA,CAAIrJ,GAAG,YAAU,CAAC,CACpBgS,IAAI,CAAC7I,CAAC,EAAEA,CAAC,CAACQ,IAAI,CAAC,CAAC,CAAC,CAACqI,IAAI,CAACjN,CAAC,EAAEoL,UAAU,CAACpL,CAAC,CAACmL,OAAO,EAAE,EAAE,CAAC,CAAC,CAAC+B,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CACvE,CAAC,CAAE,EAAE,CAAC,CAEN;AACAjT,SAAS,CAAC,IAAM,CACd,KAAM,CAAAqT,SAAS,CAAGC,UAAU,CAAC,IAAM,CACjClJ,KAAK,IAAAC,MAAA,CAAIrJ,GAAG,uBAAAqJ,MAAA,CAAqB9D,MAAM,CAAC,CAAC,CAAC,UAAA8D,MAAA,CAAQ9D,MAAM,CAAC,CAAC,CAAC,eAAa,CAAC,CACtEyM,IAAI,CAAC7I,CAAC,EAAEA,CAAC,CAACQ,IAAI,CAAC,CAAC,CAAC,CAACqI,IAAI,CAACjN,CAAC,EAAE4I,QAAQ,CAAC5I,CAAC,CAACY,KAAK,EAAE,EAAE,CAAC,CAAC,CAACsM,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CACjE7I,KAAK,IAAAC,MAAA,CAAIrJ,GAAG,wBAAAqJ,MAAA,CAAsB9D,MAAM,CAAC,CAAC,CAAC,UAAA8D,MAAA,CAAQ9D,MAAM,CAAC,CAAC,CAAC,CAAE,CAAC,CAC5DyM,IAAI,CAAC7I,CAAC,EAAEA,CAAC,CAACQ,IAAI,CAAC,CAAC,CAAC,CAACqI,IAAI,CAACjN,CAAC,EAAE0K,UAAU,CAAC1K,CAAC,CAACoN,QAAQ,EAAE,IAAI,CAAC,CAAC,CAACF,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAC1E,CAAC,CAAE,GAAG,CAAC,CAEP,MAAO,IAAMM,YAAY,CAACF,SAAS,CAAC,CACtC,CAAC,CAAE,CAAC9M,MAAM,CAAC,CAAC,CAEZ,KAAM,CAAAiN,cAAc,CAAG,KAAO,CAAAnM,IAAI,EAAK,CACrC4H,eAAe,CAAC5H,IAAI,CAAC,CACrB,KAAM,CAAA8C,CAAC,CAAG,KAAM,CAAAC,KAAK,IAAAC,MAAA,CAAIrJ,GAAG,yBAAAqJ,MAAA,CAAuBhD,IAAI,CAACM,OAAO,CAAE,CAAC,CAClE,KAAM,CAAA8L,IAAI,CAAG,KAAM,CAAAtJ,CAAC,CAACQ,IAAI,CAAC,CAAC,CAC3BwE,aAAa,CAACsE,IAAI,CAACvE,UAAU,EAAI,EAAE,CAAC,CACtC,CAAC,CAED,KAAM,CAAAwE,IAAI,CAAG,KAAAA,CAAA,GAAY,KAAAC,UAAA,CACvB,KAAM,CAAA1J,OAAO,CAAG,CACd1D,MAAM,CAAEqN,WAAW,CAAEnN,IAAI,CACzBoN,SAAS,CAAEzD,QAAQ,GAAK,QAAQ,CAAGE,SAAS,CAAG,KAAK,CACpDwD,SAAS,CAAE1D,QAAQ,GAAK,QAAQ,CAAGE,SAAS,CAAG,IAAI,CACnDV,QAAQ,CAAEmE,WAAW,CAAEC,UAAU,CAAClE,SAAS,CAAC,CAC5CmE,YAAY,CAAEjE,WAAW,CAAEkE,OAAO,CAAEhE,MAAM,CAAER,KAC9C,CAAC,CACD,KAAM,CAAAvF,CAAC,CAAG,KAAM,CAAAC,KAAK,IAAAC,MAAA,CAAIrJ,GAAG,UAAS,CAAEsJ,MAAM,CAAC,MAAM,CAAEC,OAAO,CAAC,CAAC,cAAc,CAAC,kBAAkB,CAAC,CAAEC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACT,OAAO,CAAE,CAAC,CAAC,CACnI,KAAM,CAAAlE,CAAC,CAAG,KAAM,CAAAoE,CAAC,CAACQ,IAAI,CAAC,CAAC,CACxBkE,QAAQ,CAAC9I,CAAC,CAACoO,WAAW,EAAI,EAAE,CAAC,CAC7BpF,SAAS,CAAC,EAAA4E,UAAA,CAAA5N,CAAC,CAACqO,OAAO,UAAAT,UAAA,iBAATA,UAAA,CAAWU,YAAY,GAAI,EAAE,CAAC,CACxC9E,OAAO,CAAC,CAAC,CAAC,CAAC,CACb,CAAC,CAED,KAAM,CAAA/M,SAAS,CAAG,KAAO,CAAA8R,SAAS,EAAK,CACrC,KAAM,CAAAnK,CAAC,CAAG,KAAM,CAAAC,KAAK,IAAAC,MAAA,CAAIrJ,GAAG,sBAAoB,CAAEsJ,MAAM,CAAC,MAAM,CAAEC,OAAO,CAAC,CAAC,cAAc,CAAC,kBAAkB,CAAC,CAAEC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEnE,MAAM,CAAEqN,WAAW,CAAEnN,IAAI,CAAE6N,SAAU,CAAC,CAAE,CAAC,CAAC,CAC/K,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAApK,CAAC,CAACoK,IAAI,CAAC,CAAC,CAC3B,KAAM,CAAArN,GAAG,CAAGsN,GAAG,CAACC,eAAe,CAACF,IAAI,CAAC,CACrC,KAAM,CAAAG,CAAC,CAAGC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC,CAAEF,CAAC,CAACG,IAAI,CAAG3N,GAAG,CAAEwN,CAAC,CAACI,QAAQ,CAAG,eAAe,CAAEJ,CAAC,CAACvO,KAAK,CAAC,CAAC,CAAEqO,GAAG,CAACO,eAAe,CAAC7N,GAAG,CAAC,CACxH,CAAC,CAED,KAAM,CAAAzE,UAAU,CAAG,KAAO,CAAA6R,SAAS,EAAK,CACtC,KAAM,CAAAnK,CAAC,CAAG,KAAM,CAAAC,KAAK,IAAAC,MAAA,CAAIrJ,GAAG,oBAAmB,CAAEsJ,MAAM,CAAC,MAAM,CAAEC,OAAO,CAAC,CAAC,cAAc,CAAC,kBAAkB,CAAC,CAAEC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEsK,iBAAiB,CAAEV,SAAS,CAAEW,SAAS,CAAE7F,MAAO,CAAC,CAAE,CAAC,CAAC,CACzL,KAAM,CAAAqE,IAAI,CAAG,KAAM,CAAAtJ,CAAC,CAACQ,IAAI,CAAC,CAAC,CAC3B4E,OAAO,CAAC2F,IAAI,EAAAC,aAAA,CAAAA,aAAA,IAASD,IAAI,MAAE,CAACZ,SAAS,CAACc,EAAE,EAAG3B,IAAI,CAAC4B,WAAW,EAAE,CAAC,CAChE,CAAC,CAED,KAAM,CAAAC,WAAW,CAAGA,CAAA,GAAMxN,KAAK,CAAG,CAAC,eAAe,WAAAuC,MAAA,CAAYvC,KAAK,CAAE,CAAC,CAAG,CAAC,CAAC,CAE3E,KAAM,CAAAyN,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC5B,GAAI,CAACzN,KAAK,CAAC,CAAE0N,KAAK,CAAC,mCAAmC,CAAC,CAAE,OAAO,CAChE,KAAM,CAAArL,CAAC,CAAG,KAAM,CAAAC,KAAK,IAAAC,MAAA,CAAIrJ,GAAG,WAAU,CAAEsJ,MAAM,CAAC,MAAM,CAAEC,OAAO,CAAA4K,aAAA,EAAE,cAAc,CAAC,kBAAkB,EAAKG,WAAW,CAAC,CAAC,CAAC,CAAE9K,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAE+K,IAAI,CAAC,IAAI,CAAE3E,QAAQ,CAAC,KAAK,CAAE4E,IAAI,CAAEnP,MAAM,CAAEoP,IAAI,CAAElP,IAAK,CAAC,CAAE,CAAC,CAAC,CACtM+O,KAAK,CAACrL,CAAC,CAACS,EAAE,CAAC,mBAAmB,CAAC,gBAAgB,CAAC,CAClD,CAAC,CAED,KAAM,CAAAgL,eAAe,CAAGC,MAAM,CAACC,IAAI,CAACrU,YAAY,CAAC,CACjD,KAAM,CAAAsU,eAAe,CAAGF,MAAM,CAACC,IAAI,CAAChT,cAAc,CAAC,CAEnD,KAAM,CAAAkT,eAAe,CAAGA,CAAA,GAAM,CAC5B,KAAM,CAAAC,QAAQ,CAAG,CAAEC,KAAK,CAAE,CAAE3P,MAAM,CAAEqN,WAAW,CAAEnN,IAAI,CAAEiJ,KAAK,CAAEE,QAAQ,CAAEE,SAAS,CAAEE,WAAW,CAAEE,MAAO,CAAC,CAAEd,MAAM,CAAEoB,OAAO,CAAE7J,KAAK,CAAE+J,cAAe,CAAC,CAClJnH,YAAY,CAACyB,OAAO,CAAC,uBAAuB,CAAEP,IAAI,CAACC,SAAS,CAACuL,QAAQ,CAAC,CAAC,CACvET,KAAK,CAAC,uCAAuC,CAAC,CAChD,CAAC,CAED,KAAM,CAAAW,gBAAgB,CAAGA,CAACC,GAAG,CAAEC,MAAM,GAAK,CACxC,KAAM,CAAAC,KAAK,CAAG7L,IAAI,CAAC8L,KAAK,CAAChN,YAAY,CAACC,OAAO,CAAC,iBAAiB,CAAC,EAAI,IAAI,CAAC,CACzE8M,KAAK,CAACF,GAAG,CAAC,CAAGC,MAAM,CACnB9M,YAAY,CAACyB,OAAO,CAAC,iBAAiB,CAAEP,IAAI,CAACC,SAAS,CAAC4L,KAAK,CAAC,CAAC,CAC9Dd,KAAK,IAAAnL,MAAA,CAAI+L,GAAG,CAACI,MAAM,CAAC,CAAC,CAAC,CAAC5K,WAAW,CAAC,CAAC,CAAGwK,GAAG,CAACjP,KAAK,CAAC,CAAC,CAAC,UAAQ,CAAC,CAC9D,CAAC,CAED,KAAM,CAAAsP,YAAY,CAAG,KAAAA,CAAA,GAAU,CAC7B,GAAI,CAAC3O,KAAK,CAAC,CAAE0N,KAAK,CAAC,gCAAgC,CAAC,CAAE,OAAO,CAC7D,KAAM,CAAArL,CAAC,CAAG,KAAM,CAAAC,KAAK,IAAAC,MAAA,CAAIrJ,GAAG,aAAY,CAACsJ,MAAM,CAAC,MAAM,CAAEC,OAAO,CAAA4K,aAAA,EAAE,cAAc,CAAC,kBAAkB,EAAKG,WAAW,CAAC,CAAC,CAAC,CAAE9K,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEgM,QAAQ,CAAEtF,SAAS,CAAEuF,MAAM,CAAEnE,MAAM,CAAClB,YAAY,CAAC,CAAEsF,OAAO,CAAEpF,aAAc,CAAC,CAAE,CAAC,CAAC,CAC7N,GAAI,CAACrH,CAAC,CAACS,EAAE,CAAC,CAAE,KAAM,CAAAtB,CAAC,CAAG,KAAM,CAAAa,CAAC,CAACQ,IAAI,CAAC,CAAC,CAAE6K,KAAK,CAAC,UAAU,EAAElM,CAAC,CAACwB,MAAM,EAAEX,CAAC,CAAC0M,MAAM,CAAC,CAAC,CAAC,CAC7ExF,YAAY,CAAC,EAAE,CAAC,CAAEE,eAAe,CAAC,CAAC,CAAC,CAAEE,gBAAgB,CAAC,EAAE,CAAC,CAC1DrH,KAAK,IAAAC,MAAA,CAAIrJ,GAAG,YAAU,CAAC,CAACgS,IAAI,CAAC7I,CAAC,EAAEA,CAAC,CAACQ,IAAI,CAAC,CAAC,CAAC,CAACqI,IAAI,CAACjN,CAAC,EAAEoL,UAAU,CAACpL,CAAC,CAACmL,OAAO,EAAE,EAAE,CAAC,CAAC,CAAC+B,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAC5F,CAAC,CAED,KAAM,CAAA6D,UAAU,CAAIC,CAAC,EAAKpH,QAAQ,CAACuF,IAAI,EAAIA,IAAI,CAAC8B,QAAQ,CAACD,CAAC,CAAC,CAAG7B,IAAI,CAAC/Q,MAAM,CAAC8S,CAAC,EAAIA,CAAC,GAAGF,CAAC,CAAC,CAAG,CAAC,GAAG7B,IAAI,CAAE6B,CAAC,CAAC,CAAC,CACrG,KAAM,CAAAG,MAAM,CAAGA,CAAA,GAAM,CACnB,KAAM,CAAAC,CAAC,CAAG5Q,MAAM,CAChB,KAAM,CAAA6Q,KAAK,CAAGtF,UAAU,CACxBtL,SAAS,CAACC,IAAI,CAAC,CACfC,OAAO,CAACyQ,CAAC,CAAC,CACVpF,aAAa,CAACC,QAAQ,CAAC,CACvBC,WAAW,CAACmF,KAAK,CAAC,CACpB,CAAC,CAED,KAAM,CAAArV,aAAa,CAAGA,CAAA,GAAM,CAC1B,KAAM,CAAAsU,MAAM,IAAAhM,MAAA,CAAM9D,MAAM,CAAC,CAAC,CAAC,CAACkM,OAAO,CAAC,CAAC,CAAC,OAAApI,MAAA,CAAK9D,MAAM,CAAC,CAAC,CAAC,CAACkM,OAAO,CAAC,CAAC,CAAC,CAAE,CACjE,KAAM,CAAAvL,GAAG,kCAAAmD,MAAA,CAAoC9D,MAAM,CAAC,CAAC,CAAC,MAAA8D,MAAA,CAAI9D,MAAM,CAAC,CAAC,CAAC,CAAE,CACrE8Q,SAAS,CAACC,SAAS,CAACC,SAAS,CAACrQ,GAAG,CAAC,CAAC8L,IAAI,CAAC,IAAM,CAC5CwC,KAAK,IAAAnL,MAAA,CAAIiI,IAAI,CAACrQ,cAAc,OAAAoI,MAAA,CAAKnD,GAAG,CAAE,CAAC,CACzC,CAAC,CAAC,CAAC+L,KAAK,CAAC,IAAM,CACbuC,KAAK,IAAAnL,MAAA,CAAIiI,IAAI,CAACvQ,aAAa,OAAAsI,MAAA,CAAKgM,MAAM,CAAE,CAAC,CAC3C,CAAC,CAAC,CACJ,CAAC,CAED;AACA,KAAM,CAAAmB,cAAc,CAAG,KAAAA,CAAOC,KAAK,CAAEjL,IAAI,GAAK,CAC5C,GAAI,CAACiL,KAAK,EAAIA,KAAK,CAAC7N,MAAM,CAAG,CAAC,CAAE,CAC9BuI,gBAAgB,CAAC,EAAE,CAAC,CACpB,OACF,CAEA,GAAI,CACF,KAAM,CAAAW,QAAQ,CAAG,KAAM,CAAA1I,KAAK,6DAAAC,MAAA,CACkCqN,kBAAkB,CAACD,KAAK,CAAG,yBAAyB,CAAC,YACnH,CAAC,CACD,KAAM,CAAAhE,IAAI,CAAG,KAAM,CAAAX,QAAQ,CAACnI,IAAI,CAAC,CAAC,CAClCwH,gBAAgB,CAACsB,IAAI,CAAC,CACtBpB,eAAe,CAAC7F,IAAI,CAAC,CACvB,CAAE,MAAO5D,KAAK,CAAE,CACdmK,OAAO,CAACnK,KAAK,CAAC,eAAe,CAAEA,KAAK,CAAC,CACrCuJ,gBAAgB,CAAC,EAAE,CAAC,CACtB,CACF,CAAC,CAED;AACA,KAAM,CAAAwF,cAAc,CAAIC,MAAM,EAAK,CACjC,KAAM,CAAAjS,GAAG,CAAGqO,UAAU,CAAC4D,MAAM,CAACjS,GAAG,CAAC,CAClC,KAAM,CAAAC,GAAG,CAAGoO,UAAU,CAAC4D,MAAM,CAACC,GAAG,CAAC,CAClC,KAAM,CAAAlW,IAAI,CAAGiW,MAAM,CAACE,YAAY,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAE/C,GAAI3F,YAAY,GAAK,QAAQ,CAAE,CAC7B5L,SAAS,CAAC,CAACb,GAAG,CAAEC,GAAG,CAAC,CAAC,CACrBmM,aAAa,CAACpQ,IAAI,CAAC,CACnBgQ,eAAe,CAAC,EAAE,CAAC,CACrB,CAAC,IAAM,CACLjL,OAAO,CAAC,CAACf,GAAG,CAAEC,GAAG,CAAC,CAAC,CACnBqM,WAAW,CAACtQ,IAAI,CAAC,CACjBkQ,aAAa,CAAC,EAAE,CAAC,CACnB,CAEAM,gBAAgB,CAAC,EAAE,CAAC,CACpBE,eAAe,CAAC,IAAI,CAAC,CACvB,CAAC,CAED;AACA,KAAM,CAAA2F,mBAAmB,CAAGA,CAAA,GAAM,CAChC7F,gBAAgB,CAAC,EAAE,CAAC,CACpBE,eAAe,CAAC,IAAI,CAAC,CACrBV,eAAe,CAAC,EAAE,CAAC,CACnBE,aAAa,CAAC,EAAE,CAAC,CACnB,CAAC,CAED;AACA,KAAM,CAAAoG,kBAAkB,CAAIzL,IAAI,EAAK,CACnC,GAAI6K,SAAS,CAACa,WAAW,CAAE,CACzBb,SAAS,CAACa,WAAW,CAACC,kBAAkB,CACtC,KAAO,CAAApT,QAAQ,EAAK,CAClB,KAAM,CAAAY,GAAG,CAAGZ,QAAQ,CAACsR,MAAM,CAAC+B,QAAQ,CACpC,KAAM,CAAAxS,GAAG,CAAGb,QAAQ,CAACsR,MAAM,CAACgC,SAAS,CAErC;AACA,GAAI,KAAAC,aAAA,CAAAC,cAAA,CAAAC,cAAA,CACF,KAAM,CAAA1F,QAAQ,CAAG,KAAM,CAAA1I,KAAK,gEAAAC,MAAA,CACqC1E,GAAG,UAAA0E,MAAA,CAAQzE,GAAG,CAC/E,CAAC,CACD,KAAM,CAAA6N,IAAI,CAAG,KAAM,CAAAX,QAAQ,CAACnI,IAAI,CAAC,CAAC,CAClC,KAAM,CAAAhJ,IAAI,CAAG,EAAA2W,aAAA,CAAA7E,IAAI,CAACgF,OAAO,UAAAH,aAAA,iBAAZA,aAAA,CAAcI,MAAM,KAAAH,cAAA,CAAI9E,IAAI,CAACgF,OAAO,UAAAF,cAAA,iBAAZA,cAAA,CAAcI,IAAI,KAAAH,cAAA,CAAI/E,IAAI,CAACgF,OAAO,UAAAD,cAAA,iBAAZA,cAAA,CAAcI,IAAI,GAAI,kBAAkB,CAEnG,GAAIpM,IAAI,GAAK,QAAQ,CAAE,CACrBhG,SAAS,CAAC,CAACb,GAAG,CAAEC,GAAG,CAAC,CAAC,CACrBmM,aAAa,CAACpQ,IAAI,CAAC,CACrB,CAAC,IAAM,CACL+E,OAAO,CAAC,CAACf,GAAG,CAAEC,GAAG,CAAC,CAAC,CACnBqM,WAAW,CAACtQ,IAAI,CAAC,CACnB,CACF,CAAE,MAAOiH,KAAK,CAAE,CACd,GAAI4D,IAAI,GAAK,QAAQ,CAAE,CACrBhG,SAAS,CAAC,CAACb,GAAG,CAAEC,GAAG,CAAC,CAAC,CACrBmM,aAAa,CAAC,kBAAkB,CAAC,CACnC,CAAC,IAAM,CACLrL,OAAO,CAAC,CAACf,GAAG,CAAEC,GAAG,CAAC,CAAC,CACnBqM,WAAW,CAAC,kBAAkB,CAAC,CACjC,CACF,CACF,CAAC,CACArJ,KAAK,EAAK,CACT4M,KAAK,CAAC,+DAA+D,CAAC,CACxE,CACF,CAAC,CACH,CAAC,IAAM,CACLA,KAAK,CAAC,+CAA+C,CAAC,CACxD,CACF,CAAC,CAED,KAAM,CAAAqD,WAAW,CAAGA,CAAC/Q,KAAK,CAAEE,QAAQ,GAAK,CACvCD,QAAQ,CAACD,KAAK,CAAC,CACfG,WAAW,CAACD,QAAQ,CAAC,CACrBsD,kBAAkB,CAAC,IAAI,CAAC,CAC1B,CAAC,CAED,KAAM,CAAAD,MAAM,CAAGA,CAAA,GAAM,CACnBtD,QAAQ,CAAC,IAAI,CAAC,CACdE,WAAW,CAAC,IAAI,CAAC,CACjBqD,kBAAkB,CAAC,KAAK,CAAC,CACzB/B,YAAY,CAACgC,UAAU,CAAC,YAAY,CAAC,CACrChC,YAAY,CAACgC,UAAU,CAAC,WAAW,CAAC,CACpChC,YAAY,CAACgC,UAAU,CAAC,iBAAiB,CAAC,CAC1C9B,cAAc,CAAC8B,UAAU,CAAC,YAAY,CAAC,CACvC9B,cAAc,CAAC8B,UAAU,CAAC,WAAW,CAAC,CACtC9B,cAAc,CAAC8B,UAAU,CAAC,iBAAiB,CAAC,CAC5CkE,OAAO,CAAC,MAAM,CAAC,CACjB,CAAC,CAED;AACA,GAAI,CAAChB,eAAe,CAAE,CACpB,mBAAO9N,IAAA,CAAC6M,SAAS,EAACE,OAAO,CAAEmL,WAAY,CAAClL,WAAW,CAAEA,WAAY,CAAE,CAAC,CACtE,CAEA,mBACE9M,KAAA,QAAK0C,KAAK,CAAE,CAACqK,SAAS,CAAC,OAAO,CAAE5B,OAAO,CAAC,GAAG,CAAE3H,UAAU,CAAC,eAAe,CAAEyU,UAAU,CAAC,MAAM,CAAE,CAAAzV,QAAA,eAE1F1C,IAAA,QAAK4C,KAAK,CAAE,CACVwB,QAAQ,CAAC,QAAQ,CAAEiI,GAAG,CAAC,CAAC,CAAEjB,MAAM,CAAC,IAAI,CACrC1H,UAAU,CAAC,wBAAwB,CACnC0U,YAAY,CAAC,+BAA+B,CAC5C5M,SAAS,CAAC,4BACZ,CAAE,CAAA9I,QAAA,cACAxC,KAAA,QAAK0C,KAAK,CAAE,CAAC2I,QAAQ,CAAC,IAAI,CAAEgC,MAAM,CAAC,QAAQ,CAAElC,OAAO,CAAC,WAAW,CAAEjI,OAAO,CAAC,MAAM,CAAEC,UAAU,CAAC,QAAQ,CAAEmJ,cAAc,CAAC,eAAe,CAAElJ,GAAG,CAAC,EAAE,CAAE,CAAAZ,QAAA,eAE7IxC,KAAA,QAAK0C,KAAK,CAAE,CAACQ,OAAO,CAAC,MAAM,CAAEC,UAAU,CAAC,QAAQ,CAAEC,GAAG,CAAC,EAAE,CAAE,CAAAZ,QAAA,eACxD1C,IAAA,QACEqN,GAAG,CAAC,gBAAgB,CACpBC,GAAG,CAAC,MAAM,CACV1K,KAAK,CAAE,CAACwD,KAAK,CAAC,EAAE,CAAED,MAAM,CAAC,EAAE,CAAEE,YAAY,CAAC,EAAE,CAAEmH,SAAS,CAAC,SAAS,CAAEhC,SAAS,CAAC,4BAA4B,CAAE,CAC3GiC,OAAO,CAAG9I,CAAC,EAAK,CACdA,CAAC,CAACE,MAAM,CAACjC,KAAK,CAACQ,OAAO,CAAG,MAAM,CAC/BuB,CAAC,CAACE,MAAM,CAACwT,kBAAkB,CAACzV,KAAK,CAACQ,OAAO,CAAG,MAAM,CACpD,CAAE,CACH,CAAC,cACFpD,IAAA,QAAK2C,SAAS,CAAC,MAAM,CAACC,KAAK,CAAE,CAACQ,OAAO,CAAC,MAAM,CAAEgD,KAAK,CAAC,EAAE,CAAED,MAAM,CAAC,EAAE,CAAE5C,QAAQ,CAAC,EAAE,CAAE,CAAAb,QAAA,CAAC,GAAC,CAAK,CAAC,cACxFxC,KAAA,QAAAwC,QAAA,eACE1C,IAAA,OAAI4C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEE,UAAU,CAAC,GAAG,CAAEQ,UAAU,CAAC,CAAC,CAAEd,YAAY,CAAC,CAAC,CAAE,CAAAT,QAAA,CAAC,MAAI,CAAI,CAAC,cACjF1C,IAAA,MAAG4C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEQ,KAAK,CAAC,cAAc,CAAEE,UAAU,CAAC,CAAC,CAAE,CAAAvB,QAAA,CAAC,wBAAsB,CAAG,CAAC,EACpF,CAAC,EACH,CAAC,cAGN1C,IAAA,QAAK4C,KAAK,CAAE,CAACQ,OAAO,CAAC,MAAM,CAAEE,GAAG,CAAC,CAAC,CAAEgV,QAAQ,CAAC,MAAM,CAAE,CAAA5V,QAAA,CAClD,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,QAAQ,CAAC,QAAQ,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC+D,GAAG,CAAC8R,CAAC,eACjErY,KAAA,WAEEiF,OAAO,CAAEA,CAAA,GAAM2J,OAAO,CAACyJ,CAAC,CAAE,CAC1B5V,SAAS,CAAEkM,IAAI,GAAK0J,CAAC,CAAG,iBAAiB,CAAG,MAAO,CACnD3V,KAAK,CAAE,CACLyI,OAAO,CAAC,UAAU,CAClB9H,QAAQ,CAAC,EAAE,CACXE,UAAU,CAAC,GAAG,CACd+U,aAAa,CAAC,YAAY,CAC1B9L,UAAU,CAAC,UACb,CAAE,CAAAhK,QAAA,EAED6V,CAAC,GAAK,MAAM,EAAI,IAAI,CAAC,GAAC,CAACA,CAAC,GAAK,MAAM,EAAI,KAAK,CAAC,GAAC,CAACA,CAAC,GAAK,KAAK,EAAI,IAAI,CAClEA,CAAC,GAAK,QAAQ,EAAI,IAAI,CAAC,GAAC,CAACA,CAAC,GAAK,QAAQ,EAAI,KAAK,CAAC,GAAC,CAACA,CAAC,GAAK,SAAS,EAAI,GAAG,CACzEA,CAAC,GAAK,UAAU,EAAI,IAAI,CAAC,GAAC,CAAC,GAAG,CAAEA,CAAC,CAAC1C,MAAM,CAAC,CAAC,CAAC,CAAC5K,WAAW,CAAC,CAAC,CAAGsN,CAAC,CAAC/R,KAAK,CAAC,CAAC,CAAC,GAblE+R,CAcC,CACT,CAAC,CACC,CAAC,cAGNrY,KAAA,QAAK0C,KAAK,CAAE,CAACQ,OAAO,CAAC,MAAM,CAAEC,UAAU,CAAC,QAAQ,CAAEC,GAAG,CAAC,EAAE,CAAE,CAAAZ,QAAA,eACxDxC,KAAA,QAAK0C,KAAK,CAAE,CAAC8I,SAAS,CAAC,OAAO,CAAE,CAAAhJ,QAAA,eAC9B1C,IAAA,QAAK4C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEE,UAAU,CAAC,GAAG,CAAE,CAAAf,QAAA,CAAE2E,QAAQ,EAAI,OAAO,CAAM,CAAC,cACtErH,IAAA,QAAK4C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEQ,KAAK,CAAC,cAAc,CAAE,CAAArB,QAAA,CAAC,gBAAc,CAAK,CAAC,EAClE,CAAC,cACN1C,IAAA,WAAQmF,OAAO,CAAEuF,MAAO,CAAC/H,SAAS,CAAC,gBAAgB,CAACC,KAAK,CAAE,CAACyI,OAAO,CAAC,UAAU,CAAE9H,QAAQ,CAAC,EAAE,CAAE,CAAAb,QAAA,CAAC,qBAE9F,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,CACH,CAAC,cAGNxC,KAAA,QAAK0C,KAAK,CAAE,CAAC2I,QAAQ,CAAC,IAAI,CAAEgC,MAAM,CAAC,QAAQ,CAAElC,OAAO,CAAC,gBAAgB,CAAE,CAAA3I,QAAA,EAGpEmM,IAAI,GAAK,MAAM,eACd3O,KAAA,CAAAE,SAAA,EAAAsC,QAAA,eAEExC,KAAA,QAAKyC,SAAS,CAAC,QAAQ,CAACC,KAAK,CAAE,CAACO,YAAY,CAAC,EAAE,CAAE,CAAAT,QAAA,eAC/CxC,KAAA,QAAKyC,SAAS,CAAC,WAAW,CAAAD,QAAA,eACxB1C,IAAA,QAAK2C,SAAS,CAAC,YAAY,CAAAD,QAAA,CAAEsD,KAAK,CAACiD,MAAM,CAAM,CAAC,cAChDjJ,IAAA,QAAK2C,SAAS,CAAC,YAAY,CAAAD,QAAA,CAAC,cAAY,CAAK,CAAC,EAC3C,CAAC,cACNxC,KAAA,QAAKyC,SAAS,CAAC,WAAW,CAAAD,QAAA,eACxB1C,IAAA,QAAK2C,SAAS,CAAC,YAAY,CAAAD,QAAA,CAAEuL,KAAK,CAAChF,MAAM,CAAM,CAAC,cAChDjJ,IAAA,QAAK2C,SAAS,CAAC,YAAY,CAAAD,QAAA,CAAC,cAAY,CAAK,CAAC,EAC3C,CAAC,cACNxC,KAAA,QAAKyC,SAAS,CAAC,WAAW,CAAAD,QAAA,eACxB1C,IAAA,QAAK2C,SAAS,CAAC,YAAY,CAAAD,QAAA,CAAE+L,MAAM,CAACxF,MAAM,CAAM,CAAC,cACjDjJ,IAAA,QAAK2C,SAAS,CAAC,YAAY,CAAAD,QAAA,CAAC,eAAa,CAAK,CAAC,EAC5C,CAAC,EACH,CAAC,cAGNxC,KAAA,QAAKyC,SAAS,CAAC,MAAM,CAACC,KAAK,CAAE,CAACO,YAAY,CAAC,EAAE,CAAEO,UAAU,CAAC,oFAAoF,CAAE4H,MAAM,CAAC,oCAAoC,CAAE,CAAA5I,QAAA,eAC3LxC,KAAA,OAAI0C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEE,UAAU,CAAC,GAAG,CAAEN,YAAY,CAAC,EAAE,CAAEO,UAAU,CAAC,mBAAmB,CAAEC,oBAAoB,CAAC,MAAM,CAAEC,mBAAmB,CAAC,aAAa,CAAE,CAAAlB,QAAA,EAAC,gBAC3I,CAAC2E,QAAQ,CAAC,gBAC1B,EAAI,CAAC,cACLrH,IAAA,MAAG4C,KAAK,CAAE,CAACmB,KAAK,CAAC,cAAc,CAAER,QAAQ,CAAC,EAAE,CAAE,CAAAb,QAAA,CAAC,4HAE/C,CAAG,CAAC,EACD,CAAC,cAGNxC,KAAA,QAAKyC,SAAS,CAAC,QAAQ,CAACC,KAAK,CAAE,CAACO,YAAY,CAAC,EAAE,CAAE,CAAAT,QAAA,eAC/CxC,KAAA,QAAKyC,SAAS,CAAC,MAAM,CAACwC,OAAO,CAAEA,CAAA,GAAM2J,OAAO,CAAC,MAAM,CAAE,CAAClM,KAAK,CAAE,CAAC2J,MAAM,CAAC,SAAS,CAAE,CAAA7J,QAAA,eAC9E1C,IAAA,QAAK4C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEJ,YAAY,CAAC,EAAE,CAAE,CAAAT,QAAA,CAAC,oBAAG,CAAK,CAAC,cACrD1C,IAAA,OAAI4C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEE,UAAU,CAAC,GAAG,CAAEN,YAAY,CAAC,CAAC,CAAE,CAAAT,QAAA,CAAC,eAAa,CAAI,CAAC,cAC5E1C,IAAA,MAAG4C,KAAK,CAAE,CAACmB,KAAK,CAAC,cAAc,CAAER,QAAQ,CAAC,EAAE,CAAE,CAAAb,QAAA,CAAC,sEAAoE,CAAG,CAAC,EACpH,CAAC,cACNxC,KAAA,QAAKyC,SAAS,CAAC,MAAM,CAACwC,OAAO,CAAEA,CAAA,GAAM2J,OAAO,CAAC,KAAK,CAAE,CAAClM,KAAK,CAAE,CAAC2J,MAAM,CAAC,SAAS,CAAE,CAAA7J,QAAA,eAC7E1C,IAAA,QAAK4C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEJ,YAAY,CAAC,EAAE,CAAE,CAAAT,QAAA,CAAC,cAAE,CAAK,CAAC,cACpD1C,IAAA,OAAI4C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEE,UAAU,CAAC,GAAG,CAAEN,YAAY,CAAC,CAAC,CAAE,CAAAT,QAAA,CAAC,iBAAe,CAAI,CAAC,cAC9E1C,IAAA,MAAG4C,KAAK,CAAE,CAACmB,KAAK,CAAC,cAAc,CAAER,QAAQ,CAAC,EAAE,CAAE,CAAAb,QAAA,CAAC,kEAAgE,CAAG,CAAC,EAChH,CAAC,cACNxC,KAAA,QAAKyC,SAAS,CAAC,MAAM,CAACwC,OAAO,CAAEA,CAAA,GAAM2J,OAAO,CAAC,QAAQ,CAAE,CAAClM,KAAK,CAAE,CAAC2J,MAAM,CAAC,SAAS,CAAE,CAAA7J,QAAA,eAChF1C,IAAA,QAAK4C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEJ,YAAY,CAAC,EAAE,CAAE,CAAAT,QAAA,CAAC,cAAE,CAAK,CAAC,cACpD1C,IAAA,OAAI4C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEE,UAAU,CAAC,GAAG,CAAEN,YAAY,CAAC,CAAC,CAAE,CAAAT,QAAA,CAAC,aAAW,CAAI,CAAC,cAC1E1C,IAAA,MAAG4C,KAAK,CAAE,CAACmB,KAAK,CAAC,cAAc,CAAER,QAAQ,CAAC,EAAE,CAAE,CAAAb,QAAA,CAAC,6DAA2D,CAAG,CAAC,EAC3G,CAAC,cACNxC,KAAA,QAAKyC,SAAS,CAAC,MAAM,CAACwC,OAAO,CAAEA,CAAA,GAAM2J,OAAO,CAAC,QAAQ,CAAE,CAAClM,KAAK,CAAE,CAAC2J,MAAM,CAAC,SAAS,CAAE,CAAA7J,QAAA,eAChF1C,IAAA,QAAK4C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEJ,YAAY,CAAC,EAAE,CAAE,CAAAT,QAAA,CAAC,oBAAG,CAAK,CAAC,cACrD1C,IAAA,OAAI4C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEE,UAAU,CAAC,GAAG,CAAEN,YAAY,CAAC,CAAC,CAAE,CAAAT,QAAA,CAAC,iBAAe,CAAI,CAAC,cAC9E1C,IAAA,MAAG4C,KAAK,CAAE,CAACmB,KAAK,CAAC,cAAc,CAAER,QAAQ,CAAC,EAAE,CAAE,CAAAb,QAAA,CAAC,2DAAyD,CAAG,CAAC,EACzG,CAAC,EACH,CAAC,EACN,CACH,CAEAmM,IAAI,GAAK,KAAK,eACb3O,KAAA,QAAAwC,QAAA,eACE1C,IAAA,OAAI2C,SAAS,CAAC,eAAe,CAAAD,QAAA,CAAC,8BAAkB,CAAI,CAAC,cACvDxC,KAAA,CAAC4C,WAAW,EAACI,IAAI,CAAC,oBAAK,CAACF,KAAK,CAAC,UAAU,CAACC,WAAW,CAAC,qEAAqE,CAAAP,QAAA,eACxH1C,IAAA,QAAK4C,KAAK,CAAE,CAACuD,MAAM,CAAC,GAAG,CAAEC,KAAK,CAAC,MAAM,CAAEC,YAAY,CAAC,EAAE,CAAEoG,QAAQ,CAAC,QAAQ,CAAEjB,SAAS,CAAC,6BAA6B,CAAE,CAAA9I,QAAA,cAClH1C,IAAA,CAAC0F,cAAc,EAACE,MAAM,CAAEA,MAAO,CAACC,SAAS,CAAEA,SAAU,CAACC,IAAI,CAAEA,IAAK,CAACC,OAAO,CAAEA,OAAQ,CAACC,KAAK,CAAEA,KAAM,CAAE,CAAC,CACjG,CAAC,cACN9F,KAAA,QAAK0C,KAAK,CAAE,CAACoB,SAAS,CAAC,EAAE,CAAEZ,OAAO,CAAC,MAAM,CAAEE,GAAG,CAAC,EAAE,CAAEgV,QAAQ,CAAC,MAAM,CAAE,CAAA5V,QAAA,eAClExC,KAAA,WAAQyC,SAAS,CAAC,iBAAiB,CAACwC,OAAO,CAAE/D,aAAc,CAAAsB,QAAA,EAAC,eAAG,CAACiP,IAAI,CAACvQ,aAAa,EAAS,CAAC,cAC5FlB,KAAA,WAAQyC,SAAS,CAAC,KAAK,CAACwC,OAAO,CAAEA,CAAA,GAAMuR,SAAS,CAACC,SAAS,CAACC,SAAS,IAAAlN,MAAA,CAAI9D,MAAM,CAAC,CAAC,CAAC,CAACkM,OAAO,CAAC,CAAC,CAAC,OAAApI,MAAA,CAAK9D,MAAM,CAAC,CAAC,CAAC,CAACkM,OAAO,CAAC,CAAC,CAAC,CAAE,CAAC,CAACO,IAAI,CAAC,IAAMwC,KAAK,CAAClD,IAAI,CAACrQ,cAAc,CAAC,CAAE,CAAAoB,QAAA,EAAC,eAAG,CAACiP,IAAI,CAACtQ,UAAU,EAAS,CAAC,EAC3L,CAAC,EACK,CAAC,EACT,CACN,CAEAwN,IAAI,GAAK,QAAQ,eAChB3O,KAAA,QAAAwC,QAAA,eACE1C,IAAA,OAAI2C,SAAS,CAAC,eAAe,CAAAD,QAAA,CAAC,oCAAwB,CAAI,CAAC,cAC7D1C,IAAA,CAAC8C,WAAW,EAACI,IAAI,CAAC,QAAG,CAACF,KAAK,CAAE2O,IAAI,CAACnQ,gBAAiB,CAACyB,WAAW,CAAC,+DAA+D,CAAAP,QAAA,cAC7HxC,KAAA,QAAK0C,KAAK,CAAE,CAACQ,OAAO,CAAC,MAAM,CAAEkV,QAAQ,CAAC,MAAM,CAAEhV,GAAG,CAAC,EAAE,CAAE,CAAAZ,QAAA,eACpDxC,KAAA,QAAK0C,KAAK,CAAE,CAAC6V,IAAI,CAAC,WAAW,CAAEvT,QAAQ,CAAC,GAAG,CAAE,CAAAxC,QAAA,eAC3C1C,IAAA,QAAK4C,KAAK,CAAE,CAACa,UAAU,CAAC,GAAG,CAAEN,YAAY,CAAC,CAAC,CAAE,CAAAT,QAAA,CAAEiP,IAAI,CAAClQ,UAAU,CAAM,CAAC,CACpEoO,OAAO,cACN3P,KAAA,QAAAwC,QAAA,eACE1C,IAAA,QAAK4C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEE,UAAU,CAAC,GAAG,CAAE,CAAAf,QAAA,CAAEmN,OAAO,CAAC6I,SAAS,CAAM,CAAC,cACpExY,KAAA,QAAK0C,KAAK,CAAE,CAAC8K,OAAO,CAAC,IAAI,CAAE,CAAAhL,QAAA,EAAC,OAAK,CAACmN,OAAO,CAAC8I,KAAK,CAAC,oBAAU,CAAC9I,OAAO,CAAC+I,OAAO,CAAC,OAAK,EAAK,CAAC,EACnF,CAAC,cAEN5Y,IAAA,QAAK4C,KAAK,CAAE,CAAC8K,OAAO,CAAC,IAAI,CAAE,CAAAhL,QAAA,CAAC,gCAAyB,CAAK,CAC3D,EACE,CAAC,cACNxC,KAAA,QAAK0C,KAAK,CAAE,CAAC6V,IAAI,CAAC,WAAW,CAAE,CAAA/V,QAAA,eAC7B1C,IAAA,QAAK4C,KAAK,CAAE,CAACa,UAAU,CAAC,GAAG,CAAEN,YAAY,CAAC,CAAC,CAAE,CAAAT,QAAA,CAAEiP,IAAI,CAACjQ,eAAe,CAAM,CAAC,cAC1ExB,KAAA,OAAI0C,KAAK,CAAE,CAAC2K,MAAM,CAAC,CAAC,CAAEsL,WAAW,CAAC,EAAE,CAAE,CAAAnW,QAAA,EACnC+L,MAAM,CAACjI,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAACC,GAAG,CAAC,CAACsN,CAAC,CAAC+E,CAAC,gBACzB5Y,KAAA,OAAAwC,QAAA,eAAY1C,IAAA,WAAA0C,QAAA,CAASqR,CAAC,CAAClI,IAAI,EAAEkI,CAAC,CAACU,EAAE,CAAS,CAAC,KAAE,CAACV,CAAC,CAAC/Q,KAAK,EAAE+Q,CAAC,CAACgF,OAAO,CAAC,GAAC,CAAChF,CAAC,CAACiF,QAAQ,WAAAtP,MAAA,CAAMqK,CAAC,CAACiF,QAAQ,EAAG,EAAE,GAAzFF,CAA8F,CACxG,CAAC,CACDrK,MAAM,CAACxF,MAAM,GAAG,CAAC,eAAIjJ,IAAA,OAAI4C,KAAK,CAAE,CAAC8K,OAAO,CAAC,GAAG,CAAE,CAAAhL,QAAA,CAAEiP,IAAI,CAAChQ,QAAQ,CAAK,CAAC,EAClE,CAAC,EACF,CAAC,CACLwM,MAAM,eACLjO,KAAA,QAAK0C,KAAK,CAAE,CAACqW,SAAS,CAAC,MAAM,CAAEvV,UAAU,CAAC,sBAAsB,CAAE2H,OAAO,CAAC,EAAE,CAAEhF,YAAY,CAAC,EAAE,CAAE,CAAA3D,QAAA,eAC7F1C,IAAA,WAAA0C,QAAA,CAAQ,eAAa,CAAQ,CAAC,IAAC,CAACyL,MAAM,EACnC,CACN,EACE,CAAC,CACK,CAAC,EACT,CACN,CAEAU,IAAI,GAAK,MAAM,eACd3O,KAAA,QAAAwC,QAAA,eACE1C,IAAA,OAAI2C,SAAS,CAAC,eAAe,CAAAD,QAAA,CAAC,kCAAiB,CAAI,CAAC,cACtD1C,IAAA,CAAC8C,WAAW,EAACI,IAAI,CAAC,cAAI,CAACF,KAAK,CAAE2O,IAAI,CAACpQ,YAAa,CAAC0B,WAAW,CAAC,iEAAiE,CAAAP,QAAA,cAC5HxC,KAAA,QAAK0C,KAAK,CAAE,CAACQ,OAAO,CAAC,MAAM,CAAEE,GAAG,CAAC,EAAE,CAAE4V,mBAAmB,CAAC,0CAA0C,CAAE,CAAAxW,QAAA,eACnGxC,KAAA,QAAK0C,KAAK,CAAE,CAACQ,OAAO,CAAC,MAAM,CAAEwI,aAAa,CAAC,QAAQ,CAAEtI,GAAG,CAAC,EAAE,CAAE,CAAAZ,QAAA,eAE3DxC,KAAA,QAAK0C,KAAK,CAAE,CAACwB,QAAQ,CAAC,UAAU,CAAE,CAAA1B,QAAA,eAChCxC,KAAA,UAAO0C,KAAK,CAAE,CAACQ,OAAO,CAAC,MAAM,CAAEwI,aAAa,CAAC,QAAQ,CAAEtI,GAAG,CAAC,CAAC,CAAE,CAAAZ,QAAA,eAC5DxC,KAAA,QAAK0C,KAAK,CAAE,CAACQ,OAAO,CAAC,MAAM,CAAEoJ,cAAc,CAAC,eAAe,CAAEnJ,UAAU,CAAC,QAAQ,CAAE,CAAAX,QAAA,eAChF1C,IAAA,SAAM4C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEmK,OAAO,CAAC,IAAI,CAAE,CAAAhL,QAAA,CAAC,qBAAS,CAAM,CAAC,cAC1D1C,IAAA,WACE2C,SAAS,CAAC,KAAK,CACfwC,OAAO,CAAEA,CAAA,GAAMmS,kBAAkB,CAAC,QAAQ,CAAE,CAC5C1U,KAAK,CAAE,CAACyI,OAAO,CAAC,SAAS,CAAE9H,QAAQ,CAAC,EAAE,CAAE,CACxCP,KAAK,CAAC,yBAAyB,CAAAN,QAAA,CAChC,sBAED,CAAQ,CAAC,EACN,CAAC,cACN1C,IAAA,UACE+L,KAAK,CAAEgF,YAAY,EAAII,UAAW,CAClCnF,QAAQ,CAAErH,CAAC,EAAI,CACbqM,eAAe,CAACrM,CAAC,CAACE,MAAM,CAACkH,KAAK,CAAC,CAC/B8K,cAAc,CAAClS,CAAC,CAACE,MAAM,CAACkH,KAAK,CAAE,QAAQ,CAAC,CAC1C,CAAE,CACFoN,OAAO,CAAExU,CAAC,EAAIA,CAAC,CAACE,MAAM,CAACuU,MAAM,CAAC,CAAE,CAChCtN,WAAW,CAAC,uBAAuB,CACnClJ,KAAK,CAAE,CAACa,UAAU,CAAC,GAAG,CAAE,CACzB,CAAC,EACG,CAAC,CACPgO,YAAY,GAAK,QAAQ,EAAIF,aAAa,CAACtI,MAAM,CAAG,CAAC,eACpD/I,KAAA,QAAK0C,KAAK,CAAE,CACVwB,QAAQ,CAAC,UAAU,CACnBiI,GAAG,CAAC,MAAM,CACVa,IAAI,CAAC,CAAC,CACNd,KAAK,CAAC,CAAC,CACPhB,MAAM,CAAC,IAAI,CACX1H,UAAU,CAAC,iFAAiF,CAC5FyH,cAAc,CAAC,YAAY,CAC3BG,MAAM,CAAC,mCAAmC,CAC1CjF,YAAY,CAAC,EAAE,CACfrC,SAAS,CAAC,CAAC,CACXqV,SAAS,CAAC,GAAG,CACbC,SAAS,CAAC,MAAM,CAChB9N,SAAS,CAAC,oEACZ,CAAE,CAAA9I,QAAA,eACA1C,IAAA,QAAK4C,KAAK,CAAE,CACVyI,OAAO,CAAC,WAAW,CACnB9H,QAAQ,CAAC,EAAE,CACXE,UAAU,CAAC,GAAG,CACdM,KAAK,CAAC,uBAAuB,CAC7BqU,YAAY,CAAC,mCAAmC,CAChDI,aAAa,CAAC,WAAW,CACzB1U,aAAa,CAAC,OAChB,CAAE,CAAApB,QAAA,CAAC,qCAEH,CAAK,CAAC,CACL6O,aAAa,CAAC9K,GAAG,CAAC,CAACwQ,MAAM,CAAE6B,CAAC,gBAC3B5Y,KAAA,QAEEiF,OAAO,CAAEA,CAAA,GAAM6R,cAAc,CAACC,MAAM,CAAE,CACtCrU,KAAK,CAAE,CACLyI,OAAO,CAAC,WAAW,CACnBkB,MAAM,CAAC,SAAS,CAChB6L,YAAY,CAAEU,CAAC,CAAGvH,aAAa,CAACtI,MAAM,CAAG,CAAC,CAAG,kCAAkC,CAAG,MAAM,CACxFyD,UAAU,CAAC,UAAU,CACrBhJ,UAAU,CAAC,aACb,CAAE,CACF6V,YAAY,CAAE5U,CAAC,EAAI,CACjBA,CAAC,CAAC6U,aAAa,CAAC5W,KAAK,CAACc,UAAU,CAAG,oFAAoF,CACvHiB,CAAC,CAAC6U,aAAa,CAAC5W,KAAK,CAAC6W,UAAU,CAAG,mCAAmC,CACtE9U,CAAC,CAAC6U,aAAa,CAAC5W,KAAK,CAACiW,WAAW,CAAG,MAAM,CAC5C,CAAE,CACFa,YAAY,CAAE/U,CAAC,EAAI,CACjBA,CAAC,CAAC6U,aAAa,CAAC5W,KAAK,CAACc,UAAU,CAAG,aAAa,CAChDiB,CAAC,CAAC6U,aAAa,CAAC5W,KAAK,CAAC6W,UAAU,CAAG,MAAM,CACzC9U,CAAC,CAAC6U,aAAa,CAAC5W,KAAK,CAACiW,WAAW,CAAG,MAAM,CAC5C,CAAE,CAAAnW,QAAA,eAEFxC,KAAA,QAAK0C,KAAK,CAAE,CACVa,UAAU,CAAC,GAAG,CACdF,QAAQ,CAAC,EAAE,CACXQ,KAAK,CAAC,SAAS,CACfZ,YAAY,CAAC,CAAC,CACdC,OAAO,CAAC,MAAM,CACdC,UAAU,CAAC,QAAQ,CACnBC,GAAG,CAAC,CACN,CAAE,CAAAZ,QAAA,eACA1C,IAAA,SAAM4C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAE,CAAAb,QAAA,CAAC,cAAE,CAAM,CAAC,CACpCuU,MAAM,CAACE,YAAY,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAC/B,CAAC,cACNpX,IAAA,QAAK4C,KAAK,CAAE,CACVW,QAAQ,CAAC,EAAE,CACXQ,KAAK,CAAC,uBAAuB,CAC7BE,UAAU,CAAC,GAAG,CACd4U,WAAW,CAAC,EACd,CAAE,CAAAnW,QAAA,CACCuU,MAAM,CAACE,YAAY,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC5Q,KAAK,CAAC,CAAC,CAAC,CAACmT,IAAI,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC,CAAC,CACtD,CAAC,GAvCDd,CAwCF,CACN,CAAC,EACC,CACN,cACD5Y,KAAA,QAAK0C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEmK,OAAO,CAAC,GAAG,CAAE1J,SAAS,CAAC,CAAC,CAAE,CAAAtB,QAAA,EAAEkD,MAAM,CAAC,CAAC,CAAC,CAACkM,OAAO,CAAC,CAAC,CAAC,CAAC,IAAE,CAAClM,MAAM,CAAC,CAAC,CAAC,CAACkM,OAAO,CAAC,CAAC,CAAC,EAAM,CAAC,EACtG,CAAC,cAGN5R,KAAA,QAAK0C,KAAK,CAAE,CAACwB,QAAQ,CAAC,UAAU,CAAE,CAAA1B,QAAA,eAChCxC,KAAA,UAAO0C,KAAK,CAAE,CAACQ,OAAO,CAAC,MAAM,CAAEwI,aAAa,CAAC,QAAQ,CAAEtI,GAAG,CAAC,CAAC,CAAE,CAAAZ,QAAA,eAC5DxC,KAAA,QAAK0C,KAAK,CAAE,CAACQ,OAAO,CAAC,MAAM,CAAEoJ,cAAc,CAAC,eAAe,CAAEnJ,UAAU,CAAC,QAAQ,CAAE,CAAAX,QAAA,eAChF1C,IAAA,SAAM4C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEmK,OAAO,CAAC,IAAI,CAAE,CAAAhL,QAAA,CAAC,0BAAc,CAAM,CAAC,cAC/D1C,IAAA,WACE2C,SAAS,CAAC,KAAK,CACfwC,OAAO,CAAEA,CAAA,GAAMmS,kBAAkB,CAAC,MAAM,CAAE,CAC1C1U,KAAK,CAAE,CAACyI,OAAO,CAAC,SAAS,CAAE9H,QAAQ,CAAC,EAAE,CAAE,CACxCP,KAAK,CAAC,yBAAyB,CAAAN,QAAA,CAChC,sBAED,CAAQ,CAAC,EACN,CAAC,cACN1C,IAAA,UACE+L,KAAK,CAAEkF,UAAU,EAAII,QAAS,CAC9BrF,QAAQ,CAAErH,CAAC,EAAI,CACbuM,aAAa,CAACvM,CAAC,CAACE,MAAM,CAACkH,KAAK,CAAC,CAC7B8K,cAAc,CAAClS,CAAC,CAACE,MAAM,CAACkH,KAAK,CAAE,MAAM,CAAC,CACxC,CAAE,CACFoN,OAAO,CAAExU,CAAC,EAAIA,CAAC,CAACE,MAAM,CAACuU,MAAM,CAAC,CAAE,CAChCtN,WAAW,CAAC,uBAAuB,CACnClJ,KAAK,CAAE,CAACa,UAAU,CAAC,GAAG,CAAE,CACzB,CAAC,EACG,CAAC,CACPgO,YAAY,GAAK,MAAM,EAAIF,aAAa,CAACtI,MAAM,CAAG,CAAC,eAClD/I,KAAA,QAAK0C,KAAK,CAAE,CACVwB,QAAQ,CAAC,UAAU,CACnBiI,GAAG,CAAC,MAAM,CACVa,IAAI,CAAC,CAAC,CACNd,KAAK,CAAC,CAAC,CACPhB,MAAM,CAAC,IAAI,CACX1H,UAAU,CAAC,iFAAiF,CAC5FyH,cAAc,CAAC,YAAY,CAC3BG,MAAM,CAAC,mCAAmC,CAC1CjF,YAAY,CAAC,EAAE,CACfrC,SAAS,CAAC,CAAC,CACXqV,SAAS,CAAC,GAAG,CACbC,SAAS,CAAC,MAAM,CAChB9N,SAAS,CAAC,oEACZ,CAAE,CAAA9I,QAAA,eACA1C,IAAA,QAAK4C,KAAK,CAAE,CACVyI,OAAO,CAAC,WAAW,CACnB9H,QAAQ,CAAC,EAAE,CACXE,UAAU,CAAC,GAAG,CACdM,KAAK,CAAC,uBAAuB,CAC7BqU,YAAY,CAAC,mCAAmC,CAChDI,aAAa,CAAC,WAAW,CACzB1U,aAAa,CAAC,OAChB,CAAE,CAAApB,QAAA,CAAC,0CAEH,CAAK,CAAC,CACL6O,aAAa,CAAC9K,GAAG,CAAC,CAACwQ,MAAM,CAAE6B,CAAC,gBAC3B5Y,KAAA,QAEEiF,OAAO,CAAEA,CAAA,GAAM6R,cAAc,CAACC,MAAM,CAAE,CACtCrU,KAAK,CAAE,CACLyI,OAAO,CAAC,WAAW,CACnBkB,MAAM,CAAC,SAAS,CAChB6L,YAAY,CAAEU,CAAC,CAAGvH,aAAa,CAACtI,MAAM,CAAG,CAAC,CAAG,kCAAkC,CAAG,MAAM,CACxFyD,UAAU,CAAC,UAAU,CACrBhJ,UAAU,CAAC,aACb,CAAE,CACF6V,YAAY,CAAE5U,CAAC,EAAI,CACjBA,CAAC,CAAC6U,aAAa,CAAC5W,KAAK,CAACc,UAAU,CAAG,oFAAoF,CACvHiB,CAAC,CAAC6U,aAAa,CAAC5W,KAAK,CAAC6W,UAAU,CAAG,mCAAmC,CACtE9U,CAAC,CAAC6U,aAAa,CAAC5W,KAAK,CAACiW,WAAW,CAAG,MAAM,CAC5C,CAAE,CACFa,YAAY,CAAE/U,CAAC,EAAI,CACjBA,CAAC,CAAC6U,aAAa,CAAC5W,KAAK,CAACc,UAAU,CAAG,aAAa,CAChDiB,CAAC,CAAC6U,aAAa,CAAC5W,KAAK,CAAC6W,UAAU,CAAG,MAAM,CACzC9U,CAAC,CAAC6U,aAAa,CAAC5W,KAAK,CAACiW,WAAW,CAAG,MAAM,CAC5C,CAAE,CAAAnW,QAAA,eAEFxC,KAAA,QAAK0C,KAAK,CAAE,CACVa,UAAU,CAAC,GAAG,CACdF,QAAQ,CAAC,EAAE,CACXQ,KAAK,CAAC,SAAS,CACfZ,YAAY,CAAC,CAAC,CACdC,OAAO,CAAC,MAAM,CACdC,UAAU,CAAC,QAAQ,CACnBC,GAAG,CAAC,CACN,CAAE,CAAAZ,QAAA,eACA1C,IAAA,SAAM4C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAE,CAAAb,QAAA,CAAC,cAAE,CAAM,CAAC,CACpCuU,MAAM,CAACE,YAAY,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAC/B,CAAC,cACNpX,IAAA,QAAK4C,KAAK,CAAE,CACVW,QAAQ,CAAC,EAAE,CACXQ,KAAK,CAAC,uBAAuB,CAC7BE,UAAU,CAAC,GAAG,CACd4U,WAAW,CAAC,EACd,CAAE,CAAAnW,QAAA,CACCuU,MAAM,CAACE,YAAY,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC5Q,KAAK,CAAC,CAAC,CAAC,CAACmT,IAAI,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC,CAAC,CACtD,CAAC,GAvCDd,CAwCF,CACN,CAAC,EACC,CACN,cACD5Y,KAAA,QAAK0C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEmK,OAAO,CAAC,GAAG,CAAE1J,SAAS,CAAC,CAAC,CAAE,CAAAtB,QAAA,EAAEoD,IAAI,CAAC,CAAC,CAAC,CAACgM,OAAO,CAAC,CAAC,CAAC,CAAC,IAAE,CAAChM,IAAI,CAAC,CAAC,CAAC,CAACgM,OAAO,CAAC,CAAC,CAAC,EAAM,CAAC,EAClG,CAAC,cAEN9R,IAAA,QAAK4C,KAAK,CAAE,CAACQ,OAAO,CAAC,MAAM,CAAEE,GAAG,CAAC,CAAC,CAAE,CAAAZ,QAAA,cAClC1C,IAAA,WAAQ2C,SAAS,CAAC,iBAAiB,CAACwC,OAAO,CAAEoR,MAAO,CAAC3T,KAAK,CAAE,CAAC6V,IAAI,CAAC,CAAC,CAAE,CAAA/V,QAAA,CAAC,mBAAO,CAAQ,CAAC,CACnF,CAAC,cACNxC,KAAA,QAAK0C,KAAK,CAAE,CAACQ,OAAO,CAAC,MAAM,CAAEwI,aAAa,CAAC,QAAQ,CAAEtI,GAAG,CAAC,CAAC,CAAE,CAAAZ,QAAA,eAC1D1C,IAAA,SAAM4C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEmK,OAAO,CAAC,IAAI,CAAE,CAAAhL,QAAA,CAAC,iBAAe,CAAM,CAAC,cAChE1C,IAAA,QAAA0C,QAAA,CACG,CAAC,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC+D,GAAG,CAAC2P,CAAC,eAC1ClW,KAAA,UAAe0C,KAAK,CAAE,CAACC,WAAW,CAAC,EAAE,CAAE,CAAAH,QAAA,eACrC1C,IAAA,UAAO6L,IAAI,CAAC,UAAU,CAACe,OAAO,CAAEmC,KAAK,CAACsH,QAAQ,CAACD,CAAC,CAAE,CAACpK,QAAQ,CAAEA,CAAA,GAAMmK,UAAU,CAACC,CAAC,CAAE,CAAE,CAAC,IAAC,CAACA,CAAC,GAD7EA,CAEL,CACR,CAAC,CACC,CAAC,EACH,CAAC,cACNlW,KAAA,UAAO0C,KAAK,CAAE,CAACQ,OAAO,CAAC,MAAM,CAAEwI,aAAa,CAAC,QAAQ,CAAEtI,GAAG,CAAC,CAAC,CAAE,CAAAZ,QAAA,eAC5D1C,IAAA,SAAM4C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEmK,OAAO,CAAC,IAAI,CAAE,CAAAhL,QAAA,CAAC,cAAY,CAAM,CAAC,cAC7DxC,KAAA,WAAQ6L,KAAK,CAAEkD,QAAS,CAACjD,QAAQ,CAAErH,CAAC,EAAIuK,WAAW,CAACvK,CAAC,CAACE,MAAM,CAACkH,KAAK,CAAE,CAAArJ,QAAA,eAClE1C,IAAA,WAAQ+L,KAAK,CAAC,SAAS,CAAArJ,QAAA,CAAC,SAAO,CAAQ,CAAC,cACxC1C,IAAA,WAAQ+L,KAAK,CAAC,kBAAkB,CAAArJ,QAAA,CAAC,kBAAgB,CAAQ,CAAC,cAC1D1C,IAAA,WAAQ+L,KAAK,CAAC,eAAe,CAAArJ,QAAA,CAAC,eAAa,CAAQ,CAAC,cACpD1C,IAAA,WAAQ+L,KAAK,CAAC,UAAU,CAAArJ,QAAA,CAAC,eAAa,CAAQ,CAAC,EACzC,CAAC,EACJ,CAAC,cACRxC,KAAA,UAAO0C,KAAK,CAAE,CAACQ,OAAO,CAAC,MAAM,CAAEwI,aAAa,CAAC,QAAQ,CAAEtI,GAAG,CAAC,CAAC,CAAE,CAAAZ,QAAA,eAC5D1C,IAAA,SAAM4C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEmK,OAAO,CAAC,IAAI,CAAE,CAAAhL,QAAA,CAAC,2BAAyB,CAAM,CAAC,cAC1E1C,IAAA,UAAO6L,IAAI,CAAC,QAAQ,CAACgO,GAAG,CAAC,GAAG,CAACC,GAAG,CAAC,GAAG,CAACC,IAAI,CAAC,KAAK,CAAChO,KAAK,CAAEoD,SAAU,CAACnD,QAAQ,CAAErH,CAAC,EAAIyK,YAAY,CAACzK,CAAC,CAACE,MAAM,CAACkH,KAAK,CAAE,CAAE,CAAC,EAC5G,CAAC,cACR7L,KAAA,QAAK0C,KAAK,CAAE,CAACQ,OAAO,CAAC,MAAM,CAAEE,GAAG,CAAC,EAAE,CAAEgV,QAAQ,CAAC,MAAM,CAAE,CAAA5V,QAAA,eACpDxC,KAAA,UAAAwC,QAAA,eAAO1C,IAAA,UAAO6L,IAAI,CAAC,UAAU,CAACe,OAAO,CAAEyC,WAAY,CAACrD,QAAQ,CAAErH,CAAC,EAAI2K,cAAc,CAAC3K,CAAC,CAACE,MAAM,CAAC+H,OAAO,CAAE,CAAE,CAAC,gBAAa,EAAO,CAAC,cAC5H1M,KAAA,UAAAwC,QAAA,eAAO1C,IAAA,UAAO6L,IAAI,CAAC,UAAU,CAACe,OAAO,CAAE2C,MAAO,CAACvD,QAAQ,CAAErH,CAAC,EAAI6K,SAAS,CAAC7K,CAAC,CAACE,MAAM,CAAC+H,OAAO,CAAE,CAAE,CAAC,iBAAc,EAAO,CAAC,EAChH,CAAC,cACN1M,KAAA,QAAK0C,KAAK,CAAE,CAACQ,OAAO,CAAC,MAAM,CAAEwI,aAAa,CAAC,QAAQ,CAAEtI,GAAG,CAAC,CAAC,CAAE,CAAAZ,QAAA,eAC1D1C,IAAA,SAAM4C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEmK,OAAO,CAAC,IAAI,CAAE,CAAAhL,QAAA,CAAC,gBAAc,CAAM,CAAC,cAC/DxC,KAAA,QAAK0C,KAAK,CAAE,CAACQ,OAAO,CAAC,MAAM,CAAEE,GAAG,CAAC,EAAE,CAAE,CAAAZ,QAAA,eACnCxC,KAAA,UAAAwC,QAAA,eAAO1C,IAAA,UAAO6L,IAAI,CAAC,OAAO,CAAC7K,IAAI,CAAC,MAAM,CAAC+K,KAAK,CAAC,QAAQ,CAACa,OAAO,CAAE6C,QAAQ,GAAG,QAAS,CAACzD,QAAQ,CAAEA,CAAA,GAAI0D,WAAW,CAAC,QAAQ,CAAE,CAAE,CAAC,aAAU,EAAO,CAAC,cAC7IxP,KAAA,UAAAwC,QAAA,eAAO1C,IAAA,UAAO6L,IAAI,CAAC,OAAO,CAAC7K,IAAI,CAAC,MAAM,CAAC+K,KAAK,CAAC,QAAQ,CAACa,OAAO,CAAE6C,QAAQ,GAAG,QAAS,CAACzD,QAAQ,CAAEA,CAAA,GAAI0D,WAAW,CAAC,QAAQ,CAAE,CAAE,CAAC,aAAU,EAAO,CAAC,EAC1I,CAAC,cACN1P,IAAA,UAAO8L,WAAW,CAAC,yBAAyB,CAACC,KAAK,CAAE4D,SAAU,CAAC3D,QAAQ,CAAErH,CAAC,EAAEiL,YAAY,CAACjL,CAAC,CAACE,MAAM,CAACkH,KAAK,CAAE,CAAE,CAAC,EACzG,CAAC,cACN/L,IAAA,WAAQ2C,SAAS,CAAC,iBAAiB,CAACwC,OAAO,CAAE4N,IAAK,CAACnQ,KAAK,CAAE,CAACoX,SAAS,CAAC,YAAY,CAAE,CAAAtX,QAAA,CAAEiP,IAAI,CAAC/P,eAAe,CAAS,CAAC,EAChH,CAAC,cACN5B,IAAA,QAAA0C,QAAA,CACGuL,KAAK,CAAChF,MAAM,GAAK,CAAC,cACjB/I,KAAA,QAAK0C,KAAK,CAAE,CAAC8I,SAAS,CAAC,QAAQ,CAAEL,OAAO,CAAC,WAAW,CAAE3H,UAAU,CAAC,iBAAiB,CAAEyH,cAAc,CAAC,YAAY,CAAE9E,YAAY,CAAC,EAAE,CAAEiF,MAAM,CAAC,wBAAwB,CAAE,CAAA5I,QAAA,eACjK1C,IAAA,QAAK4C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEJ,YAAY,CAAC,EAAE,CAAE,CAAAT,QAAA,CAAC,cAAE,CAAK,CAAC,cACpDxC,KAAA,MAAG0C,KAAK,CAAE,CAACmB,KAAK,CAAC,cAAc,CAAER,QAAQ,CAAC,EAAE,CAAE,CAAAb,QAAA,EAAC,QAAM,cAAA1C,IAAA,MAAG4C,KAAK,CAAE,CAACmB,KAAK,CAAC,gBAAgB,CAAE,CAAArB,QAAA,CAAC,kBAAgB,CAAG,CAAC,8BAA2B,EAAG,CAAC,EACzI,CAAC,cAEN1C,IAAA,QAAK4C,KAAK,CAAE,CAACQ,OAAO,CAAC,MAAM,CAAEwI,aAAa,CAAC,QAAQ,CAAEtI,GAAG,CAAC,EAAE,CAAE,CAAAZ,QAAA,CAC1DuL,KAAK,CAACxH,GAAG,CAAC,CAACwT,EAAE,CAAEC,GAAG,QAAAC,WAAA,oBACjBja,KAAA,QAAiB0C,KAAK,CAAE,CAACc,UAAU,CAAC,iBAAiB,CAAEyH,cAAc,CAAC,YAAY,CAAEG,MAAM,CAAC,+BAA+B,CAAEjF,YAAY,CAAC,EAAE,CAAEgF,OAAO,CAAC,EAAE,CAAEG,SAAS,CAAC,6BAA6B,CAAEkB,UAAU,CAAC,eAAe,CAAEH,MAAM,CAAC,SAAS,CAAE,CAACgN,YAAY,CAAE5U,CAAC,EAAIA,CAAC,CAAC6U,aAAa,CAAC5W,KAAK,CAAC0J,SAAS,CAAG,kBAAmB,CAACoN,YAAY,CAAE/U,CAAC,EAAIA,CAAC,CAAC6U,aAAa,CAAC5W,KAAK,CAAC0J,SAAS,CAAG,eAAgB,CAAA5J,QAAA,eAC7XxC,KAAA,QAAK0C,KAAK,CAAE,CAACQ,OAAO,CAAC,MAAM,CAAEoJ,cAAc,CAAC,eAAe,CAAEnJ,UAAU,CAAC,YAAY,CAAEC,GAAG,CAAC,EAAE,CAAEgV,QAAQ,CAAC,MAAM,CAAE,CAAA5V,QAAA,eAC7GxC,KAAA,QAAK0C,KAAK,CAAE,CAAC6V,IAAI,CAAC,CAAC,CAAE,CAAA/V,QAAA,eACnBxC,KAAA,QAAK0C,KAAK,CAAE,CAACQ,OAAO,CAAC,MAAM,CAAEC,UAAU,CAAC,QAAQ,CAAEC,GAAG,CAAC,EAAE,CAAEH,YAAY,CAAC,EAAE,CAAE,CAAAT,QAAA,eACzE1C,IAAA,SAAM4C,KAAK,CAAE,CAACc,UAAU,CAAC,mDAAmD,CAAEK,KAAK,CAAC,OAAO,CAAEqC,KAAK,CAAC,EAAE,CAAED,MAAM,CAAC,EAAE,CAAEE,YAAY,CAAC,KAAK,CAAEjD,OAAO,CAAC,MAAM,CAAE4H,UAAU,CAAC,QAAQ,CAAEvH,UAAU,CAAC,GAAG,CAAEF,QAAQ,CAAC,EAAE,CAAE,CAAAb,QAAA,CAAEwX,GAAG,CAAG,CAAC,CAAO,CAAC,cACzNha,KAAA,QAAK0C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEE,UAAU,CAAC,GAAG,CAAE,CAAAf,QAAA,EAAC,GAAC,CAACuX,EAAE,CAACG,WAAW,CAAC,MAAI,EAAK,CAAC,cACtEla,KAAA,QAAK0C,KAAK,CAAE,CAACmB,KAAK,CAAC,cAAc,CAAER,QAAQ,CAAC,EAAE,CAAE,CAAAb,QAAA,EAAC,SAAE,CAACuX,EAAE,CAACI,SAAS,CAAC,YAAU,EAAK,CAAC,cACjFna,KAAA,QAAK0C,KAAK,CAAE,CAACc,UAAU,CAACuW,EAAE,CAACK,WAAW,CAAG,IAAI,CAAG,0BAA0B,CAAG,0BAA0B,CAAEvW,KAAK,CAACkW,EAAE,CAACK,WAAW,CAAG,IAAI,CAAG,gBAAgB,CAAG,SAAS,CAAEjP,OAAO,CAAC,UAAU,CAAEhF,YAAY,CAAC,CAAC,CAAE9C,QAAQ,CAAC,EAAE,CAAEE,UAAU,CAAC,GAAG,CAAE,CAAAf,QAAA,EAAE6X,IAAI,CAACC,KAAK,CAAC,CAACP,EAAE,CAACK,WAAW,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC,YAAU,EAAK,CAAC,EACzR,CAAC,cACNpa,KAAA,QAAK0C,KAAK,CAAE,CAACmB,KAAK,CAAC,cAAc,CAAER,QAAQ,CAAC,EAAE,CAAEJ,YAAY,CAAC,EAAE,CAAE,CAAAT,QAAA,EAAC,eAAG,CAACuX,EAAE,CAACQ,IAAI,CAACd,IAAI,CAAC,KAAK,CAAC,EAAM,CAAC,cAChGzZ,KAAA,QAAK0C,KAAK,CAAE,CAACQ,OAAO,CAAC,MAAM,CAAEE,GAAG,CAAC,CAAC,CAAEgV,QAAQ,CAAC,MAAM,CAAE,CAAA5V,QAAA,eACnDxC,KAAA,CAACsC,IAAI,EAAAE,QAAA,EAAC,eAAG,CAAC,EAAAyX,WAAA,CAACF,EAAE,CAACS,OAAO,UAAAP,WAAA,UAAAA,WAAA,CAAI,CAAC,EAAErI,OAAO,CAAC,CAAC,CAAC,CAAC,UAAQ,EAAM,CAAC,cACtD9R,IAAA,CAACwC,IAAI,EAAAE,QAAA,CAAE,CAACuX,EAAE,CAAClL,KAAK,EAAE,EAAE,EAAE4K,IAAI,CAAC,IAAI,CAAC,CAAO,CAAC,EACrC,CAAC,EACH,CAAC,cACNzZ,KAAA,QAAK0C,KAAK,CAAE,CAACQ,OAAO,CAAC,MAAM,CAAEE,GAAG,CAAC,CAAC,CAAEgV,QAAQ,CAAC,MAAM,CAAE,CAAA5V,QAAA,eACnDxC,KAAA,WAAQyC,SAAS,CAAC,KAAK,CAACwC,OAAO,CAAEA,CAAA,GAAItD,SAAS,CAACoY,EAAE,CAAE,CAAAvX,QAAA,EAAC,eAAG,CAACiP,IAAI,CAAC9P,SAAS,EAAS,CAAC,cAChF3B,KAAA,WAAQyC,SAAS,CAAC,iBAAiB,CAACwC,OAAO,CAAEA,CAAA,GAAIrD,UAAU,CAACmY,EAAE,CAAE,CAAAvX,QAAA,EAAC,eAAG,CAACiP,IAAI,CAAC7P,UAAU,EAAS,CAAC,EAC3F,CAAC,EACH,CAAC,CACL6M,IAAI,CAACsL,EAAE,CAACxF,EAAE,CAAC,eACVvU,KAAA,QAAKyC,SAAS,CAAC,KAAK,CAACC,KAAK,CAAE,CAACoB,SAAS,CAAC,EAAE,CAAE,CAAAtB,QAAA,eACzC1C,IAAA,QAAK4C,KAAK,CAAE,CAACa,UAAU,CAAC,GAAG,CAAEN,YAAY,CAAC,CAAC,CAAE,CAAAT,QAAA,CAAC,oCAA6B,CAAK,CAAC,cACjFxC,KAAA,QAAK0C,KAAK,CAAE,CAACmB,KAAK,CAAC,cAAc,CAAER,QAAQ,CAAC,EAAE,CAAE,CAAAb,QAAA,EAAC,GAAC,CAACiM,IAAI,CAACsL,EAAE,CAACxF,EAAE,CAAC,CAAC2F,WAAW,EAAI,GAAG,CAAC,cAAO,CAACzL,IAAI,CAACsL,EAAE,CAACxF,EAAE,CAAC,CAAC4F,SAAS,EAAI,CAAC,CAAC,YAAU,EAAK,CAAC,CACpI1L,IAAI,CAACsL,EAAE,CAACxF,EAAE,CAAC,CAACkG,IAAI,eAAI3a,IAAA,QAAK4C,KAAK,CAAE,CAACmB,KAAK,CAAC,cAAc,CAAER,QAAQ,CAAC,EAAE,CAAES,SAAS,CAAC,CAAC,CAAE,CAAAtB,QAAA,CAAEiM,IAAI,CAACsL,EAAE,CAACxF,EAAE,CAAC,CAACkG,IAAI,CAAM,CAAC,CAC1GhM,IAAI,CAACsL,EAAE,CAACxF,EAAE,CAAC,CAACgG,IAAI,eAAIva,KAAA,QAAK0C,KAAK,CAAE,CAACmB,KAAK,CAAC,cAAc,CAAER,QAAQ,CAAC,EAAE,CAAE,CAAAb,QAAA,EAAC,eAAG,CAACiM,IAAI,CAACsL,EAAE,CAACxF,EAAE,CAAC,CAACgG,IAAI,CAACd,IAAI,CAAC,KAAK,CAAC,EAAM,CAAC,EAC1G,CACN,GA3BOM,EAAE,CAACxF,EA4BR,CAAC,EACP,CAAC,CACC,CACN,CACE,CAAC,EACH,CAAC,CACK,CAAC,cAEdzU,IAAA,CAAC8C,WAAW,EAACI,IAAI,CAAC,cAAI,CAACF,KAAK,CAAC,gBAAgB,CAACC,WAAW,CAAC,8DAA8D,CAAAP,QAAA,cACtHxC,KAAA,QAAK0C,KAAK,CAAE,CAACQ,OAAO,CAAC,MAAM,CAAEwI,aAAa,CAAC,QAAQ,CAAEtI,GAAG,CAAC,EAAE,CAAE,CAAAZ,QAAA,eAC3DxC,KAAA,QAAK0C,KAAK,CAAE,CAACQ,OAAO,CAAC,MAAM,CAAEkV,QAAQ,CAAC,MAAM,CAAEhV,GAAG,CAAC,EAAE,CAAE,CAAAZ,QAAA,EACnDsD,KAAK,CAACQ,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAACC,GAAG,CAACmU,CAAC,eACrB1a,KAAA,QAAqB0C,KAAK,CAAE,CAACyI,OAAO,CAAC,EAAE,CAAEC,MAAM,CAAC,+BAA+B,CAAEjF,YAAY,CAAC,EAAE,CAAE3C,UAAU,CAAC,kBAAkB,CAAEwB,QAAQ,CAAC,GAAG,CAAE,CAAAxC,QAAA,eAC7I1C,IAAA,QAAK4C,KAAK,CAAE,CAACa,UAAU,CAAC,GAAG,CAAE,CAAAf,QAAA,CAAEkY,CAAC,CAAC5Z,IAAI,CAAM,CAAC,cAC5Cd,KAAA,QAAK0C,KAAK,CAAE,CAAC8K,OAAO,CAAC,GAAG,CAAEnK,QAAQ,CAAC,EAAE,CAAE,CAAAb,QAAA,EAAEkY,CAAC,CAAC7T,UAAU,CAAC,SAAO,EAAK,CAAC,cACnE/G,IAAA,QAAK4C,KAAK,CAAE,CAACoB,SAAS,CAAC,EAAE,CAAE,CAAAtB,QAAA,cAAC1C,IAAA,WAAQ2C,SAAS,CAAC,KAAK,CAACwC,OAAO,CAAEA,CAAA,GAAI0N,cAAc,CAAC+H,CAAC,CAAE,CAAAlY,QAAA,CAAC,iBAAe,CAAQ,CAAC,CAAK,CAAC,GAH1GkY,CAAC,CAAC5T,OAIP,CACN,CAAC,CACDhB,KAAK,CAACiD,MAAM,GAAG,CAAC,eAAIjJ,IAAA,QAAK4C,KAAK,CAAE,CAAC8K,OAAO,CAAC,GAAG,CAAE,CAAAhL,QAAA,CAAC,kCAA2B,CAAK,CAAC,EAC9E,CAAC,CACL2L,YAAY,eACXnO,KAAA,QAAK0C,KAAK,CAAE,CAAC0I,MAAM,CAAC,+BAA+B,CAAEjF,YAAY,CAAC,EAAE,CAAEgF,OAAO,CAAC,EAAE,CAAE3H,UAAU,CAAC,kBAAkB,CAAE,CAAAhB,QAAA,eAC/GxC,KAAA,QAAK0C,KAAK,CAAE,CAACa,UAAU,CAAC,GAAG,CAAEN,YAAY,CAAC,CAAC,CAAE,CAAAT,QAAA,EAAC,oBAAa,CAAC2L,YAAY,CAACrN,IAAI,EAAM,CAAC,cACpFd,KAAA,OAAI0C,KAAK,CAAE,CAAC2K,MAAM,CAAC,CAAC,CAAEsL,WAAW,CAAC,EAAE,CAAE,CAAAnW,QAAA,EACnC6L,UAAU,CAAC9H,GAAG,CAAC,CAACrB,CAAC,CAAC0T,CAAC,gBAClB5Y,KAAA,OAAAwC,QAAA,eAAY1C,IAAA,WAAA0C,QAAA,CAAS0C,CAAC,CAACyV,KAAK,CAAS,CAAC,WAAG,CAACzV,CAAC,CAAC0V,QAAQ,CAAC,GAAC,cAAA5a,KAAA,SAAM0C,KAAK,CAAE,CAAC8K,OAAO,CAAC,IAAI,CAAE,CAAAhL,QAAA,EAAC,KAAG,CAAC0C,CAAC,CAAC2V,gBAAgB,CAAC,MAAI,EAAM,CAAC,GAA5GjC,CAAgH,CAC1H,CAAC,CACDvK,UAAU,CAACtF,MAAM,GAAG,CAAC,eAAIjJ,IAAA,OAAI4C,KAAK,CAAE,CAAC8K,OAAO,CAAC,IAAI,CAAE,CAAAhL,QAAA,CAAC,0BAAmB,CAAI,CAAC,EAC3E,CAAC,EACF,CACN,EACE,CAAC,CACK,CAAC,EACT,CACN,CAEAmM,IAAI,GAAK,QAAQ,eAChB3O,KAAA,QAAAwC,QAAA,eACE1C,IAAA,OAAI2C,SAAS,CAAC,eAAe,CAAAD,QAAA,CAAC,uCAAsB,CAAI,CAAC,cAC3D1C,IAAA,CAAC8C,WAAW,EAACI,IAAI,CAAC,cAAI,CAACF,KAAK,CAAC,oBAAoB,CAACC,WAAW,CAAC,2CAA2C,CAAAP,QAAA,cACvGxC,KAAA,QAAK0C,KAAK,CAAE,CAACQ,OAAO,CAAC,MAAM,CAAEkV,QAAQ,CAAC,MAAM,CAAEhV,GAAG,CAAC,EAAE,CAAE,CAAAZ,QAAA,eACpDxC,KAAA,QAAK0C,KAAK,CAAE,CAAC6V,IAAI,CAAC,WAAW,CAAErV,OAAO,CAAC,MAAM,CAAEwI,aAAa,CAAC,QAAQ,CAAEtI,GAAG,CAAC,EAAE,CAAE,CAAAZ,QAAA,eAC7E1C,IAAA,QAAK4C,KAAK,CAAE,CAACa,UAAU,CAAC,GAAG,CAAE,CAAAf,QAAA,CAAC,eAAa,CAAK,CAAC,cACjD1C,IAAA,WAAQ2C,SAAS,CAAC,KAAK,CAACwC,OAAO,CAAEA,CAAA,GAAIqQ,gBAAgB,CAAC,MAAM,CAAE5P,MAAM,CAAE,CAAAlD,QAAA,CAAC,WAAS,CAAQ,CAAC,cACzF1C,IAAA,WAAQ2C,SAAS,CAAC,KAAK,CAACwC,OAAO,CAAEA,CAAA,GAAIqQ,gBAAgB,CAAC,MAAM,CAAE1P,IAAI,CAAE,CAAApD,QAAA,CAAC,WAAS,CAAQ,CAAC,cACvF1C,IAAA,WAAQ2C,SAAS,CAAC,iBAAiB,CAACwC,OAAO,CAAEyP,SAAU,CAAAlS,QAAA,CAAC,iBAAe,CAAQ,CAAC,cAChF1C,IAAA,WAAQ2C,SAAS,CAAC,KAAK,CAACwC,OAAO,CAAEkQ,eAAgB,CAAA3S,QAAA,CAAEiP,IAAI,CAACxQ,UAAU,CAAS,CAAC,CAC3EgG,KAAK,cACJjH,KAAA,QAAK0C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEmK,OAAO,CAAC,IAAI,CAAE,CAAAhL,QAAA,EAAC,eAAa,CAAC2E,QAAQ,CAAC,oCAAkC,EAAK,CAAC,cAExGrH,IAAA,QAAK4C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEmK,OAAO,CAAC,IAAI,CAAE,CAAAhL,QAAA,CAAC,0DAAwD,CAAK,CACvG,EACE,CAAC,cACNxC,KAAA,QAAK0C,KAAK,CAAE,CAAC6V,IAAI,CAAC,WAAW,CAAE,CAAA/V,QAAA,eAC7BxC,KAAA,QAAK0C,KAAK,CAAE,CAACa,UAAU,CAAC,GAAG,CAAEN,YAAY,CAAC,CAAC,CAAE,CAAAT,QAAA,EAAC,eAAG,CAACiP,IAAI,CAAC5P,iBAAiB,EAAM,CAAC,cAC/E7B,KAAA,OAAI0C,KAAK,CAAE,CAAC2K,MAAM,CAAC,CAAC,CAAEsL,WAAW,CAAC,EAAE,CAAE,CAAAnW,QAAA,EACnCqN,cAAc,CAACtJ,GAAG,CAAC,CAACuU,CAAC,CAAClC,CAAC,gBACtB5Y,KAAA,OAAAwC,QAAA,eAAY1C,IAAA,WAAA0C,QAAA,CAASsY,CAAC,CAACha,IAAI,CAAS,CAAC,WAAG,cAAAhB,IAAA,MAAGkU,IAAI,QAAAxK,MAAA,CAASsR,CAAC,CAACC,KAAK,CAAG,CAACrY,KAAK,CAAE,CAACmB,KAAK,CAAC,eAAe,CAAEN,UAAU,CAAC,GAAG,CAAE,CAAAf,QAAA,CAAEsY,CAAC,CAACC,KAAK,CAAI,CAAC,GAAvHnC,CAA2H,CACrI,CAAC,CACD/I,cAAc,CAAC9G,MAAM,GAAG,CAAC,eAAIjJ,IAAA,OAAI4C,KAAK,CAAE,CAAC8K,OAAO,CAAC,GAAG,CAAE,CAAAhL,QAAA,CAAC,8BAAuB,CAAI,CAAC,EAClF,CAAC,cACL1C,IAAA,QAAK4C,KAAK,CAAE,CAACoB,SAAS,CAAC,EAAE,CAAE,CAAAtB,QAAA,cACzB1C,IAAA,WAAQ2C,SAAS,CAAC,KAAK,CAACwC,OAAO,CAAE/D,aAAc,CAAAsB,QAAA,CAAEiP,IAAI,CAACvQ,aAAa,CAAS,CAAC,CAC1E,CAAC,EACH,CAAC,cACNlB,KAAA,QAAK0C,KAAK,CAAE,CAAC6V,IAAI,CAAC,WAAW,CAAE,CAAA/V,QAAA,eAC7B1C,IAAA,QAAK4C,KAAK,CAAE,CAACa,UAAU,CAAC,GAAG,CAAEN,YAAY,CAAC,CAAC,CAAE,CAAAT,QAAA,CAAC,cAAY,CAAK,CAAC,cAChExC,KAAA,MAAG0C,KAAK,CAAE,CAAC8K,OAAO,CAAC,IAAI,CAAE,CAAAhL,QAAA,EAAC,MAAI,cAAA1C,IAAA,OAAA0C,QAAA,CAAI,uBAAqB,CAAI,CAAC,yGAAiG,EAAG,CAAC,EAC9J,CAAC,EACH,CAAC,CACK,CAAC,EACT,CACN,CAEAmM,IAAI,GAAK,UAAU,eAClB3O,KAAA,QAAAwC,QAAA,eACE1C,IAAA,OAAI2C,SAAS,CAAC,eAAe,CAAAD,QAAA,CAAC,qCAAyB,CAAI,CAAC,cAC9D1C,IAAA,CAAC8C,WAAW,EAACI,IAAI,CAAC,cAAI,CAACF,KAAK,CAAC,gBAAgB,CAACC,WAAW,CAAC,wDAAwD,CAAAP,QAAA,cAChHxC,KAAA,QAAK0C,KAAK,CAAE,CAACQ,OAAO,CAAC,MAAM,CAAEkV,QAAQ,CAAC,MAAM,CAAEhV,GAAG,CAAC,EAAE,CAAE,CAAAZ,QAAA,eACpDxC,KAAA,QAAK0C,KAAK,CAAE,CAAC6V,IAAI,CAAC,WAAW,CAAE,CAAA/V,QAAA,eAC7B1C,IAAA,QAAK4C,KAAK,CAAE,CAACa,UAAU,CAAC,GAAG,CAAEN,YAAY,CAAC,CAAC,CAAE,CAAAT,QAAA,CAAC,mBAAiB,CAAK,CAAC,cACrExC,KAAA,MAAG0C,KAAK,CAAE,CAAC8K,OAAO,CAAC,IAAI,CAAE,CAAAhL,QAAA,EAAC,mBAAiB,cAAA1C,IAAA,WAAA0C,QAAA,CAASuN,MAAM,CAAChF,WAAW,CAAC,CAAC,CAAS,CAAC,mEAAgE,EAAG,CAAC,EACnJ,CAAC,cACN/K,KAAA,QAAK0C,KAAK,CAAE,CAAC6V,IAAI,CAAC,WAAW,CAAErV,OAAO,CAAC,MAAM,CAAEwI,aAAa,CAAC,QAAQ,CAAEtI,GAAG,CAAC,CAAC,CAAE,CAAAZ,QAAA,eAC5E1C,IAAA,QAAK4C,KAAK,CAAE,CAACa,UAAU,CAAC,GAAG,CAAE,CAAAf,QAAA,CAAC,iBAAe,CAAK,CAAC,cACnD1C,IAAA,UAAO4C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEmK,OAAO,CAAC,IAAI,CAAE,CAAAhL,QAAA,CAAC,eAAa,CAAO,CAAC,cAChE1C,IAAA,UAAO6L,IAAI,CAAC,QAAQ,CAACE,KAAK,CAAEsE,MAAO,CAACwJ,GAAG,CAAC,GAAG,CAAC7N,QAAQ,CAAErH,CAAC,EAAE2L,SAAS,CAACuB,MAAM,CAAClN,CAAC,CAACE,MAAM,CAACkH,KAAK,CAAC,EAAI,CAAC,CAAE,CAAE,CAAC,cACnG/L,IAAA,UAAO4C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEmK,OAAO,CAAC,IAAI,CAAE,CAAAhL,QAAA,CAAC,YAAU,CAAO,CAAC,cAC7D1C,IAAA,WAAQ+L,KAAK,CAAEoE,QAAS,CAACnE,QAAQ,CAAErH,CAAC,EAAEyL,WAAW,CAACzL,CAAC,CAACE,MAAM,CAACkH,KAAK,CAAE,CAAArJ,QAAA,CAC/D0S,eAAe,CAAC3O,GAAG,CAACyU,IAAI,eAAIlb,IAAA,WAAmB+L,KAAK,CAAEmP,IAAK,CAAAxY,QAAA,CAAEwY,IAAI,EAAxBA,IAAiC,CAAC,CAAC,CACvE,CAAC,cACThb,KAAA,QAAK0C,KAAK,CAAE,CAACoB,SAAS,CAAC,CAAC,CAAEP,UAAU,CAAC,GAAG,CAAE,CAAAf,QAAA,EAAC,SAAE,CAACkP,eAAe,CAAC,GAAC,CAACzB,QAAQ,EAAM,CAAC,EAC5E,CAAC,cACNjQ,KAAA,QAAK0C,KAAK,CAAE,CAAC6V,IAAI,CAAC,WAAW,CAAE,CAAA/V,QAAA,eAC7B1C,IAAA,QAAK4C,KAAK,CAAE,CAACa,UAAU,CAAC,GAAG,CAAEN,YAAY,CAAC,CAAC,CAAE,CAAAT,QAAA,CAAC,qBAAmB,CAAK,CAAC,cACvExC,KAAA,OAAI0C,KAAK,CAAE,CAAC2K,MAAM,CAAC,CAAC,CAAEsL,WAAW,CAAC,EAAE,CAAE,CAAAnW,QAAA,eACpC1C,IAAA,OAAA0C,QAAA,CAAI,oCAAkC,CAAI,CAAC,cAC3C1C,IAAA,OAAA0C,QAAA,CAAI,uCAAqC,CAAI,CAAC,cAC9C1C,IAAA,OAAA0C,QAAA,CAAI,0CAAwC,CAAI,CAAC,EAC/C,CAAC,EACF,CAAC,EACH,CAAC,CACK,CAAC,EACT,CACN,CAEAmM,IAAI,GAAK,SAAS,eACjB3O,KAAA,QAAAwC,QAAA,eACE1C,IAAA,OAAI2C,SAAS,CAAC,eAAe,CAAAD,QAAA,CAAC,0BAAmB,CAAI,CAAC,cACxD1C,IAAA,CAAC8C,WAAW,EAACI,IAAI,CAAC,QAAG,CAACF,KAAK,CAAC,uBAAuB,CAACC,WAAW,CAAC,8CAA8C,CAAAP,QAAA,cAC5GxC,KAAA,QAAK0C,KAAK,CAAE,CAACQ,OAAO,CAAC,MAAM,CAAEkV,QAAQ,CAAC,MAAM,CAAEhV,GAAG,CAAC,EAAE,CAAE,CAAAZ,QAAA,eACpDxC,KAAA,QAAK0C,KAAK,CAAE,CAAC6V,IAAI,CAAC,WAAW,CAAErV,OAAO,CAAC,MAAM,CAAEwI,aAAa,CAAC,QAAQ,CAAEtI,GAAG,CAAC,EAAE,CAAE,CAAAZ,QAAA,eAC7ExC,KAAA,UAAO0C,KAAK,CAAE,CAACQ,OAAO,CAAC,MAAM,CAAEwI,aAAa,CAAC,QAAQ,CAAEtI,GAAG,CAAC,CAAC,CAAE,CAAAZ,QAAA,eAC5D1C,IAAA,SAAM4C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEmK,OAAO,CAAC,IAAI,CAAE,CAAAhL,QAAA,CAAC,UAAQ,CAAM,CAAC,cACzD1C,IAAA,UAAO8L,WAAW,CAAC,iBAAiB,CAACC,KAAK,CAAE0E,SAAU,CAACzE,QAAQ,CAAErH,CAAC,EAAE+L,YAAY,CAAC/L,CAAC,CAACE,MAAM,CAACkH,KAAK,CAAE,CAAE,CAAC,EAC/F,CAAC,cACR7L,KAAA,UAAO0C,KAAK,CAAE,CAACQ,OAAO,CAAC,MAAM,CAAEwI,aAAa,CAAC,QAAQ,CAAEtI,GAAG,CAAC,CAAC,CAAE,CAAAZ,QAAA,eAC5D1C,IAAA,SAAM4C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEmK,OAAO,CAAC,IAAI,CAAE,CAAAhL,QAAA,CAAC,QAAM,CAAM,CAAC,cACvD1C,IAAA,WAAQ+L,KAAK,CAAE4E,YAAa,CAAC3E,QAAQ,CAAErH,CAAC,EAAEiM,eAAe,CAACjM,CAAC,CAACE,MAAM,CAACkH,KAAK,CAAE,CAAArJ,QAAA,CACvE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC+D,GAAG,CAAC0U,CAAC,eAAGnb,IAAA,WAAgB+L,KAAK,CAAEoP,CAAE,CAAAzY,QAAA,CAAEyY,CAAC,EAAfA,CAAwB,CAAC,CAAC,CACtD,CAAC,EACJ,CAAC,cACRjb,KAAA,UAAO0C,KAAK,CAAE,CAACQ,OAAO,CAAC,MAAM,CAAEwI,aAAa,CAAC,QAAQ,CAAEtI,GAAG,CAAC,CAAC,CAAE,CAAAZ,QAAA,eAC5D1C,IAAA,SAAM4C,KAAK,CAAE,CAACW,QAAQ,CAAC,EAAE,CAAEmK,OAAO,CAAC,IAAI,CAAE,CAAAhL,QAAA,CAAC,SAAO,CAAM,CAAC,cACxD1C,IAAA,UAAO8L,WAAW,CAAC,kBAAa,CAACC,KAAK,CAAE8E,aAAc,CAAC7E,QAAQ,CAAErH,CAAC,EAAEmM,gBAAgB,CAACnM,CAAC,CAACE,MAAM,CAACkH,KAAK,CAAE,CAAE,CAAC,EACnG,CAAC,cACR/L,IAAA,WAAQ2C,SAAS,CAAC,iBAAiB,CAACwC,OAAO,CAAE2Q,YAAa,CAAApT,QAAA,CAAC,cAAY,CAAQ,CAAC,EAC7E,CAAC,cACNxC,KAAA,QAAK0C,KAAK,CAAE,CAAC6V,IAAI,CAAC,WAAW,CAAE,CAAA/V,QAAA,eAC7B1C,IAAA,QAAK4C,KAAK,CAAE,CAACa,UAAU,CAAC,GAAG,CAAEN,YAAY,CAAC,CAAC,CAAE,CAAAT,QAAA,CAAC,gBAAc,CAAK,CAAC,cAClExC,KAAA,OAAI0C,KAAK,CAAE,CAAC2K,MAAM,CAAC,CAAC,CAAEsL,WAAW,CAAC,EAAE,CAAEzV,OAAO,CAAC,MAAM,CAAEwI,aAAa,CAAC,QAAQ,CAAEtI,GAAG,CAAC,CAAC,CAAE,CAAAZ,QAAA,EAClF6N,OAAO,CAAC9J,GAAG,CAAC,CAAC+C,CAAC,CAACsP,CAAC,gBACf5Y,KAAA,OAAAwC,QAAA,eAAY1C,IAAA,WAAA0C,QAAA,CAAS8G,CAAC,CAACuM,QAAQ,CAAS,CAAC,WAAG,CAACvM,CAAC,CAACwM,MAAM,CAAC,YAAK,CAACxM,CAAC,CAACyM,OAAO,CAAC,GAAC,cAAA/V,KAAA,SAAM0C,KAAK,CAAE,CAAC8K,OAAO,CAAC,GAAG,CAAE,CAAAhL,QAAA,EAAC,KAAG,CAAC8G,CAAC,CAAC/B,IAAI,EAAO,CAAC,GAA5GqR,CAAgH,CAC1H,CAAC,CACDvI,OAAO,CAACtH,MAAM,GAAG,CAAC,eAAIjJ,IAAA,OAAI4C,KAAK,CAAE,CAAC8K,OAAO,CAAC,GAAG,CAAE,CAAAhL,QAAA,CAAC,yCAAuC,CAAI,CAAC,EAC3F,CAAC,EACF,CAAC,EACH,CAAC,CACK,CAAC,EACT,CACN,EAEE,CAAC,EACH,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}