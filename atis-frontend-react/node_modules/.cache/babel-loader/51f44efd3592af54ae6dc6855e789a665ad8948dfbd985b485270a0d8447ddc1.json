{"ast":null,"code":"import _objectSpread from\"C:/Users/mdvec/OneDrive/Documents/YOOBEE-MSE/TERM2/MSE806 Intelligent Transportation Systems/ATIS/ATIS/atis-frontend-react/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useEffect,useState,useMemo,useCallback}from'react';import{MapContainer,TileLayer,Marker,Popup,useMapEvents,Circle,Polyline,useMap}from'react-leaflet';import'leaflet/dist/leaflet.css';import L from'leaflet';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const API='';// CRA proxy forwards to backend\n// Fix Leaflet default icon issue with webpack\ndelete L.Icon.Default.prototype._getIconUrl;L.Icon.Default.mergeOptions({iconRetinaUrl:'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png',iconUrl:'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png',shadowUrl:'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png'});// Custom map icons for different features\nconst mapIcons={origin:new L.Icon({iconUrl:'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png',shadowUrl:'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),destination:new L.Icon({iconUrl:'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png',shadowUrl:'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),stop:new L.Icon({iconUrl:'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png',shadowUrl:'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),trafficWarning:new L.Icon({iconUrl:'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-orange.png',shadowUrl:'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),trafficCritical:new L.Icon({iconUrl:'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-violet.png',shadowUrl:'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]})};const TRANSLATIONS={en:{name:'Advanced Traveler Information System',tagline:'Real-time, multimodal trip planning with intelligent route optimization.',translatorLabel:'Preferred language',offlineCta:'Save offline snapshot',shareLocation:'Share Location',copyCoords:'Copy Coordinates',locationCopied:'Location copied!',tripPlanning:'Trip planning & dynamic routing',realTimeSnapshot:'Real-time snapshot',weatherNow:'Weather now',alertsIncidents:'Alerts & incidents',noAlerts:'No active alerts right now.',findItineraries:'Find itineraries',exportPdf:'Export PDF',suggestAlt:'Suggest alternative',emergencyContacts:'Emergency Contacts'},es:{name:'InformaciÃ³n de Viaje Avanzada',tagline:'PlanificaciÃ³n de viajes multimodal con datos en tiempo real.',translatorLabel:'Idioma preferido',offlineCta:'Guardar informaciÃ³n sin conexiÃ³n',shareLocation:'Compartir UbicaciÃ³n',copyCoords:'Copiar Coordenadas',locationCopied:'Â¡UbicaciÃ³n copiada!',tripPlanning:'PlanificaciÃ³n y enrutamiento dinÃ¡mico',realTimeSnapshot:'InstantÃ¡nea en tiempo real',weatherNow:'Clima ahora',alertsIncidents:'Alertas e incidentes',noAlerts:'No hay alertas activas ahora.',findItineraries:'Buscar itinerarios',exportPdf:'Exportar PDF',suggestAlt:'Sugerir alternativa',emergencyContacts:'Contactos de Emergencia'},tl:{name:'Advanced na Impormasyon sa Paglalakbay',tagline:'Real-time na pagpaplano ng biyahe gamit ang matalinong mungkahi.',translatorLabel:'Gustong wika',offlineCta:'I-save ang offline na snapshot',shareLocation:'Ibahagi ang Lokasyon',copyCoords:'Kopyahin ang Coordinates',locationCopied:'Nakopya ang lokasyon!',tripPlanning:'Pagpaplano ng biyahe at dynamic na ruta',realTimeSnapshot:'Real-time na snapshot',weatherNow:'Panahon ngayon',alertsIncidents:'Mga alerto at insidente',noAlerts:'Walang aktibong alerto ngayon.',findItineraries:'Maghanap ng itinerary',exportPdf:'I-export ang PDF',suggestAlt:'Magmungkahi ng alternatibo',emergencyContacts:'Emergency na Contacts'},zh:{name:'é«˜çº§æ—…è¡Œä¿¡æ¯ç³»ç»Ÿ',tagline:'å®žæ—¶å¤šæ¨¡å¼è¡Œç¨‹è§„åˆ’ä¸Žæ™ºèƒ½å»ºè®®',translatorLabel:'é¦–é€‰è¯­è¨€',offlineCta:'ä¿å­˜ç¦»çº¿å¿«ç…§',shareLocation:'åˆ†äº«ä½ç½®',copyCoords:'å¤åˆ¶åæ ‡',locationCopied:'ä½ç½®å·²å¤åˆ¶ï¼',tripPlanning:'è¡Œç¨‹è§„åˆ’ä¸ŽåŠ¨æ€è·¯çº¿',realTimeSnapshot:'å®žæ—¶å¿«ç…§',weatherNow:'å½“å‰å¤©æ°”',alertsIncidents:'è­¦æŠ¥å’Œäº‹ä»¶',noAlerts:'ç›®å‰æ²¡æœ‰æ´»åŠ¨è­¦æŠ¥',findItineraries:'æŸ¥æ‰¾è¡Œç¨‹',exportPdf:'å¯¼å‡ºPDF',suggestAlt:'å»ºè®®æ›¿ä»£æ–¹æ¡ˆ',emergencyContacts:'ç´§æ€¥è”ç³»äºº'}};const CURRENCY_RATES={NZD:1,USD:0.59,EUR:0.55,AUD:0.91};function Chip(_ref){let{children}=_ref;return/*#__PURE__*/_jsx(\"span\",{className:\"chip\",style:{marginRight:6},children:children});}function FeatureCard(_ref2){let{title,description,children,icon}=_ref2;return/*#__PURE__*/_jsxs(\"section\",{className:\"card\",style:{marginBottom:32},children:[/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:24},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:16,marginBottom:10},children:[icon&&/*#__PURE__*/_jsx(\"div\",{style:{fontSize:42,filter:'drop-shadow(0 4px 8px rgba(0,0,0,0.2))'},children:icon}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:26,fontWeight:800,background:'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',WebkitBackgroundClip:'text',WebkitTextFillColor:'transparent',backgroundClip:'text',letterSpacing:'-0.5px'},children:title}),description&&/*#__PURE__*/_jsx(\"div\",{style:{color:'var(--muted)',fontSize:15,marginTop:6,lineHeight:1.6},children:description})]})]})}),/*#__PURE__*/_jsx(\"div\",{children:children})]});}function DraggableMarker(_ref3){let{position,setPosition,label}=_ref3;const[draggable,setDraggable]=useState(true);const eventHandlers={dragend(e){const marker=e.target;const pos=marker.getLatLng();setPosition([pos.lat,pos.lng]);}};return/*#__PURE__*/_jsx(Marker,{draggable:draggable,eventHandlers:eventHandlers,position:position,icon:mapIcons.origin,children:/*#__PURE__*/_jsx(Popup,{minWidth:90,children:/*#__PURE__*/_jsxs(\"span\",{onClick:()=>setDraggable(d=>!d),children:[label,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"small\",{style:{color:'#666'},children:draggable?'Draggable':'Click to make draggable'})]})})});}function MapClickHandler(_ref4){let{onMapClick}=_ref4;useMapEvents({click(e){if(onMapClick){onMapClick([e.latlng.lat,e.latlng.lng]);}}});return null;}// Component to handle \"My Location\" button\nfunction RecenterButton(_ref5){let{position}=_ref5;const map=useMap();const recenter=()=>{map.flyTo(position,15,{duration:1.5});};return/*#__PURE__*/_jsx(\"button\",{onClick:recenter,style:{position:'absolute',top:64,right:10,zIndex:1000,padding:'10px 16px',background:'white',border:'2px solid rgba(0,0,0,0.2)',borderRadius:8,cursor:'pointer',fontSize:14,fontWeight:600,boxShadow:'0 2px 8px rgba(0,0,0,0.15)',display:'flex',alignItems:'center',gap:6,transition:'all 0.2s',minWidth:200},onMouseEnter:e=>{e.currentTarget.style.background='#3b82f6';e.currentTarget.style.color='white';e.currentTarget.style.transform='translateY(-2px)';e.currentTarget.style.boxShadow='0 4px 16px rgba(59, 130, 246, 0.4)';},onMouseLeave:e=>{e.currentTarget.style.background='white';e.currentTarget.style.color='#333';e.currentTarget.style.transform='translateY(0)';e.currentTarget.style.boxShadow='0 2px 8px rgba(0,0,0,0.15)';},title:\"Center map on your origin location\",children:\"\\uD83D\\uDCCD My Location\"});}function MapLegend(_ref6){let{trafficCount}=_ref6;return/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',bottom:20,right:20,background:'rgba(255, 255, 255, 0.95)',padding:'12px 16px',borderRadius:12,boxShadow:'0 4px 12px rgba(0,0,0,0.15)',zIndex:1000,fontSize:13,backdropFilter:'blur(10px)',border:'1px solid rgba(0,0,0,0.1)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700,marginBottom:10,fontSize:14,color:'#1a1a1a'},children:\"\\uD83D\\uDDFA\\uFE0F Map Legend\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:8},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:8},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:20,height:20,borderRadius:'50%',background:'#28a745'}}),/*#__PURE__*/_jsx(\"span\",{style:{color:'#333'},children:\"Origin (drag to move)\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:8},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:20,height:20,borderRadius:'50%',background:'#dc3545'}}),/*#__PURE__*/_jsx(\"span\",{style:{color:'#333'},children:\"Destination (click map)\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:8},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:20,height:20,borderRadius:'50%',background:'#007bff'}}),/*#__PURE__*/_jsx(\"span\",{style:{color:'#333'},children:\"Transit Stops\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:8},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:20,height:20,borderRadius:'50%',background:'#fd7e14'}}),/*#__PURE__*/_jsx(\"span\",{style:{color:'#333'},children:\"Traffic Warning\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:8},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:20,height:20,borderRadius:'50%',background:'#6f42c1'}}),/*#__PURE__*/_jsx(\"span\",{style:{color:'#333'},children:\"Traffic Critical\"})]}),trafficCount>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:8,paddingTop:8,borderTop:'1px solid rgba(0,0,0,0.1)',fontSize:12,color:'#666',display:'flex',alignItems:'center',gap:6},children:[/*#__PURE__*/_jsx(\"span\",{style:{display:'inline-block',width:8,height:8,borderRadius:'50%',background:'#ff4444',animation:'pulse 2s infinite'}}),trafficCount,\" active traffic incident\",trafficCount!==1?'s':'']})]})]});}function InteractiveMap(_ref7){let{origin,setOrigin,dest,setDest,stops,trafficIncidents=[],lastUpdate,onRefresh}=_ref7;const[showTraffic,setShowTraffic]=useState(true);const[showRoute,setShowRoute]=useState(true);const[showStops,setShowStops]=useState(true);const[mapStyle,setMapStyle]=useState('standard');const[isRefreshing,setIsRefreshing]=useState(false);const center=origin;// Calculate route line between origin and destination\nconst routeLine=[origin,dest];// Map tile URLs for different styles\nconst mapTiles={standard:'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',transport:'https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png',dark:'https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png'};// Manual refresh handler with animation\nconst handleManualRefresh=async()=>{setIsRefreshing(true);await onRefresh();setTimeout(()=>setIsRefreshing(false),1000);};return/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative',height:'100%',width:'100%'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',top:10,left:'50%',transform:'translateX(-50%)',zIndex:1000,display:'flex',flexDirection:'column',alignItems:'center',gap:4},children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:'8px 16px',background:'linear-gradient(135deg, #10b981 0%, #059669 100%)',color:'white',border:'2px solid rgba(255,255,255,0.3)',borderRadius:20,fontSize:12,fontWeight:700,boxShadow:'0 4px 12px rgba(16, 185, 129, 0.4)',display:'flex',alignItems:'center',gap:8,animation:'pulse 2s ease-in-out infinite'},children:[/*#__PURE__*/_jsx(\"span\",{style:{width:8,height:8,borderRadius:'50%',background:'#fff',animation:'pulse 1.5s ease-in-out infinite',boxShadow:'0 0 8px rgba(255,255,255,0.8)'}}),\"\\uD83D\\uDD34 LIVE UPDATES\"]}),lastUpdate&&/*#__PURE__*/_jsxs(\"div\",{style:{padding:'4px 12px',background:'rgba(0,0,0,0.7)',color:'white',borderRadius:12,fontSize:10,fontWeight:600,backdropFilter:'blur(10px)'},children:[\"Updated \",lastUpdate]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',top:10,left:10,zIndex:1000,display:'flex',flexDirection:'column',gap:8},children:[/*#__PURE__*/_jsxs(\"button\",{onClick:handleManualRefresh,disabled:isRefreshing,style:{padding:'10px 16px',background:isRefreshing?'#10b981':'white',color:isRefreshing?'white':'#333',border:'2px solid rgba(0,0,0,0.2)',borderRadius:8,cursor:isRefreshing?'wait':'pointer',fontSize:14,fontWeight:600,boxShadow:'0 2px 8px rgba(0,0,0,0.15)',display:'flex',alignItems:'center',gap:6,transition:'all 0.3s',opacity:isRefreshing?0.8:1},title:\"Refresh traffic data now\",children:[/*#__PURE__*/_jsx(\"span\",{style:{display:'inline-block',animation:isRefreshing?'spin 1s linear infinite':'none'},children:\"\\uD83D\\uDD04\"}),isRefreshing?'Refreshing...':'Refresh']}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowTraffic(!showTraffic),style:{padding:'10px 16px',background:showTraffic?'#3b82f6':'white',color:showTraffic?'white':'#333',border:'2px solid rgba(0,0,0,0.2)',borderRadius:8,cursor:'pointer',fontSize:14,fontWeight:600,boxShadow:'0 2px 8px rgba(0,0,0,0.15)',display:'flex',alignItems:'center',gap:6,transition:'all 0.2s'},title:showTraffic?'Hide traffic incidents':'Show traffic incidents',children:[\"\\uD83D\\uDEA6 Traffic \",showTraffic?'(On)':'(Off)']}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowRoute(!showRoute),style:{padding:'10px 16px',background:showRoute?'#3b82f6':'white',color:showRoute?'white':'#333',border:'2px solid rgba(0,0,0,0.2)',borderRadius:8,cursor:'pointer',fontSize:14,fontWeight:600,boxShadow:'0 2px 8px rgba(0,0,0,0.15)',display:'flex',alignItems:'center',gap:6,transition:'all 0.2s'},title:showRoute?'Hide route line':'Show route line',children:[\"\\uD83D\\uDEE3\\uFE0F Route \",showRoute?'(On)':'(Off)']}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowStops(!showStops),style:{padding:'10px 16px',background:showStops?'#3b82f6':'white',color:showStops?'white':'#333',border:'2px solid rgba(0,0,0,0.2)',borderRadius:8,cursor:'pointer',fontSize:14,fontWeight:600,boxShadow:'0 2px 8px rgba(0,0,0,0.15)',display:'flex',alignItems:'center',gap:6,transition:'all 0.2s'},title:showStops?'Hide transit stops':'Show transit stops',children:[\"\\uD83D\\uDE8F Stops \",showStops?'(On)':'(Off)']})]}),/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',top:10,right:10,zIndex:1000,minWidth:200},children:/*#__PURE__*/_jsxs(\"select\",{value:mapStyle,onChange:e=>setMapStyle(e.target.value),style:{width:'100%',padding:'10px 16px',background:'white',color:'#333',border:'2px solid rgba(0,0,0,0.2)',borderRadius:8,cursor:'pointer',fontSize:14,fontWeight:600,boxShadow:'0 2px 8px rgba(0,0,0,0.15)',outline:'none',appearance:'none',WebkitAppearance:'none',MozAppearance:'none',backgroundImage:'url(\"data:image/svg+xml;charset=UTF-8,%3csvg xmlns=\\'http://www.w3.org/2000/svg\\' viewBox=\\'0 0 24 24\\' fill=\\'none\\' stroke=\\'currentColor\\' stroke-width=\\'2\\' stroke-linecap=\\'round\\' stroke-linejoin=\\'round\\'%3e%3cpolyline points=\\'6 9 12 15 18 9\\'%3e%3c/polyline%3e%3c/svg%3e\")',backgroundRepeat:'no-repeat',backgroundPosition:'right 12px center',backgroundSize:'16px',paddingRight:'36px',display:'flex',alignItems:'center',gap:8,transition:'all 0.2s'},onMouseEnter:e=>{e.currentTarget.style.borderColor='#3b82f6';e.currentTarget.style.boxShadow='0 4px 12px rgba(59, 130, 246, 0.3)';},onMouseLeave:e=>{e.currentTarget.style.borderColor='rgba(0,0,0,0.2)';e.currentTarget.style.boxShadow='0 2px 8px rgba(0,0,0,0.15)';},title:\"Change map style\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"standard\",children:\"\\uD83D\\uDDFA\\uFE0F Standard Map\"}),/*#__PURE__*/_jsx(\"option\",{value:\"transport\",children:\"\\uD83D\\uDE8C Transport Map\"}),/*#__PURE__*/_jsx(\"option\",{value:\"dark\",children:\"\\uD83C\\uDF19 Dark Mode\"})]})}),/*#__PURE__*/_jsxs(MapContainer,{center:center,zoom:13,style:{height:'100%',width:'100%',borderRadius:12},children:[/*#__PURE__*/_jsx(TileLayer,{attribution:\"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a>\",url:mapTiles[mapStyle]},mapStyle),showRoute&&/*#__PURE__*/_jsx(Polyline,{positions:routeLine,pathOptions:{color:'#3b82f6',weight:4,opacity:0.7,dashArray:'10, 10',lineCap:'round',lineJoin:'round'},children:/*#__PURE__*/_jsxs(Popup,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uD83D\\uDCCD Planned Route\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"small\",{children:\"From origin to destination\"})]})}),/*#__PURE__*/_jsx(DraggableMarker,{position:origin,setPosition:setOrigin,label:\"Origin (drag me)\"}),/*#__PURE__*/_jsx(RecenterButton,{position:origin}),/*#__PURE__*/_jsx(Marker,{position:dest,icon:mapIcons.destination,children:/*#__PURE__*/_jsxs(Popup,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uD83C\\uDFAF Destination\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"small\",{children:[dest[0].toFixed(5),\", \",dest[1].toFixed(5)]})]})}),showStops&&stops.slice(0,10).map(stop=>/*#__PURE__*/_jsx(Marker,{position:[stop.lat,stop.lng],icon:mapIcons.stop,children:/*#__PURE__*/_jsxs(Popup,{children:[/*#__PURE__*/_jsxs(\"strong\",{children:[\"\\uD83D\\uDE8F \",stop.name]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"small\",{children:[\"\\uD83D\\uDCCF \",stop.distance_m,\"m away\"]})]})},stop.stop_id)),showTraffic&&trafficIncidents.filter(incident=>{var _incident$location;// Only show incidents with valid coordinates\nconst hasCoords=((_incident$location=incident.location)===null||_incident$location===void 0?void 0:_incident$location.coordinates)||incident.lat!=null&&incident.lng!=null;return hasCoords;}).map((incident,idx)=>{var _incident$location2;// Determine severity and icon\nconst isCritical=incident.severity==='critical'||incident.severity==='major'||incident.type==='accident'||incident.type==='closure';const icon=isCritical?mapIcons.trafficCritical:mapIcons.trafficWarning;// Get position - guaranteed to be valid now\nconst position=((_incident$location2=incident.location)===null||_incident$location2===void 0?void 0:_incident$location2.coordinates)||[incident.lat,incident.lng];// Validate position is an array with 2 numbers\nif(!Array.isArray(position)||position.length!==2||typeof position[0]!=='number'||typeof position[1]!=='number'){console.warn('Invalid traffic incident position:',incident);return null;}// Format time\nconst timeStr=incident.start_time?new Date(incident.start_time).toLocaleTimeString():'Now';return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Marker,{position:position,icon:icon,children:/*#__PURE__*/_jsx(Popup,{maxWidth:250,children:/*#__PURE__*/_jsxs(\"div\",{style:{padding:'4px 0'},children:[/*#__PURE__*/_jsxs(\"strong\",{style:{color:isCritical?'#6f42c1':'#fd7e14',fontSize:14},children:[isCritical?'ðŸš¨':'âš ï¸',\" \",incident.title||incident.type||'Traffic Incident']}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:8,fontSize:13,lineHeight:1.5},children:incident.description||incident.summary||'Traffic disruption reported'}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:8,paddingTop:8,borderTop:'1px solid #eee',fontSize:11,color:'#666'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Severity:\"}),\" \",incident.severity||'moderate']}),incident.affected_routes&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Routes:\"}),\" \",incident.affected_routes]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Time:\"}),\" \",timeStr]})]})]})})}),isCritical&&/*#__PURE__*/_jsx(Circle,{center:position,radius:500,pathOptions:{color:'#6f42c1',fillColor:'#6f42c1',fillOpacity:0.1,weight:2,dashArray:'5, 5'}})]},\"traffic-\".concat(idx));}).filter(Boolean),/*#__PURE__*/_jsx(MapClickHandler,{onMapClick:setDest})]}),/*#__PURE__*/_jsx(MapLegend,{trafficCount:showTraffic?trafficIncidents.length:0})]});}function AuthPanel(_ref8){let{token,setToken,username,setUsername}=_ref8;const[mode,setMode]=useState('login');const[user,setUser]=useState('');const[pass,setPass]=useState('');const[email,setEmail]=useState('');const[showPass,setShowPass]=useState(false);const[error,setError]=useState('');const[loading,setLoading]=useState(false);const[strength,setStrength]=useState(0);const[rememberMe,setRememberMe]=useState(true);const[showAuthModal,setShowAuthModal]=useState(false);useEffect(()=>{const t=localStorage.getItem('atis_token')||sessionStorage.getItem('atis_token');const u=localStorage.getItem('atis_user')||sessionStorage.getItem('atis_user');if(t&&u){setToken(t);setUsername(u);}},[setToken,setUsername]);useEffect(()=>{if(mode==='register'&&pass){let score=0;if(pass.length>=8)score++;if(pass.length>=12)score++;if(/[a-z]/.test(pass)&&/[A-Z]/.test(pass))score++;if(/[0-9]/.test(pass))score++;if(/[^a-zA-Z0-9]/.test(pass))score++;setStrength(score);}},[pass,mode]);const validateEmail=email=>{return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email);};const submit=async e=>{e===null||e===void 0?void 0:e.preventDefault();setError('');// Validation\nif(!user||user.length<3){setError('Username must be at least 3 characters');return;}if(!pass||pass.length<6){setError('Password must be at least 6 characters');return;}if(mode==='register'){if(!email||!validateEmail(email)){setError('Please enter a valid email address');return;}if(strength<3){setError('Password is too weak. Use mix of letters, numbers, and symbols.');return;}}setLoading(true);try{const payload=mode==='register'?{username:user,password:pass,email:email}:{username:user,password:pass};const r=await fetch(\"\".concat(API,\"/auth/\").concat(mode),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});const d=await r.json();if(!r.ok)throw new Error(d.detail||'Authentication failed');setToken(d.token);setUsername(d.username);// Store based on remember me preference\nconst storage=rememberMe?localStorage:sessionStorage;storage.setItem('atis_token',d.token);storage.setItem('atis_user',d.username);storage.setItem('atis_login_time',Date.now().toString());setUser('');setPass('');setEmail('');setShowAuthModal(false);}catch(e){setError(e.message);}finally{setLoading(false);}};const logout=()=>{setToken(null);setUsername(null);setIsAuthenticated(false);localStorage.removeItem('atis_token');localStorage.removeItem('atis_user');localStorage.removeItem('atis_login_time');sessionStorage.removeItem('atis_token');sessionStorage.removeItem('atis_user');sessionStorage.removeItem('atis_login_time');toast('ðŸ‘‹ Logged out');};const getStrengthColor=()=>{if(strength<=2)return'#ef4444';if(strength<=3)return'#f59e0b';return'#10b981';};const getStrengthText=()=>{if(strength<=2)return'Weak';if(strength<=3)return'Medium';return'Strong';};if(token){return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:16},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pill\",style:{display:'flex',alignItems:'center',gap:10},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:32,height:32,borderRadius:'50%',background:'var(--gradient-1)',display:'grid',placeItems:'center',color:'white',fontWeight:700,fontSize:14},children:username[0].toUpperCase()}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:13,fontWeight:600},children:username}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,color:'var(--muted)'},children:\"Verified\"})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:logout,children:\"\\uD83D\\uDEAA Logout\"})]});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>setShowAuthModal(true),children:\"\\uD83D\\uDD10 Sign In\"}),showAuthModal&&/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',inset:0,background:'rgba(0,0,0,0.7)',backdropFilter:'blur(8px)',display:'grid',placeItems:'center',zIndex:9999,padding:20},onClick:()=>setShowAuthModal(false),children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'var(--glass-bg)',backdropFilter:'blur(30px)',border:'1px solid var(--glass-border)',borderRadius:28,padding:40,maxWidth:480,width:'100%',boxShadow:'var(--card-shadow)'},onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',marginBottom:32},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:32,marginBottom:12},children:\"\\uD83D\\uDD10\"}),/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:28,fontWeight:800,marginBottom:8,background:'var(--gradient-1)',WebkitBackgroundClip:'text',WebkitTextFillColor:'transparent'},children:mode==='login'?'Welcome Back':'Create Account'}),/*#__PURE__*/_jsx(\"p\",{style:{color:'var(--muted)',fontSize:14},children:mode==='login'?'Sign in to access your personalized travel experience':'Join ATIS for smart route planning'})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:submit,style:{display:'flex',flexDirection:'column',gap:20},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:8,fontSize:13,fontWeight:600,color:'var(--muted)'},children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter username\",value:user,onChange:e=>setUser(e.target.value),style:{width:'100%'},autoComplete:\"username\",disabled:loading})]}),mode==='register'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:8,fontSize:13,fontWeight:600,color:'var(--muted)'},children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"your.email@example.com\",value:email,onChange:e=>setEmail(e.target.value),style:{width:'100%'},autoComplete:\"email\",disabled:loading})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:8,fontSize:13,fontWeight:600,color:'var(--muted)'},children:\"Password\"}),/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"input\",{type:showPass?'text':'password',placeholder:\"Enter password\",value:pass,onChange:e=>setPass(e.target.value),style:{width:'100%',paddingRight:45},autoComplete:mode==='login'?'current-password':'new-password',disabled:loading}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowPass(!showPass),style:{position:'absolute',right:12,top:'50%',transform:'translateY(-50%)',background:'none',border:'none',cursor:'pointer',fontSize:18},children:showPass?'ðŸ‘ï¸':'ðŸ‘ï¸â€ðŸ—¨ï¸'})]}),mode==='register'&&pass&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:8},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:4},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:12,color:'var(--muted)'},children:\"Password strength:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:12,fontWeight:600,color:getStrengthColor()},children:getStrengthText()})]}),/*#__PURE__*/_jsx(\"div\",{style:{height:4,background:'rgba(255,255,255,0.1)',borderRadius:2,overflow:'hidden'},children:/*#__PURE__*/_jsx(\"div\",{style:{height:'100%',width:\"\".concat(strength/5*100,\"%\"),background:getStrengthColor(),transition:'all 0.3s'}})})]})]}),mode==='login'&&/*#__PURE__*/_jsxs(\"label\",{style:{display:'flex',alignItems:'center',gap:8,cursor:'pointer',userSelect:'none'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:rememberMe,onChange:e=>setRememberMe(e.target.checked),disabled:loading}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:13,color:'var(--muted)'},children:\"Remember me for 30 days\"})]}),error&&/*#__PURE__*/_jsxs(\"div\",{style:{padding:12,background:'rgba(239, 68, 68, 0.1)',border:'1px solid var(--danger)',borderRadius:12,color:'var(--danger)',fontSize:13,textAlign:'center'},children:[\"\\u26A0\\uFE0F \",error]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",style:{width:'100%',padding:16,fontSize:16},disabled:loading,children:loading?'â³ Processing...':mode==='login'?'ðŸš€ Sign In':'âœ¨ Create Account'}),/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center'},children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setMode(mode==='login'?'register':'login');setError('');},style:{background:'none',border:'none',color:'var(--primary)',cursor:'pointer',fontSize:14,fontWeight:600},disabled:loading,children:mode==='login'?\"Don't have an account? Sign up\":'Already have an account? Sign in'})})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAuthModal(false),style:{position:'absolute',top:20,right:20,background:'var(--glass-bg)',border:'1px solid var(--glass-border)',borderRadius:'50%',width:36,height:36,display:'grid',placeItems:'center',cursor:'pointer',fontSize:18},children:\"\\u2715\"})]})})]});}function LoginPage(_ref9){let{onLogin,isVerifying}=_ref9;const[mode,setMode]=useState('login');const[user,setUser]=useState('');const[pass,setPass]=useState('');const[email,setEmail]=useState('');const[showPass,setShowPass]=useState(false);const[error,setError]=useState('');const[loading,setLoading]=useState(false);const[strength,setStrength]=useState(0);useEffect(()=>{if(mode==='register'&&pass){let score=0;if(pass.length>=8)score++;if(pass.length>=12)score++;if(/[a-z]/.test(pass)&&/[A-Z]/.test(pass))score++;if(/[0-9]/.test(pass))score++;if(/[^a-zA-Z0-9]/.test(pass))score++;setStrength(score);}},[pass,mode]);const validateEmail=email=>{return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email);};const submit=async e=>{e===null||e===void 0?void 0:e.preventDefault();setError('');if(!user||user.length<3){setError('Username must be at least 3 characters');return;}if(!pass||pass.length<6){setError('Password must be at least 6 characters');return;}if(mode==='register'){if(!email||!validateEmail(email)){setError('Please enter a valid email address');return;}if(strength<3){setError('Password is too weak. Use mix of letters, numbers, and symbols.');return;}}setLoading(true);try{const payload=mode==='register'?{username:user,password:pass,email:email}:{username:user,password:pass};const r=await fetch(\"\".concat(API,\"/auth/\").concat(mode),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});const d=await r.json();if(!r.ok)throw new Error(d.detail||'Authentication failed');localStorage.setItem('atis_token',d.token);localStorage.setItem('atis_user',d.username);localStorage.setItem('atis_login_time',Date.now().toString());onLogin(d.token,d.username);}catch(e){setError(e.message);}finally{setLoading(false);}};const getStrengthColor=()=>{if(strength<=2)return'#ef4444';if(strength<=3)return'#f59e0b';return'#10b981';};const getStrengthText=()=>{if(strength<=2)return'Weak';if(strength<=3)return'Medium';return'Strong';};return/*#__PURE__*/_jsxs(\"div\",{style:{minHeight:'100vh',display:'flex',alignItems:'center',justifyContent:'center',padding:20,position:'relative',overflow:'hidden',background:'#0a0e27'},children:[/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',top:'-10%',left:'-5%',width:'500px',height:'500px',background:'radial-gradient(circle, rgba(102, 126, 234, 0.3) 0%, transparent 70%)',filter:'blur(80px)',animation:'float 8s ease-in-out infinite'}}),/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',bottom:'-10%',right:'-5%',width:'500px',height:'500px',background:'radial-gradient(circle, rgba(139, 92, 246, 0.3) 0%, transparent 70%)',filter:'blur(80px)',animation:'float 10s ease-in-out infinite reverse'}}),/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:480,width:'100%',position:'relative',zIndex:1},children:[/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',marginBottom:40},children:[/*#__PURE__*/_jsx(\"img\",{src:\"/atis-logo.jpg\",alt:\"ATIS Logo\",style:{width:120,height:120,margin:'0 auto 24px',filter:'drop-shadow(0 8px 24px rgba(0,0,0,0.3))',objectFit:'contain',borderRadius:24},onError:e=>{e.target.style.display='none';}}),/*#__PURE__*/_jsx(\"h1\",{style:{fontSize:42,fontWeight:900,marginBottom:12,background:'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',WebkitBackgroundClip:'text',WebkitTextFillColor:'transparent',letterSpacing:'-1px'},children:\"Welcome to ATIS\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:16,color:'var(--muted)',marginBottom:8},children:\"Advanced Traveler Information System\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:14,color:'var(--muted)'},children:isVerifying?'ðŸ”„ Verifying session...':'Intelligent route planning for smarter journeys'})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'var(--glass-bg)',backdropFilter:'blur(30px)',border:'1px solid var(--glass-border)',borderRadius:28,padding:40,boxShadow:'var(--card-shadow)',opacity:isVerifying?0.6:1,pointerEvents:isVerifying?'none':'auto',transition:'opacity 0.2s'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',marginBottom:32},children:[/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:26,fontWeight:800,marginBottom:8},children:isVerifying?'â³ Loading...':mode==='login'?'ðŸ” Sign In':'âœ¨ Create Account'}),/*#__PURE__*/_jsx(\"p\",{style:{color:'var(--muted)',fontSize:14},children:isVerifying?'Please wait...':mode==='login'?'Access your personalized travel experience':'Join for smart route planning'})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:submit,style:{display:'flex',flexDirection:'column',gap:20},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:8,fontSize:13,fontWeight:600,color:'var(--muted)'},children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter username\",value:user,onChange:e=>setUser(e.target.value),style:{width:'100%'},autoComplete:\"username\",disabled:loading,required:true})]}),mode==='register'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:8,fontSize:13,fontWeight:600,color:'var(--muted)'},children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"your.email@example.com\",value:email,onChange:e=>setEmail(e.target.value),style:{width:'100%'},autoComplete:\"email\",disabled:loading,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:8,fontSize:13,fontWeight:600,color:'var(--muted)'},children:\"Password\"}),/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"input\",{type:showPass?'text':'password',placeholder:\"Enter password\",value:pass,onChange:e=>setPass(e.target.value),style:{width:'100%',paddingRight:45},autoComplete:mode==='login'?'current-password':'new-password',disabled:loading,required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowPass(!showPass),style:{position:'absolute',right:12,top:'50%',transform:'translateY(-50%)',background:'none',border:'none',cursor:'pointer',fontSize:18},children:showPass?'ðŸ‘ï¸':'ðŸ‘ï¸â€ðŸ—¨ï¸'})]}),mode==='register'&&pass&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:8},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:4},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:12,color:'var(--muted)'},children:\"Password strength:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:12,fontWeight:600,color:getStrengthColor()},children:getStrengthText()})]}),/*#__PURE__*/_jsx(\"div\",{style:{height:4,background:'rgba(255,255,255,0.1)',borderRadius:2,overflow:'hidden'},children:/*#__PURE__*/_jsx(\"div\",{style:{height:'100%',width:\"\".concat(strength/5*100,\"%\"),background:getStrengthColor(),transition:'all 0.3s'}})})]})]}),error&&/*#__PURE__*/_jsxs(\"div\",{style:{padding:12,background:'rgba(239, 68, 68, 0.1)',border:'1px solid var(--danger)',borderRadius:12,color:'var(--danger)',fontSize:13,textAlign:'center'},children:[\"\\u26A0\\uFE0F \",error]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",style:{width:'100%',padding:16,fontSize:16},disabled:loading,children:loading?'â³ Processing...':mode==='login'?'ðŸš€ Sign In':'âœ¨ Create Account'}),/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center'},children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setMode(mode==='login'?'register':'login');setError('');},style:{background:'none',border:'none',color:'var(--primary)',cursor:'pointer',fontSize:14,fontWeight:600},disabled:loading,children:mode==='login'?\"Don't have an account? Sign up\":'Already have an account? Sign in'})})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:32,textAlign:'center',color:'var(--muted)',fontSize:13},children:[/*#__PURE__*/_jsx(\"p\",{style:{marginBottom:12},children:\"\\u2728 Real-time traffic & transit data\"}),/*#__PURE__*/_jsx(\"p\",{style:{marginBottom:12},children:\"\\uD83D\\uDDFA\\uFE0F Interactive route planning\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\uD83C\\uDF0D Multi-language support\"})]})]}),/*#__PURE__*/_jsx(\"style\",{children:\"\\n        @keyframes float {\\n          0%, 100% { transform: translateY(0) scale(1); }\\n          50% { transform: translateY(-20px) scale(1.05); }\\n        }\\n      \"})]});}export default function App(){var _analyticsData$total_,_analyticsData$avg_mc,_analyticsData$avg_du,_analyticsData$avg_tr,_analyticsData$total_2,_analyticsData$total_3,_ref10,_analyticsData$system,_analyticsData$avg_mc2,_analyticsData$total_4,_analyticsData$total_5,_ref11,_analyticsData$total_6;// ALL STATE HOOKS MUST BE DECLARED FIRST\nconst[token,setToken]=useState(()=>localStorage.getItem('atis_token'));const[username,setUsername]=useState(()=>localStorage.getItem('atis_user'));// Initialize as true if token exists to prevent flash during verification\nconst[isAuthenticated,setIsAuthenticated]=useState(()=>{return!!(localStorage.getItem('atis_token')&&localStorage.getItem('atis_user'));});const[isVerifying,setIsVerifying]=useState(true);const[origin,setOrigin]=useState([-36.8485,174.7633]);const[dest,setDest]=useState([-36.8443,174.7676]);const[stops,setStops]=useState([]);const[itins,setItins]=useState([]);const[banner,setBanner]=useState('');const[selectedStop,setSelectedStop]=useState(null);const[departures,setDepartures]=useState([]);const[alerts,setAlerts]=useState([]);const[trafficIncidents,setTrafficIncidents]=useState([]);const[lastTrafficUpdate,setLastTrafficUpdate]=useState(null);const[alts,setAlts]=useState({});const[view,setView]=useState('home');const[expandedItin,setExpandedItin]=useState(null);const[modes,setModes]=useState(['bus','train','walk']);const[optimize,setOptimize]=useState('fastest');const[maxWalkKm,setMaxWalkKm]=useState(1.2);const[avoidStairs,setAvoidStairs]=useState(false);const[bikeOk,setBikeOk]=useState(false);const[whenType,setWhenType]=useState('depart');const[whenValue,setWhenValue]=useState('now');const[weather,setWeather]=useState(null);const[safetyContacts,setSafetyContacts]=useState([]);const[uiLang,setUiLang]=useState('en');const[currency,setCurrency]=useState('NZD');const[amount,setAmount]=useState(50);const[reviews,setReviews]=useState([]);const[reviewLoc,setReviewLoc]=useState('');const[reviewRating,setReviewRating]=useState(5);const[reviewComment,setReviewComment]=useState('');// Location search states\nconst[originSearch,setOriginSearch]=useState('');const[destSearch,setDestSearch]=useState('');const[originName,setOriginName]=useState('Auckland CBD');const[destName,setDestName]=useState('Auckland Airport');const[searchResults,setSearchResults]=useState([]);const[searchingFor,setSearchingFor]=useState(null);// Assessment features - Environmental & MCDA\nconst[mcdaProfile,setMcdaProfile]=useState('balanced');const[showMcdaBreakdown,setShowMcdaBreakdown]=useState({});const[analyticsData,setAnalyticsData]=useState(null);const text=TRANSLATIONS[uiLang]||TRANSLATIONS.en;const convertedAmount=Number((amount*(CURRENCY_RATES[currency]||1)).toFixed(2));// Check for existing session on mount and verify with backend\nuseEffect(()=>{let mounted=true;const verifySession=async()=>{const savedToken=localStorage.getItem('atis_token');const savedUser=localStorage.getItem('atis_user');if(savedToken&&savedUser){try{// Verify token with backend\nconst response=await fetch(\"\".concat(API,\"/auth/verify\"),{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(savedToken)}});if(!mounted)return;if(response.ok){// Token is valid - keep authenticated state\nsetToken(savedToken);setUsername(savedUser);// isAuthenticated already true from initialization\n}else{// Token is invalid, clear storage and set both states together\nlocalStorage.removeItem('atis_token');localStorage.removeItem('atis_user');localStorage.removeItem('atis_login_time');setToken(null);setUsername(null);setIsAuthenticated(false);}}catch(error){// Network error or backend down, clear session\nif(!mounted)return;console.error('Session verification failed:',error);localStorage.removeItem('atis_token');localStorage.removeItem('atis_user');localStorage.removeItem('atis_login_time');setToken(null);setUsername(null);setIsAuthenticated(false);}// Set verification complete AFTER authentication state is finalized\nif(mounted){// Use setTimeout to ensure state updates are batched\nsetTimeout(()=>{console.log('[ATIS] Verification complete, ready to show content');setIsVerifying(false);// Tell the page React is ready - show content NOW\nif(window.__atisReady){window.__atisReady();}},100);// Small delay to ensure DOM is painted\n}}else{// No saved token, set both states\nif(mounted){console.log('[ATIS] No token found, showing login');setIsAuthenticated(false);// Use setTimeout to ensure state updates are batched\nsetTimeout(()=>{setIsVerifying(false);// Tell the page React is ready - show content NOW\nif(window.__atisReady){window.__atisReady();}},100);// Small delay to ensure DOM is painted\n}}};verifySession();return()=>{mounted=false;};},[]);// Load initial data once (only after authentication is verified)\nuseEffect(()=>{// Don't load data until verification is complete and user is authenticated\nif(isVerifying||!isAuthenticated)return;fetch(\"\".concat(API,\"/stops/nearby?lat=\").concat(origin[0],\"&lng=\").concat(origin[1],\"&radius=900\")).then(r=>r.json()).then(d=>setStops(d.stops||[])).catch(()=>{});fetch(\"\".concat(API,\"/alerts\")).then(r=>r.json()).then(d=>{setAlerts([...(d.alerts||[]),...(d.traffic||[])]);setTrafficIncidents(d.traffic||[]);setLastTrafficUpdate(Date.now());}).catch(()=>{});fetch(\"\".concat(API,\"/weather/point?lat=\").concat(origin[0],\"&lng=\").concat(origin[1])).then(r=>r.json()).then(d=>setWeather(d.forecast||null)).catch(()=>{});fetch(\"\".concat(API,\"/safety/contacts\")).then(r=>r.json()).then(d=>setSafetyContacts(d.contacts||[])).catch(()=>{});fetch(\"\".concat(API,\"/reviews\")).then(r=>r.json()).then(d=>setReviews(d.reviews||[])).catch(()=>{});},[isAuthenticated,isVerifying]);// Update when origin changes (debounced to prevent excessive re-renders)\nuseEffect(()=>{// Only update if authenticated\nif(!isAuthenticated)return;const timeoutId=setTimeout(()=>{fetch(\"\".concat(API,\"/stops/nearby?lat=\").concat(origin[0],\"&lng=\").concat(origin[1],\"&radius=900\")).then(r=>r.json()).then(d=>setStops(d.stops||[])).catch(()=>{});fetch(\"\".concat(API,\"/weather/point?lat=\").concat(origin[0],\"&lng=\").concat(origin[1])).then(r=>r.json()).then(d=>setWeather(d.forecast||null)).catch(()=>{});},300);return()=>clearTimeout(timeoutId);},[origin[0],origin[1],isAuthenticated]);// Helper function to get relative time string\nconst getRelativeTime=timestamp=>{const seconds=Math.floor((Date.now()-timestamp)/1000);if(seconds<10)return'just now';if(seconds<60)return\"\".concat(seconds,\"s ago\");const minutes=Math.floor(seconds/60);if(minutes<60)return\"\".concat(minutes,\"m ago\");const hours=Math.floor(minutes/60);return\"\".concat(hours,\"h ago\");};// Manual refresh function that can be called from the map\nconst refreshTrafficData=async()=>{try{const r=await fetch(\"\".concat(API,\"/alerts\"));const d=await r.json();setAlerts([...(d.alerts||[]),...(d.traffic||[])]);setTrafficIncidents(d.traffic||[]);const now=Date.now();setLastTrafficUpdate(now);toast('ðŸ”„ Traffic data updated!','success');return true;}catch(err){console.error('Failed to refresh traffic:',err);toast('âš ï¸ Failed to update traffic data','error');return false;}};// Auto-refresh traffic data every 30 seconds for real-time updates\nuseEffect(()=>{if(!isAuthenticated)return;const refreshTraffic=()=>{fetch(\"\".concat(API,\"/alerts\")).then(r=>r.json()).then(d=>{setAlerts([...(d.alerts||[]),...(d.traffic||[])]);setTrafficIncidents(d.traffic||[]);const now=Date.now();setLastTrafficUpdate(now);}).catch(()=>{});};// Set up interval for auto-refresh (30 seconds)\nconst intervalId=setInterval(refreshTraffic,30000);// Clean up interval on unmount\nreturn()=>clearInterval(intervalId);},[isAuthenticated]);// Update relative time display every 10 seconds\nconst[,forceUpdate]=useState();useEffect(()=>{const timer=setInterval(()=>forceUpdate({}),10000);return()=>clearInterval(timer);},[]);const viewDepartures=async stop=>{setSelectedStop(stop);const r=await fetch(\"\".concat(API,\"/departures?stop_id=\").concat(stop.stop_id));const data=await r.json();setDepartures(data.departures||[]);};const plan=async()=>{var _d$context;const payload={origin,destination:dest,depart_at:whenType==='depart'?whenValue:'now',arrive_by:whenType==='arrive'?whenValue:null,optimize,max_walk_km:parseFloat(maxWalkKm),avoid_stairs:avoidStairs,bike_ok:bikeOk,modes};const r=await fetch(\"\".concat(API,\"/plan\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});const d=await r.json();setItins(d.itineraries||[]);setBanner(((_d$context=d.context)===null||_d$context===void 0?void 0:_d$context.weatherAlert)||'');setAlts({});};const trackTrip=async itinerary=>{if(!token)return;try{await fetch(\"\".concat(API,\"/analytics/track/trip\"),{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify({origin,destination:dest,itinerary})});}catch(error){console.log('Analytics tracking failed:',error);}};const loadAnalytics=async()=>{if(!token)return;try{const r=await fetch(\"\".concat(API,\"/analytics/summary\"),{headers:{'Authorization':\"Bearer \".concat(token)}});const data=await r.json();setAnalyticsData(data);}catch(error){console.log('Failed to load analytics:',error);}};const exportPdf=async itinerary=>{const r=await fetch(\"\".concat(API,\"/export/itinerary\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({origin,destination:dest,itinerary})});const blob=await r.blob();const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download='atis_trip.pdf';a.click();URL.revokeObjectURL(url);};const suggestAlt=async itinerary=>{try{var _data$alternative,_data$alternative2,_data$alternative3;const r=await fetch(\"\".concat(API,\"/routes/suggest\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({current_itinerary:itinerary,incidents:alerts,origin:origin,destination:dest,preferences:{optimize:optimize,max_walk_km:maxWalkKm,avoid_stairs:avoidStairs,bike_ok:bikeOk,modes:modes}})});const data=await r.json();// Enhance alternative with more details\nconst enhancedAlternative=_objectSpread(_objectSpread({},data.alternative),{},{reason:data.reason||'Alternative route available',benefits:data.benefits||[],warnings:data.warnings||[],comparison:{timeDiff:(_data$alternative=data.alternative)!==null&&_data$alternative!==void 0&&_data$alternative.duration?Math.round((data.alternative.duration-itinerary.duration)/60):0,transferDiff:(((_data$alternative2=data.alternative)===null||_data$alternative2===void 0?void 0:_data$alternative2.transfers)||0)-(itinerary.transfers||0),walkDiff:(_data$alternative3=data.alternative)!==null&&_data$alternative3!==void 0&&_data$alternative3.walk_distance?(data.alternative.walk_distance-(itinerary.walk_distance||0)).toFixed(1):0}});setAlts(prev=>_objectSpread(_objectSpread({},prev),{},{[itinerary.id]:enhancedAlternative}));}catch(error){console.error('Error suggesting alternative:',error);}};const authHeaders=()=>token?{'Authorization':\"Bearer \".concat(token)}:{};const savePrefs=async()=>{if(!token){alert('Please login to save preferences.');return;}const r=await fetch(\"\".concat(API,\"/prefs\"),{method:'POST',headers:_objectSpread({'Content-Type':'application/json'},authHeaders()),body:JSON.stringify({lang:'en',currency:'NZD',home:origin,work:dest})});alert(r.ok?'Preferences saved':'Failed to save');};const languageOptions=Object.keys(TRANSLATIONS);const currencyOptions=Object.keys(CURRENCY_RATES);const saveOfflinePack=()=>{const snapshot={saved:{origin,destination:dest,modes,optimize,maxWalkKm,avoidStairs,bikeOk},alerts,weather,stops,safetyContacts};localStorage.setItem('atis_offline_snapshot',JSON.stringify(snapshot));alert('Offline toolkit saved to this device.');};const updateSavedPlace=(key,coords)=>{const store=JSON.parse(localStorage.getItem('atisSavedPlaces')||'{}');store[key]=coords;localStorage.setItem('atisSavedPlaces',JSON.stringify(store));alert(\"\".concat(key.charAt(0).toUpperCase()+key.slice(1),\" saved\"));};const submitReview=async()=>{if(!token){alert('Please login to post a review.');return;}const r=await fetch(\"\".concat(API,\"/reviews\"),{method:'POST',headers:_objectSpread({'Content-Type':'application/json'},authHeaders()),body:JSON.stringify({location:reviewLoc,rating:Number(reviewRating),comment:reviewComment})});if(!r.ok){const t=await r.json();alert('Failed: '+(t.detail||r.status));}setReviewLoc('');setReviewRating(5);setReviewComment('');fetch(\"\".concat(API,\"/reviews\")).then(r=>r.json()).then(d=>setReviews(d.reviews||[])).catch(()=>{});};const toggleMode=m=>setModes(prev=>prev.includes(m)?prev.filter(x=>x!==m):[...prev,m]);const swapOD=()=>{const o=origin;const oName=originName;setOrigin(dest);setDest(o);setOriginName(destName);setDestName(oName);};const shareLocation=()=>{const coords=\"\".concat(origin[0].toFixed(5),\", \").concat(origin[1].toFixed(5));const url=\"https://www.google.com/maps?q=\".concat(origin[0],\",\").concat(origin[1]);navigator.clipboard.writeText(url).then(()=>{alert(\"\".concat(text.locationCopied,\"\\n\").concat(url));}).catch(()=>{alert(\"\".concat(text.shareLocation,\": \").concat(coords));});};// Enhanced Geocoding with more accurate results\nconst searchLocation=async(query,type)=>{if(!query||query.length<3){setSearchResults([]);return;}try{// More specific search parameters for better accuracy\nconst response=await fetch(\"https://nominatim.openstreetmap.org/search?\"+\"format=json&\"+\"q=\".concat(encodeURIComponent(query),\"&\")+\"countrycodes=nz&\"+\"bounded=1&\"+\"viewbox=174.5,-37.0,175.0,-36.5&\"+// Auckland bounding box\n\"addressdetails=1&\"+\"limit=8&\"+\"dedupe=1\");const data=await response.json();// Filter and sort results by relevance\nconst filteredResults=data.filter(result=>{const name=result.display_name.toLowerCase();return name.includes('auckland')||name.includes('new zealand')||parseFloat(result.lat)>-37.5&&parseFloat(result.lat)<-36.5;}).sort((a,b)=>{// Prioritize results with specific types\nconst priorityTypes=['building','amenity','shop','tourism','station'];const aHasPriority=priorityTypes.includes(a.type);const bHasPriority=priorityTypes.includes(b.type);if(aHasPriority&&!bHasPriority)return-1;if(!aHasPriority&&bHasPriority)return 1;return 0;});setSearchResults(filteredResults);setSearchingFor(type);}catch(error){console.error('Search error:',error);setSearchResults([]);}};// Select a location from search results\nconst selectLocation=result=>{const lat=parseFloat(result.lat);const lng=parseFloat(result.lon);const name=result.display_name.split(',')[0];// Get primary name\nif(searchingFor==='origin'){setOrigin([lat,lng]);setOriginName(name);setOriginSearch('');}else{setDest([lat,lng]);setDestName(name);setDestSearch('');}setSearchResults([]);setSearchingFor(null);};// Close dropdown when clicking outside\nconst closeSearchDropdown=()=>{setSearchResults([]);setSearchingFor(null);setOriginSearch('');setDestSearch('');};// Use current location\nconst useCurrentLocation=type=>{if(navigator.geolocation){navigator.geolocation.getCurrentPosition(async position=>{const lat=position.coords.latitude;const lng=position.coords.longitude;// Reverse geocode to get place name\ntry{var _data$address,_data$address2,_data$address3;const response=await fetch(\"https://nominatim.openstreetmap.org/reverse?format=json&lat=\".concat(lat,\"&lon=\").concat(lng));const data=await response.json();const name=((_data$address=data.address)===null||_data$address===void 0?void 0:_data$address.suburb)||((_data$address2=data.address)===null||_data$address2===void 0?void 0:_data$address2.city)||((_data$address3=data.address)===null||_data$address3===void 0?void 0:_data$address3.town)||'Current Location';if(type==='origin'){setOrigin([lat,lng]);setOriginName(name);}else{setDest([lat,lng]);setDestName(name);}}catch(error){if(type==='origin'){setOrigin([lat,lng]);setOriginName('Current Location');}else{setDest([lat,lng]);setDestName('Current Location');}}},error=>{alert('Could not get your location. Please enable location services.');});}else{alert('Geolocation is not supported by your browser.');}};const handleLogin=(token,username)=>{setToken(token);setUsername(username);setIsAuthenticated(true);};const logout=()=>{setToken(null);setUsername(null);setIsAuthenticated(false);localStorage.removeItem('atis_token');localStorage.removeItem('atis_user');localStorage.removeItem('atis_login_time');sessionStorage.removeItem('atis_token');sessionStorage.removeItem('atis_user');sessionStorage.removeItem('atis_login_time');setView('home');};// Show loading screen while verifying token - PREVENTS BLINKING\nif(isVerifying){return/*#__PURE__*/_jsx(\"div\",{style:{minHeight:'100vh',width:'100%',display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',background:'#0a0e27',// Exact match to app background\ncolor:'white',position:'fixed',top:0,left:0,zIndex:9999},children:/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:60,height:60,border:'4px solid rgba(139, 92, 246, 0.3)',borderTop:'4px solid #8b5cf6',borderRadius:'50%',animation:'spin 1s linear infinite',margin:'0 auto 20px'}}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:18,fontWeight:600},children:\"Verifying session...\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:14,opacity:0.7,marginTop:8},children:\"Please wait\"})]})});}// Show login page if not authenticated - NO ACCESS TO MAIN APP\nif(!isAuthenticated){return/*#__PURE__*/_jsx(LoginPage,{onLogin:handleLogin,isVerifying:false});}return/*#__PURE__*/_jsxs(\"div\",{style:{minHeight:'100vh',padding:'0',background:'#0a0e27',willChange:'auto'},children:[/*#__PURE__*/_jsx(\"nav\",{style:{position:'sticky',top:0,zIndex:1000,background:'rgba(10, 14, 39, 0.95)',borderBottom:'1px solid var(--glass-border)',boxShadow:'0 4px 24px rgba(0,0,0,0.1)'},children:/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:1400,margin:'0 auto',padding:'16px 24px',display:'flex',alignItems:'center',justifyContent:'space-between',gap:20},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:16},children:[/*#__PURE__*/_jsx(\"img\",{src:\"/atis-logo.jpg\",alt:\"ATIS\",style:{width:48,height:48,borderRadius:12,objectFit:'contain',boxShadow:'0 4px 12px rgba(0,0,0,0.2)'},onError:e=>{e.target.style.display='none';e.target.nextElementSibling.style.display='grid';}}),/*#__PURE__*/_jsx(\"div\",{className:\"logo\",style:{display:'none',width:48,height:48,fontSize:20},children:\"A\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{style:{fontSize:22,fontWeight:800,lineHeight:1,marginBottom:4},children:\"ATIS\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:12,color:'var(--muted)',lineHeight:1},children:\"Advanced Travel System\"})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',gap:8,flexWrap:'wrap'},children:['home','plan','map','alerts','safety','reviews','analytics','settings'].map(v=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setView(v);if(v==='analytics')loadAnalytics();},className:view===v?'btn btn-primary':'chip',style:{padding:'8px 16px',fontSize:13,fontWeight:600,textTransform:'capitalize',transition:'all 0.3s'},children:[v==='home'&&'ðŸ ',\" \",v==='plan'&&'ðŸ—ºï¸',\" \",v==='map'&&'ðŸŒ',v==='alerts'&&'âš ï¸',\" \",v==='safety'&&'ðŸ›¡ï¸',\" \",v==='reviews'&&'â­',v==='analytics'&&'ðŸ“Š',\" \",v==='settings'&&'âš™ï¸',\" \",' ',v.charAt(0).toUpperCase()+v.slice(1)]},v))}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:12},children:[/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'right'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:14,fontWeight:600},children:username||'Guest'}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,color:'var(--muted)'},children:\"Active Session\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:logout,className:\"btn btn-danger\",style:{padding:'8px 16px',fontSize:13},children:\"\\uD83D\\uDEAA Logout\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:1400,margin:'0 auto',padding:'32px 24px 80px'},children:[view==='home'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid-3\",style:{marginBottom:32},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:stops.length}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Nearby Stops\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:itins.length}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Routes Found\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:alerts.length}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Active Alerts\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",style:{marginBottom:32,background:'linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%)',border:'1px solid rgba(102, 126, 234, 0.3)'},children:[/*#__PURE__*/_jsxs(\"h2\",{style:{fontSize:28,fontWeight:800,marginBottom:12,background:'var(--gradient-1)',WebkitBackgroundClip:'text',WebkitTextFillColor:'transparent'},children:[\"Welcome back, \",username,\"! \\uD83D\\uDC4B\"]}),/*#__PURE__*/_jsx(\"p\",{style:{color:'var(--muted)',fontSize:15},children:\"Your intelligent travel companion for smarter journeys. Plan trips, check real-time updates, and navigate with confidence.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid-2\",style:{marginBottom:32},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card\",onClick:()=>setView('plan'),style:{cursor:'pointer'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:48,marginBottom:16},children:\"\\uD83D\\uDDFA\\uFE0F\"}),/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:20,fontWeight:700,marginBottom:8},children:\"Trip Planning\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'var(--muted)',fontSize:14},children:\"Plan multi-modal journeys with real-time data and alternative routes\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",onClick:()=>setView('map'),style:{cursor:'pointer'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:48,marginBottom:16},children:\"\\uD83C\\uDF0D\"}),/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:20,fontWeight:700,marginBottom:8},children:\"Interactive Map\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'var(--muted)',fontSize:14},children:\"Explore nearby stops, set destinations, and visualize your route\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",onClick:()=>setView('alerts'),style:{cursor:'pointer'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:48,marginBottom:16},children:\"\\u26A0\\uFE0F\"}),/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:20,fontWeight:700,marginBottom:8},children:\"Live Alerts\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'var(--muted)',fontSize:14},children:\"Stay updated with traffic incidents and service disruptions\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",onClick:()=>setView('safety'),style:{cursor:'pointer'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:48,marginBottom:16},children:\"\\uD83D\\uDEE1\\uFE0F\"}),/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:20,fontWeight:700,marginBottom:8},children:\"Safety Features\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'var(--muted)',fontSize:14},children:\"Emergency contacts and location sharing for peace of mind\"})]})]})]}),view==='map'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"\\uD83C\\uDF0D Interactive Map\"}),/*#__PURE__*/_jsxs(FeatureCard,{icon:\"\\uD83D\\uDDFA\\uFE0F\",title:\"Map View\",description:\"Drag origin marker, click map to set destination, view nearby stops\",children:[/*#__PURE__*/_jsx(\"div\",{style:{height:450,width:'100%',borderRadius:16,overflow:'hidden',boxShadow:'0 8px 24px rgba(0,0,0,0.12)'},children:/*#__PURE__*/_jsx(InteractiveMap,{origin:origin,setOrigin:setOrigin,dest:dest,setDest:setDest,stops:stops,trafficIncidents:trafficIncidents,lastUpdate:lastTrafficUpdate?getRelativeTime(lastTrafficUpdate):null,onRefresh:refreshTrafficData})}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:16,display:'flex',gap:10,flexWrap:'wrap'},children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary\",onClick:shareLocation,children:[\"\\uD83D\\uDCCD \",text.shareLocation]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn\",onClick:()=>navigator.clipboard.writeText(\"\".concat(origin[0].toFixed(5),\", \").concat(origin[1].toFixed(5))).then(()=>alert(text.locationCopied)),children:[\"\\uD83D\\uDCCB \",text.copyCoords]})]})]})]}),view==='alerts'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"\\u26A0\\uFE0F Live Alerts & Weather\"}),/*#__PURE__*/_jsx(FeatureCard,{icon:\"\\u26A1\",title:text.realTimeSnapshot,description:\"Live traffic, weather and notifications so riders stay ahead.\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexWrap:'wrap',gap:16},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:'1 1 200px',minWidth:220},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600,marginBottom:6},children:text.weatherNow}),weather?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:18,fontWeight:700},children:weather.condition}),/*#__PURE__*/_jsxs(\"div\",{style:{opacity:0.75},children:[\"Temp \",weather.tempC,\"\\xB0C \\u2022 Wind \",weather.windKph,\" km/h\"]})]}):/*#__PURE__*/_jsx(\"div\",{style:{opacity:0.65},children:\"Fetching latest forecast\\u2026\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:'2 1 320px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600,marginBottom:6},children:text.alertsIncidents}),/*#__PURE__*/_jsxs(\"ul\",{style:{margin:0,paddingLeft:18},children:[alerts.slice(0,6).map((a,i)=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:a.type||a.id}),\": \",a.title||a.summary,\" \",a.severity?\"\\u2022 \".concat(a.severity):'']},i)),alerts.length===0&&/*#__PURE__*/_jsx(\"li\",{style:{opacity:0.7},children:text.noAlerts})]})]}),banner&&/*#__PURE__*/_jsxs(\"div\",{style:{flexBasis:'100%',background:'rgba(37,99,235,0.12)',padding:12,borderRadius:12},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Notification:\"}),\" \",banner]})]})})]}),view==='plan'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"\\uD83D\\uDDFA\\uFE0F Trip Planning\"}),/*#__PURE__*/_jsx(FeatureCard,{icon:\"\\uD83E\\uDDED\",title:text.tripPlanning,description:\"Plan ahead, adapt on the fly, and export journeys for the road.\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gap:24,gridTemplateColumns:'minmax(260px, 1fr) minmax(320px, 1.35fr)'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:12},children:[/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsxs(\"label\",{style:{display:'flex',flexDirection:'column',gap:4},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:12,opacity:0.75},children:\"\\uD83D\\uDCCD Origin\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>useCurrentLocation('origin'),style:{padding:'4px 8px',fontSize:11},title:\"Use my current location\",children:\"\\uD83D\\uDCCD Current\"})]}),/*#__PURE__*/_jsx(\"input\",{value:originSearch||originName,onChange:e=>{setOriginSearch(e.target.value);searchLocation(e.target.value,'origin');},onFocus:e=>e.target.select(),placeholder:\"Search for a place...\",style:{fontWeight:600}})]}),searchingFor==='origin'&&searchResults.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',top:'100%',left:0,right:0,zIndex:1000,background:'linear-gradient(135deg, rgba(30, 41, 59, 0.98) 0%, rgba(15, 23, 42, 0.98) 100%)',backdropFilter:'blur(40px)',border:'2px solid rgba(139, 92, 246, 0.4)',borderRadius:16,marginTop:8,maxHeight:320,overflowY:'auto',boxShadow:'0 20px 60px rgba(0,0,0,0.6), 0 0 0 1px rgba(255,255,255,0.1) inset'},children:[/*#__PURE__*/_jsx(\"div\",{style:{padding:'10px 14px',fontSize:11,fontWeight:700,color:'rgba(139, 92, 246, 1)',borderBottom:'1px solid rgba(139, 92, 246, 0.2)',textTransform:'uppercase',letterSpacing:'0.5px'},children:\"\\uD83D\\uDCCD Select Origin Location\"}),searchResults.map((result,i)=>{var _result$address;return/*#__PURE__*/_jsxs(\"div\",{onClick:()=>selectLocation(result),style:{padding:'14px 16px',cursor:'pointer',borderBottom:i<searchResults.length-1?'1px solid rgba(255,255,255,0.06)':'none',transition:'all 0.2s',background:'transparent'},onMouseEnter:e=>{e.currentTarget.style.background='linear-gradient(90deg, rgba(139, 92, 246, 0.15) 0%, rgba(59, 130, 246, 0.15) 100%)';e.currentTarget.style.borderLeft='3px solid rgba(139, 92, 246, 0.8)';e.currentTarget.style.paddingLeft='13px';},onMouseLeave:e=>{e.currentTarget.style.background='transparent';e.currentTarget.style.borderLeft='none';e.currentTarget.style.paddingLeft='16px';},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:700,fontSize:15,color:'#ffffff',marginBottom:6,display:'flex',alignItems:'center',justifyContent:'space-between'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:8},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:18},children:result.type==='amenity'?'ðŸ¢':result.type==='building'?'ðŸ›ï¸':result.type==='tourism'?'ðŸŽ¯':result.type==='station'?'ðŸš‰':result.type==='shop'?'ðŸª':'ðŸ“'}),result.display_name.split(',')[0]]}),((_result$address=result.address)===null||_result$address===void 0?void 0:_result$address.suburb)&&/*#__PURE__*/_jsx(\"span\",{style:{fontSize:11,padding:'2px 8px',background:'rgba(139, 92, 246, 0.3)',borderRadius:8,color:'rgba(139, 92, 246, 1)',fontWeight:600},children:result.address.suburb})]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,color:'rgba(255,255,255,0.5)',lineHeight:1.5,paddingLeft:26,marginBottom:4},children:result.display_name.split(',').slice(1,3).join(',').trim()}),result.type&&/*#__PURE__*/_jsx(\"div\",{style:{fontSize:10,color:'rgba(255,255,255,0.4)',paddingLeft:26,fontStyle:'italic'},children:result.type.charAt(0).toUpperCase()+result.type.slice(1)})]},i);})]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:11,opacity:0.5,marginTop:4},children:[origin[0].toFixed(4),\", \",origin[1].toFixed(4)]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsxs(\"label\",{style:{display:'flex',flexDirection:'column',gap:4},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:12,opacity:0.75},children:\"\\uD83C\\uDFAF Destination\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>useCurrentLocation('dest'),style:{padding:'4px 8px',fontSize:11},title:\"Use my current location\",children:\"\\uD83D\\uDCCD Current\"})]}),/*#__PURE__*/_jsx(\"input\",{value:destSearch||destName,onChange:e=>{setDestSearch(e.target.value);searchLocation(e.target.value,'dest');},onFocus:e=>e.target.select(),placeholder:\"Search for a place...\",style:{fontWeight:600}})]}),searchingFor==='dest'&&searchResults.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',top:'100%',left:0,right:0,zIndex:1000,background:'linear-gradient(135deg, rgba(30, 41, 59, 0.98) 0%, rgba(15, 23, 42, 0.98) 100%)',backdropFilter:'blur(40px)',border:'2px solid rgba(59, 130, 246, 0.4)',borderRadius:16,marginTop:8,maxHeight:320,overflowY:'auto',boxShadow:'0 20px 60px rgba(0,0,0,0.6), 0 0 0 1px rgba(255,255,255,0.1) inset'},children:[/*#__PURE__*/_jsx(\"div\",{style:{padding:'10px 14px',fontSize:11,fontWeight:700,color:'rgba(59, 130, 246, 1)',borderBottom:'1px solid rgba(59, 130, 246, 0.2)',textTransform:'uppercase',letterSpacing:'0.5px'},children:\"\\uD83C\\uDFAF Select Destination Location\"}),searchResults.map((result,i)=>{var _result$address2;return/*#__PURE__*/_jsxs(\"div\",{onClick:()=>selectLocation(result),style:{padding:'14px 16px',cursor:'pointer',borderBottom:i<searchResults.length-1?'1px solid rgba(255,255,255,0.06)':'none',transition:'all 0.2s',background:'transparent'},onMouseEnter:e=>{e.currentTarget.style.background='linear-gradient(90deg, rgba(59, 130, 246, 0.15) 0%, rgba(16, 185, 129, 0.15) 100%)';e.currentTarget.style.borderLeft='3px solid rgba(59, 130, 246, 0.8)';e.currentTarget.style.paddingLeft='13px';},onMouseLeave:e=>{e.currentTarget.style.background='transparent';e.currentTarget.style.borderLeft='none';e.currentTarget.style.paddingLeft='16px';},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:700,fontSize:15,color:'#ffffff',marginBottom:6,display:'flex',alignItems:'center',justifyContent:'space-between'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:8},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:18},children:result.type==='amenity'?'ðŸ¢':result.type==='building'?'ðŸ›ï¸':result.type==='tourism'?'ðŸŽ¯':result.type==='station'?'ðŸš‰':result.type==='shop'?'ðŸª':'ðŸŽ¯'}),result.display_name.split(',')[0]]}),((_result$address2=result.address)===null||_result$address2===void 0?void 0:_result$address2.suburb)&&/*#__PURE__*/_jsx(\"span\",{style:{fontSize:11,padding:'2px 8px',background:'rgba(59, 130, 246, 0.3)',borderRadius:8,color:'rgba(59, 130, 246, 1)',fontWeight:600},children:result.address.suburb})]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,color:'rgba(255,255,255,0.5)',lineHeight:1.5,paddingLeft:26,marginBottom:4},children:result.display_name.split(',').slice(1,3).join(',').trim()}),result.type&&/*#__PURE__*/_jsx(\"div\",{style:{fontSize:10,color:'rgba(255,255,255,0.4)',paddingLeft:26,fontStyle:'italic'},children:result.type.charAt(0).toUpperCase()+result.type.slice(1)})]},i);})]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:11,opacity:0.5,marginTop:4},children:[dest[0].toFixed(4),\", \",dest[1].toFixed(4)]})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',gap:8},children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:swapOD,style:{flex:1},children:\"\\uD83D\\uDD04 Swap\"})}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:6},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:12,opacity:0.75},children:\"Preferred modes\"}),/*#__PURE__*/_jsx(\"div\",{children:['bus','train','ferry','walk','bike'].map(m=>/*#__PURE__*/_jsxs(\"label\",{style:{marginRight:10},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:modes.includes(m),onChange:()=>toggleMode(m)}),\" \",m]},m))})]}),/*#__PURE__*/_jsxs(\"label\",{style:{display:'flex',flexDirection:'column',gap:4},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:12,opacity:0.75},children:\"Optimize for\"}),/*#__PURE__*/_jsxs(\"select\",{value:optimize,onChange:e=>setOptimize(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"fastest\",children:\"Fastest\"}),/*#__PURE__*/_jsx(\"option\",{value:\"fewest_transfers\",children:\"Fewest transfers\"}),/*#__PURE__*/_jsx(\"option\",{value:\"least_walking\",children:\"Least walking\"}),/*#__PURE__*/_jsx(\"option\",{value:\"reliable\",children:\"Most reliable\"})]})]}),/*#__PURE__*/_jsxs(\"label\",{style:{display:'flex',flexDirection:'column',gap:4},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:12,opacity:0.75},children:\"Max walking distance (km)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",max:\"3\",step:\"0.1\",value:maxWalkKm,onChange:e=>setMaxWalkKm(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:12,flexWrap:'wrap'},children:[/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:avoidStairs,onChange:e=>setAvoidStairs(e.target.checked)}),\" Avoid stairs\"]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:bikeOk,onChange:e=>setBikeOk(e.target.checked)}),\" Bike friendly\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:6},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:12,opacity:0.75},children:\"When to travel\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:12},children:[/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"when\",value:\"depart\",checked:whenType==='depart',onChange:()=>setWhenType('depart')}),\" Depart at\"]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"when\",value:\"arrive\",checked:whenType==='arrive',onChange:()=>setWhenType('arrive')}),\" Arrive by\"]})]}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"now or 2025-11-03T09:00\",value:whenValue,onChange:e=>setWhenValue(e.target.value)})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:plan,style:{alignSelf:'flex-start'},children:text.findItineraries})]}),/*#__PURE__*/_jsx(\"div\",{children:itins.length===0?/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',padding:'40px 20px',background:'var(--glass-bg)',backdropFilter:'blur(10px)',borderRadius:16,border:'1px dashed var(--line)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:48,marginBottom:12},children:\"\\uD83D\\uDE80\"}),/*#__PURE__*/_jsxs(\"p\",{style:{color:'var(--muted)',fontSize:15},children:[\"Press \",/*#__PURE__*/_jsx(\"b\",{style:{color:'var(--primary)'},children:\"Find itineraries\"}),\" to see recommended routes.\"]})]}):/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexDirection:'column',gap:16},children:itins.map((it,idx)=>{var _it$walk_km,_alts$it$id$compariso,_alts$it$id$compariso2;return/*#__PURE__*/_jsxs(\"div\",{style:{background:'var(--glass-bg)',backdropFilter:'blur(10px)',border:'1px solid var(--glass-border)',borderRadius:16,padding:20,boxShadow:'0 4px 16px rgba(0,0,0,0.08)',transition:'all 0.3s ease'},onMouseEnter:e=>e.currentTarget.style.boxShadow='0 8px 24px rgba(0,0,0,0.15)',onMouseLeave:e=>e.currentTarget.style.boxShadow='0 4px 16px rgba(0,0,0,0.08)',children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'flex-start',gap:16,flexWrap:'wrap'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:10,marginBottom:10,flexWrap:'wrap'},children:[/*#__PURE__*/_jsx(\"span\",{style:{background:'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',color:'white',width:32,height:32,borderRadius:'50%',display:'grid',placeItems:'center',fontWeight:700,fontSize:14},children:idx+1}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:18,fontWeight:700},children:[\"~\",it.durationMin,\" min\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'var(--muted)',fontSize:14},children:[\"\\u2022 \",it.transfers,\" transfers\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:it.reliability>0.85?'rgba(16, 185, 129, 0.15)':'rgba(251, 191, 36, 0.15)',color:it.reliability>0.85?'var(--success)':'#f59e0b',padding:'4px 10px',borderRadius:8,fontSize:12,fontWeight:600},children:[Math.round((it.reliability||0)*100),\"% reliable\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'var(--muted)',fontSize:14,marginBottom:10},children:[\"\\uD83D\\uDEB6 \",it.legs.join(' â†’ ')]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:8,flexWrap:'wrap'},children:[/*#__PURE__*/_jsxs(Chip,{children:[\"\\uD83D\\uDEB6 \",((_it$walk_km=it.walk_km)!==null&&_it$walk_km!==void 0?_it$walk_km:0).toFixed(1),\" km walk\"]}),/*#__PURE__*/_jsx(Chip,{children:(it.modes||[]).join(', ')})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:8,flexWrap:'wrap'},children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn\",onClick:e=>{e.stopPropagation();exportPdf(it);},children:[\"\\uD83D\\uDCC4 \",text.exportPdf]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary\",onClick:e=>{e.stopPropagation();suggestAlt(it);},children:[\"\\uD83D\\uDD04 \",text.suggestAlt]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:e=>{e.stopPropagation();setExpandedItin(expandedItin===it.id?null:it.id);},style:{background:expandedItin===it.id?'var(--primary)':'',color:expandedItin===it.id?'white':''},children:expandedItin===it.id?'â–¼ Hide Details':'â–¶ View Details'})]})]}),expandedItin===it.id&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:20,padding:20,background:'linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%)',border:'1px solid rgba(102, 126, 234, 0.2)',borderRadius:12},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(140px, 1fr))',gap:12,marginBottom:20},children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:12,background:'rgba(255,255,255,0.05)',borderRadius:10,border:'1px solid rgba(255,255,255,0.1)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,opacity:0.6,marginBottom:4},children:\"\\uD83D\\uDCB5 Estimated Fare\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:16,fontWeight:700},children:[\"$\",(2.50+it.transfers*0.50).toFixed(2),\" NZD\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:12,background:'rgba(255,255,255,0.05)',borderRadius:10,border:'1px solid rgba(255,255,255,0.1)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,opacity:0.6,marginBottom:4},children:\"\\uD83C\\uDF31 CO\\u2082 Savings\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:16,fontWeight:700},children:it.environmental?\"\".concat(it.environmental.co2_saved_kg.toFixed(2),\" kg\"):\"\".concat((it.durationMin*0.05).toFixed(1),\" kg\")}),it.environmental&&/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:10,opacity:0.5,marginTop:2},children:[it.environmental.co2_saved_percent.toFixed(0),\"% vs car\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:12,background:'rgba(255,255,255,0.05)',borderRadius:10,border:'1px solid rgba(255,255,255,0.1)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,opacity:0.6,marginBottom:4},children:\"\\u23F1\\uFE0F Departure\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:16,fontWeight:700},children:\"In 3 min\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:12,background:'rgba(255,255,255,0.05)',borderRadius:10,border:'1px solid rgba(255,255,255,0.1)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,opacity:0.6,marginBottom:4},children:\"\\uD83D\\uDC65 Crowding\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:16,fontWeight:700},children:\"\\u25CF\\u25CF\\u25CB\\u25CB Low\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:12,background:'rgba(255,255,255,0.05)',borderRadius:10,border:'1px solid rgba(255,255,255,0.1)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,opacity:0.6,marginBottom:4},children:\"\\u267F Accessible\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:16,fontWeight:700},children:it.stairs?'âš ï¸ Stairs':'âœ“ Yes'})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:12,background:'rgba(255,255,255,0.05)',borderRadius:10,border:'1px solid rgba(255,255,255,0.1)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,opacity:0.6,marginBottom:4},children:\"\\uD83D\\uDD0C Charging\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:16,fontWeight:700},children:\"Available\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:16},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:14,fontWeight:700,marginBottom:12,color:'var(--primary)'},children:\"\\uD83D\\uDCCD Step-by-Step Journey\"}),it.legs.map((leg,legIdx)=>{const isWalk=leg.toLowerCase().includes('walk');const isBus=leg.toLowerCase().includes('bus');const isTrain=leg.toLowerCase().includes('train');const isFerry=leg.toLowerCase().includes('ferry');const isBike=leg.toLowerCase().includes('bike');// Extract route number (e.g., \"Bus NX1\" -> \"NX1\")\nconst routeMatch=leg.match(/(?:Bus|Train)\\s+([A-Z0-9]+)/i);const routeNumber=routeMatch?routeMatch[1]:null;return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:16,marginBottom:16,paddingBottom:16,borderBottom:legIdx<it.legs.length-1?'1px dashed rgba(255,255,255,0.1)':'none'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',alignItems:'center',minWidth:60},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:40,height:40,borderRadius:'50%',background:isWalk?'linear-gradient(135deg, #10b981 0%, #059669 100%)':isBus?'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)':isTrain?'linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)':isFerry?'linear-gradient(135deg, #06b6d4 0%, #0891b2 100%)':'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',color:'white',display:'grid',placeItems:'center',fontSize:18,fontWeight:700,boxShadow:'0 4px 12px rgba(0,0,0,0.2)'},children:isWalk?'ðŸš¶':isBus?'ðŸšŒ':isTrain?'ðŸš†':isFerry?'â›´ï¸':isBike?'ðŸš´':'ðŸšŒ'}),legIdx<it.legs.length-1&&/*#__PURE__*/_jsx(\"div\",{style:{width:2,flex:1,background:'rgba(255,255,255,0.2)',minHeight:20,marginTop:8}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:15,fontWeight:700,marginBottom:6},children:leg}),isWalk&&/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:13,color:'rgba(255,255,255,0.7)',marginBottom:8},children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:4},children:[\"\\uD83D\\uDCCF Distance: \",((it.walk_km||0.4)/it.legs.filter(l=>l.toLowerCase().includes('walk')).length).toFixed(2),\" km\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:4},children:[\"\\u23F1\\uFE0F Duration: ~\",Math.ceil((it.walk_km||0.4)/it.legs.filter(l=>l.toLowerCase().includes('walk')).length*12),\" min\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>{// Show walking route on map\nalert(\"Walking directions:\\n1. Head \".concat(legIdx===0?'to nearest stop':'to your destination',\"\\n2. Follow pedestrian paths\\n3. Cross at designated crossings\\n\\nOpening map view...\"));setView('map');},style:{marginTop:8,padding:'6px 12px',fontSize:12,background:'linear-gradient(135deg, #10b981 0%, #059669 100%)',color:'white',border:'none'},children:\"\\uD83D\\uDDFA\\uFE0F View Walking Route\"})]}),(isBus||isTrain||isFerry)&&/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:13,color:'rgba(255,255,255,0.7)'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:8,padding:10,background:'rgba(255,255,255,0.05)',borderRadius:8},children:[routeNumber&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:6},children:[/*#__PURE__*/_jsx(\"span\",{style:{background:isBus?'#3b82f6':isTrain?'#8b5cf6':'#06b6d4',color:'white',padding:'4px 10px',borderRadius:6,fontSize:13,fontWeight:700,marginRight:8},children:routeNumber}),/*#__PURE__*/_jsx(\"span\",{style:{opacity:0.8},children:isBus?'Bus Route':isTrain?'Train Line':'Ferry Route'})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:4},children:[\"\\uD83D\\uDE8F \",/*#__PURE__*/_jsx(\"b\",{children:\"From:\"}),\" Stop #\",1000+legIdx*100,\" - \",legIdx===0?'Start Point':\"Transfer Point \".concat(legIdx)]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:4},children:[\"\\uD83C\\uDFAF \",/*#__PURE__*/_jsx(\"b\",{children:\"To:\"}),\" Stop #\",1000+legIdx*100+50,\" - \",legIdx===it.legs.length-1?'End Point':'Next Transfer']}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:4},children:[\"\\u23F1\\uFE0F \",/*#__PURE__*/_jsx(\"b\",{children:\"Next Departure:\"}),\" \",/*#__PURE__*/_jsx(\"span\",{style:{color:'#10b981',fontWeight:600},children:\"3, 8, 15 min\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:4},children:[\"\\uD83E\\uDE91 \",/*#__PURE__*/_jsx(\"b\",{children:\"Platform/Bay:\"}),\" \",isTrain?'Platform':'Bay',\" \",legIdx+1]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:4},children:[\"\\uD83C\\uDFAB \",/*#__PURE__*/_jsx(\"b\",{children:\"Zone:\"}),\" Zone \",Math.min(legIdx+1,3)]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:4},children:[\"\\uD83D\\uDC65 \",/*#__PURE__*/_jsx(\"b\",{children:\"Current Load:\"}),\" \",['Light','Moderate','Busy'][Math.floor(Math.random()*3)]]}),isTrain&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:4},children:[\"\\uD83D\\uDE83 \",/*#__PURE__*/_jsx(\"b\",{children:\"Carriages:\"}),\" 3-car train\"]}),isBus&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:4},children:[\"\\u267F \",/*#__PURE__*/_jsx(\"b\",{children:\"Features:\"}),\" Low-floor, wheelchair accessible\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:8,marginTop:8,flexWrap:'wrap'},children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>{setSelectedStop({stop_id:\"\".concat(1000+legIdx*100),name:\"Stop \".concat(1000+legIdx*100)});setView('home');},style:{padding:'6px 12px',fontSize:12},children:\"\\uD83D\\uDE8F View Stop Info\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>alert(\"Live tracking for \".concat(routeNumber||'this route',\" will be available soon!\")),style:{padding:'6px 12px',fontSize:12},children:\"\\uD83D\\uDCCD Track Vehicle\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>alert(\"Set reminder for \".concat(routeNumber||'this departure')),style:{padding:'6px 12px',fontSize:12},children:\"\\uD83D\\uDD14 Set Reminder\"})]})]})]})]},legIdx);})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:20,padding:12,background:'rgba(59, 130, 246, 0.1)',borderLeft:'3px solid #3b82f6',borderRadius:6},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:13,fontWeight:700,marginBottom:6},children:\"\\uD83D\\uDCA1 Travel Tips\"}),/*#__PURE__*/_jsxs(\"ul\",{style:{fontSize:12,color:'rgba(255,255,255,0.8)',margin:0,paddingLeft:20},children:[/*#__PURE__*/_jsx(\"li\",{children:\"Allow 5 extra minutes for unexpected delays\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Have your AT HOP card ready before boarding\"}),it.transfers>0&&/*#__PURE__*/_jsx(\"li\",{children:\"Transfers are free within 30 minutes\"}),it.stairs&&/*#__PURE__*/_jsx(\"li\",{children:\"This route includes stairs - consider accessibility needs\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Check real-time updates before you leave\"})]})]}),it.mcda_score&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:20,padding:16,background:'linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(219, 39, 119, 0.1) 100%)',border:'2px solid rgba(139, 92, 246, 0.3)',borderRadius:12},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:12},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:14,fontWeight:700,color:'#a78bfa'},children:\"\\uD83C\\uDFC6 Multi-Criteria Decision Score (MCDA)\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:24,fontWeight:700,color:it.mcda_score>=85?'#10b981':it.mcda_score>=70?'#3b82f6':'#f59e0b',display:'flex',alignItems:'center',gap:6},children:[it.mcda_score.toFixed(1),\"/100\",it.mcda_rank&&/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:14,opacity:0.7},children:[\"#\",it.mcda_rank]})]})]}),it.mcda_recommendation&&/*#__PURE__*/_jsx(\"div\",{style:{fontSize:12,padding:'8px 12px',background:'rgba(139, 92, 246, 0.15)',borderRadius:8,marginBottom:12,color:'rgba(255,255,255,0.9)'},children:it.mcda_recommendation}),it.mcda_breakdown&&/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(120px, 1fr))',gap:10},children:Object.entries(it.mcda_breakdown).map(_ref0=>{let[criterion,score]=_ref0;return/*#__PURE__*/_jsxs(\"div\",{style:{padding:10,background:'rgba(0,0,0,0.2)',borderRadius:8,border:'1px solid rgba(255,255,255,0.1)'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:10,opacity:0.6,marginBottom:4,textTransform:'capitalize'},children:[criterion==='time'?'â±ï¸':criterion==='cost'?'ðŸ’°':criterion==='comfort'?'ðŸ›‹ï¸':criterion==='reliability'?'âœ“':'ðŸŒ±',\" \",criterion]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:14,fontWeight:700,color:score>=80?'#10b981':score>=60?'#3b82f6':'#f59e0b'},children:[score.toFixed(0),\"/100\"]}),/*#__PURE__*/_jsx(\"div\",{style:{width:'100%',height:4,background:'rgba(255,255,255,0.1)',borderRadius:2,marginTop:4,overflow:'hidden'},children:/*#__PURE__*/_jsx(\"div\",{style:{width:\"\".concat(score,\"%\"),height:'100%',background:score>=80?'#10b981':score>=60?'#3b82f6':'#f59e0b',borderRadius:2}})})]},criterion);})}),it.mcda_weights&&/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:10,opacity:0.5,marginTop:8},children:[\"Weights: \",Object.entries(it.mcda_weights).map(_ref1=>{let[k,v]=_ref1;return\"\".concat(k,\" \").concat((v*100).toFixed(0),\"%\");}).join(' â€¢ ')]})]}),it.environmental&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:20,padding:16,background:'linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(52, 211, 153, 0.1) 100%)',border:'2px solid rgba(16, 185, 129, 0.3)',borderRadius:12},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:14,fontWeight:700,color:'#10b981',marginBottom:12},children:\"\\uD83C\\uDF0D Environmental Impact Analysis\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(150px, 1fr))',gap:12,marginBottom:12},children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:12,background:'rgba(16, 185, 129, 0.1)',borderRadius:8},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,opacity:0.7,marginBottom:4},children:\"CO\\u2082 Emissions\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:18,fontWeight:700,color:'#10b981'},children:[it.environmental.total_co2_kg.toFixed(2),\" kg\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:12,background:'rgba(16, 185, 129, 0.1)',borderRadius:8},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,opacity:0.7,marginBottom:4},children:\"CO\\u2082 Saved vs Car\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:18,fontWeight:700,color:'#10b981'},children:[it.environmental.co2_saved_kg.toFixed(2),\" kg\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:10,opacity:0.6,marginTop:2},children:[it.environmental.co2_saved_percent.toFixed(0),\"% reduction\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:12,background:'rgba(16, 185, 129, 0.1)',borderRadius:8},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,opacity:0.7,marginBottom:4},children:\"Distance\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:18,fontWeight:700,color:'#10b981'},children:[it.environmental.total_distance_km.toFixed(1),\" km\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:12,background:'rgba(16, 185, 129, 0.1)',borderRadius:8},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,opacity:0.7,marginBottom:4},children:\"Trees to Offset\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:18,fontWeight:700,color:'#10b981'},children:[it.environmental.trees_equivalent.toFixed(2),\" \\uD83C\\uDF33\"]})]})]}),it.environmental.legs&&it.environmental.legs.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:12},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:12,fontWeight:600,marginBottom:8,opacity:0.8},children:\"Emissions by Leg:\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexDirection:'column',gap:6},children:it.environmental.legs.map((leg,idx)=>/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',padding:'8px 12px',background:'rgba(0,0,0,0.2)',borderRadius:6,fontSize:11},children:[/*#__PURE__*/_jsxs(\"span\",{children:[leg.mode,\" (\",leg.distance_km.toFixed(1),\" km)\"]}),/*#__PURE__*/_jsxs(\"span\",{style:{fontWeight:600,color:'#10b981'},children:[leg.co2_kg.toFixed(3),\" kg CO\\u2082\"]})]},idx))})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:12,padding:'10px 12px',background:'rgba(16, 185, 129, 0.15)',borderRadius:8,fontSize:12},children:[\"\\uD83D\\uDCA1 \",/*#__PURE__*/_jsx(\"b\",{children:\"Eco-Score:\"}),\" \",it.environmental.eco_score?\"\".concat(it.environmental.eco_score,\"/100\"):'Excellent choice for the environment!',it.environmental.co2_saved_percent>=70&&\" - You're making a significant positive impact! ðŸŒŸ\"]})]})]}),alts[it.id]&&/*#__PURE__*/_jsxs(\"div\",{className:\"alt\",style:{marginTop:16,padding:20,background:'linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(52, 211, 153, 0.05) 100%)',border:'2px solid rgba(16, 185, 129, 0.3)',borderRadius:16,boxShadow:'0 4px 15px rgba(16, 185, 129, 0.15)'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',justifyContent:'space-between',marginBottom:12},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:700,fontSize:16,color:'#10b981'},children:[\"\\u2728 \",alts[it.id].reason]}),alts[it.id].comparison&&/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',gap:8,alignItems:'center'},children:alts[it.id].comparison.timeDiff!==0&&/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:12,padding:'4px 10px',background:alts[it.id].comparison.timeDiff<0?'rgba(16, 185, 129, 0.2)':'rgba(239, 68, 68, 0.2)',color:alts[it.id].comparison.timeDiff<0?'#10b981':'#ef4444',borderRadius:8,fontWeight:600},children:[alts[it.id].comparison.timeDiff>0?'+':'',alts[it.id].comparison.timeDiff,\" min\"]})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(150px, 1fr))',gap:12,marginBottom:12},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(255,255,255,0.05)',padding:12,borderRadius:12,border:'1px solid rgba(255,255,255,0.1)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,opacity:0.6,marginBottom:4},children:\"Duration\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:16,fontWeight:700},children:[\"~\",alts[it.id].durationMin||'â€”',\" min\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(255,255,255,0.05)',padding:12,borderRadius:12,border:'1px solid rgba(255,255,255,0.1)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,opacity:0.6,marginBottom:4},children:\"Transfers\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:16,fontWeight:700},children:[alts[it.id].transfers||0,((_alts$it$id$compariso=alts[it.id].comparison)===null||_alts$it$id$compariso===void 0?void 0:_alts$it$id$compariso.transferDiff)!==0&&/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:11,marginLeft:6,color:alts[it.id].comparison.transferDiff<0?'#10b981':'#ef4444'},children:[\"(\",alts[it.id].comparison.transferDiff>0?'+':'',alts[it.id].comparison.transferDiff,\")\"]})]})]}),alts[it.id].walk_distance&&/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(255,255,255,0.05)',padding:12,borderRadius:12,border:'1px solid rgba(255,255,255,0.1)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,opacity:0.6,marginBottom:4},children:\"Walking\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:16,fontWeight:700},children:[alts[it.id].walk_distance,\" km\",((_alts$it$id$compariso2=alts[it.id].comparison)===null||_alts$it$id$compariso2===void 0?void 0:_alts$it$id$compariso2.walkDiff)!==0&&/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:11,marginLeft:6,color:alts[it.id].comparison.walkDiff<0?'#10b981':'#ef4444'},children:[\"(\",alts[it.id].comparison.walkDiff>0?'+':'',alts[it.id].comparison.walkDiff,\"km)\"]})]})]})]}),alts[it.id].legs&&/*#__PURE__*/_jsxs(\"div\",{style:{padding:12,background:'rgba(255,255,255,0.03)',borderRadius:10,marginBottom:10},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,opacity:0.6,marginBottom:6},children:\"Route Details\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:14,fontWeight:600},children:[\"\\uD83D\\uDEB6 \",alts[it.id].legs.join(' â†’ ')]})]}),alts[it.id].benefits&&alts[it.id].benefits.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:10},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,opacity:0.6,marginBottom:6},children:\"Benefits:\"}),alts[it.id].benefits.map((benefit,idx)=>/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:13,padding:'6px 10px',background:'rgba(16, 185, 129, 0.15)',borderLeft:'3px solid #10b981',borderRadius:6,marginBottom:4},children:[\"\\u2713 \",benefit]},idx))]}),alts[it.id].warnings&&alts[it.id].warnings.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:10},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,opacity:0.6,marginBottom:6},children:\"Warnings:\"}),alts[it.id].warnings.map((warning,idx)=>/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:13,padding:'6px 10px',background:'rgba(251, 191, 36, 0.15)',borderLeft:'3px solid #fbbf24',borderRadius:6,marginBottom:4},children:[\"\\u26A0 \",warning]},idx))]}),alts[it.id].note&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:10,padding:10,background:'rgba(59, 130, 246, 0.1)',borderLeft:'3px solid #3b82f6',borderRadius:6,fontSize:13,color:'rgba(255,255,255,0.8)'},children:[\"\\u2139\\uFE0F \",alts[it.id].note]})]})]},it.id);})})})]})}),/*#__PURE__*/_jsx(FeatureCard,{icon:\"\\uD83D\\uDE8D\",title:\"Nearby Transit\",description:\"Check nearby stops, live departures, and multimodal choices.\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:18},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexWrap:'wrap',gap:12},children:[stops.slice(0,6).map(s=>/*#__PURE__*/_jsxs(\"div\",{style:{padding:12,border:'1px solid var(--line,#e5e7eb)',borderRadius:12,background:'var(--card,#fff)',minWidth:180},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700},children:s.name}),/*#__PURE__*/_jsxs(\"div\",{style:{opacity:0.7,fontSize:12},children:[s.distance_m,\" m away\"]}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:10},children:/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>viewDepartures(s),children:\"Live departures\"})})]},s.stop_id)),stops.length===0&&/*#__PURE__*/_jsx(\"div\",{style:{opacity:0.7},children:\"Searching for nearby stops\\u2026\"})]}),selectedStop&&/*#__PURE__*/_jsxs(\"div\",{style:{border:'1px solid var(--line,#e5e7eb)',borderRadius:12,padding:16,background:'var(--card,#fff)'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:700,marginBottom:8},children:[\"Departures \\u2014 \",selectedStop.name]}),/*#__PURE__*/_jsxs(\"ul\",{style:{margin:0,paddingLeft:18},children:[departures.map((d,i)=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:d.route}),\" \\u2192 \",d.headsign,\" \",/*#__PURE__*/_jsxs(\"span\",{style:{opacity:0.65},children:[\"in \",d.departure_in_min,\" min\"]})]},i)),departures.length===0&&/*#__PURE__*/_jsx(\"li\",{style:{opacity:0.65},children:\"Loading departures\\u2026\"})]})]})]})})]}),view==='safety'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"\\uD83D\\uDEE1\\uFE0F Safety & Emergency\"}),/*#__PURE__*/_jsx(FeatureCard,{icon:\"\\uD83D\\uDCDE\",title:\"Emergency Contacts\",description:\"Quick access to local emergency services.\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexWrap:'wrap',gap:20},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:'1 1 260px',display:'flex',flexDirection:'column',gap:10},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600},children:\"Quick actions\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>updateSavedPlace('home',origin),children:\"Save home\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>updateSavedPlace('work',dest),children:\"Save work\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:savePrefs,children:\"Save to profile\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:saveOfflinePack,children:text.offlineCta}),token?/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:13,opacity:0.75},children:[\"Signed in as \",username,\". Preferences sync across devices.\"]}):/*#__PURE__*/_jsx(\"div\",{style:{fontSize:13,opacity:0.75},children:\"Create an account above to sync preferences and reviews.\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:'1 1 260px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:600,marginBottom:6},children:[\"\\uD83D\\uDEDF \",text.emergencyContacts]}),/*#__PURE__*/_jsxs(\"ul\",{style:{margin:0,paddingLeft:18},children:[safetyContacts.map((c,i)=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:c.name}),\" \\u2014 \",/*#__PURE__*/_jsx(\"a\",{href:\"tel:\".concat(c.phone),style:{color:'var(--danger)',fontWeight:700},children:c.phone})]},i)),safetyContacts.length===0&&/*#__PURE__*/_jsx(\"li\",{style:{opacity:0.7},children:\"Loading local contacts\\u2026\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:12},children:/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:shareLocation,children:text.shareLocation})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:'1 1 260px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600,marginBottom:6},children:\"Share status\"}),/*#__PURE__*/_jsxs(\"p\",{style:{opacity:0.75},children:[\"Tap \",/*#__PURE__*/_jsx(\"em\",{children:\"Save offline snapshot\"}),\" before you head out to keep routes, alerts, and emergency numbers handy \\u2014 even without coverage.\"]})]})]})})]}),view==='settings'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"\\u2699\\uFE0F Settings & Preferences\"}),/*#__PURE__*/_jsx(FeatureCard,{icon:\"\\uD83C\\uDF0D\",title:\"Travel Toolkit\",description:\"International tools for language, money, and bookings.\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexWrap:'wrap',gap:20},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:'1 1 220px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600,marginBottom:6},children:\"In-app translator\"}),/*#__PURE__*/_jsxs(\"p\",{style:{opacity:0.75},children:[\"Interface now in \",/*#__PURE__*/_jsx(\"strong\",{children:uiLang.toUpperCase()}),\". Additional copy will respect this preference as the app grows.\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:'1 1 260px',display:'flex',flexDirection:'column',gap:8},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600},children:\"Currency helper\"}),/*#__PURE__*/_jsx(\"label\",{style:{fontSize:12,opacity:0.75},children:\"Amount in NZD\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:amount,min:\"0\",onChange:e=>setAmount(Number(e.target.value)||0)}),/*#__PURE__*/_jsx(\"label\",{style:{fontSize:12,opacity:0.75},children:\"Convert to\"}),/*#__PURE__*/_jsx(\"select\",{value:currency,onChange:e=>setCurrency(e.target.value),children:currencyOptions.map(code=>/*#__PURE__*/_jsx(\"option\",{value:code,children:code},code))}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:4,fontWeight:600},children:[\"\\u2248 \",convertedAmount,\" \",currency]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:'1 1 260px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600,marginBottom:6},children:\"Bookings & payments\"}),/*#__PURE__*/_jsxs(\"ul\",{style:{margin:0,paddingLeft:18},children:[/*#__PURE__*/_jsx(\"li\",{children:\"Reserve transit passes and parking\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Bundle flights + hotels (coming soon)\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Secure wallet for ticketing integrations\"})]})]})]})})]}),view==='reviews'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"\\u2B50 Community Reviews\"}),/*#__PURE__*/_jsx(FeatureCard,{icon:\"\\u2B50\",title:\"Share Your Experience\",description:\"Crowd-sourced tips keep travellers informed.\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexWrap:'wrap',gap:20},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:'1 1 260px',display:'flex',flexDirection:'column',gap:10},children:[/*#__PURE__*/_jsxs(\"label\",{style:{display:'flex',flexDirection:'column',gap:4},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:12,opacity:0.75},children:\"Location\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"e.g., Britomart\",value:reviewLoc,onChange:e=>setReviewLoc(e.target.value)})]}),/*#__PURE__*/_jsxs(\"label\",{style:{display:'flex',flexDirection:'column',gap:4},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:12,opacity:0.75},children:\"Rating\"}),/*#__PURE__*/_jsx(\"select\",{value:reviewRating,onChange:e=>setReviewRating(e.target.value),children:[5,4,3,2,1].map(n=>/*#__PURE__*/_jsx(\"option\",{value:n,children:n},n))})]}),/*#__PURE__*/_jsxs(\"label\",{style:{display:'flex',flexDirection:'column',gap:4},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:12,opacity:0.75},children:\"Comment\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Short note\\u2026\",value:reviewComment,onChange:e=>setReviewComment(e.target.value)})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:submitReview,children:\"Share review\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:'1 1 320px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600,marginBottom:8},children:\"Latest reviews\"}),/*#__PURE__*/_jsxs(\"ul\",{style:{margin:0,paddingLeft:18,display:'flex',flexDirection:'column',gap:8},children:[reviews.map((r,i)=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:r.location}),\" \\u2022 \",r.rating,\"/5 \\u2014 \",r.comment,\" \",/*#__PURE__*/_jsxs(\"span\",{style:{opacity:0.6},children:[\"by \",r.user]})]},i)),reviews.length===0&&/*#__PURE__*/_jsx(\"li\",{style:{opacity:0.7},children:\"Be the first to add a community update.\"})]})]})]})})]}),view==='analytics'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"\\uD83D\\uDCCA System Analytics Dashboard\"}),/*#__PURE__*/_jsx(\"div\",{style:{padding:'16px 20px',background:'linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(139, 92, 246, 0.15) 100%)',borderRadius:12,border:'1px solid rgba(59, 130, 246, 0.3)',marginBottom:24},children:/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:14},children:[/*#__PURE__*/_jsx(\"b\",{children:\"\\uD83C\\uDF93 Assessment Feature:\"}),\" Analytics dashboard tracks system usage, environmental impact, and performance metrics for research and evaluation purposes.\"]})}),analyticsData?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(200px, 1fr))',gap:16,marginBottom:32},children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:20,background:'var(--glass-bg)',backdropFilter:'blur(10px)',borderRadius:12,border:'1px solid var(--glass-border)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:12,opacity:0.7,marginBottom:6},children:\"Total Trips Planned\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:32,fontWeight:700,color:'#3b82f6'},children:analyticsData.total_trips||0})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:20,background:'var(--glass-bg)',backdropFilter:'blur(10px)',borderRadius:12,border:'1px solid var(--glass-border)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:12,opacity:0.7,marginBottom:6},children:\"Active Users (7d)\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:32,fontWeight:700,color:'#8b5cf6'},children:analyticsData.active_users_7d||0})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:20,background:'var(--glass-bg)',backdropFilter:'blur(10px)',borderRadius:12,border:'1px solid var(--glass-border)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:12,opacity:0.7,marginBottom:6},children:\"CO\\u2082 Saved (kg)\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:32,fontWeight:700,color:'#10b981'},children:((_analyticsData$total_=analyticsData.total_co2_saved_kg)===null||_analyticsData$total_===void 0?void 0:_analyticsData$total_.toFixed(1))||0}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,opacity:0.6,marginTop:4},children:\"vs driving alone\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:20,background:'var(--glass-bg)',backdropFilter:'blur(10px)',borderRadius:12,border:'1px solid var(--glass-border)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:12,opacity:0.7,marginBottom:6},children:\"Avg MCDA Score\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:32,fontWeight:700,color:'#f59e0b'},children:((_analyticsData$avg_mc=analyticsData.avg_mcda_score)===null||_analyticsData$avg_mc===void 0?void 0:_analyticsData$avg_mc.toFixed(1))||0}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,opacity:0.6,marginTop:4},children:\"out of 100\"})]})]}),/*#__PURE__*/_jsx(FeatureCard,{icon:\"\\uD83D\\uDCC8\",title:\"System Performance\",description:\"Route quality and user satisfaction metrics\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(220px, 1fr))',gap:20},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600,marginBottom:8},children:\"Trip Metrics\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:8},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{opacity:0.7},children:\"Avg Duration:\"}),/*#__PURE__*/_jsxs(\"strong\",{children:[((_analyticsData$avg_du=analyticsData.avg_duration_min)===null||_analyticsData$avg_du===void 0?void 0:_analyticsData$avg_du.toFixed(1))||0,\" min\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{opacity:0.7},children:\"Avg Transfers:\"}),/*#__PURE__*/_jsx(\"strong\",{children:((_analyticsData$avg_tr=analyticsData.avg_transfers)===null||_analyticsData$avg_tr===void 0?void 0:_analyticsData$avg_tr.toFixed(1))||0})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{opacity:0.7},children:\"Total Distance:\"}),/*#__PURE__*/_jsxs(\"strong\",{children:[((_analyticsData$total_2=analyticsData.total_distance_km)===null||_analyticsData$total_2===void 0?void 0:_analyticsData$total_2.toFixed(1))||0,\" km\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600,marginBottom:8},children:\"Environmental Impact\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:8},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{opacity:0.7},children:\"Car Trips Avoided:\"}),/*#__PURE__*/_jsx(\"strong\",{style:{color:'#10b981'},children:analyticsData.car_trips_avoided||0})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{opacity:0.7},children:\"Total CO\\u2082 Saved:\"}),/*#__PURE__*/_jsxs(\"strong\",{style:{color:'#10b981'},children:[((_analyticsData$total_3=analyticsData.total_co2_saved_kg)===null||_analyticsData$total_3===void 0?void 0:_analyticsData$total_3.toFixed(2))||0,\" kg\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{opacity:0.7},children:\"Avg per Trip:\"}),/*#__PURE__*/_jsxs(\"strong\",{style:{color:'#10b981'},children:[((_ref10=analyticsData.total_co2_saved_kg/Math.max(analyticsData.total_trips,1))===null||_ref10===void 0?void 0:_ref10.toFixed(2))||0,\" kg\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600,marginBottom:8},children:\"System Health\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:8},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{opacity:0.7},children:\"Total Users:\"}),/*#__PURE__*/_jsx(\"strong\",{children:analyticsData.total_users||0})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{opacity:0.7},children:\"Total Searches:\"}),/*#__PURE__*/_jsx(\"strong\",{children:analyticsData.total_searches||0})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{opacity:0.7},children:\"Uptime:\"}),/*#__PURE__*/_jsxs(\"strong\",{children:[((_analyticsData$system=analyticsData.system_uptime_days)===null||_analyticsData$system===void 0?void 0:_analyticsData$system.toFixed(1))||0,\" days\"]})]})]})]})]})}),/*#__PURE__*/_jsx(FeatureCard,{icon:\"\\uD83C\\uDFC6\",title:\"Multi-Criteria Decision Analysis\",description:\"Route scoring breakdown across all trips\",children:/*#__PURE__*/_jsxs(\"div\",{style:{padding:16,background:'rgba(139, 92, 246, 0.1)',borderRadius:8},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:14,marginBottom:12},children:[\"Average MCDA score of \",/*#__PURE__*/_jsxs(\"strong\",{style:{color:'#8b5cf6'},children:[(_analyticsData$avg_mc2=analyticsData.avg_mcda_score)===null||_analyticsData$avg_mc2===void 0?void 0:_analyticsData$avg_mc2.toFixed(1),\"/100\"]}),\" indicates\",' ',analyticsData.avg_mcda_score>=80?'excellent':analyticsData.avg_mcda_score>=65?'good':'acceptable',\" route quality across all planned trips.\"]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:12,opacity:0.7},children:\"\\uD83D\\uDCA1 MCDA considers time, cost, comfort, reliability, and environmental factors to rank route options.\"})]})}),/*#__PURE__*/_jsx(FeatureCard,{icon:\"\\uD83C\\uDF0D\",title:\"Environmental Impact Summary\",description:\"Cumulative sustainability metrics\",children:/*#__PURE__*/_jsxs(\"div\",{style:{padding:20,background:'linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(52, 211, 153, 0.1) 100%)',borderRadius:12,border:'1px solid rgba(16, 185, 129, 0.3)'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:18,fontWeight:700,marginBottom:12,color:'#10b981'},children:[\"\\uD83C\\uDF1F Total CO\\u2082 Savings: \",((_analyticsData$total_4=analyticsData.total_co2_saved_kg)===null||_analyticsData$total_4===void 0?void 0:_analyticsData$total_4.toFixed(2))||0,\" kg\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:14,opacity:0.9,marginBottom:16},children:[\"By using public transport instead of driving, users have collectively saved\",' ',/*#__PURE__*/_jsxs(\"strong\",{style:{color:'#10b981'},children:[((_analyticsData$total_5=analyticsData.total_co2_saved_kg)===null||_analyticsData$total_5===void 0?void 0:_analyticsData$total_5.toFixed(2))||0,\" kg of CO\\u2082\"]}),\" emissions.\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(200px, 1fr))',gap:12},children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:12,background:'rgba(16, 185, 129, 0.15)',borderRadius:8},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:12,opacity:0.7},children:\"Equivalent Trees\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:24,fontWeight:700,color:'#10b981'},children:[((_ref11=analyticsData.total_co2_saved_kg/1000*45.9)===null||_ref11===void 0?void 0:_ref11.toFixed(1))||0,\" \\uD83C\\uDF33\"]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:10,opacity:0.6,marginTop:4},children:\"needed to offset emissions\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:12,background:'rgba(16, 185, 129, 0.15)',borderRadius:8},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:12,opacity:0.7},children:\"Car Trips Avoided\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:24,fontWeight:700,color:'#10b981'},children:analyticsData.car_trips_avoided||0}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:10,opacity:0.6,marginTop:4},children:\"reduced congestion\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:12,background:'rgba(16, 185, 129, 0.15)',borderRadius:8},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:12,opacity:0.7},children:\"Distance Traveled\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:24,fontWeight:700,color:'#10b981'},children:[((_analyticsData$total_6=analyticsData.total_distance_km)===null||_analyticsData$total_6===void 0?void 0:_analyticsData$total_6.toFixed(1))||0,\" km\"]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:10,opacity:0.6,marginTop:4},children:\"via public transport\"})]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:20,padding:16,background:'rgba(59, 130, 246, 0.1)',borderRadius:8,fontSize:13,opacity:0.8},children:[\"\\u2139\\uFE0F \",/*#__PURE__*/_jsx(\"b\",{children:\"Note:\"}),\" Analytics data is tracked for research and assessment purposes. All metrics are calculated based on actual trip planning data.\"]})]}):/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',padding:60},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:48,marginBottom:16},children:\"\\uD83D\\uDCCA\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:16,opacity:0.7,marginBottom:12},children:\"Loading analytics data...\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:14,opacity:0.5},children:\"Plan some trips to see analytics!\"})]})]})]})]});}","map":{"version":3,"names":["useEffect","useState","useMemo","useCallback","MapContainer","TileLayer","Marker","Popup","useMapEvents","Circle","Polyline","useMap","L","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","API","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","mapIcons","origin","iconSize","iconAnchor","popupAnchor","shadowSize","destination","stop","trafficWarning","trafficCritical","TRANSLATIONS","en","name","tagline","translatorLabel","offlineCta","shareLocation","copyCoords","locationCopied","tripPlanning","realTimeSnapshot","weatherNow","alertsIncidents","noAlerts","findItineraries","exportPdf","suggestAlt","emergencyContacts","es","tl","zh","CURRENCY_RATES","NZD","USD","EUR","AUD","Chip","_ref","children","className","style","marginRight","FeatureCard","_ref2","title","description","icon","marginBottom","display","alignItems","gap","fontSize","filter","fontWeight","background","WebkitBackgroundClip","WebkitTextFillColor","backgroundClip","letterSpacing","color","marginTop","lineHeight","DraggableMarker","_ref3","position","setPosition","label","draggable","setDraggable","eventHandlers","dragend","e","marker","target","pos","getLatLng","lat","lng","minWidth","onClick","d","MapClickHandler","_ref4","onMapClick","click","latlng","RecenterButton","_ref5","map","recenter","flyTo","duration","top","right","zIndex","padding","border","borderRadius","cursor","boxShadow","transition","onMouseEnter","currentTarget","transform","onMouseLeave","MapLegend","_ref6","trafficCount","bottom","backdropFilter","flexDirection","width","height","paddingTop","borderTop","animation","InteractiveMap","_ref7","setOrigin","dest","setDest","stops","trafficIncidents","lastUpdate","onRefresh","showTraffic","setShowTraffic","showRoute","setShowRoute","showStops","setShowStops","mapStyle","setMapStyle","isRefreshing","setIsRefreshing","center","routeLine","mapTiles","standard","transport","dark","handleManualRefresh","setTimeout","left","disabled","opacity","value","onChange","outline","appearance","WebkitAppearance","MozAppearance","backgroundImage","backgroundRepeat","backgroundPosition","backgroundSize","paddingRight","borderColor","zoom","attribution","url","positions","pathOptions","weight","dashArray","lineCap","lineJoin","toFixed","slice","distance_m","stop_id","incident","_incident$location","hasCoords","location","coordinates","idx","_incident$location2","isCritical","severity","type","Array","isArray","length","console","warn","timeStr","start_time","Date","toLocaleTimeString","maxWidth","summary","affected_routes","radius","fillColor","fillOpacity","concat","Boolean","AuthPanel","_ref8","token","setToken","username","setUsername","mode","setMode","user","setUser","pass","setPass","email","setEmail","showPass","setShowPass","error","setError","loading","setLoading","strength","setStrength","rememberMe","setRememberMe","showAuthModal","setShowAuthModal","t","localStorage","getItem","sessionStorage","u","score","test","validateEmail","submit","preventDefault","payload","password","r","fetch","method","headers","body","JSON","stringify","json","ok","Error","detail","storage","setItem","now","toString","message","logout","setIsAuthenticated","removeItem","toast","getStrengthColor","getStrengthText","placeItems","toUpperCase","inset","stopPropagation","textAlign","onSubmit","placeholder","autoComplete","justifyContent","overflow","userSelect","checked","LoginPage","_ref9","onLogin","isVerifying","minHeight","src","alt","margin","objectFit","onError","pointerEvents","required","App","_analyticsData$total_","_analyticsData$avg_mc","_analyticsData$avg_du","_analyticsData$avg_tr","_analyticsData$total_2","_analyticsData$total_3","_ref10","_analyticsData$system","_analyticsData$avg_mc2","_analyticsData$total_4","_analyticsData$total_5","_ref11","_analyticsData$total_6","isAuthenticated","setIsVerifying","setStops","itins","setItins","banner","setBanner","selectedStop","setSelectedStop","departures","setDepartures","alerts","setAlerts","setTrafficIncidents","lastTrafficUpdate","setLastTrafficUpdate","alts","setAlts","view","setView","expandedItin","setExpandedItin","modes","setModes","optimize","setOptimize","maxWalkKm","setMaxWalkKm","avoidStairs","setAvoidStairs","bikeOk","setBikeOk","whenType","setWhenType","whenValue","setWhenValue","weather","setWeather","safetyContacts","setSafetyContacts","uiLang","setUiLang","currency","setCurrency","amount","setAmount","reviews","setReviews","reviewLoc","setReviewLoc","reviewRating","setReviewRating","reviewComment","setReviewComment","originSearch","setOriginSearch","destSearch","setDestSearch","originName","setOriginName","destName","setDestName","searchResults","setSearchResults","searchingFor","setSearchingFor","mcdaProfile","setMcdaProfile","showMcdaBreakdown","setShowMcdaBreakdown","analyticsData","setAnalyticsData","text","convertedAmount","Number","mounted","verifySession","savedToken","savedUser","response","log","window","__atisReady","then","catch","traffic","forecast","contacts","timeoutId","clearTimeout","getRelativeTime","timestamp","seconds","Math","floor","minutes","hours","refreshTrafficData","err","refreshTraffic","intervalId","setInterval","clearInterval","forceUpdate","timer","viewDepartures","data","plan","_d$context","depart_at","arrive_by","max_walk_km","parseFloat","avoid_stairs","bike_ok","itineraries","context","weatherAlert","trackTrip","itinerary","loadAnalytics","blob","URL","createObjectURL","a","document","createElement","href","download","revokeObjectURL","_data$alternative","_data$alternative2","_data$alternative3","current_itinerary","incidents","preferences","enhancedAlternative","_objectSpread","alternative","reason","benefits","warnings","comparison","timeDiff","round","transferDiff","transfers","walkDiff","walk_distance","prev","id","authHeaders","savePrefs","alert","lang","home","work","languageOptions","Object","keys","currencyOptions","saveOfflinePack","snapshot","saved","updateSavedPlace","key","coords","store","parse","charAt","submitReview","rating","comment","status","toggleMode","m","includes","x","swapOD","o","oName","navigator","clipboard","writeText","searchLocation","query","encodeURIComponent","filteredResults","result","display_name","toLowerCase","sort","b","priorityTypes","aHasPriority","bHasPriority","selectLocation","lon","split","closeSearchDropdown","useCurrentLocation","geolocation","getCurrentPosition","latitude","longitude","_data$address","_data$address2","_data$address3","address","suburb","city","town","handleLogin","willChange","borderBottom","nextElementSibling","flexWrap","v","textTransform","flex","condition","tempC","windKph","paddingLeft","i","flexBasis","gridTemplateColumns","onFocus","select","maxHeight","overflowY","_result$address","borderLeft","join","trim","fontStyle","_result$address2","min","max","step","alignSelf","it","_it$walk_km","_alts$it$id$compariso","_alts$it$id$compariso2","durationMin","reliability","legs","walk_km","environmental","co2_saved_kg","co2_saved_percent","stairs","leg","legIdx","isWalk","isBus","isTrain","isFerry","isBike","routeMatch","match","routeNumber","paddingBottom","l","ceil","random","mcda_score","mcda_rank","mcda_recommendation","mcda_breakdown","entries","_ref0","criterion","mcda_weights","_ref1","k","total_co2_kg","total_distance_km","trees_equivalent","distance_km","co2_kg","eco_score","marginLeft","benefit","warning","note","s","route","headsign","departure_in_min","c","phone","code","n","total_trips","active_users_7d","total_co2_saved_kg","avg_mcda_score","avg_duration_min","avg_transfers","car_trips_avoided","total_users","total_searches","system_uptime_days"],"sources":["C:/Users/mdvec/OneDrive/Documents/YOOBEE-MSE/TERM2/MSE806 Intelligent Transportation Systems/ATIS/ATIS/atis-frontend-react/src/App.js"],"sourcesContent":["import { useEffect, useState, useMemo, useCallback } from 'react'\nimport { MapContainer, TileLayer, Marker, Popup, useMapEvents, Circle, Polyline, useMap } from 'react-leaflet'\nimport 'leaflet/dist/leaflet.css'\nimport L from 'leaflet'\n\nconst API = '' // CRA proxy forwards to backend\n\n// Fix Leaflet default icon issue with webpack\ndelete L.Icon.Default.prototype._getIconUrl\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png',\n  iconUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png',\n  shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',\n})\n\n// Custom map icons for different features\nconst mapIcons = {\n  origin: new L.Icon({\n    iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png',\n    shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',\n    iconSize: [25, 41],\n    iconAnchor: [12, 41],\n    popupAnchor: [1, -34],\n    shadowSize: [41, 41]\n  }),\n  destination: new L.Icon({\n    iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png',\n    shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',\n    iconSize: [25, 41],\n    iconAnchor: [12, 41],\n    popupAnchor: [1, -34],\n    shadowSize: [41, 41]\n  }),\n  stop: new L.Icon({\n    iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png',\n    shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',\n    iconSize: [25, 41],\n    iconAnchor: [12, 41],\n    popupAnchor: [1, -34],\n    shadowSize: [41, 41]\n  }),\n  trafficWarning: new L.Icon({\n    iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-orange.png',\n    shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',\n    iconSize: [25, 41],\n    iconAnchor: [12, 41],\n    popupAnchor: [1, -34],\n    shadowSize: [41, 41]\n  }),\n  trafficCritical: new L.Icon({\n    iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-violet.png',\n    shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',\n    iconSize: [25, 41],\n    iconAnchor: [12, 41],\n    popupAnchor: [1, -34],\n    shadowSize: [41, 41]\n  })\n}\n\nconst TRANSLATIONS = {\n  en: {\n    name: 'Advanced Traveler Information System',\n    tagline: 'Real-time, multimodal trip planning with intelligent route optimization.',\n    translatorLabel: 'Preferred language',\n    offlineCta: 'Save offline snapshot',\n    shareLocation: 'Share Location',\n    copyCoords: 'Copy Coordinates',\n    locationCopied: 'Location copied!',\n    tripPlanning: 'Trip planning & dynamic routing',\n    realTimeSnapshot: 'Real-time snapshot',\n    weatherNow: 'Weather now',\n    alertsIncidents: 'Alerts & incidents',\n    noAlerts: 'No active alerts right now.',\n    findItineraries: 'Find itineraries',\n    exportPdf: 'Export PDF',\n    suggestAlt: 'Suggest alternative',\n    emergencyContacts: 'Emergency Contacts'\n  },\n  es: {\n    name: 'InformaciÃ³n de Viaje Avanzada',\n    tagline: 'PlanificaciÃ³n de viajes multimodal con datos en tiempo real.',\n    translatorLabel: 'Idioma preferido',\n    offlineCta: 'Guardar informaciÃ³n sin conexiÃ³n',\n    shareLocation: 'Compartir UbicaciÃ³n',\n    copyCoords: 'Copiar Coordenadas',\n    locationCopied: 'Â¡UbicaciÃ³n copiada!',\n    tripPlanning: 'PlanificaciÃ³n y enrutamiento dinÃ¡mico',\n    realTimeSnapshot: 'InstantÃ¡nea en tiempo real',\n    weatherNow: 'Clima ahora',\n    alertsIncidents: 'Alertas e incidentes',\n    noAlerts: 'No hay alertas activas ahora.',\n    findItineraries: 'Buscar itinerarios',\n    exportPdf: 'Exportar PDF',\n    suggestAlt: 'Sugerir alternativa',\n    emergencyContacts: 'Contactos de Emergencia'\n  },\n  tl: {\n    name: 'Advanced na Impormasyon sa Paglalakbay',\n    tagline: 'Real-time na pagpaplano ng biyahe gamit ang matalinong mungkahi.',\n    translatorLabel: 'Gustong wika',\n    offlineCta: 'I-save ang offline na snapshot',\n    shareLocation: 'Ibahagi ang Lokasyon',\n    copyCoords: 'Kopyahin ang Coordinates',\n    locationCopied: 'Nakopya ang lokasyon!',\n    tripPlanning: 'Pagpaplano ng biyahe at dynamic na ruta',\n    realTimeSnapshot: 'Real-time na snapshot',\n    weatherNow: 'Panahon ngayon',\n    alertsIncidents: 'Mga alerto at insidente',\n    noAlerts: 'Walang aktibong alerto ngayon.',\n    findItineraries: 'Maghanap ng itinerary',\n    exportPdf: 'I-export ang PDF',\n    suggestAlt: 'Magmungkahi ng alternatibo',\n    emergencyContacts: 'Emergency na Contacts'\n  },\n  zh: {\n    name: 'é«˜çº§æ—…è¡Œä¿¡æ¯ç³»ç»Ÿ',\n    tagline: 'å®žæ—¶å¤šæ¨¡å¼è¡Œç¨‹è§„åˆ’ä¸Žæ™ºèƒ½å»ºè®®',\n    translatorLabel: 'é¦–é€‰è¯­è¨€',\n    offlineCta: 'ä¿å­˜ç¦»çº¿å¿«ç…§',\n    shareLocation: 'åˆ†äº«ä½ç½®',\n    copyCoords: 'å¤åˆ¶åæ ‡',\n    locationCopied: 'ä½ç½®å·²å¤åˆ¶ï¼',\n    tripPlanning: 'è¡Œç¨‹è§„åˆ’ä¸ŽåŠ¨æ€è·¯çº¿',\n    realTimeSnapshot: 'å®žæ—¶å¿«ç…§',\n    weatherNow: 'å½“å‰å¤©æ°”',\n    alertsIncidents: 'è­¦æŠ¥å’Œäº‹ä»¶',\n    noAlerts: 'ç›®å‰æ²¡æœ‰æ´»åŠ¨è­¦æŠ¥',\n    findItineraries: 'æŸ¥æ‰¾è¡Œç¨‹',\n    exportPdf: 'å¯¼å‡ºPDF',\n    suggestAlt: 'å»ºè®®æ›¿ä»£æ–¹æ¡ˆ',\n    emergencyContacts: 'ç´§æ€¥è”ç³»äºº'\n  }\n}\n\nconst CURRENCY_RATES = {\n  NZD: 1,\n  USD: 0.59,\n  EUR: 0.55,\n  AUD: 0.91\n}\n\nfunction Chip({children}){ return <span className=\"chip\" style={{marginRight:6}}>{children}</span> }\n\nfunction FeatureCard({title, description, children, icon}){\n  return (\n    <section className=\"card\" style={{marginBottom:32}}>\n      <div style={{marginBottom:24}}>\n        <div style={{display:'flex', alignItems:'center', gap:16, marginBottom:10}}>\n          {icon && <div style={{fontSize:42, filter:'drop-shadow(0 4px 8px rgba(0,0,0,0.2))'}}>{icon}</div>}\n          <div>\n            <div style={{fontSize:26, fontWeight:800, background:'linear-gradient(135deg, #667eea 0%, #764ba2 100%)', WebkitBackgroundClip:'text', WebkitTextFillColor:'transparent', backgroundClip:'text', letterSpacing:'-0.5px'}}>{title}</div>\n            {description && <div style={{color:'var(--muted)', fontSize:15, marginTop:6, lineHeight:1.6}}>{description}</div>}\n          </div>\n        </div>\n      </div>\n      <div>{children}</div>\n    </section>\n  )\n}\n\nfunction DraggableMarker({ position, setPosition, label }) {\n  const [draggable, setDraggable] = useState(true)\n  \n  const eventHandlers = {\n    dragend(e) {\n      const marker = e.target\n      const pos = marker.getLatLng()\n      setPosition([pos.lat, pos.lng])\n    },\n  }\n\n  return (\n    <Marker\n      draggable={draggable}\n      eventHandlers={eventHandlers}\n      position={position}\n      icon={mapIcons.origin}\n    >\n      <Popup minWidth={90}>\n        <span onClick={() => setDraggable((d) => !d)}>\n          {label}<br/>\n          <small style={{color:'#666'}}>{draggable ? 'Draggable' : 'Click to make draggable'}</small>\n        </span>\n      </Popup>\n    </Marker>\n  )\n}\n\nfunction MapClickHandler({ onMapClick }) {\n  useMapEvents({\n    click(e) {\n      if (onMapClick) {\n        onMapClick([e.latlng.lat, e.latlng.lng])\n      }\n    },\n  })\n  return null\n}\n\n// Component to handle \"My Location\" button\nfunction RecenterButton({ position }) {\n  const map = useMap()\n  \n  const recenter = () => {\n    map.flyTo(position, 15, {\n      duration: 1.5\n    })\n  }\n  \n  return (\n    <button\n      onClick={recenter}\n      style={{\n        position: 'absolute',\n        top: 64,\n        right: 10,\n        zIndex: 1000,\n        padding: '10px 16px',\n        background: 'white',\n        border: '2px solid rgba(0,0,0,0.2)',\n        borderRadius: 8,\n        cursor: 'pointer',\n        fontSize: 14,\n        fontWeight: 600,\n        boxShadow: '0 2px 8px rgba(0,0,0,0.15)',\n        display: 'flex',\n        alignItems: 'center',\n        gap: 6,\n        transition: 'all 0.2s',\n        minWidth: 200\n      }}\n      onMouseEnter={(e) => {\n        e.currentTarget.style.background = '#3b82f6'\n        e.currentTarget.style.color = 'white'\n        e.currentTarget.style.transform = 'translateY(-2px)'\n        e.currentTarget.style.boxShadow = '0 4px 16px rgba(59, 130, 246, 0.4)'\n      }}\n      onMouseLeave={(e) => {\n        e.currentTarget.style.background = 'white'\n        e.currentTarget.style.color = '#333'\n        e.currentTarget.style.transform = 'translateY(0)'\n        e.currentTarget.style.boxShadow = '0 2px 8px rgba(0,0,0,0.15)'\n      }}\n      title=\"Center map on your origin location\"\n    >\n      ðŸ“ My Location\n    </button>\n  )\n}\n\nfunction MapLegend({ trafficCount }) {\n  return (\n    <div style={{\n      position: 'absolute',\n      bottom: 20,\n      right: 20,\n      background: 'rgba(255, 255, 255, 0.95)',\n      padding: '12px 16px',\n      borderRadius: 12,\n      boxShadow: '0 4px 12px rgba(0,0,0,0.15)',\n      zIndex: 1000,\n      fontSize: 13,\n      backdropFilter: 'blur(10px)',\n      border: '1px solid rgba(0,0,0,0.1)'\n    }}>\n      <div style={{fontWeight:700, marginBottom:10, fontSize:14, color:'#1a1a1a'}}>\n        ðŸ—ºï¸ Map Legend\n      </div>\n      <div style={{display:'flex', flexDirection:'column', gap:8}}>\n        <div style={{display:'flex', alignItems:'center', gap:8}}>\n          <div style={{width:20, height:20, borderRadius:'50%', background:'#28a745'}}></div>\n          <span style={{color:'#333'}}>Origin (drag to move)</span>\n        </div>\n        <div style={{display:'flex', alignItems:'center', gap:8}}>\n          <div style={{width:20, height:20, borderRadius:'50%', background:'#dc3545'}}></div>\n          <span style={{color:'#333'}}>Destination (click map)</span>\n        </div>\n        <div style={{display:'flex', alignItems:'center', gap:8}}>\n          <div style={{width:20, height:20, borderRadius:'50%', background:'#007bff'}}></div>\n          <span style={{color:'#333'}}>Transit Stops</span>\n        </div>\n        <div style={{display:'flex', alignItems:'center', gap:8}}>\n          <div style={{width:20, height:20, borderRadius:'50%', background:'#fd7e14'}}></div>\n          <span style={{color:'#333'}}>Traffic Warning</span>\n        </div>\n        <div style={{display:'flex', alignItems:'center', gap:8}}>\n          <div style={{width:20, height:20, borderRadius:'50%', background:'#6f42c1'}}></div>\n          <span style={{color:'#333'}}>Traffic Critical</span>\n        </div>\n        {trafficCount > 0 && (\n          <div style={{\n            marginTop:8, \n            paddingTop:8, \n            borderTop:'1px solid rgba(0,0,0,0.1)',\n            fontSize:12,\n            color:'#666',\n            display:'flex',\n            alignItems:'center',\n            gap:6\n          }}>\n            <span style={{\n              display:'inline-block',\n              width:8,\n              height:8,\n              borderRadius:'50%',\n              background:'#ff4444',\n              animation:'pulse 2s infinite'\n            }}></span>\n            {trafficCount} active traffic incident{trafficCount !== 1 ? 's' : ''}\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n\nfunction InteractiveMap({ origin, setOrigin, dest, setDest, stops, trafficIncidents = [], lastUpdate, onRefresh }) {\n  const [showTraffic, setShowTraffic] = useState(true)\n  const [showRoute, setShowRoute] = useState(true)\n  const [showStops, setShowStops] = useState(true)\n  const [mapStyle, setMapStyle] = useState('standard')\n  const [isRefreshing, setIsRefreshing] = useState(false)\n  const center = origin\n  \n  // Calculate route line between origin and destination\n  const routeLine = [origin, dest]\n  \n  // Map tile URLs for different styles\n  const mapTiles = {\n    standard: 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n    transport: 'https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png',\n    dark: 'https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png'\n  }\n  \n  // Manual refresh handler with animation\n  const handleManualRefresh = async () => {\n    setIsRefreshing(true)\n    await onRefresh()\n    setTimeout(() => setIsRefreshing(false), 1000)\n  }\n  \n  return (\n    <div style={{position:'relative', height:'100%', width:'100%'}}>\n      {/* Real-Time Update Indicator - Top Center */}\n      <div style={{\n        position: 'absolute',\n        top: 10,\n        left: '50%',\n        transform: 'translateX(-50%)',\n        zIndex: 1000,\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        gap: 4\n      }}>\n        <div style={{\n          padding: '8px 16px',\n          background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',\n          color: 'white',\n          border: '2px solid rgba(255,255,255,0.3)',\n          borderRadius: 20,\n          fontSize: 12,\n          fontWeight: 700,\n          boxShadow: '0 4px 12px rgba(16, 185, 129, 0.4)',\n          display: 'flex',\n          alignItems: 'center',\n          gap: 8,\n          animation: 'pulse 2s ease-in-out infinite'\n        }}>\n          <span style={{\n            width: 8,\n            height: 8,\n            borderRadius: '50%',\n            background: '#fff',\n            animation: 'pulse 1.5s ease-in-out infinite',\n            boxShadow: '0 0 8px rgba(255,255,255,0.8)'\n          }}></span>\n          ðŸ”´ LIVE UPDATES\n        </div>\n        {lastUpdate && (\n          <div style={{\n            padding: '4px 12px',\n            background: 'rgba(0,0,0,0.7)',\n            color: 'white',\n            borderRadius: 12,\n            fontSize: 10,\n            fontWeight: 600,\n            backdropFilter: 'blur(10px)'\n          }}>\n            Updated {lastUpdate}\n          </div>\n        )}\n      </div>\n\n      {/* Map Controls Panel - Top Left */}\n      <div style={{\n        position: 'absolute',\n        top: 10,\n        left: 10,\n        zIndex: 1000,\n        display: 'flex',\n        flexDirection: 'column',\n        gap: 8\n      }}>\n        {/* Manual Refresh Button */}\n        <button\n          onClick={handleManualRefresh}\n          disabled={isRefreshing}\n          style={{\n            padding: '10px 16px',\n            background: isRefreshing ? '#10b981' : 'white',\n            color: isRefreshing ? 'white' : '#333',\n            border: '2px solid rgba(0,0,0,0.2)',\n            borderRadius: 8,\n            cursor: isRefreshing ? 'wait' : 'pointer',\n            fontSize: 14,\n            fontWeight: 600,\n            boxShadow: '0 2px 8px rgba(0,0,0,0.15)',\n            display: 'flex',\n            alignItems: 'center',\n            gap: 6,\n            transition: 'all 0.3s',\n            opacity: isRefreshing ? 0.8 : 1\n          }}\n          title=\"Refresh traffic data now\"\n        >\n          <span style={{\n            display: 'inline-block',\n            animation: isRefreshing ? 'spin 1s linear infinite' : 'none'\n          }}>\n            ðŸ”„\n          </span>\n          {isRefreshing ? 'Refreshing...' : 'Refresh'}\n        </button>\n        \n        <button\n          onClick={() => setShowTraffic(!showTraffic)}\n          style={{\n            padding: '10px 16px',\n            background: showTraffic ? '#3b82f6' : 'white',\n            color: showTraffic ? 'white' : '#333',\n            border: '2px solid rgba(0,0,0,0.2)',\n            borderRadius: 8,\n            cursor: 'pointer',\n            fontSize: 14,\n            fontWeight: 600,\n            boxShadow: '0 2px 8px rgba(0,0,0,0.15)',\n            display: 'flex',\n            alignItems: 'center',\n            gap: 6,\n            transition: 'all 0.2s'\n          }}\n          title={showTraffic ? 'Hide traffic incidents' : 'Show traffic incidents'}\n        >\n          ðŸš¦ Traffic {showTraffic ? '(On)' : '(Off)'}\n        </button>\n        <button\n          onClick={() => setShowRoute(!showRoute)}\n          style={{\n            padding: '10px 16px',\n            background: showRoute ? '#3b82f6' : 'white',\n            color: showRoute ? 'white' : '#333',\n            border: '2px solid rgba(0,0,0,0.2)',\n            borderRadius: 8,\n            cursor: 'pointer',\n            fontSize: 14,\n            fontWeight: 600,\n            boxShadow: '0 2px 8px rgba(0,0,0,0.15)',\n            display: 'flex',\n            alignItems: 'center',\n            gap: 6,\n            transition: 'all 0.2s'\n          }}\n          title={showRoute ? 'Hide route line' : 'Show route line'}\n        >\n          ðŸ›£ï¸ Route {showRoute ? '(On)' : '(Off)'}\n        </button>\n        <button\n          onClick={() => setShowStops(!showStops)}\n          style={{\n            padding: '10px 16px',\n            background: showStops ? '#3b82f6' : 'white',\n            color: showStops ? 'white' : '#333',\n            border: '2px solid rgba(0,0,0,0.2)',\n            borderRadius: 8,\n            cursor: 'pointer',\n            fontSize: 14,\n            fontWeight: 600,\n            boxShadow: '0 2px 8px rgba(0,0,0,0.15)',\n            display: 'flex',\n            alignItems: 'center',\n            gap: 6,\n            transition: 'all 0.2s'\n          }}\n          title={showStops ? 'Hide transit stops' : 'Show transit stops'}\n        >\n          ðŸš Stops {showStops ? '(On)' : '(Off)'}\n        </button>\n      </div>\n      \n      {/* Top Right Control Panel */}\n      <div style={{\n        position: 'absolute',\n        top: 10,\n        right: 10,\n        zIndex: 1000,\n        minWidth: 200\n      }}>\n        {/* Map Style Selector */}\n        <select\n          value={mapStyle}\n          onChange={(e) => setMapStyle(e.target.value)}\n          style={{\n            width: '100%',\n            padding: '10px 16px',\n            background: 'white',\n            color: '#333',\n            border: '2px solid rgba(0,0,0,0.2)',\n            borderRadius: 8,\n            cursor: 'pointer',\n            fontSize: 14,\n            fontWeight: 600,\n            boxShadow: '0 2px 8px rgba(0,0,0,0.15)',\n            outline: 'none',\n            appearance: 'none',\n            WebkitAppearance: 'none',\n            MozAppearance: 'none',\n            backgroundImage: 'url(\"data:image/svg+xml;charset=UTF-8,%3csvg xmlns=\\'http://www.w3.org/2000/svg\\' viewBox=\\'0 0 24 24\\' fill=\\'none\\' stroke=\\'currentColor\\' stroke-width=\\'2\\' stroke-linecap=\\'round\\' stroke-linejoin=\\'round\\'%3e%3cpolyline points=\\'6 9 12 15 18 9\\'%3e%3c/polyline%3e%3c/svg%3e\")',\n            backgroundRepeat: 'no-repeat',\n            backgroundPosition: 'right 12px center',\n            backgroundSize: '16px',\n            paddingRight: '36px',\n            display: 'flex',\n            alignItems: 'center',\n            gap: 8,\n            transition: 'all 0.2s'\n          }}\n          onMouseEnter={(e) => {\n            e.currentTarget.style.borderColor = '#3b82f6'\n            e.currentTarget.style.boxShadow = '0 4px 12px rgba(59, 130, 246, 0.3)'\n          }}\n          onMouseLeave={(e) => {\n            e.currentTarget.style.borderColor = 'rgba(0,0,0,0.2)'\n            e.currentTarget.style.boxShadow = '0 2px 8px rgba(0,0,0,0.15)'\n          }}\n          title=\"Change map style\"\n        >\n          <option value=\"standard\">ðŸ—ºï¸ Standard Map</option>\n          <option value=\"transport\">ðŸšŒ Transport Map</option>\n          <option value=\"dark\">ðŸŒ™ Dark Mode</option>\n        </select>\n      </div>\n      \n    <MapContainer center={center} zoom={13} style={{height: '100%', width: '100%', borderRadius: 12}}>\n      <TileLayer\n        attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a>'\n          url={mapTiles[mapStyle]}\n          key={mapStyle}\n        />\n        \n        {/* Route Line - Blue dashed line between origin and destination */}\n        {showRoute && (\n          <Polyline\n            positions={routeLine}\n            pathOptions={{\n              color: '#3b82f6',\n              weight: 4,\n              opacity: 0.7,\n              dashArray: '10, 10',\n              lineCap: 'round',\n              lineJoin: 'round'\n            }}\n          >\n            <Popup>\n              <strong>ðŸ“ Planned Route</strong><br/>\n              <small>From origin to destination</small>\n            </Popup>\n          </Polyline>\n        )}\n        \n        {/* Origin Marker - Green (draggable) */}\n      <DraggableMarker position={origin} setPosition={setOrigin} label=\"Origin (drag me)\" />\n        \n        {/* My Location Button */}\n        <RecenterButton position={origin} />\n        \n        {/* Destination Marker - Red */}\n        <Marker position={dest} icon={mapIcons.destination}>\n          <Popup>\n            <strong>ðŸŽ¯ Destination</strong><br/>\n            <small>{dest[0].toFixed(5)}, {dest[1].toFixed(5)}</small>\n          </Popup>\n      </Marker>\n        \n        {/* Transit Stops - Blue (conditionally shown) */}\n        {showStops && stops.slice(0, 10).map((stop) => (\n          <Marker \n            key={stop.stop_id} \n            position={[stop.lat, stop.lng]} \n            icon={mapIcons.stop}\n          >\n            <Popup>\n              <strong>ðŸš {stop.name}</strong><br/>\n              <small>ðŸ“ {stop.distance_m}m away</small>\n            </Popup>\n        </Marker>\n      ))}\n        \n        {/* Traffic Incidents - Orange/Violet (conditionally shown) */}\n        {showTraffic && trafficIncidents\n          .filter(incident => {\n            // Only show incidents with valid coordinates\n            const hasCoords = incident.location?.coordinates || \n                            (incident.lat != null && incident.lng != null)\n            return hasCoords\n          })\n          .map((incident, idx) => {\n          // Determine severity and icon\n          const isCritical = incident.severity === 'critical' || \n                           incident.severity === 'major' ||\n                           incident.type === 'accident' ||\n                           incident.type === 'closure'\n          const icon = isCritical ? mapIcons.trafficCritical : mapIcons.trafficWarning\n          \n          // Get position - guaranteed to be valid now\n          const position = incident.location?.coordinates || [incident.lat, incident.lng]\n          \n          // Validate position is an array with 2 numbers\n          if (!Array.isArray(position) || position.length !== 2 || \n              typeof position[0] !== 'number' || typeof position[1] !== 'number') {\n            console.warn('Invalid traffic incident position:', incident)\n            return null\n          }\n          \n          // Format time\n          const timeStr = incident.start_time ? new Date(incident.start_time).toLocaleTimeString() : 'Now'\n          \n          return (\n            <div key={`traffic-${idx}`}>\n              <Marker position={position} icon={icon}>\n                <Popup maxWidth={250}>\n                  <div style={{padding:'4px 0'}}>\n                    <strong style={{\n                      color: isCritical ? '#6f42c1' : '#fd7e14',\n                      fontSize:14\n                    }}>\n                      {isCritical ? 'ðŸš¨' : 'âš ï¸'} {incident.title || incident.type || 'Traffic Incident'}\n                    </strong>\n                    <div style={{marginTop:8, fontSize:13, lineHeight:1.5}}>\n                      {incident.description || incident.summary || 'Traffic disruption reported'}\n                    </div>\n                    <div style={{\n                      marginTop:8, \n                      paddingTop:8, \n                      borderTop:'1px solid #eee',\n                      fontSize:11,\n                      color:'#666'\n                    }}>\n                      <div><strong>Severity:</strong> {incident.severity || 'moderate'}</div>\n                      {incident.affected_routes && (\n                        <div><strong>Routes:</strong> {incident.affected_routes}</div>\n                      )}\n                      <div><strong>Time:</strong> {timeStr}</div>\n                    </div>\n                  </div>\n                </Popup>\n              </Marker>\n              \n              {/* Add radius circle for critical incidents */}\n              {isCritical && (\n                <Circle\n                  center={position}\n                  radius={500}\n                  pathOptions={{\n                    color: '#6f42c1',\n                    fillColor: '#6f42c1',\n                    fillOpacity: 0.1,\n                    weight: 2,\n                    dashArray: '5, 5'\n                  }}\n                />\n              )}\n            </div>\n          )\n        }).filter(Boolean)}\n        \n      <MapClickHandler onMapClick={setDest} />\n    </MapContainer>\n      \n      {/* Add the legend */}\n      <MapLegend trafficCount={showTraffic ? trafficIncidents.length : 0} />\n    </div>\n  )\n}\n\nfunction AuthPanel({token, setToken, username, setUsername}){\n  const [mode, setMode] = useState('login')\n  const [user, setUser] = useState('')\n  const [pass, setPass] = useState('')\n  const [email, setEmail] = useState('')\n  const [showPass, setShowPass] = useState(false)\n  const [error, setError] = useState('')\n  const [loading, setLoading] = useState(false)\n  const [strength, setStrength] = useState(0)\n  const [rememberMe, setRememberMe] = useState(true)\n  const [showAuthModal, setShowAuthModal] = useState(false)\n\n  useEffect(()=>{\n    const t = localStorage.getItem('atis_token') || sessionStorage.getItem('atis_token')\n    const u = localStorage.getItem('atis_user') || sessionStorage.getItem('atis_user')\n    if (t && u){ setToken(t); setUsername(u) }\n  }, [setToken, setUsername])\n\n  useEffect(() => {\n    if (mode === 'register' && pass) {\n      let score = 0\n      if (pass.length >= 8) score++\n      if (pass.length >= 12) score++\n      if (/[a-z]/.test(pass) && /[A-Z]/.test(pass)) score++\n      if (/[0-9]/.test(pass)) score++\n      if (/[^a-zA-Z0-9]/.test(pass)) score++\n      setStrength(score)\n    }\n  }, [pass, mode])\n\n  const validateEmail = (email) => {\n    return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email)\n  }\n\n  const submit = async (e) => {\n    e?.preventDefault()\n    setError('')\n    \n    // Validation\n    if (!user || user.length < 3) {\n      setError('Username must be at least 3 characters')\n      return\n    }\n    if (!pass || pass.length < 6) {\n      setError('Password must be at least 6 characters')\n      return\n    }\n    if (mode === 'register') {\n      if (!email || !validateEmail(email)) {\n        setError('Please enter a valid email address')\n        return\n      }\n      if (strength < 3) {\n        setError('Password is too weak. Use mix of letters, numbers, and symbols.')\n        return\n      }\n    }\n    \n    setLoading(true)\n    try{\n      const payload = mode === 'register' \n        ? {username: user, password: pass, email: email}\n        : {username: user, password: pass}\n      \n      const r = await fetch(`${API}/auth/${mode}`, { \n        method:'POST', \n        headers:{'Content-Type':'application/json'}, \n        body: JSON.stringify(payload) \n      })\n      const d = await r.json()\n      if (!r.ok) throw new Error(d.detail || 'Authentication failed')\n      \n      setToken(d.token); setUsername(d.username)\n      \n      // Store based on remember me preference\n      const storage = rememberMe ? localStorage : sessionStorage\n      storage.setItem('atis_token', d.token)\n      storage.setItem('atis_user', d.username)\n      storage.setItem('atis_login_time', Date.now().toString())\n      \n      setUser(''); setPass(''); setEmail('')\n      setShowAuthModal(false)\n    }catch(e){ \n      setError(e.message)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const logout = () => { \n    setToken(null)\n    setUsername(null)\n    setIsAuthenticated(false)\n    localStorage.removeItem('atis_token')\n    localStorage.removeItem('atis_user')\n    localStorage.removeItem('atis_login_time')\n    sessionStorage.removeItem('atis_token')\n    sessionStorage.removeItem('atis_user')\n    sessionStorage.removeItem('atis_login_time')\n    toast('ðŸ‘‹ Logged out')\n  }\n\n  const getStrengthColor = () => {\n    if (strength <= 2) return '#ef4444'\n    if (strength <= 3) return '#f59e0b'\n    return '#10b981'\n  }\n\n  const getStrengthText = () => {\n    if (strength <= 2) return 'Weak'\n    if (strength <= 3) return 'Medium'\n    return 'Strong'\n  }\n\n  if (token) {\n    return (\n      <div style={{display:'flex', alignItems:'center', gap:16}}>\n        <div className=\"pill\" style={{display:'flex', alignItems:'center', gap:10}}>\n          <div style={{width:32, height:32, borderRadius:'50%', background:'var(--gradient-1)', display:'grid', placeItems:'center', color:'white', fontWeight:700, fontSize:14}}>\n            {username[0].toUpperCase()}\n          </div>\n          <div>\n            <div style={{fontSize:13, fontWeight:600}}>{username}</div>\n            <div style={{fontSize:11, color:'var(--muted)'}}>Verified</div>\n          </div>\n        </div>\n        <button className=\"btn btn-danger\" onClick={logout}>ðŸšª Logout</button>\n      </div>\n    )\n  }\n\n  return (\n    <>\n      <button className=\"btn btn-primary\" onClick={() => setShowAuthModal(true)}>\n        ðŸ” Sign In\n      </button>\n      \n      {showAuthModal && (\n        <div style={{position:'fixed', inset:0, background:'rgba(0,0,0,0.7)', backdropFilter:'blur(8px)', display:'grid', placeItems:'center', zIndex:9999, padding:20}} onClick={() => setShowAuthModal(false)}>\n          <div style={{background:'var(--glass-bg)', backdropFilter:'blur(30px)', border:'1px solid var(--glass-border)', borderRadius:28, padding:40, maxWidth:480, width:'100%', boxShadow:'var(--card-shadow)'}} onClick={e => e.stopPropagation()}>\n            <div style={{textAlign:'center', marginBottom:32}}>\n              <div style={{fontSize:32, marginBottom:12}}>ðŸ”</div>\n              <h2 style={{fontSize:28, fontWeight:800, marginBottom:8, background:'var(--gradient-1)', WebkitBackgroundClip:'text', WebkitTextFillColor:'transparent'}}>\n                {mode === 'login' ? 'Welcome Back' : 'Create Account'}\n              </h2>\n              <p style={{color:'var(--muted)', fontSize:14}}>\n                {mode === 'login' ? 'Sign in to access your personalized travel experience' : 'Join ATIS for smart route planning'}\n              </p>\n            </div>\n\n            <form onSubmit={submit} style={{display:'flex', flexDirection:'column', gap:20}}>\n              <div>\n                <label style={{display:'block', marginBottom:8, fontSize:13, fontWeight:600, color:'var(--muted)'}}>Username</label>\n                <input \n                  type=\"text\"\n                  placeholder=\"Enter username\" \n                  value={user} \n                  onChange={e=>setUser(e.target.value)}\n                  style={{width:'100%'}}\n                  autoComplete=\"username\"\n                  disabled={loading}\n                />\n              </div>\n\n              {mode === 'register' && (\n                <div>\n                  <label style={{display:'block', marginBottom:8, fontSize:13, fontWeight:600, color:'var(--muted)'}}>Email</label>\n                  <input \n                    type=\"email\"\n                    placeholder=\"your.email@example.com\" \n                    value={email} \n                    onChange={e=>setEmail(e.target.value)}\n                    style={{width:'100%'}}\n                    autoComplete=\"email\"\n                    disabled={loading}\n                  />\n                </div>\n              )}\n\n              <div>\n                <label style={{display:'block', marginBottom:8, fontSize:13, fontWeight:600, color:'var(--muted)'}}>Password</label>\n                <div style={{position:'relative'}}>\n                  <input \n                    type={showPass ? 'text' : 'password'}\n                    placeholder=\"Enter password\" \n                    value={pass} \n                    onChange={e=>setPass(e.target.value)}\n                    style={{width:'100%', paddingRight:45}}\n                    autoComplete={mode === 'login' ? 'current-password' : 'new-password'}\n                    disabled={loading}\n                  />\n                  <button \n                    type=\"button\"\n                    onClick={() => setShowPass(!showPass)}\n                    style={{position:'absolute', right:12, top:'50%', transform:'translateY(-50%)', background:'none', border:'none', cursor:'pointer', fontSize:18}}\n                  >\n                    {showPass ? 'ðŸ‘ï¸' : 'ðŸ‘ï¸â€ðŸ—¨ï¸'}\n                  </button>\n                </div>\n                {mode === 'register' && pass && (\n                  <div style={{marginTop:8}}>\n                    <div style={{display:'flex', justifyContent:'space-between', alignItems:'center', marginBottom:4}}>\n                      <span style={{fontSize:12, color:'var(--muted)'}}>Password strength:</span>\n                      <span style={{fontSize:12, fontWeight:600, color:getStrengthColor()}}>{getStrengthText()}</span>\n                    </div>\n                    <div style={{height:4, background:'rgba(255,255,255,0.1)', borderRadius:2, overflow:'hidden'}}>\n                      <div style={{height:'100%', width:`${(strength / 5) * 100}%`, background:getStrengthColor(), transition:'all 0.3s'}}></div>\n                    </div>\n                  </div>\n                )}\n              </div>\n\n              {mode === 'login' && (\n                <label style={{display:'flex', alignItems:'center', gap:8, cursor:'pointer', userSelect:'none'}}>\n                  <input \n                    type=\"checkbox\" \n                    checked={rememberMe} \n                    onChange={e => setRememberMe(e.target.checked)}\n                    disabled={loading}\n                  />\n                  <span style={{fontSize:13, color:'var(--muted)'}}>Remember me for 30 days</span>\n                </label>\n              )}\n\n              {error && (\n                <div style={{padding:12, background:'rgba(239, 68, 68, 0.1)', border:'1px solid var(--danger)', borderRadius:12, color:'var(--danger)', fontSize:13, textAlign:'center'}}>\n                  âš ï¸ {error}\n                </div>\n              )}\n\n              <button \n                type=\"submit\" \n                className=\"btn btn-primary\" \n                style={{width:'100%', padding:16, fontSize:16}}\n                disabled={loading}\n              >\n                {loading ? 'â³ Processing...' : mode === 'login' ? 'ðŸš€ Sign In' : 'âœ¨ Create Account'}\n              </button>\n\n              <div style={{textAlign:'center'}}>\n                <button \n                  type=\"button\"\n                  onClick={() => {setMode(mode === 'login' ? 'register' : 'login'); setError('')}}\n                  style={{background:'none', border:'none', color:'var(--primary)', cursor:'pointer', fontSize:14, fontWeight:600}}\n                  disabled={loading}\n                >\n                  {mode === 'login' ? \"Don't have an account? Sign up\" : 'Already have an account? Sign in'}\n                </button>\n              </div>\n            </form>\n\n            <button \n              onClick={() => setShowAuthModal(false)}\n              style={{position:'absolute', top:20, right:20, background:'var(--glass-bg)', border:'1px solid var(--glass-border)', borderRadius:'50%', width:36, height:36, display:'grid', placeItems:'center', cursor:'pointer', fontSize:18}}\n            >\n              âœ•\n            </button>\n          </div>\n        </div>\n      )}\n    </>\n  )\n}\n\nfunction LoginPage({onLogin, isVerifying}){\n  const [mode, setMode] = useState('login')\n  const [user, setUser] = useState('')\n  const [pass, setPass] = useState('')\n  const [email, setEmail] = useState('')\n  const [showPass, setShowPass] = useState(false)\n  const [error, setError] = useState('')\n  const [loading, setLoading] = useState(false)\n  const [strength, setStrength] = useState(0)\n\n  useEffect(() => {\n    if (mode === 'register' && pass) {\n      let score = 0\n      if (pass.length >= 8) score++\n      if (pass.length >= 12) score++\n      if (/[a-z]/.test(pass) && /[A-Z]/.test(pass)) score++\n      if (/[0-9]/.test(pass)) score++\n      if (/[^a-zA-Z0-9]/.test(pass)) score++\n      setStrength(score)\n    }\n  }, [pass, mode])\n\n  const validateEmail = (email) => {\n    return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email)\n  }\n\n  const submit = async (e) => {\n    e?.preventDefault()\n    setError('')\n    \n    if (!user || user.length < 3) {\n      setError('Username must be at least 3 characters')\n      return\n    }\n    if (!pass || pass.length < 6) {\n      setError('Password must be at least 6 characters')\n      return\n    }\n    if (mode === 'register') {\n      if (!email || !validateEmail(email)) {\n        setError('Please enter a valid email address')\n        return\n      }\n      if (strength < 3) {\n        setError('Password is too weak. Use mix of letters, numbers, and symbols.')\n        return\n      }\n    }\n    \n    setLoading(true)\n    try{\n      const payload = mode === 'register' \n        ? {username: user, password: pass, email: email}\n        : {username: user, password: pass}\n      \n      const r = await fetch(`${API}/auth/${mode}`, { \n        method:'POST', \n        headers:{'Content-Type':'application/json'}, \n        body: JSON.stringify(payload) \n      })\n      const d = await r.json()\n      if (!r.ok) throw new Error(d.detail || 'Authentication failed')\n      \n      localStorage.setItem('atis_token', d.token)\n      localStorage.setItem('atis_user', d.username)\n      localStorage.setItem('atis_login_time', Date.now().toString())\n      \n      onLogin(d.token, d.username)\n    }catch(e){ \n      setError(e.message)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const getStrengthColor = () => {\n    if (strength <= 2) return '#ef4444'\n    if (strength <= 3) return '#f59e0b'\n    return '#10b981'\n  }\n\n  const getStrengthText = () => {\n    if (strength <= 2) return 'Weak'\n    if (strength <= 3) return 'Medium'\n    return 'Strong'\n  }\n\n  return (\n    <div style={{minHeight:'100vh', display:'flex', alignItems:'center', justifyContent:'center', padding:20, position:'relative', overflow:'hidden', background:'#0a0e27'}}>\n      {/* Animated background gradient circles */}\n      <div style={{position:'absolute', top:'-10%', left:'-5%', width:'500px', height:'500px', background:'radial-gradient(circle, rgba(102, 126, 234, 0.3) 0%, transparent 70%)', filter:'blur(80px)', animation:'float 8s ease-in-out infinite'}}></div>\n      <div style={{position:'absolute', bottom:'-10%', right:'-5%', width:'500px', height:'500px', background:'radial-gradient(circle, rgba(139, 92, 246, 0.3) 0%, transparent 70%)', filter:'blur(80px)', animation:'float 10s ease-in-out infinite reverse'}}></div>\n      \n      <div style={{maxWidth:480, width:'100%', position:'relative', zIndex:1}}>\n        {/* Logo and Welcome Section */}\n        <div style={{textAlign:'center', marginBottom:40}}>\n          <img \n            src=\"/atis-logo.jpg\" \n            alt=\"ATIS Logo\" \n            style={{width:120, height:120, margin:'0 auto 24px', filter:'drop-shadow(0 8px 24px rgba(0,0,0,0.3))', objectFit:'contain', borderRadius:24}}\n            onError={(e) => {\n              e.target.style.display = 'none'\n            }}\n          />\n          <h1 style={{fontSize:42, fontWeight:900, marginBottom:12, background:'linear-gradient(135deg, #667eea 0%, #764ba2 100%)', WebkitBackgroundClip:'text', WebkitTextFillColor:'transparent', letterSpacing:'-1px'}}>\n            Welcome to ATIS\n          </h1>\n          <p style={{fontSize:16, color:'var(--muted)', marginBottom:8}}>Advanced Traveler Information System</p>\n          <p style={{fontSize:14, color:'var(--muted)'}}>\n            {isVerifying ? 'ðŸ”„ Verifying session...' : 'Intelligent route planning for smarter journeys'}\n          </p>\n        </div>\n\n        {/* Login Form Card */}\n        <div style={{background:'var(--glass-bg)', backdropFilter:'blur(30px)', border:'1px solid var(--glass-border)', borderRadius:28, padding:40, boxShadow:'var(--card-shadow)', opacity: isVerifying ? 0.6 : 1, pointerEvents: isVerifying ? 'none' : 'auto', transition:'opacity 0.2s'}}>\n          <div style={{textAlign:'center', marginBottom:32}}>\n            <h2 style={{fontSize:26, fontWeight:800, marginBottom:8}}>\n              {isVerifying ? 'â³ Loading...' : mode === 'login' ? 'ðŸ” Sign In' : 'âœ¨ Create Account'}\n            </h2>\n            <p style={{color:'var(--muted)', fontSize:14}}>\n              {isVerifying ? 'Please wait...' : mode === 'login' ? 'Access your personalized travel experience' : 'Join for smart route planning'}\n            </p>\n          </div>\n\n          <form onSubmit={submit} style={{display:'flex', flexDirection:'column', gap:20}}>\n            <div>\n              <label style={{display:'block', marginBottom:8, fontSize:13, fontWeight:600, color:'var(--muted)'}}>Username</label>\n              <input \n                type=\"text\"\n                placeholder=\"Enter username\" \n                value={user} \n                onChange={e=>setUser(e.target.value)}\n                style={{width:'100%'}}\n                autoComplete=\"username\"\n                disabled={loading}\n                required\n              />\n            </div>\n\n            {mode === 'register' && (\n              <div>\n                <label style={{display:'block', marginBottom:8, fontSize:13, fontWeight:600, color:'var(--muted)'}}>Email</label>\n                <input \n                  type=\"email\"\n                  placeholder=\"your.email@example.com\" \n                  value={email} \n                  onChange={e=>setEmail(e.target.value)}\n                  style={{width:'100%'}}\n                  autoComplete=\"email\"\n                  disabled={loading}\n                  required\n                />\n              </div>\n            )}\n\n            <div>\n              <label style={{display:'block', marginBottom:8, fontSize:13, fontWeight:600, color:'var(--muted)'}}>Password</label>\n              <div style={{position:'relative'}}>\n                <input \n                  type={showPass ? 'text' : 'password'}\n                  placeholder=\"Enter password\" \n                  value={pass} \n                  onChange={e=>setPass(e.target.value)}\n                  style={{width:'100%', paddingRight:45}}\n                  autoComplete={mode === 'login' ? 'current-password' : 'new-password'}\n                  disabled={loading}\n                  required\n                />\n                <button \n                  type=\"button\"\n                  onClick={() => setShowPass(!showPass)}\n                  style={{position:'absolute', right:12, top:'50%', transform:'translateY(-50%)', background:'none', border:'none', cursor:'pointer', fontSize:18}}\n                >\n                  {showPass ? 'ðŸ‘ï¸' : 'ðŸ‘ï¸â€ðŸ—¨ï¸'}\n                </button>\n              </div>\n              {mode === 'register' && pass && (\n                <div style={{marginTop:8}}>\n                  <div style={{display:'flex', justifyContent:'space-between', alignItems:'center', marginBottom:4}}>\n                    <span style={{fontSize:12, color:'var(--muted)'}}>Password strength:</span>\n                    <span style={{fontSize:12, fontWeight:600, color:getStrengthColor()}}>{getStrengthText()}</span>\n                  </div>\n                  <div style={{height:4, background:'rgba(255,255,255,0.1)', borderRadius:2, overflow:'hidden'}}>\n                    <div style={{height:'100%', width:`${(strength / 5) * 100}%`, background:getStrengthColor(), transition:'all 0.3s'}}></div>\n                  </div>\n                </div>\n              )}\n            </div>\n\n            {error && (\n              <div style={{padding:12, background:'rgba(239, 68, 68, 0.1)', border:'1px solid var(--danger)', borderRadius:12, color:'var(--danger)', fontSize:13, textAlign:'center'}}>\n                âš ï¸ {error}\n              </div>\n            )}\n\n            <button \n              type=\"submit\" \n              className=\"btn btn-primary\" \n              style={{width:'100%', padding:16, fontSize:16}}\n              disabled={loading}\n            >\n              {loading ? 'â³ Processing...' : mode === 'login' ? 'ðŸš€ Sign In' : 'âœ¨ Create Account'}\n            </button>\n\n            <div style={{textAlign:'center'}}>\n              <button \n                type=\"button\"\n                onClick={() => {setMode(mode === 'login' ? 'register' : 'login'); setError('')}}\n                style={{background:'none', border:'none', color:'var(--primary)', cursor:'pointer', fontSize:14, fontWeight:600}}\n                disabled={loading}\n              >\n                {mode === 'login' ? \"Don't have an account? Sign up\" : 'Already have an account? Sign in'}\n              </button>\n            </div>\n          </form>\n        </div>\n\n        {/* Features Preview */}\n        <div style={{marginTop:32, textAlign:'center', color:'var(--muted)', fontSize:13}}>\n          <p style={{marginBottom:12}}>âœ¨ Real-time traffic & transit data</p>\n          <p style={{marginBottom:12}}>ðŸ—ºï¸ Interactive route planning</p>\n          <p>ðŸŒ Multi-language support</p>\n        </div>\n      </div>\n\n      <style>{`\n        @keyframes float {\n          0%, 100% { transform: translateY(0) scale(1); }\n          50% { transform: translateY(-20px) scale(1.05); }\n        }\n      `}</style>\n    </div>\n  )\n}\n\nexport default function App(){\n  // ALL STATE HOOKS MUST BE DECLARED FIRST\n  const [token, setToken] = useState(() => localStorage.getItem('atis_token'))\n  const [username, setUsername] = useState(() => localStorage.getItem('atis_user'))\n  // Initialize as true if token exists to prevent flash during verification\n  const [isAuthenticated, setIsAuthenticated] = useState(() => {\n    return !!(localStorage.getItem('atis_token') && localStorage.getItem('atis_user'))\n  })\n  const [isVerifying, setIsVerifying] = useState(true)\n  \n  const [origin, setOrigin] = useState([-36.8485, 174.7633])\n  const [dest, setDest] = useState([-36.8443, 174.7676])\n  const [stops, setStops] = useState([])\n  const [itins, setItins] = useState([])\n  const [banner, setBanner] = useState('')\n  const [selectedStop, setSelectedStop] = useState(null)\n  const [departures, setDepartures] = useState([])\n  const [alerts, setAlerts] = useState([])\n  const [trafficIncidents, setTrafficIncidents] = useState([])\n  const [lastTrafficUpdate, setLastTrafficUpdate] = useState(null)\n  const [alts, setAlts] = useState({})\n  const [view, setView] = useState('home')\n  const [expandedItin, setExpandedItin] = useState(null)\n\n  const [modes, setModes] = useState(['bus','train','walk'])\n  const [optimize, setOptimize] = useState('fastest')\n  const [maxWalkKm, setMaxWalkKm] = useState(1.2)\n  const [avoidStairs, setAvoidStairs] = useState(false)\n  const [bikeOk, setBikeOk] = useState(false)\n  const [whenType, setWhenType] = useState('depart')\n  const [whenValue, setWhenValue] = useState('now')\n\n  const [weather, setWeather] = useState(null)\n  const [safetyContacts, setSafetyContacts] = useState([])\n  const [uiLang, setUiLang] = useState('en')\n  const [currency, setCurrency] = useState('NZD')\n  const [amount, setAmount] = useState(50)\n\n  const [reviews, setReviews] = useState([])\n  const [reviewLoc, setReviewLoc] = useState('')\n  const [reviewRating, setReviewRating] = useState(5)\n  const [reviewComment, setReviewComment] = useState('')\n\n  // Location search states\n  const [originSearch, setOriginSearch] = useState('')\n  const [destSearch, setDestSearch] = useState('')\n  const [originName, setOriginName] = useState('Auckland CBD')\n  const [destName, setDestName] = useState('Auckland Airport')\n  const [searchResults, setSearchResults] = useState([])\n  const [searchingFor, setSearchingFor] = useState(null)\n\n  // Assessment features - Environmental & MCDA\n  const [mcdaProfile, setMcdaProfile] = useState('balanced')\n  const [showMcdaBreakdown, setShowMcdaBreakdown] = useState({})\n  const [analyticsData, setAnalyticsData] = useState(null)\n\n  const text = TRANSLATIONS[uiLang] || TRANSLATIONS.en\n  const convertedAmount = Number((amount * (CURRENCY_RATES[currency] || 1)).toFixed(2))\n\n  // Check for existing session on mount and verify with backend\n  useEffect(() => {\n    let mounted = true\n    \n    const verifySession = async () => {\n      const savedToken = localStorage.getItem('atis_token')\n      const savedUser = localStorage.getItem('atis_user')\n      \n      if (savedToken && savedUser) {\n        try {\n          // Verify token with backend\n          const response = await fetch(`${API}/auth/verify`, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': `Bearer ${savedToken}`\n            }\n          })\n          \n          if (!mounted) return\n          \n          if (response.ok) {\n            // Token is valid - keep authenticated state\n            setToken(savedToken)\n            setUsername(savedUser)\n            // isAuthenticated already true from initialization\n          } else {\n            // Token is invalid, clear storage and set both states together\n            localStorage.removeItem('atis_token')\n            localStorage.removeItem('atis_user')\n            localStorage.removeItem('atis_login_time')\n            setToken(null)\n            setUsername(null)\n            setIsAuthenticated(false)\n          }\n        } catch (error) {\n          // Network error or backend down, clear session\n          if (!mounted) return\n          console.error('Session verification failed:', error)\n          localStorage.removeItem('atis_token')\n          localStorage.removeItem('atis_user')\n          localStorage.removeItem('atis_login_time')\n          setToken(null)\n          setUsername(null)\n          setIsAuthenticated(false)\n      }\n      \n        // Set verification complete AFTER authentication state is finalized\n      if (mounted) {\n          // Use setTimeout to ensure state updates are batched\n          setTimeout(() => {\n            console.log('[ATIS] Verification complete, ready to show content')\n        setIsVerifying(false)\n            // Tell the page React is ready - show content NOW\n            if (window.__atisReady) {\n              window.__atisReady()\n            }\n          }, 100)  // Small delay to ensure DOM is painted\n        }\n      } else {\n        // No saved token, set both states\n        if (mounted) {\n          console.log('[ATIS] No token found, showing login')\n          setIsAuthenticated(false)\n          // Use setTimeout to ensure state updates are batched\n          setTimeout(() => {\n            setIsVerifying(false)\n            // Tell the page React is ready - show content NOW\n            if (window.__atisReady) {\n              window.__atisReady()\n            }\n          }, 100)  // Small delay to ensure DOM is painted\n        }\n      }\n    }\n    \n    verifySession()\n    \n    return () => {\n      mounted = false\n    }\n  }, [])\n\n  // Load initial data once (only after authentication is verified)\n  useEffect(() => {\n    // Don't load data until verification is complete and user is authenticated\n    if (isVerifying || !isAuthenticated) return\n    \n    fetch(`${API}/stops/nearby?lat=${origin[0]}&lng=${origin[1]}&radius=900`)\n      .then(r=>r.json()).then(d=>setStops(d.stops||[])).catch(()=>{})\n    fetch(`${API}/alerts`)\n      .then(r=>r.json()).then(d=> {\n        setAlerts([...(d.alerts||[]), ...(d.traffic||[])])\n        setTrafficIncidents(d.traffic||[])\n        setLastTrafficUpdate(Date.now())\n      }).catch(()=>{})\n    fetch(`${API}/weather/point?lat=${origin[0]}&lng=${origin[1]}`)\n      .then(r=>r.json()).then(d=>setWeather(d.forecast||null)).catch(()=>{})\n    fetch(`${API}/safety/contacts`)\n      .then(r=>r.json()).then(d=>setSafetyContacts(d.contacts||[])).catch(()=>{})\n    fetch(`${API}/reviews`)\n      .then(r=>r.json()).then(d=>setReviews(d.reviews||[])).catch(()=>{})\n  }, [isAuthenticated, isVerifying])\n\n  // Update when origin changes (debounced to prevent excessive re-renders)\n  useEffect(() => {\n    // Only update if authenticated\n    if (!isAuthenticated) return\n    \n    const timeoutId = setTimeout(() => {\n      fetch(`${API}/stops/nearby?lat=${origin[0]}&lng=${origin[1]}&radius=900`)\n        .then(r=>r.json()).then(d=>setStops(d.stops||[])).catch(()=>{})\n      fetch(`${API}/weather/point?lat=${origin[0]}&lng=${origin[1]}`)\n        .then(r=>r.json()).then(d=>setWeather(d.forecast||null)).catch(()=>{})\n    }, 300)\n    \n    return () => clearTimeout(timeoutId)\n  }, [origin[0], origin[1], isAuthenticated])\n\n  // Helper function to get relative time string\n  const getRelativeTime = (timestamp) => {\n    const seconds = Math.floor((Date.now() - timestamp) / 1000)\n    if (seconds < 10) return 'just now'\n    if (seconds < 60) return `${seconds}s ago`\n    const minutes = Math.floor(seconds / 60)\n    if (minutes < 60) return `${minutes}m ago`\n    const hours = Math.floor(minutes / 60)\n    return `${hours}h ago`\n  }\n\n  // Manual refresh function that can be called from the map\n  const refreshTrafficData = async () => {\n    try {\n      const r = await fetch(`${API}/alerts`)\n      const d = await r.json()\n      setAlerts([...(d.alerts||[]), ...(d.traffic||[])])\n      setTrafficIncidents(d.traffic||[])\n      const now = Date.now()\n      setLastTrafficUpdate(now)\n      toast('ðŸ”„ Traffic data updated!', 'success')\n      return true\n    } catch(err) {\n      console.error('Failed to refresh traffic:', err)\n      toast('âš ï¸ Failed to update traffic data', 'error')\n      return false\n    }\n  }\n\n  // Auto-refresh traffic data every 30 seconds for real-time updates\n  useEffect(() => {\n    if (!isAuthenticated) return\n    \n    const refreshTraffic = () => {\n      fetch(`${API}/alerts`)\n        .then(r=>r.json())\n        .then(d=> {\n          setAlerts([...(d.alerts||[]), ...(d.traffic||[])])\n          setTrafficIncidents(d.traffic||[])\n          const now = Date.now()\n          setLastTrafficUpdate(now)\n        })\n        .catch(()=>{})\n    }\n    \n    // Set up interval for auto-refresh (30 seconds)\n    const intervalId = setInterval(refreshTraffic, 30000)\n    \n    // Clean up interval on unmount\n    return () => clearInterval(intervalId)\n  }, [isAuthenticated])\n  \n  // Update relative time display every 10 seconds\n  const [, forceUpdate] = useState()\n  useEffect(() => {\n    const timer = setInterval(() => forceUpdate({}), 10000)\n    return () => clearInterval(timer)\n  }, [])\n\n  const viewDepartures = async (stop) => {\n    setSelectedStop(stop)\n    const r = await fetch(`${API}/departures?stop_id=${stop.stop_id}`)\n    const data = await r.json()\n    setDepartures(data.departures || [])\n  }\n\n  const plan = async () => {\n    const payload = {\n      origin, destination: dest,\n      depart_at: whenType === 'depart' ? whenValue : 'now',\n      arrive_by: whenType === 'arrive' ? whenValue : null,\n      optimize, max_walk_km: parseFloat(maxWalkKm),\n      avoid_stairs: avoidStairs, bike_ok: bikeOk, modes,\n    }\n    const r = await fetch(`${API}/plan`, { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(payload) })\n    const d = await r.json()\n    setItins(d.itineraries || [])\n    setBanner(d.context?.weatherAlert || '')\n    setAlts({})\n  }\n\n  const trackTrip = async (itinerary) => {\n    if (!token) return\n    try {\n      await fetch(`${API}/analytics/track/trip`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          origin,\n          destination: dest,\n          itinerary\n        })\n      })\n    } catch (error) {\n      console.log('Analytics tracking failed:', error)\n    }\n  }\n\n  const loadAnalytics = async () => {\n    if (!token) return\n    try {\n      const r = await fetch(`${API}/analytics/summary`, {\n        headers: { 'Authorization': `Bearer ${token}` }\n      })\n      const data = await r.json()\n      setAnalyticsData(data)\n    } catch (error) {\n      console.log('Failed to load analytics:', error)\n    }\n  }\n\n  const exportPdf = async (itinerary) => {\n    const r = await fetch(`${API}/export/itinerary`,{ method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ origin, destination: dest, itinerary }) })\n    const blob = await r.blob()\n    const url = URL.createObjectURL(blob)\n    const a = document.createElement('a'); a.href = url; a.download = 'atis_trip.pdf'; a.click(); URL.revokeObjectURL(url)\n  }\n\n  const suggestAlt = async (itinerary) => {\n    try {\n      const r = await fetch(`${API}/routes/suggest`, { \n        method:'POST', \n        headers:{'Content-Type':'application/json'}, \n        body: JSON.stringify({ \n          current_itinerary: itinerary, \n          incidents: alerts,\n          origin: origin,\n          destination: dest,\n          preferences: {\n            optimize: optimize,\n            max_walk_km: maxWalkKm,\n            avoid_stairs: avoidStairs,\n            bike_ok: bikeOk,\n            modes: modes\n          }\n        }) \n      })\n      const data = await r.json()\n      \n      // Enhance alternative with more details\n      const enhancedAlternative = {\n        ...data.alternative,\n        reason: data.reason || 'Alternative route available',\n        benefits: data.benefits || [],\n        warnings: data.warnings || [],\n        comparison: {\n          timeDiff: data.alternative?.duration ? \n            Math.round((data.alternative.duration - itinerary.duration) / 60) : 0,\n          transferDiff: (data.alternative?.transfers || 0) - (itinerary.transfers || 0),\n          walkDiff: data.alternative?.walk_distance ? \n            (data.alternative.walk_distance - (itinerary.walk_distance || 0)).toFixed(1) : 0\n        }\n      }\n      \n      setAlts(prev => ({...prev, [itinerary.id]: enhancedAlternative}))\n    } catch (error) {\n      console.error('Error suggesting alternative:', error)\n    }\n  }\n\n  const authHeaders = () => token ? {'Authorization': `Bearer ${token}`} : {}\n  \n  const savePrefs = async () => {\n    if (!token){ alert('Please login to save preferences.'); return }\n    const r = await fetch(`${API}/prefs`, { method:'POST', headers:{'Content-Type':'application/json', ...authHeaders()}, body: JSON.stringify({ lang:'en', currency:'NZD', home: origin, work: dest }) })\n    alert(r.ok?'Preferences saved':'Failed to save')\n  }\n\n  const languageOptions = Object.keys(TRANSLATIONS)\n  const currencyOptions = Object.keys(CURRENCY_RATES)\n  \n  const saveOfflinePack = () => {\n    const snapshot = { saved: { origin, destination: dest, modes, optimize, maxWalkKm, avoidStairs, bikeOk }, alerts, weather, stops, safetyContacts }\n    localStorage.setItem('atis_offline_snapshot', JSON.stringify(snapshot))\n    alert('Offline toolkit saved to this device.')\n  }\n\n  const updateSavedPlace = (key, coords) => {\n    const store = JSON.parse(localStorage.getItem('atisSavedPlaces') || '{}')\n    store[key] = coords\n    localStorage.setItem('atisSavedPlaces', JSON.stringify(store))\n    alert(`${key.charAt(0).toUpperCase() + key.slice(1)} saved`)\n  }\n\n  const submitReview = async ()=>{\n    if (!token){ alert('Please login to post a review.'); return }\n    const r = await fetch(`${API}/reviews`, {method:'POST', headers:{'Content-Type':'application/json', ...authHeaders()}, body: JSON.stringify({ location: reviewLoc, rating: Number(reviewRating), comment: reviewComment }) })\n    if (!r.ok){ const t = await r.json(); alert('Failed: '+(t.detail||r.status)) }\n    setReviewLoc(''); setReviewRating(5); setReviewComment('')\n    fetch(`${API}/reviews`).then(r=>r.json()).then(d=>setReviews(d.reviews||[])).catch(()=>{})\n  }\n\n  const toggleMode = (m) => setModes(prev => prev.includes(m) ? prev.filter(x => x!==m) : [...prev, m])\n  const swapOD = () => { \n    const o = origin\n    const oName = originName\n    setOrigin(dest)\n    setDest(o)\n    setOriginName(destName)\n    setDestName(oName)\n  }\n  \n  const shareLocation = () => {\n    const coords = `${origin[0].toFixed(5)}, ${origin[1].toFixed(5)}`\n    const url = `https://www.google.com/maps?q=${origin[0]},${origin[1]}`\n    navigator.clipboard.writeText(url).then(() => {\n      alert(`${text.locationCopied}\\n${url}`)\n    }).catch(() => {\n      alert(`${text.shareLocation}: ${coords}`)\n    })\n  }\n\n  // Enhanced Geocoding with more accurate results\n  const searchLocation = async (query, type) => {\n    if (!query || query.length < 3) {\n      setSearchResults([])\n      return\n    }\n    \n    try {\n      // More specific search parameters for better accuracy\n      const response = await fetch(\n        `https://nominatim.openstreetmap.org/search?` + \n        `format=json&` +\n        `q=${encodeURIComponent(query)}&` +\n        `countrycodes=nz&` +\n        `bounded=1&` +\n        `viewbox=174.5,-37.0,175.0,-36.5&` + // Auckland bounding box\n        `addressdetails=1&` +\n        `limit=8&` +\n        `dedupe=1`\n      )\n      const data = await response.json()\n      \n      // Filter and sort results by relevance\n      const filteredResults = data\n        .filter(result => {\n          const name = result.display_name.toLowerCase()\n          return (\n            name.includes('auckland') || \n            name.includes('new zealand') ||\n            parseFloat(result.lat) > -37.5 && parseFloat(result.lat) < -36.5\n          )\n        })\n        .sort((a, b) => {\n          // Prioritize results with specific types\n          const priorityTypes = ['building', 'amenity', 'shop', 'tourism', 'station']\n          const aHasPriority = priorityTypes.includes(a.type)\n          const bHasPriority = priorityTypes.includes(b.type)\n          if (aHasPriority && !bHasPriority) return -1\n          if (!aHasPriority && bHasPriority) return 1\n          return 0\n        })\n      \n      setSearchResults(filteredResults)\n      setSearchingFor(type)\n    } catch (error) {\n      console.error('Search error:', error)\n      setSearchResults([])\n    }\n  }\n\n  // Select a location from search results\n  const selectLocation = (result) => {\n    const lat = parseFloat(result.lat)\n    const lng = parseFloat(result.lon)\n    const name = result.display_name.split(',')[0] // Get primary name\n    \n    if (searchingFor === 'origin') {\n      setOrigin([lat, lng])\n      setOriginName(name)\n      setOriginSearch('')\n    } else {\n      setDest([lat, lng])\n      setDestName(name)\n      setDestSearch('')\n    }\n    \n    setSearchResults([])\n    setSearchingFor(null)\n  }\n\n  // Close dropdown when clicking outside\n  const closeSearchDropdown = () => {\n    setSearchResults([])\n    setSearchingFor(null)\n    setOriginSearch('')\n    setDestSearch('')\n  }\n\n  // Use current location\n  const useCurrentLocation = (type) => {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        async (position) => {\n          const lat = position.coords.latitude\n          const lng = position.coords.longitude\n          \n          // Reverse geocode to get place name\n          try {\n            const response = await fetch(\n              `https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lng}`\n            )\n            const data = await response.json()\n            const name = data.address?.suburb || data.address?.city || data.address?.town || 'Current Location'\n            \n            if (type === 'origin') {\n              setOrigin([lat, lng])\n              setOriginName(name)\n            } else {\n              setDest([lat, lng])\n              setDestName(name)\n            }\n          } catch (error) {\n            if (type === 'origin') {\n              setOrigin([lat, lng])\n              setOriginName('Current Location')\n            } else {\n              setDest([lat, lng])\n              setDestName('Current Location')\n            }\n          }\n        },\n        (error) => {\n          alert('Could not get your location. Please enable location services.')\n        }\n      )\n    } else {\n      alert('Geolocation is not supported by your browser.')\n    }\n  }\n\n  const handleLogin = (token, username) => {\n    setToken(token)\n    setUsername(username)\n    setIsAuthenticated(true)\n  }\n\n  const logout = () => { \n    setToken(null)\n    setUsername(null)\n    setIsAuthenticated(false)\n    localStorage.removeItem('atis_token')\n    localStorage.removeItem('atis_user')\n    localStorage.removeItem('atis_login_time')\n    sessionStorage.removeItem('atis_token')\n    sessionStorage.removeItem('atis_user')\n    sessionStorage.removeItem('atis_login_time')\n    setView('home')\n  }\n\n  // Show loading screen while verifying token - PREVENTS BLINKING\n  if (isVerifying) {\n    return (\n      <div style={{\n        minHeight:'100vh',\n        width:'100%',\n        display:'flex',\n        flexDirection:'column',\n        alignItems:'center',\n        justifyContent:'center',\n        background:'#0a0e27',  // Exact match to app background\n        color:'white',\n        position:'fixed',\n        top:0,\n        left:0,\n        zIndex:9999\n      }}>\n        <div style={{textAlign:'center'}}>\n          <div style={{\n            width:60,\n            height:60,\n            border:'4px solid rgba(139, 92, 246, 0.3)',\n            borderTop:'4px solid #8b5cf6',\n            borderRadius:'50%',\n            animation:'spin 1s linear infinite',\n            margin:'0 auto 20px'\n          }}></div>\n          <div style={{fontSize:18, fontWeight:600}}>Verifying session...</div>\n          <div style={{fontSize:14, opacity:0.7, marginTop:8}}>Please wait</div>\n        </div>\n      </div>\n    )\n  }\n\n  // Show login page if not authenticated - NO ACCESS TO MAIN APP\n  if (!isAuthenticated) {\n    return <LoginPage onLogin={handleLogin} isVerifying={false} />\n  }\n\n  return (\n    <div style={{minHeight:'100vh', padding:'0', background:'#0a0e27', willChange:'auto'}}>\n      {/* Modern Top Navigation Bar */}\n      <nav style={{\n        position:'sticky', top:0, zIndex:1000,\n        background:'rgba(10, 14, 39, 0.95)', \n        borderBottom:'1px solid var(--glass-border)',\n        boxShadow:'0 4px 24px rgba(0,0,0,0.1)'\n      }}>\n        <div style={{maxWidth:1400, margin:'0 auto', padding:'16px 24px', display:'flex', alignItems:'center', justifyContent:'space-between', gap:20}}>\n          {/* Logo and Title */}\n          <div style={{display:'flex', alignItems:'center', gap:16}}>\n            <img\n              src=\"/atis-logo.jpg\"\n              alt=\"ATIS\"\n              style={{width:48, height:48, borderRadius:12, objectFit:'contain', boxShadow:'0 4px 12px rgba(0,0,0,0.2)'}}\n              onError={(e) => {\n                e.target.style.display = 'none'\n                e.target.nextElementSibling.style.display = 'grid'\n              }}\n            />\n            <div className=\"logo\" style={{display:'none', width:48, height:48, fontSize:20}}>A</div>\n            <div>\n              <h1 style={{fontSize:22, fontWeight:800, lineHeight:1, marginBottom:4}}>ATIS</h1>\n              <p style={{fontSize:12, color:'var(--muted)', lineHeight:1}}>Advanced Travel System</p>\n            </div>\n          </div>\n\n          {/* Navigation Tabs */}\n          <div style={{display:'flex', gap:8, flexWrap:'wrap'}}>\n            {['home','plan','map','alerts','safety','reviews','analytics','settings'].map(v => (\n              <button\n                key={v}\n                onClick={() => {setView(v); if(v === 'analytics') loadAnalytics();}}\n                className={view === v ? 'btn btn-primary' : 'chip'}\n                style={{\n                  padding:'8px 16px',\n                  fontSize:13,\n                  fontWeight:600,\n                  textTransform:'capitalize',\n                  transition:'all 0.3s'\n                }}\n              >\n                {v === 'home' && 'ðŸ '} {v === 'plan' && 'ðŸ—ºï¸'} {v === 'map' && 'ðŸŒ'}\n                {v === 'alerts' && 'âš ï¸'} {v === 'safety' && 'ðŸ›¡ï¸'} {v === 'reviews' && 'â­'}\n                {v === 'analytics' && 'ðŸ“Š'} {v === 'settings' && 'âš™ï¸'} {' '}{v.charAt(0).toUpperCase() + v.slice(1)}\n              </button>\n            ))}\n          </div>\n\n          {/* User Profile */}\n          <div style={{display:'flex', alignItems:'center', gap:12}}>\n            <div style={{textAlign:'right'}}>\n              <div style={{fontSize:14, fontWeight:600}}>{username || 'Guest'}</div>\n              <div style={{fontSize:11, color:'var(--muted)'}}>Active Session</div>\n            </div>\n            <button onClick={logout} className=\"btn btn-danger\" style={{padding:'8px 16px', fontSize:13}}>\n              ðŸšª Logout\n            </button>\n          </div>\n        </div>\n      </nav>\n\n      {/* Main Content Container */}\n      <div style={{maxWidth:1400, margin:'0 auto', padding:'32px 24px 80px'}}>\n        \n        {/* View-Based Content Rendering */}\n        {view === 'home' && (\n          <>\n            {/* Quick Stats Dashboard */}\n            <div className=\"grid-3\" style={{marginBottom:32}}>\n              <div className=\"stat-card\">\n                <div className=\"stat-value\">{stops.length}</div>\n                <div className=\"stat-label\">Nearby Stops</div>\n              </div>\n              <div className=\"stat-card\">\n                <div className=\"stat-value\">{itins.length}</div>\n                <div className=\"stat-label\">Routes Found</div>\n              </div>\n              <div className=\"stat-card\">\n                <div className=\"stat-value\">{alerts.length}</div>\n                <div className=\"stat-label\">Active Alerts</div>\n              </div>\n            </div>\n\n            {/* Welcome Card */}\n            <div className=\"card\" style={{marginBottom:32, background:'linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%)', border:'1px solid rgba(102, 126, 234, 0.3)'}}>\n              <h2 style={{fontSize:28, fontWeight:800, marginBottom:12, background:'var(--gradient-1)', WebkitBackgroundClip:'text', WebkitTextFillColor:'transparent'}}>\n                Welcome back, {username}! ðŸ‘‹\n              </h2>\n              <p style={{color:'var(--muted)', fontSize:15}}>\n                Your intelligent travel companion for smarter journeys. Plan trips, check real-time updates, and navigate with confidence.\n              </p>\n            </div>\n\n            {/* Feature Overview Grid */}\n            <div className=\"grid-2\" style={{marginBottom:32}}>\n              <div className=\"card\" onClick={() => setView('plan')} style={{cursor:'pointer'}}>\n                <div style={{fontSize:48, marginBottom:16}}>ðŸ—ºï¸</div>\n                <h3 style={{fontSize:20, fontWeight:700, marginBottom:8}}>Trip Planning</h3>\n                <p style={{color:'var(--muted)', fontSize:14}}>Plan multi-modal journeys with real-time data and alternative routes</p>\n              </div>\n              <div className=\"card\" onClick={() => setView('map')} style={{cursor:'pointer'}}>\n                <div style={{fontSize:48, marginBottom:16}}>ðŸŒ</div>\n                <h3 style={{fontSize:20, fontWeight:700, marginBottom:8}}>Interactive Map</h3>\n                <p style={{color:'var(--muted)', fontSize:14}}>Explore nearby stops, set destinations, and visualize your route</p>\n              </div>\n              <div className=\"card\" onClick={() => setView('alerts')} style={{cursor:'pointer'}}>\n                <div style={{fontSize:48, marginBottom:16}}>âš ï¸</div>\n                <h3 style={{fontSize:20, fontWeight:700, marginBottom:8}}>Live Alerts</h3>\n                <p style={{color:'var(--muted)', fontSize:14}}>Stay updated with traffic incidents and service disruptions</p>\n              </div>\n              <div className=\"card\" onClick={() => setView('safety')} style={{cursor:'pointer'}}>\n                <div style={{fontSize:48, marginBottom:16}}>ðŸ›¡ï¸</div>\n                <h3 style={{fontSize:20, fontWeight:700, marginBottom:8}}>Safety Features</h3>\n                <p style={{color:'var(--muted)', fontSize:14}}>Emergency contacts and location sharing for peace of mind</p>\n              </div>\n            </div>\n          </>\n        )}\n\n        {view === 'map' && (\n          <div>\n            <h2 className=\"section-title\">ðŸŒ Interactive Map</h2>\n          <FeatureCard icon=\"ðŸ—ºï¸\" title=\"Map View\" description=\"Drag origin marker, click map to set destination, view nearby stops\">\n            <div style={{height:450, width:'100%', borderRadius:16, overflow:'hidden', boxShadow:'0 8px 24px rgba(0,0,0,0.12)'}}>\n              <InteractiveMap \n                origin={origin} \n                setOrigin={setOrigin} \n                dest={dest} \n                setDest={setDest} \n                stops={stops} \n                trafficIncidents={trafficIncidents}\n                lastUpdate={lastTrafficUpdate ? getRelativeTime(lastTrafficUpdate) : null}\n                onRefresh={refreshTrafficData}\n              />\n            </div>\n            <div style={{marginTop:16, display:'flex', gap:10, flexWrap:'wrap'}}>\n              <button className=\"btn btn-primary\" onClick={shareLocation}>ðŸ“ {text.shareLocation}</button>\n              <button className=\"btn\" onClick={() => navigator.clipboard.writeText(`${origin[0].toFixed(5)}, ${origin[1].toFixed(5)}`).then(() => alert(text.locationCopied))}>ðŸ“‹ {text.copyCoords}</button>\n            </div>\n          </FeatureCard>\n          </div>\n        )}\n\n        {view === 'alerts' && (\n          <div>\n            <h2 className=\"section-title\">âš ï¸ Live Alerts & Weather</h2>\n          <FeatureCard icon=\"âš¡\" title={text.realTimeSnapshot} description=\"Live traffic, weather and notifications so riders stay ahead.\">\n            <div style={{display:'flex', flexWrap:'wrap', gap:16}}>\n              <div style={{flex:'1 1 200px', minWidth:220}}>\n                <div style={{fontWeight:600, marginBottom:6}}>{text.weatherNow}</div>\n                {weather ? (\n                  <div>\n                    <div style={{fontSize:18, fontWeight:700}}>{weather.condition}</div>\n                    <div style={{opacity:0.75}}>Temp {weather.tempC}Â°C â€¢ Wind {weather.windKph} km/h</div>\n                  </div>\n                ) : (\n                  <div style={{opacity:0.65}}>Fetching latest forecastâ€¦</div>\n                )}\n              </div>\n              <div style={{flex:'2 1 320px'}}>\n                <div style={{fontWeight:600, marginBottom:6}}>{text.alertsIncidents}</div>\n                <ul style={{margin:0, paddingLeft:18}}>\n                  {alerts.slice(0,6).map((a,i)=>(\n                    <li key={i}><strong>{a.type||a.id}</strong>: {a.title||a.summary} {a.severity?`â€¢ ${a.severity}`:''}</li>\n                  ))}\n                  {alerts.length===0 && <li style={{opacity:0.7}}>{text.noAlerts}</li>}\n                </ul>\n              </div>\n              {banner && (\n                <div style={{flexBasis:'100%', background:'rgba(37,99,235,0.12)', padding:12, borderRadius:12}}>\n                  <strong>Notification:</strong> {banner}\n                </div>\n              )}\n            </div>\n          </FeatureCard>\n          </div>\n        )}\n\n        {view === 'plan' && (\n          <div>\n            <h2 className=\"section-title\">ðŸ—ºï¸ Trip Planning</h2>\n          <FeatureCard icon=\"ðŸ§­\" title={text.tripPlanning} description=\"Plan ahead, adapt on the fly, and export journeys for the road.\">\n            <div style={{display:'grid', gap:24, gridTemplateColumns:'minmax(260px, 1fr) minmax(320px, 1.35fr)'}}>\n              <div style={{display:'flex', flexDirection:'column', gap:12}}>\n                {/* Origin Location Search */}\n                <div style={{position:'relative'}}>\n                  <label style={{display:'flex', flexDirection:'column', gap:4}}>\n                    <div style={{display:'flex', justifyContent:'space-between', alignItems:'center'}}>\n                      <span style={{fontSize:12, opacity:0.75}}>ðŸ“ Origin</span>\n                      <button \n                        className=\"btn\" \n                        onClick={() => useCurrentLocation('origin')}\n                        style={{padding:'4px 8px', fontSize:11}}\n                        title=\"Use my current location\"\n                      >\n                        ðŸ“ Current\n                      </button>\n                    </div>\n                    <input \n                      value={originSearch || originName} \n                      onChange={e => {\n                        setOriginSearch(e.target.value)\n                        searchLocation(e.target.value, 'origin')\n                      }}\n                      onFocus={e => e.target.select()}\n                      placeholder=\"Search for a place...\"\n                      style={{fontWeight:600}}\n                    />\n                  </label>\n                  {searchingFor === 'origin' && searchResults.length > 0 && (\n                    <div style={{\n                      position:'absolute', \n                      top:'100%', \n                      left:0, \n                      right:0, \n                      zIndex:1000,\n                      background:'linear-gradient(135deg, rgba(30, 41, 59, 0.98) 0%, rgba(15, 23, 42, 0.98) 100%)',\n                      backdropFilter:'blur(40px)',\n                      border:'2px solid rgba(139, 92, 246, 0.4)', \n                      borderRadius:16, \n                      marginTop:8,\n                      maxHeight:320,\n                      overflowY:'auto',\n                      boxShadow:'0 20px 60px rgba(0,0,0,0.6), 0 0 0 1px rgba(255,255,255,0.1) inset'\n                    }}>\n                      <div style={{\n                        padding:'10px 14px',\n                        fontSize:11,\n                        fontWeight:700,\n                        color:'rgba(139, 92, 246, 1)',\n                        borderBottom:'1px solid rgba(139, 92, 246, 0.2)',\n                        textTransform:'uppercase',\n                        letterSpacing:'0.5px'\n                      }}>\n                        ðŸ“ Select Origin Location\n                      </div>\n                      {searchResults.map((result, i) => (\n                        <div \n                          key={i}\n                          onClick={() => selectLocation(result)}\n                          style={{\n                            padding:'14px 16px', \n                            cursor:'pointer', \n                            borderBottom: i < searchResults.length - 1 ? '1px solid rgba(255,255,255,0.06)' : 'none',\n                            transition:'all 0.2s',\n                            background:'transparent'\n                          }}\n                          onMouseEnter={e => {\n                            e.currentTarget.style.background = 'linear-gradient(90deg, rgba(139, 92, 246, 0.15) 0%, rgba(59, 130, 246, 0.15) 100%)'\n                            e.currentTarget.style.borderLeft = '3px solid rgba(139, 92, 246, 0.8)'\n                            e.currentTarget.style.paddingLeft = '13px'\n                          }}\n                          onMouseLeave={e => {\n                            e.currentTarget.style.background = 'transparent'\n                            e.currentTarget.style.borderLeft = 'none'\n                            e.currentTarget.style.paddingLeft = '16px'\n                          }}\n                        >\n                          <div style={{\n                            fontWeight:700, \n                            fontSize:15, \n                            color:'#ffffff',\n                            marginBottom:6,\n                            display:'flex',\n                            alignItems:'center',\n                            justifyContent:'space-between'\n                          }}>\n                            <div style={{display:'flex', alignItems:'center', gap:8}}>\n                              <span style={{fontSize:18}}>\n                                {result.type === 'amenity' ? 'ðŸ¢' : \n                                 result.type === 'building' ? 'ðŸ›ï¸' :\n                                 result.type === 'tourism' ? 'ðŸŽ¯' :\n                                 result.type === 'station' ? 'ðŸš‰' :\n                                 result.type === 'shop' ? 'ðŸª' : 'ðŸ“'}\n                              </span>\n                              {result.display_name.split(',')[0]}\n                            </div>\n                            {result.address?.suburb && (\n                              <span style={{\n                                fontSize:11,\n                                padding:'2px 8px',\n                                background:'rgba(139, 92, 246, 0.3)',\n                                borderRadius:8,\n                                color:'rgba(139, 92, 246, 1)',\n                                fontWeight:600\n                              }}>\n                                {result.address.suburb}\n                              </span>\n                            )}\n                          </div>\n                          <div style={{\n                            fontSize:11, \n                            color:'rgba(255,255,255,0.5)', \n                            lineHeight:1.5,\n                            paddingLeft:26,\n                            marginBottom:4\n                          }}>\n                            {result.display_name.split(',').slice(1, 3).join(',').trim()}\n                          </div>\n                          {result.type && (\n                            <div style={{\n                              fontSize:10,\n                              color:'rgba(255,255,255,0.4)',\n                              paddingLeft:26,\n                              fontStyle:'italic'\n                            }}>\n                              {result.type.charAt(0).toUpperCase() + result.type.slice(1)}\n                            </div>\n                          )}\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                  <div style={{fontSize:11, opacity:0.5, marginTop:4}}>{origin[0].toFixed(4)}, {origin[1].toFixed(4)}</div>\n                </div>\n\n                {/* Destination Location Search */}\n                <div style={{position:'relative'}}>\n                  <label style={{display:'flex', flexDirection:'column', gap:4}}>\n                    <div style={{display:'flex', justifyContent:'space-between', alignItems:'center'}}>\n                      <span style={{fontSize:12, opacity:0.75}}>ðŸŽ¯ Destination</span>\n                      <button \n                        className=\"btn\" \n                        onClick={() => useCurrentLocation('dest')}\n                        style={{padding:'4px 8px', fontSize:11}}\n                        title=\"Use my current location\"\n                      >\n                        ðŸ“ Current\n                      </button>\n                    </div>\n                    <input \n                      value={destSearch || destName} \n                      onChange={e => {\n                        setDestSearch(e.target.value)\n                        searchLocation(e.target.value, 'dest')\n                      }}\n                      onFocus={e => e.target.select()}\n                      placeholder=\"Search for a place...\"\n                      style={{fontWeight:600}}\n                    />\n                  </label>\n                  {searchingFor === 'dest' && searchResults.length > 0 && (\n                    <div style={{\n                      position:'absolute', \n                      top:'100%', \n                      left:0, \n                      right:0, \n                      zIndex:1000,\n                      background:'linear-gradient(135deg, rgba(30, 41, 59, 0.98) 0%, rgba(15, 23, 42, 0.98) 100%)',\n                      backdropFilter:'blur(40px)',\n                      border:'2px solid rgba(59, 130, 246, 0.4)', \n                      borderRadius:16, \n                      marginTop:8,\n                      maxHeight:320,\n                      overflowY:'auto',\n                      boxShadow:'0 20px 60px rgba(0,0,0,0.6), 0 0 0 1px rgba(255,255,255,0.1) inset'\n                    }}>\n                      <div style={{\n                        padding:'10px 14px',\n                        fontSize:11,\n                        fontWeight:700,\n                        color:'rgba(59, 130, 246, 1)',\n                        borderBottom:'1px solid rgba(59, 130, 246, 0.2)',\n                        textTransform:'uppercase',\n                        letterSpacing:'0.5px'\n                      }}>\n                        ðŸŽ¯ Select Destination Location\n                      </div>\n                      {searchResults.map((result, i) => (\n                        <div \n                          key={i}\n                          onClick={() => selectLocation(result)}\n                          style={{\n                            padding:'14px 16px', \n                            cursor:'pointer', \n                            borderBottom: i < searchResults.length - 1 ? '1px solid rgba(255,255,255,0.06)' : 'none',\n                            transition:'all 0.2s',\n                            background:'transparent'\n                          }}\n                          onMouseEnter={e => {\n                            e.currentTarget.style.background = 'linear-gradient(90deg, rgba(59, 130, 246, 0.15) 0%, rgba(16, 185, 129, 0.15) 100%)'\n                            e.currentTarget.style.borderLeft = '3px solid rgba(59, 130, 246, 0.8)'\n                            e.currentTarget.style.paddingLeft = '13px'\n                          }}\n                          onMouseLeave={e => {\n                            e.currentTarget.style.background = 'transparent'\n                            e.currentTarget.style.borderLeft = 'none'\n                            e.currentTarget.style.paddingLeft = '16px'\n                          }}\n                        >\n                          <div style={{\n                            fontWeight:700, \n                            fontSize:15, \n                            color:'#ffffff',\n                            marginBottom:6,\n                            display:'flex',\n                            alignItems:'center',\n                            justifyContent:'space-between'\n                          }}>\n                            <div style={{display:'flex', alignItems:'center', gap:8}}>\n                              <span style={{fontSize:18}}>\n                                {result.type === 'amenity' ? 'ðŸ¢' : \n                                 result.type === 'building' ? 'ðŸ›ï¸' :\n                                 result.type === 'tourism' ? 'ðŸŽ¯' :\n                                 result.type === 'station' ? 'ðŸš‰' :\n                                 result.type === 'shop' ? 'ðŸª' : 'ðŸŽ¯'}\n                              </span>\n                              {result.display_name.split(',')[0]}\n                            </div>\n                            {result.address?.suburb && (\n                              <span style={{\n                                fontSize:11,\n                                padding:'2px 8px',\n                                background:'rgba(59, 130, 246, 0.3)',\n                                borderRadius:8,\n                                color:'rgba(59, 130, 246, 1)',\n                                fontWeight:600\n                              }}>\n                                {result.address.suburb}\n                              </span>\n                            )}\n                          </div>\n                          <div style={{\n                            fontSize:11, \n                            color:'rgba(255,255,255,0.5)', \n                            lineHeight:1.5,\n                            paddingLeft:26,\n                            marginBottom:4\n                          }}>\n                            {result.display_name.split(',').slice(1, 3).join(',').trim()}\n                          </div>\n                          {result.type && (\n                            <div style={{\n                              fontSize:10,\n                              color:'rgba(255,255,255,0.4)',\n                              paddingLeft:26,\n                              fontStyle:'italic'\n                            }}>\n                              {result.type.charAt(0).toUpperCase() + result.type.slice(1)}\n                            </div>\n                          )}\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                  <div style={{fontSize:11, opacity:0.5, marginTop:4}}>{dest[0].toFixed(4)}, {dest[1].toFixed(4)}</div>\n                </div>\n\n                <div style={{display:'flex', gap:8}}>\n                  <button className=\"btn btn-primary\" onClick={swapOD} style={{flex:1}}>ðŸ”„ Swap</button>\n                </div>\n                <div style={{display:'flex', flexDirection:'column', gap:6}}>\n                  <span style={{fontSize:12, opacity:0.75}}>Preferred modes</span>\n                  <div>\n                    {['bus','train','ferry','walk','bike'].map(m => (\n                      <label key={m} style={{marginRight:10}}>\n                        <input type=\"checkbox\" checked={modes.includes(m)} onChange={() => toggleMode(m)} /> {m}\n                      </label>\n                    ))}\n                  </div>\n                </div>\n                <label style={{display:'flex', flexDirection:'column', gap:4}}>\n                  <span style={{fontSize:12, opacity:0.75}}>Optimize for</span>\n                  <select value={optimize} onChange={e => setOptimize(e.target.value)}>\n                    <option value=\"fastest\">Fastest</option>\n                    <option value=\"fewest_transfers\">Fewest transfers</option>\n                    <option value=\"least_walking\">Least walking</option>\n                    <option value=\"reliable\">Most reliable</option>\n                  </select>\n                </label>\n                <label style={{display:'flex', flexDirection:'column', gap:4}}>\n                  <span style={{fontSize:12, opacity:0.75}}>Max walking distance (km)</span>\n                  <input type=\"number\" min=\"0\" max=\"3\" step=\"0.1\" value={maxWalkKm} onChange={e => setMaxWalkKm(e.target.value)} />\n                </label>\n                <div style={{display:'flex', gap:12, flexWrap:'wrap'}}>\n                  <label><input type=\"checkbox\" checked={avoidStairs} onChange={e => setAvoidStairs(e.target.checked)} /> Avoid stairs</label>\n                  <label><input type=\"checkbox\" checked={bikeOk} onChange={e => setBikeOk(e.target.checked)} /> Bike friendly</label>\n                </div>\n                <div style={{display:'flex', flexDirection:'column', gap:6}}>\n                  <span style={{fontSize:12, opacity:0.75}}>When to travel</span>\n                  <div style={{display:'flex', gap:12}}>\n                    <label><input type=\"radio\" name=\"when\" value=\"depart\" checked={whenType==='depart'} onChange={()=>setWhenType('depart')} /> Depart at</label>\n                    <label><input type=\"radio\" name=\"when\" value=\"arrive\" checked={whenType==='arrive'} onChange={()=>setWhenType('arrive')} /> Arrive by</label>\n                  </div>\n                  <input placeholder=\"now or 2025-11-03T09:00\" value={whenValue} onChange={e=>setWhenValue(e.target.value)} />\n                </div>\n                <button className=\"btn btn-primary\" onClick={plan} style={{alignSelf:'flex-start'}}>{text.findItineraries}</button>\n              </div>\n              <div>\n                {itins.length === 0 ? (\n                  <div style={{textAlign:'center', padding:'40px 20px', background:'var(--glass-bg)', backdropFilter:'blur(10px)', borderRadius:16, border:'1px dashed var(--line)'}}>\n                    <div style={{fontSize:48, marginBottom:12}}>ðŸš€</div>\n                    <p style={{color:'var(--muted)', fontSize:15}}>Press <b style={{color:'var(--primary)'}}>Find itineraries</b> to see recommended routes.</p>\n                  </div>\n                ) : (\n                  <div style={{display:'flex', flexDirection:'column', gap:16}}>\n                    {itins.map((it, idx) => (\n                      <div key={it.id} style={{background:'var(--glass-bg)', backdropFilter:'blur(10px)', border:'1px solid var(--glass-border)', borderRadius:16, padding:20, boxShadow:'0 4px 16px rgba(0,0,0,0.08)', transition:'all 0.3s ease'}} onMouseEnter={e => e.currentTarget.style.boxShadow = '0 8px 24px rgba(0,0,0,0.15)'} onMouseLeave={e => e.currentTarget.style.boxShadow = '0 4px 16px rgba(0,0,0,0.08)'}>\n                        <div style={{display:'flex', justifyContent:'space-between', alignItems:'flex-start', gap:16, flexWrap:'wrap'}}>\n                          <div style={{flex:1}}>\n                            <div style={{display:'flex', alignItems:'center', gap:10, marginBottom:10, flexWrap:'wrap'}}>\n                              <span style={{background:'linear-gradient(135deg, #667eea 0%, #764ba2 100%)', color:'white', width:32, height:32, borderRadius:'50%', display:'grid', placeItems:'center', fontWeight:700, fontSize:14}}>{idx + 1}</span>\n                              <div style={{fontSize:18, fontWeight:700}}>~{it.durationMin} min</div>\n                              <div style={{color:'var(--muted)', fontSize:14}}>â€¢ {it.transfers} transfers</div>\n                              <div style={{background:it.reliability > 0.85 ? 'rgba(16, 185, 129, 0.15)' : 'rgba(251, 191, 36, 0.15)', color:it.reliability > 0.85 ? 'var(--success)' : '#f59e0b', padding:'4px 10px', borderRadius:8, fontSize:12, fontWeight:600}}>{Math.round((it.reliability||0)*100)}% reliable</div>\n                            </div>\n                            <div style={{color:'var(--muted)', fontSize:14, marginBottom:10}}>ðŸš¶ {it.legs.join(' â†’ ')}</div>\n                            <div style={{display:'flex', gap:8, flexWrap:'wrap'}}>\n                              <Chip>ðŸš¶ {(it.walk_km ?? 0).toFixed(1)} km walk</Chip>\n                              <Chip>{(it.modes||[]).join(', ')}</Chip>\n                            </div>\n                          </div>\n                          <div style={{display:'flex', gap:8, flexWrap:'wrap'}}>\n                            <button className=\"btn\" onClick={(e) => {e.stopPropagation(); exportPdf(it)}}>ðŸ“„ {text.exportPdf}</button>\n                            <button className=\"btn btn-primary\" onClick={(e) => {e.stopPropagation(); suggestAlt(it)}}>ðŸ”„ {text.suggestAlt}</button>\n                            <button className=\"btn\" onClick={(e) => {e.stopPropagation(); setExpandedItin(expandedItin === it.id ? null : it.id)}} style={{background: expandedItin === it.id ? 'var(--primary)' : '', color: expandedItin === it.id ? 'white' : ''}}>\n                              {expandedItin === it.id ? 'â–¼ Hide Details' : 'â–¶ View Details'}\n                            </button>\n                          </div>\n                        </div>\n\n                        {/* Detailed Journey Breakdown */}\n                        {expandedItin === it.id && (\n                          <div style={{\n                            marginTop:20,\n                            padding:20,\n                            background:'linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%)',\n                            border:'1px solid rgba(102, 126, 234, 0.2)',\n                            borderRadius:12\n                          }}>\n                            {/* Journey Summary Stats */}\n                            <div style={{\n                              display:'grid',\n                              gridTemplateColumns:'repeat(auto-fit, minmax(140px, 1fr))',\n                              gap:12,\n                              marginBottom:20\n                            }}>\n                              <div style={{padding:12, background:'rgba(255,255,255,0.05)', borderRadius:10, border:'1px solid rgba(255,255,255,0.1)'}}>\n                                <div style={{fontSize:11, opacity:0.6, marginBottom:4}}>ðŸ’µ Estimated Fare</div>\n                                <div style={{fontSize:16, fontWeight:700}}>${(2.50 + it.transfers * 0.50).toFixed(2)} NZD</div>\n                              </div>\n                              \n                              <div style={{padding:12, background:'rgba(255,255,255,0.05)', borderRadius:10, border:'1px solid rgba(255,255,255,0.1)'}}>\n                                <div style={{fontSize:11, opacity:0.6, marginBottom:4}}>ðŸŒ± COâ‚‚ Savings</div>\n                                <div style={{fontSize:16, fontWeight:700}}>\n                                  {it.environmental ? \n                                    `${it.environmental.co2_saved_kg.toFixed(2)} kg` : \n                                    `${(it.durationMin * 0.05).toFixed(1)} kg`}\n                                </div>\n                                {it.environmental && (\n                                  <div style={{fontSize:10, opacity:0.5, marginTop:2}}>\n                                    {it.environmental.co2_saved_percent.toFixed(0)}% vs car\n                                  </div>\n                                )}\n                              </div>\n                              \n                              <div style={{padding:12, background:'rgba(255,255,255,0.05)', borderRadius:10, border:'1px solid rgba(255,255,255,0.1)'}}>\n                                <div style={{fontSize:11, opacity:0.6, marginBottom:4}}>â±ï¸ Departure</div>\n                                <div style={{fontSize:16, fontWeight:700}}>In 3 min</div>\n                              </div>\n                              \n                              <div style={{padding:12, background:'rgba(255,255,255,0.05)', borderRadius:10, border:'1px solid rgba(255,255,255,0.1)'}}>\n                                <div style={{fontSize:11, opacity:0.6, marginBottom:4}}>ðŸ‘¥ Crowding</div>\n                                <div style={{fontSize:16, fontWeight:700}}>â—â—â—‹â—‹ Low</div>\n                              </div>\n                              \n                              <div style={{padding:12, background:'rgba(255,255,255,0.05)', borderRadius:10, border:'1px solid rgba(255,255,255,0.1)'}}>\n                                <div style={{fontSize:11, opacity:0.6, marginBottom:4}}>â™¿ Accessible</div>\n                                <div style={{fontSize:16, fontWeight:700}}>{it.stairs ? 'âš ï¸ Stairs' : 'âœ“ Yes'}</div>\n                              </div>\n                              \n                              <div style={{padding:12, background:'rgba(255,255,255,0.05)', borderRadius:10, border:'1px solid rgba(255,255,255,0.1)'}}>\n                                <div style={{fontSize:11, opacity:0.6, marginBottom:4}}>ðŸ”Œ Charging</div>\n                                <div style={{fontSize:16, fontWeight:700}}>Available</div>\n                              </div>\n                            </div>\n\n                            {/* Step-by-Step Journey */}\n                            <div style={{marginTop:16}}>\n                              <div style={{fontSize:14, fontWeight:700, marginBottom:12, color:'var(--primary)'}}>\n                                ðŸ“ Step-by-Step Journey\n                              </div>\n                              \n                              {/* Generate detailed steps */}\n                              {it.legs.map((leg, legIdx) => {\n                                const isWalk = leg.toLowerCase().includes('walk')\n                                const isBus = leg.toLowerCase().includes('bus')\n                                const isTrain = leg.toLowerCase().includes('train')\n                                const isFerry = leg.toLowerCase().includes('ferry')\n                                const isBike = leg.toLowerCase().includes('bike')\n                                \n                                // Extract route number (e.g., \"Bus NX1\" -> \"NX1\")\n                                const routeMatch = leg.match(/(?:Bus|Train)\\s+([A-Z0-9]+)/i)\n                                const routeNumber = routeMatch ? routeMatch[1] : null\n                                \n                                return (\n                                  <div key={legIdx} style={{\n                                    display:'flex',\n                                    gap:16,\n                                    marginBottom:16,\n                                    paddingBottom:16,\n                                    borderBottom: legIdx < it.legs.length - 1 ? '1px dashed rgba(255,255,255,0.1)' : 'none'\n                                  }}>\n                                    {/* Step Number & Icon */}\n                                    <div style={{display:'flex', flexDirection:'column', alignItems:'center', minWidth:60}}>\n                                      <div style={{\n                                        width:40,\n                                        height:40,\n                                        borderRadius:'50%',\n                                        background: isWalk ? 'linear-gradient(135deg, #10b981 0%, #059669 100%)' :\n                                                   isBus ? 'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)' :\n                                                   isTrain ? 'linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)' :\n                                                   isFerry ? 'linear-gradient(135deg, #06b6d4 0%, #0891b2 100%)' :\n                                                   'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',\n                                        color:'white',\n                                        display:'grid',\n                                        placeItems:'center',\n                                        fontSize:18,\n                                        fontWeight:700,\n                                        boxShadow:'0 4px 12px rgba(0,0,0,0.2)'\n                                      }}>\n                                        {isWalk ? 'ðŸš¶' : isBus ? 'ðŸšŒ' : isTrain ? 'ðŸš†' : isFerry ? 'â›´ï¸' : isBike ? 'ðŸš´' : 'ðŸšŒ'}\n                                      </div>\n                                      {legIdx < it.legs.length - 1 && (\n                                        <div style={{width:2, flex:1, background:'rgba(255,255,255,0.2)', minHeight:20, marginTop:8}} />\n                                      )}\n                                    </div>\n                                    \n                                    {/* Step Details */}\n                                    <div style={{flex:1}}>\n                                      <div style={{fontSize:15, fontWeight:700, marginBottom:6}}>\n                                        {leg}\n                                      </div>\n                                      \n                                      {/* Walking Details */}\n                                      {isWalk && (\n                                        <div style={{fontSize:13, color:'rgba(255,255,255,0.7)', marginBottom:8}}>\n                                          <div style={{marginBottom:4}}>ðŸ“ Distance: {((it.walk_km || 0.4) / it.legs.filter(l => l.toLowerCase().includes('walk')).length).toFixed(2)} km</div>\n                                          <div style={{marginBottom:4}}>â±ï¸ Duration: ~{Math.ceil((it.walk_km || 0.4) / it.legs.filter(l => l.toLowerCase().includes('walk')).length * 12)} min</div>\n                                          <button \n                                            className=\"btn\" \n                                            onClick={() => {\n                                              // Show walking route on map\n                                              alert(`Walking directions:\\n1. Head ${legIdx === 0 ? 'to nearest stop' : 'to your destination'}\\n2. Follow pedestrian paths\\n3. Cross at designated crossings\\n\\nOpening map view...`)\n                                              setView('map')\n                                            }}\n                                            style={{\n                                              marginTop:8,\n                                              padding:'6px 12px',\n                                              fontSize:12,\n                                              background:'linear-gradient(135deg, #10b981 0%, #059669 100%)',\n                                              color:'white',\n                                              border:'none'\n                                            }}\n                                          >\n                                            ðŸ—ºï¸ View Walking Route\n                                          </button>\n                                        </div>\n                                      )}\n                                      \n                                      {/* Bus/Train Details */}\n                                      {(isBus || isTrain || isFerry) && (\n                                        <div style={{fontSize:13, color:'rgba(255,255,255,0.7)'}}>\n                                          <div style={{marginBottom:8, padding:10, background:'rgba(255,255,255,0.05)', borderRadius:8}}>\n                                            {routeNumber && (\n                                              <div style={{marginBottom:6}}>\n                                                <span style={{\n                                                  background: isBus ? '#3b82f6' : isTrain ? '#8b5cf6' : '#06b6d4',\n                                                  color:'white',\n                                                  padding:'4px 10px',\n                                                  borderRadius:6,\n                                                  fontSize:13,\n                                                  fontWeight:700,\n                                                  marginRight:8\n                                                }}>\n                                                  {routeNumber}\n                                                </span>\n                                                <span style={{opacity:0.8}}>\n                                                  {isBus ? 'Bus Route' : isTrain ? 'Train Line' : 'Ferry Route'}\n                                                </span>\n                                              </div>\n                                            )}\n                                            <div style={{marginBottom:4}}>ðŸš <b>From:</b> Stop #{1000 + legIdx * 100} - {legIdx === 0 ? 'Start Point' : `Transfer Point ${legIdx}`}</div>\n                                            <div style={{marginBottom:4}}>ðŸŽ¯ <b>To:</b> Stop #{1000 + legIdx * 100 + 50} - {legIdx === it.legs.length - 1 ? 'End Point' : 'Next Transfer'}</div>\n                                            <div style={{marginBottom:4}}>â±ï¸ <b>Next Departure:</b> <span style={{color:'#10b981', fontWeight:600}}>3, 8, 15 min</span></div>\n                                            <div style={{marginBottom:4}}>ðŸª‘ <b>Platform/Bay:</b> {isTrain ? 'Platform' : 'Bay'} {legIdx + 1}</div>\n                                            <div style={{marginBottom:4}}>ðŸŽ« <b>Zone:</b> Zone {Math.min(legIdx + 1, 3)}</div>\n                                            <div style={{marginBottom:4}}>ðŸ‘¥ <b>Current Load:</b> {['Light', 'Moderate', 'Busy'][Math.floor(Math.random() * 3)]}</div>\n                                            {isTrain && <div style={{marginBottom:4}}>ðŸšƒ <b>Carriages:</b> 3-car train</div>}\n                                            {isBus && <div style={{marginBottom:4}}>â™¿ <b>Features:</b> Low-floor, wheelchair accessible</div>}\n                                          </div>\n                                          \n                                          <div style={{display:'flex', gap:8, marginTop:8, flexWrap:'wrap'}}>\n                                            <button \n                                              className=\"btn\"\n                                              onClick={() => {\n                                                setSelectedStop({stop_id: `${1000 + legIdx * 100}`, name: `Stop ${1000 + legIdx * 100}`})\n                                                setView('home')\n                                              }}\n                                              style={{padding:'6px 12px', fontSize:12}}\n                                            >\n                                              ðŸš View Stop Info\n                                            </button>\n                                            <button \n                                              className=\"btn\"\n                                              onClick={() => alert(`Live tracking for ${routeNumber || 'this route'} will be available soon!`)}\n                                              style={{padding:'6px 12px', fontSize:12}}\n                                            >\n                                              ðŸ“ Track Vehicle\n                                            </button>\n                                            <button \n                                              className=\"btn\"\n                                              onClick={() => alert(`Set reminder for ${routeNumber || 'this departure'}`)}\n                                              style={{padding:'6px 12px', fontSize:12}}\n                                            >\n                                              ðŸ”” Set Reminder\n                                            </button>\n                                          </div>\n                                        </div>\n                                      )}\n                                    </div>\n                                  </div>\n                                )\n                              })}\n                            </div>\n\n                            {/* Additional Travel Tips */}\n                            <div style={{\n                              marginTop:20,\n                              padding:12,\n                              background:'rgba(59, 130, 246, 0.1)',\n                              borderLeft:'3px solid #3b82f6',\n                              borderRadius:6\n                            }}>\n                              <div style={{fontSize:13, fontWeight:700, marginBottom:6}}>ðŸ’¡ Travel Tips</div>\n                              <ul style={{fontSize:12, color:'rgba(255,255,255,0.8)', margin:0, paddingLeft:20}}>\n                                <li>Allow 5 extra minutes for unexpected delays</li>\n                                <li>Have your AT HOP card ready before boarding</li>\n                                {it.transfers > 0 && <li>Transfers are free within 30 minutes</li>}\n                                {it.stairs && <li>This route includes stairs - consider accessibility needs</li>}\n                                <li>Check real-time updates before you leave</li>\n                              </ul>\n                            </div>\n\n                            {/* MCDA Score Breakdown - Assessment Feature */}\n                            {it.mcda_score && (\n                              <div style={{\n                                marginTop:20,\n                                padding:16,\n                                background:'linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(219, 39, 119, 0.1) 100%)',\n                                border:'2px solid rgba(139, 92, 246, 0.3)',\n                                borderRadius:12\n                              }}>\n                                <div style={{display:'flex', justifyContent:'space-between', alignItems:'center', marginBottom:12}}>\n                                  <div style={{fontSize:14, fontWeight:700, color:'#a78bfa'}}>\n                                    ðŸ† Multi-Criteria Decision Score (MCDA)\n                                  </div>\n                                  <div style={{\n                                    fontSize:24,\n                                    fontWeight:700,\n                                    color: it.mcda_score >= 85 ? '#10b981' : it.mcda_score >= 70 ? '#3b82f6' : '#f59e0b',\n                                    display:'flex',\n                                    alignItems:'center',\n                                    gap:6\n                                  }}>\n                                    {it.mcda_score.toFixed(1)}/100\n                                    {it.mcda_rank && <span style={{fontSize:14, opacity:0.7}}>#{it.mcda_rank}</span>}\n                                  </div>\n                                </div>\n\n                                {it.mcda_recommendation && (\n                                  <div style={{\n                                    fontSize:12,\n                                    padding:'8px 12px',\n                                    background:'rgba(139, 92, 246, 0.15)',\n                                    borderRadius:8,\n                                    marginBottom:12,\n                                    color:'rgba(255,255,255,0.9)'\n                                  }}>\n                                    {it.mcda_recommendation}\n                                  </div>\n                                )}\n\n                                {it.mcda_breakdown && (\n                                  <div style={{display:'grid', gridTemplateColumns:'repeat(auto-fit, minmax(120px, 1fr))', gap:10}}>\n                                    {Object.entries(it.mcda_breakdown).map(([criterion, score]) => (\n                                      <div key={criterion} style={{\n                                        padding:10,\n                                        background:'rgba(0,0,0,0.2)',\n                                        borderRadius:8,\n                                        border:'1px solid rgba(255,255,255,0.1)'\n                                      }}>\n                                        <div style={{fontSize:10, opacity:0.6, marginBottom:4, textTransform:'capitalize'}}>\n                                          {criterion === 'time' ? 'â±ï¸' : \n                                           criterion === 'cost' ? 'ðŸ’°' :\n                                           criterion === 'comfort' ? 'ðŸ›‹ï¸' :\n                                           criterion === 'reliability' ? 'âœ“' :\n                                           'ðŸŒ±'} {criterion}\n                                        </div>\n                                        <div style={{fontSize:14, fontWeight:700, color: score >= 80 ? '#10b981' : score >= 60 ? '#3b82f6' : '#f59e0b'}}>\n                                          {score.toFixed(0)}/100\n                                        </div>\n                                        <div style={{\n                                          width:'100%',\n                                          height:4,\n                                          background:'rgba(255,255,255,0.1)',\n                                          borderRadius:2,\n                                          marginTop:4,\n                                          overflow:'hidden'\n                                        }}>\n                                          <div style={{\n                                            width:`${score}%`,\n                                            height:'100%',\n                                            background: score >= 80 ? '#10b981' : score >= 60 ? '#3b82f6' : '#f59e0b',\n                                            borderRadius:2\n                                          }} />\n                                        </div>\n                                      </div>\n                                    ))}\n                                  </div>\n                                )}\n\n                                {it.mcda_weights && (\n                                  <div style={{fontSize:10, opacity:0.5, marginTop:8}}>\n                                    Weights: {Object.entries(it.mcda_weights).map(([k,v]) => `${k} ${(v*100).toFixed(0)}%`).join(' â€¢ ')}\n                                  </div>\n                                )}\n                              </div>\n                            )}\n\n                            {/* Environmental Impact Details - Assessment Feature */}\n                            {it.environmental && (\n                              <div style={{\n                                marginTop:20,\n                                padding:16,\n                                background:'linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(52, 211, 153, 0.1) 100%)',\n                                border:'2px solid rgba(16, 185, 129, 0.3)',\n                                borderRadius:12\n                              }}>\n                                <div style={{fontSize:14, fontWeight:700, color:'#10b981', marginBottom:12}}>\n                                  ðŸŒ Environmental Impact Analysis\n                                </div>\n\n                                <div style={{display:'grid', gridTemplateColumns:'repeat(auto-fit, minmax(150px, 1fr))', gap:12, marginBottom:12}}>\n                                  <div style={{padding:12, background:'rgba(16, 185, 129, 0.1)', borderRadius:8}}>\n                                    <div style={{fontSize:11, opacity:0.7, marginBottom:4}}>COâ‚‚ Emissions</div>\n                                    <div style={{fontSize:18, fontWeight:700, color:'#10b981'}}>\n                                      {it.environmental.total_co2_kg.toFixed(2)} kg\n                                    </div>\n                                  </div>\n\n                                  <div style={{padding:12, background:'rgba(16, 185, 129, 0.1)', borderRadius:8}}>\n                                    <div style={{fontSize:11, opacity:0.7, marginBottom:4}}>COâ‚‚ Saved vs Car</div>\n                                    <div style={{fontSize:18, fontWeight:700, color:'#10b981'}}>\n                                      {it.environmental.co2_saved_kg.toFixed(2)} kg\n                                    </div>\n                                    <div style={{fontSize:10, opacity:0.6, marginTop:2}}>\n                                      {it.environmental.co2_saved_percent.toFixed(0)}% reduction\n                                    </div>\n                                  </div>\n\n                                  <div style={{padding:12, background:'rgba(16, 185, 129, 0.1)', borderRadius:8}}>\n                                    <div style={{fontSize:11, opacity:0.7, marginBottom:4}}>Distance</div>\n                                    <div style={{fontSize:18, fontWeight:700, color:'#10b981'}}>\n                                      {it.environmental.total_distance_km.toFixed(1)} km\n                                    </div>\n                                  </div>\n\n                                  <div style={{padding:12, background:'rgba(16, 185, 129, 0.1)', borderRadius:8}}>\n                                    <div style={{fontSize:11, opacity:0.7, marginBottom:4}}>Trees to Offset</div>\n                                    <div style={{fontSize:18, fontWeight:700, color:'#10b981'}}>\n                                      {it.environmental.trees_equivalent.toFixed(2)} ðŸŒ³\n                                    </div>\n                                  </div>\n                                </div>\n\n                                {it.environmental.legs && it.environmental.legs.length > 0 && (\n                                  <div style={{marginTop:12}}>\n                                    <div style={{fontSize:12, fontWeight:600, marginBottom:8, opacity:0.8}}>\n                                      Emissions by Leg:\n                                    </div>\n                                    <div style={{display:'flex', flexDirection:'column', gap:6}}>\n                                      {it.environmental.legs.map((leg, idx) => (\n                                        <div key={idx} style={{\n                                          display:'flex',\n                                          justifyContent:'space-between',\n                                          padding:'8px 12px',\n                                          background:'rgba(0,0,0,0.2)',\n                                          borderRadius:6,\n                                          fontSize:11\n                                        }}>\n                                          <span>{leg.mode} ({leg.distance_km.toFixed(1)} km)</span>\n                                          <span style={{fontWeight:600, color:'#10b981'}}>\n                                            {leg.co2_kg.toFixed(3)} kg COâ‚‚\n                                          </span>\n                                        </div>\n                                      ))}\n                                    </div>\n                                  </div>\n                                )}\n\n                                <div style={{\n                                  marginTop:12,\n                                  padding:'10px 12px',\n                                  background:'rgba(16, 185, 129, 0.15)',\n                                  borderRadius:8,\n                                  fontSize:12\n                                }}>\n                                  ðŸ’¡ <b>Eco-Score:</b> {it.environmental.eco_score ? \n                                    `${it.environmental.eco_score}/100` : \n                                    'Excellent choice for the environment!'\n                                  }\n                                  {it.environmental.co2_saved_percent >= 70 && \n                                    \" - You're making a significant positive impact! ðŸŒŸ\"\n                                  }\n                                </div>\n                              </div>\n                            )}\n                          </div>\n                        )}\n                        {alts[it.id] && (\n                          <div className=\"alt\" style={{\n                            marginTop:16, \n                            padding:20, \n                            background:'linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(52, 211, 153, 0.05) 100%)',\n                            border:'2px solid rgba(16, 185, 129, 0.3)',\n                            borderRadius:16,\n                            boxShadow:'0 4px 15px rgba(16, 185, 129, 0.15)'\n                          }}>\n                            <div style={{\n                              display:'flex', \n                              alignItems:'center', \n                              justifyContent:'space-between',\n                              marginBottom:12\n                            }}>\n                              <div style={{fontWeight:700, fontSize:16, color:'#10b981'}}>\n                                âœ¨ {alts[it.id].reason}\n                              </div>\n                              {alts[it.id].comparison && (\n                                <div style={{\n                                  display:'flex',\n                                  gap:8,\n                                  alignItems:'center'\n                                }}>\n                                  {alts[it.id].comparison.timeDiff !== 0 && (\n                                    <span style={{\n                                      fontSize:12,\n                                      padding:'4px 10px',\n                                      background: alts[it.id].comparison.timeDiff < 0 ? 'rgba(16, 185, 129, 0.2)' : 'rgba(239, 68, 68, 0.2)',\n                                      color: alts[it.id].comparison.timeDiff < 0 ? '#10b981' : '#ef4444',\n                                      borderRadius:8,\n                                      fontWeight:600\n                                    }}>\n                                      {alts[it.id].comparison.timeDiff > 0 ? '+' : ''}{alts[it.id].comparison.timeDiff} min\n                                    </span>\n                                  )}\n                                </div>\n                              )}\n                            </div>\n                            \n                            <div style={{\n                              display:'grid',\n                              gridTemplateColumns:'repeat(auto-fit, minmax(150px, 1fr))',\n                              gap:12,\n                              marginBottom:12\n                            }}>\n                              <div style={{\n                                background:'rgba(255,255,255,0.05)',\n                                padding:12,\n                                borderRadius:12,\n                                border:'1px solid rgba(255,255,255,0.1)'\n                              }}>\n                                <div style={{fontSize:11, opacity:0.6, marginBottom:4}}>Duration</div>\n                                <div style={{fontSize:16, fontWeight:700}}>\n                                  ~{alts[it.id].durationMin || 'â€”'} min\n                                </div>\n                              </div>\n                              \n                              <div style={{\n                                background:'rgba(255,255,255,0.05)',\n                                padding:12,\n                                borderRadius:12,\n                                border:'1px solid rgba(255,255,255,0.1)'\n                              }}>\n                                <div style={{fontSize:11, opacity:0.6, marginBottom:4}}>Transfers</div>\n                                <div style={{fontSize:16, fontWeight:700}}>\n                                  {alts[it.id].transfers || 0}\n                                  {alts[it.id].comparison?.transferDiff !== 0 && (\n                                    <span style={{\n                                      fontSize:11,\n                                      marginLeft:6,\n                                      color: alts[it.id].comparison.transferDiff < 0 ? '#10b981' : '#ef4444'\n                                    }}>\n                                      ({alts[it.id].comparison.transferDiff > 0 ? '+' : ''}{alts[it.id].comparison.transferDiff})\n                                    </span>\n                                  )}\n                                </div>\n                              </div>\n                              \n                              {alts[it.id].walk_distance && (\n                                <div style={{\n                                  background:'rgba(255,255,255,0.05)',\n                                  padding:12,\n                                  borderRadius:12,\n                                  border:'1px solid rgba(255,255,255,0.1)'\n                                }}>\n                                  <div style={{fontSize:11, opacity:0.6, marginBottom:4}}>Walking</div>\n                                  <div style={{fontSize:16, fontWeight:700}}>\n                                    {alts[it.id].walk_distance} km\n                                    {alts[it.id].comparison?.walkDiff !== 0 && (\n                                      <span style={{\n                                        fontSize:11,\n                                        marginLeft:6,\n                                        color: alts[it.id].comparison.walkDiff < 0 ? '#10b981' : '#ef4444'\n                                      }}>\n                                        ({alts[it.id].comparison.walkDiff > 0 ? '+' : ''}{alts[it.id].comparison.walkDiff}km)\n                                      </span>\n                                    )}\n                                  </div>\n                                </div>\n                              )}\n                            </div>\n                            \n                            {alts[it.id].legs && (\n                              <div style={{\n                                padding:12,\n                                background:'rgba(255,255,255,0.03)',\n                                borderRadius:10,\n                                marginBottom:10\n                              }}>\n                                <div style={{fontSize:11, opacity:0.6, marginBottom:6}}>Route Details</div>\n                                <div style={{fontSize:14, fontWeight:600}}>\n                                  ðŸš¶ {alts[it.id].legs.join(' â†’ ')}\n                                </div>\n                              </div>\n                            )}\n                            \n                            {alts[it.id].benefits && alts[it.id].benefits.length > 0 && (\n                              <div style={{marginTop:10}}>\n                                <div style={{fontSize:11, opacity:0.6, marginBottom:6}}>Benefits:</div>\n                                {alts[it.id].benefits.map((benefit, idx) => (\n                                  <div key={idx} style={{\n                                    fontSize:13,\n                                    padding:'6px 10px',\n                                    background:'rgba(16, 185, 129, 0.15)',\n                                    borderLeft:'3px solid #10b981',\n                                    borderRadius:6,\n                                    marginBottom:4\n                                  }}>\n                                    âœ“ {benefit}\n                                  </div>\n                                ))}\n                              </div>\n                            )}\n                            \n                            {alts[it.id].warnings && alts[it.id].warnings.length > 0 && (\n                              <div style={{marginTop:10}}>\n                                <div style={{fontSize:11, opacity:0.6, marginBottom:6}}>Warnings:</div>\n                                {alts[it.id].warnings.map((warning, idx) => (\n                                  <div key={idx} style={{\n                                    fontSize:13,\n                                    padding:'6px 10px',\n                                    background:'rgba(251, 191, 36, 0.15)',\n                                    borderLeft:'3px solid #fbbf24',\n                                    borderRadius:6,\n                                    marginBottom:4\n                                  }}>\n                                    âš  {warning}\n                                  </div>\n                                ))}\n                              </div>\n                            )}\n                            \n                            {alts[it.id].note && (\n                              <div style={{\n                                marginTop:10,\n                                padding:10,\n                                background:'rgba(59, 130, 246, 0.1)',\n                                borderLeft:'3px solid #3b82f6',\n                                borderRadius:6,\n                                fontSize:13,\n                                color:'rgba(255,255,255,0.8)'\n                              }}>\n                                â„¹ï¸ {alts[it.id].note}\n                              </div>\n                            )}\n                          </div>\n                        )}\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </div>\n            </div>\n          </FeatureCard>\n\n          <FeatureCard icon=\"ðŸš\" title=\"Nearby Transit\" description=\"Check nearby stops, live departures, and multimodal choices.\">\n            <div style={{display:'flex', flexDirection:'column', gap:18}}>\n              <div style={{display:'flex', flexWrap:'wrap', gap:12}}>\n                {stops.slice(0,6).map(s => (\n                  <div key={s.stop_id} style={{padding:12, border:'1px solid var(--line,#e5e7eb)', borderRadius:12, background:'var(--card,#fff)', minWidth:180}}>\n                    <div style={{fontWeight:700}}>{s.name}</div>\n                    <div style={{opacity:0.7, fontSize:12}}>{s.distance_m} m away</div>\n                    <div style={{marginTop:10}}><button className=\"btn\" onClick={()=>viewDepartures(s)}>Live departures</button></div>\n                  </div>\n                ))}\n                {stops.length===0 && <div style={{opacity:0.7}}>Searching for nearby stopsâ€¦</div>}\n              </div>\n              {selectedStop && (\n                <div style={{border:'1px solid var(--line,#e5e7eb)', borderRadius:12, padding:16, background:'var(--card,#fff)'}}>\n                  <div style={{fontWeight:700, marginBottom:8}}>Departures â€” {selectedStop.name}</div>\n                  <ul style={{margin:0, paddingLeft:18}}>\n                    {departures.map((d,i)=>(\n                      <li key={i}><strong>{d.route}</strong> â†’ {d.headsign} <span style={{opacity:0.65}}>in {d.departure_in_min} min</span></li>\n                    ))}\n                    {departures.length===0 && <li style={{opacity:0.65}}>Loading departuresâ€¦</li>}\n                  </ul>\n                </div>\n              )}\n            </div>\n          </FeatureCard>\n          </div>\n        )}\n\n        {view === 'safety' && (\n          <div>\n            <h2 className=\"section-title\">ðŸ›¡ï¸ Safety & Emergency</h2>\n          <FeatureCard icon=\"ðŸ“ž\" title=\"Emergency Contacts\" description=\"Quick access to local emergency services.\">\n            <div style={{display:'flex', flexWrap:'wrap', gap:20}}>\n              <div style={{flex:'1 1 260px', display:'flex', flexDirection:'column', gap:10}}>\n                <div style={{fontWeight:600}}>Quick actions</div>\n                <button className=\"btn\" onClick={()=>updateSavedPlace('home', origin)}>Save home</button>\n                <button className=\"btn\" onClick={()=>updateSavedPlace('work', dest)}>Save work</button>\n                <button className=\"btn btn-primary\" onClick={savePrefs}>Save to profile</button>\n                <button className=\"btn\" onClick={saveOfflinePack}>{text.offlineCta}</button>\n                {token ? (\n                  <div style={{fontSize:13, opacity:0.75}}>Signed in as {username}. Preferences sync across devices.</div>\n                ) : (\n                  <div style={{fontSize:13, opacity:0.75}}>Create an account above to sync preferences and reviews.</div>\n                )}\n              </div>\n              <div style={{flex:'1 1 260px'}}>\n                <div style={{fontWeight:600, marginBottom:6}}>ðŸ›Ÿ {text.emergencyContacts}</div>\n                <ul style={{margin:0, paddingLeft:18}}>\n                  {safetyContacts.map((c,i)=>(\n                    <li key={i}><strong>{c.name}</strong> â€” <a href={`tel:${c.phone}`} style={{color:'var(--danger)', fontWeight:700}}>{c.phone}</a></li>\n                  ))}\n                  {safetyContacts.length===0 && <li style={{opacity:0.7}}>Loading local contactsâ€¦</li>}\n                </ul>\n                <div style={{marginTop:12}}>\n                  <button className=\"btn\" onClick={shareLocation}>{text.shareLocation}</button>\n                </div>\n              </div>\n              <div style={{flex:'1 1 260px'}}>\n                <div style={{fontWeight:600, marginBottom:6}}>Share status</div>\n                <p style={{opacity:0.75}}>Tap <em>Save offline snapshot</em> before you head out to keep routes, alerts, and emergency numbers handy â€” even without coverage.</p>\n              </div>\n            </div>\n          </FeatureCard>\n          </div>\n        )}\n\n        {view === 'settings' && (\n          <div>\n            <h2 className=\"section-title\">âš™ï¸ Settings & Preferences</h2>\n          <FeatureCard icon=\"ðŸŒ\" title=\"Travel Toolkit\" description=\"International tools for language, money, and bookings.\">\n            <div style={{display:'flex', flexWrap:'wrap', gap:20}}>\n              <div style={{flex:'1 1 220px'}}>\n                <div style={{fontWeight:600, marginBottom:6}}>In-app translator</div>\n                <p style={{opacity:0.75}}>Interface now in <strong>{uiLang.toUpperCase()}</strong>. Additional copy will respect this preference as the app grows.</p>\n              </div>\n              <div style={{flex:'1 1 260px', display:'flex', flexDirection:'column', gap:8}}>\n                <div style={{fontWeight:600}}>Currency helper</div>\n                <label style={{fontSize:12, opacity:0.75}}>Amount in NZD</label>\n                <input type=\"number\" value={amount} min=\"0\" onChange={e=>setAmount(Number(e.target.value) || 0)} />\n                <label style={{fontSize:12, opacity:0.75}}>Convert to</label>\n                <select value={currency} onChange={e=>setCurrency(e.target.value)}>\n                  {currencyOptions.map(code => <option key={code} value={code}>{code}</option>)}\n                </select>\n                <div style={{marginTop:4, fontWeight:600}}>â‰ˆ {convertedAmount} {currency}</div>\n              </div>\n              <div style={{flex:'1 1 260px'}}>\n                <div style={{fontWeight:600, marginBottom:6}}>Bookings & payments</div>\n                <ul style={{margin:0, paddingLeft:18}}>\n                  <li>Reserve transit passes and parking</li>\n                  <li>Bundle flights + hotels (coming soon)</li>\n                  <li>Secure wallet for ticketing integrations</li>\n                </ul>\n              </div>\n            </div>\n          </FeatureCard>\n          </div>\n        )}\n\n        {view === 'reviews' && (\n          <div>\n            <h2 className=\"section-title\">â­ Community Reviews</h2>\n          <FeatureCard icon=\"â­\" title=\"Share Your Experience\" description=\"Crowd-sourced tips keep travellers informed.\">\n            <div style={{display:'flex', flexWrap:'wrap', gap:20}}>\n              <div style={{flex:'1 1 260px', display:'flex', flexDirection:'column', gap:10}}>\n                <label style={{display:'flex', flexDirection:'column', gap:4}}>\n                  <span style={{fontSize:12, opacity:0.75}}>Location</span>\n                  <input placeholder=\"e.g., Britomart\" value={reviewLoc} onChange={e=>setReviewLoc(e.target.value)} />\n                </label>\n                <label style={{display:'flex', flexDirection:'column', gap:4}}>\n                  <span style={{fontSize:12, opacity:0.75}}>Rating</span>\n                  <select value={reviewRating} onChange={e=>setReviewRating(e.target.value)}>\n                    {[5,4,3,2,1].map(n=> <option key={n} value={n}>{n}</option>)}\n                  </select>\n                </label>\n                <label style={{display:'flex', flexDirection:'column', gap:4}}>\n                  <span style={{fontSize:12, opacity:0.75}}>Comment</span>\n                  <input placeholder=\"Short noteâ€¦\" value={reviewComment} onChange={e=>setReviewComment(e.target.value)} />\n                </label>\n                <button className=\"btn btn-primary\" onClick={submitReview}>Share review</button>\n              </div>\n              <div style={{flex:'1 1 320px'}}>\n                <div style={{fontWeight:600, marginBottom:8}}>Latest reviews</div>\n                <ul style={{margin:0, paddingLeft:18, display:'flex', flexDirection:'column', gap:8}}>\n                  {reviews.map((r,i)=>(\n                    <li key={i}><strong>{r.location}</strong> â€¢ {r.rating}/5 â€” {r.comment} <span style={{opacity:0.6}}>by {r.user}</span></li>\n                  ))}\n                  {reviews.length===0 && <li style={{opacity:0.7}}>Be the first to add a community update.</li>}\n                </ul>\n              </div>\n            </div>\n          </FeatureCard>\n          </div>\n        )}\n\n        {view === 'analytics' && (\n          <div>\n            <h2 className=\"section-title\">ðŸ“Š System Analytics Dashboard</h2>\n            <div style={{\n              padding:'16px 20px',\n              background:'linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(139, 92, 246, 0.15) 100%)',\n              borderRadius:12,\n              border:'1px solid rgba(59, 130, 246, 0.3)',\n              marginBottom:24\n            }}>\n              <div style={{fontSize:14}}>\n                <b>ðŸŽ“ Assessment Feature:</b> Analytics dashboard tracks system usage, environmental impact, and performance metrics for research and evaluation purposes.\n              </div>\n            </div>\n\n            {analyticsData ? (\n              <>\n                {/* Summary Stats Grid */}\n                <div style={{display:'grid', gridTemplateColumns:'repeat(auto-fit, minmax(200px, 1fr))', gap:16, marginBottom:32}}>\n                  <div style={{padding:20, background:'var(--glass-bg)', backdropFilter:'blur(10px)', borderRadius:12, border:'1px solid var(--glass-border)'}}>\n                    <div style={{fontSize:12, opacity:0.7, marginBottom:6}}>Total Trips Planned</div>\n                    <div style={{fontSize:32, fontWeight:700, color:'#3b82f6'}}>{analyticsData.total_trips || 0}</div>\n                  </div>\n\n                  <div style={{padding:20, background:'var(--glass-bg)', backdropFilter:'blur(10px)', borderRadius:12, border:'1px solid var(--glass-border)'}}>\n                    <div style={{fontSize:12, opacity:0.7, marginBottom:6}}>Active Users (7d)</div>\n                    <div style={{fontSize:32, fontWeight:700, color:'#8b5cf6'}}>{analyticsData.active_users_7d || 0}</div>\n                  </div>\n\n                  <div style={{padding:20, background:'var(--glass-bg)', backdropFilter:'blur(10px)', borderRadius:12, border:'1px solid var(--glass-border)'}}>\n                    <div style={{fontSize:12, opacity:0.7, marginBottom:6}}>COâ‚‚ Saved (kg)</div>\n                    <div style={{fontSize:32, fontWeight:700, color:'#10b981'}}>{analyticsData.total_co2_saved_kg?.toFixed(1) || 0}</div>\n                    <div style={{fontSize:11, opacity:0.6, marginTop:4}}>vs driving alone</div>\n                  </div>\n\n                  <div style={{padding:20, background:'var(--glass-bg)', backdropFilter:'blur(10px)', borderRadius:12, border:'1px solid var(--glass-border)'}}>\n                    <div style={{fontSize:12, opacity:0.7, marginBottom:6}}>Avg MCDA Score</div>\n                    <div style={{fontSize:32, fontWeight:700, color:'#f59e0b'}}>{analyticsData.avg_mcda_score?.toFixed(1) || 0}</div>\n                    <div style={{fontSize:11, opacity:0.6, marginTop:4}}>out of 100</div>\n                  </div>\n                </div>\n\n                {/* Performance Metrics */}\n                <FeatureCard icon=\"ðŸ“ˆ\" title=\"System Performance\" description=\"Route quality and user satisfaction metrics\">\n                  <div style={{display:'grid', gridTemplateColumns:'repeat(auto-fit, minmax(220px, 1fr))', gap:20}}>\n                    <div>\n                      <div style={{fontWeight:600, marginBottom:8}}>Trip Metrics</div>\n                      <div style={{display:'flex', flexDirection:'column', gap:8}}>\n                        <div style={{display:'flex', justifyContent:'space-between'}}>\n                          <span style={{opacity:0.7}}>Avg Duration:</span>\n                          <strong>{analyticsData.avg_duration_min?.toFixed(1) || 0} min</strong>\n                        </div>\n                        <div style={{display:'flex', justifyContent:'space-between'}}>\n                          <span style={{opacity:0.7}}>Avg Transfers:</span>\n                          <strong>{analyticsData.avg_transfers?.toFixed(1) || 0}</strong>\n                        </div>\n                        <div style={{display:'flex', justifyContent:'space-between'}}>\n                          <span style={{opacity:0.7}}>Total Distance:</span>\n                          <strong>{analyticsData.total_distance_km?.toFixed(1) || 0} km</strong>\n                        </div>\n                      </div>\n                    </div>\n\n                    <div>\n                      <div style={{fontWeight:600, marginBottom:8}}>Environmental Impact</div>\n                      <div style={{display:'flex', flexDirection:'column', gap:8}}>\n                        <div style={{display:'flex', justifyContent:'space-between'}}>\n                          <span style={{opacity:0.7}}>Car Trips Avoided:</span>\n                          <strong style={{color:'#10b981'}}>{analyticsData.car_trips_avoided || 0}</strong>\n                        </div>\n                        <div style={{display:'flex', justifyContent:'space-between'}}>\n                          <span style={{opacity:0.7}}>Total COâ‚‚ Saved:</span>\n                          <strong style={{color:'#10b981'}}>{analyticsData.total_co2_saved_kg?.toFixed(2) || 0} kg</strong>\n                        </div>\n                        <div style={{display:'flex', justifyContent:'space-between'}}>\n                          <span style={{opacity:0.7}}>Avg per Trip:</span>\n                          <strong style={{color:'#10b981'}}>\n                            {(analyticsData.total_co2_saved_kg / Math.max(analyticsData.total_trips, 1))?.toFixed(2) || 0} kg\n                          </strong>\n                        </div>\n                      </div>\n                    </div>\n\n                    <div>\n                      <div style={{fontWeight:600, marginBottom:8}}>System Health</div>\n                      <div style={{display:'flex', flexDirection:'column', gap:8}}>\n                        <div style={{display:'flex', justifyContent:'space-between'}}>\n                          <span style={{opacity:0.7}}>Total Users:</span>\n                          <strong>{analyticsData.total_users || 0}</strong>\n                        </div>\n                        <div style={{display:'flex', justifyContent:'space-between'}}>\n                          <span style={{opacity:0.7}}>Total Searches:</span>\n                          <strong>{analyticsData.total_searches || 0}</strong>\n                        </div>\n                        <div style={{display:'flex', justifyContent:'space-between'}}>\n                          <span style={{opacity:0.7}}>Uptime:</span>\n                          <strong>{analyticsData.system_uptime_days?.toFixed(1) || 0} days</strong>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </FeatureCard>\n\n                {/* MCDA Insights */}\n                <FeatureCard icon=\"ðŸ†\" title=\"Multi-Criteria Decision Analysis\" description=\"Route scoring breakdown across all trips\">\n                  <div style={{padding:16, background:'rgba(139, 92, 246, 0.1)', borderRadius:8}}>\n                    <div style={{fontSize:14, marginBottom:12}}>\n                      Average MCDA score of <strong style={{color:'#8b5cf6'}}>{analyticsData.avg_mcda_score?.toFixed(1)}/100</strong> indicates{' '}\n                      {analyticsData.avg_mcda_score >= 80 ? 'excellent' : \n                       analyticsData.avg_mcda_score >= 65 ? 'good' : \n                       'acceptable'} route quality across all planned trips.\n                    </div>\n                    <div style={{fontSize:12, opacity:0.7}}>\n                      ðŸ’¡ MCDA considers time, cost, comfort, reliability, and environmental factors to rank route options.\n                    </div>\n                  </div>\n                </FeatureCard>\n\n                {/* Environmental Summary */}\n                <FeatureCard icon=\"ðŸŒ\" title=\"Environmental Impact Summary\" description=\"Cumulative sustainability metrics\">\n                  <div style={{padding:20, background:'linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(52, 211, 153, 0.1) 100%)', borderRadius:12, border:'1px solid rgba(16, 185, 129, 0.3)'}}>\n                    <div style={{fontSize:18, fontWeight:700, marginBottom:12, color:'#10b981'}}>\n                      ðŸŒŸ Total COâ‚‚ Savings: {analyticsData.total_co2_saved_kg?.toFixed(2) || 0} kg\n                    </div>\n                    <div style={{fontSize:14, opacity:0.9, marginBottom:16}}>\n                      By using public transport instead of driving, users have collectively saved{' '}\n                      <strong style={{color:'#10b981'}}>{analyticsData.total_co2_saved_kg?.toFixed(2) || 0} kg of COâ‚‚</strong> emissions.\n                    </div>\n                    <div style={{display:'grid', gridTemplateColumns:'repeat(auto-fit, minmax(200px, 1fr))', gap:12}}>\n                      <div style={{padding:12, background:'rgba(16, 185, 129, 0.15)', borderRadius:8}}>\n                        <div style={{fontSize:12, opacity:0.7}}>Equivalent Trees</div>\n                        <div style={{fontSize:24, fontWeight:700, color:'#10b981'}}>\n                          {((analyticsData.total_co2_saved_kg / 1000) * 45.9)?.toFixed(1) || 0} ðŸŒ³\n                        </div>\n                        <div style={{fontSize:10, opacity:0.6, marginTop:4}}>needed to offset emissions</div>\n                      </div>\n\n                      <div style={{padding:12, background:'rgba(16, 185, 129, 0.15)', borderRadius:8}}>\n                        <div style={{fontSize:12, opacity:0.7}}>Car Trips Avoided</div>\n                        <div style={{fontSize:24, fontWeight:700, color:'#10b981'}}>\n                          {analyticsData.car_trips_avoided || 0}\n                        </div>\n                        <div style={{fontSize:10, opacity:0.6, marginTop:4}}>reduced congestion</div>\n                      </div>\n\n                      <div style={{padding:12, background:'rgba(16, 185, 129, 0.15)', borderRadius:8}}>\n                        <div style={{fontSize:12, opacity:0.7}}>Distance Traveled</div>\n                        <div style={{fontSize:24, fontWeight:700, color:'#10b981'}}>\n                          {analyticsData.total_distance_km?.toFixed(1) || 0} km\n                        </div>\n                        <div style={{fontSize:10, opacity:0.6, marginTop:4}}>via public transport</div>\n                      </div>\n                    </div>\n                  </div>\n                </FeatureCard>\n\n                <div style={{marginTop:20, padding:16, background:'rgba(59, 130, 246, 0.1)', borderRadius:8, fontSize:13, opacity:0.8}}>\n                  â„¹ï¸ <b>Note:</b> Analytics data is tracked for research and assessment purposes. All metrics are calculated based on actual trip planning data.\n                </div>\n              </>\n            ) : (\n              <div style={{textAlign:'center', padding:60}}>\n                <div style={{fontSize:48, marginBottom:16}}>ðŸ“Š</div>\n                <div style={{fontSize:16, opacity:0.7, marginBottom:12}}>Loading analytics data...</div>\n                <div style={{fontSize:14, opacity:0.5}}>Plan some trips to see analytics!</div>\n              </div>\n            )}\n          </div>\n        )}\n\n      </div>\n    </div>\n  )\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}